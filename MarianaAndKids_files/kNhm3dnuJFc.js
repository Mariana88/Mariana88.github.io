if (self.CavalryLogger) { CavalryLogger.start_js(["XpmID"]); }

__d("IrisProtocolMessageLifetime",[],(function a(b,c,d,e,f,g){f.exports={TTL_OFF:0,TTL_ON_UNKNOWN:1,TTL_30SECONDS:3e4,TTL_1MINUTE:6e4,TTL_3MINUTES:18e4,TTL_5MINUTES:3e5,TTL_10MINUTES:6e5,TTL_15MINUTES:9e5,TTL_30MINUTES:18e5,TTL_1HOUR:36e5,TTL_2HOURS:72e5,TTL_4HOURS:144e5,TTL_8HOURS:288e5,TTL_12HOURS:432e5,TTL_24HOURS:864e5}}),null);
__d("MercuryAPIArgsSource",[],(function a(b,c,d,e,f,g){f.exports={CHAT:"chat",JEWEL:"jewel",MERCURY:"mercury",MERCURYSYNC:"mercury_sync",WEBMESSENGER:"web_messenger",MESSENGER:"messenger"}}),null);
__d("MercuryAudioType",[],(function a(b,c,d,e,f,g){f.exports={AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"}}),null);
__d("MessageLiveLocationClientSyncProtocolStopReason",[],(function a(b,c,d,e,f,g){f.exports={EXPIRED:1,CANCELED:2,ARRIVED:3}}),null);
__d("MessengerView",[],(function a(b,c,d,e,f,g){f.exports={DETAIL:{COMPOSE:"detail/compose",THREAD:"detail/thread",PAYTHREAD:"detail/paythread",PAYFRIENDPICKER:"detail/payfriendpicker"},MASTER:{PAYMENT:"master/payment",PEOPLE:"master/people",RECENT:"master/recent",SUPPORT:"master/support",SEARCH:"master/search"}}}),null);
__d("MNCommercePageSetting",[],(function a(b,c,d,e,f,g){f.exports={COMMERCE_FAQ_ENABLED:"COMMERCE_FAQ_ENABLED",IN_MESSENGER_SHOPPING_ENABLED:"IN_MESSENGER_SHOPPING_ENABLED",COMMERCE_NUX_ENABLED:"COMMERCE_NUX_ENABLED",NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED:"NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED",STRUCTURED_MENU_ENABLED:"STRUCTURED_MENU_ENABLED",USER_CONTROL_TOPIC_MANAGE_ENABLED:"USER_CONTROL_TOPIC_MANAGE_ENABLED",COMPOSER_INPUT_DISABLED:"COMPOSER_INPUT_DISABLED"}}),null);
__d("PageCommItemStatus",[],(function a(b,c,d,e,f,g){f.exports={FOLLOW_UP:"FOLLOW_UP",DONE:"DONE",TODO:"TODO",SPAM:"SPAM"}}),null);
__d("WorkUserAvailabilityStatusType",[],(function a(b,c,d,e,f,g){f.exports={NONE:"None",AVAILABLE:"Available",SPORADIC:"Sporadic",TENTATIVE:"Tentative",BUSY:"Busy",DO_NOT_DISTURB:"Do Not Disturb",FOCUS:"Focus"}}),null);
__d("BonfireFeatureGating",["gkx"],(function a(b,c,d,e,f,g){"use strict";var h={canReceiveBonfireRingInterop:function i(){return c("gkx")("AT67-yEeEisuZnuRf9ZZfe8uDaUmU0f8iOgZ8XTHAvRp7_a_JJm4LDabRivTtsii-tCqADjQbwZjHRWhjygfaDJN")}};f.exports=h}),null);
__d("TypingDetector",["ArbiterMixin","Event","Input","Run","SubscriptionsHandler","TypingStates","createObjectFrom","emptyFunction"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j){this._input=i;this._ignoreKeys={};this._getValueFn=j}Object.assign(h.prototype,c("ArbiterMixin"),{_timeout:7e3,_currentState:c("TypingStates").INACTIVE,init:function i(){this.init=c("emptyFunction");this.reset();this._subscriptions=new(c("SubscriptionsHandler"))();this._subscriptions.addSubscriptions(c("Event").listen(this._input,"keyup",this._update.bind(this)),c("Run").onUnload(this._onunload.bind(this)))},reset:function i(){clearTimeout(this._checkTimer);this._checkTimer=null;this._lastKeystrokeAt=null;this._currentState=c("TypingStates").INACTIVE},setIgnoreKeys:function i(j){this._ignoreKeys=c("createObjectFrom")(j)},destroy:function i(){this._subscriptions.release()},_onunload:function i(){if(this._currentState==c("TypingStates").TYPING)this._transition(c("TypingStates").QUITTING)},_update:function i(event){__p&&__p();var j=c("Event").getKeyCode(event),k=this._currentState;if(!this._ignoreKeys[j]){var l=this._getValueFn?this._getValueFn():c("Input").getValue(this._input);if(l.trim().length===0){if(k==c("TypingStates").TYPING)this._transition(c("TypingStates").INACTIVE)}else if(k==c("TypingStates").TYPING)this._recordKeystroke();else if(k==c("TypingStates").INACTIVE){this._transition(c("TypingStates").TYPING);this._recordKeystroke()}}},_transition:function i(j){this.reset();this._currentState=j;this.inform("change",j)},_recordKeystroke:function i(){this._lastKeystrokeTime=Date.now();if(!this._checkTimer)this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout)},_checkTyping:function i(){var j=this._lastKeystrokeTime+this._timeout,k=Date.now();if(k>j)this._transition(c("TypingStates").INACTIVE);else{clearTimeout(this._checkTimer);this._checkTimer=setTimeout(this._checkTyping.bind(this),j-k+10)}}});f.exports=h}),null);
__d("TypingDetectorController",["ActorURI","AsyncRequest","AvailableList","AvailableListConstants","ChatVisibility","Keys","MercuryServerRequestsConfig","TypingDetector","TypingStates","emptyFunction","ifRequired","setTimeoutAcrossTransitions","shield"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="/ajax/messaging/typ.php";function i(j,k,l,m,n,o,p){__p&&__p();this.userID=j;this.input=k;this.source=l;this.threadID=n;this.pageID=p;this.remoteState=c("TypingStates").INACTIVE;this.notifyTimer=null;m=m||{};this.notifyDelay=m.notifyDelay||this.notifyDelay;this._typingDetector=new(c("TypingDetector"))(k,o);this._typingDetector.init(m);this._typingDetector.subscribe("change",this._stateChange.bind(this))}i.prototype.setUserAndThread=function(j,k){if(this.userID!==j||this.threadID!==k){this.resetState();this.userID=j;this.threadID=k}};i.prototype.setIgnoreEnter=function(j){var k=j?[c("Keys").RETURN]:[];this._typingDetector.setIgnoreKeys(k)};i.prototype.resetState=function(){this._notifyState(c("TypingStates").INACTIVE);this.remoteState=c("TypingStates").INACTIVE;this._typingDetector.reset();clearTimeout(this.notifyTimer);this.notifyTimer=null};i.prototype.destroy=function(){this.resetState();this._typingDetector.destroy()};i.prototype._stateChange=function(j,k){if(k!=c("TypingStates").QUITTING){clearTimeout(this.notifyTimer);this.notifyTimer=c("setTimeoutAcrossTransitions")(c("shield")(this._notifyState,this,k),this.notifyDelay)}else this._notifyState(k,true)};i.prototype._notifyState=function(j,k){if(!this.userID&&!this.threadID||!c("ChatVisibility").isOnline()||j===this.remoteState||c("ifRequired")("ChannelConnection",function(l){return l.disconnected()},function(){return true}))return;this._sendRequest(j,this.userID,k)};i.prototype._sendRequest=function(j,k,l){this.remoteState=j;var m={typ:j,to:k,source:this.source,thread:this.threadID},n=this.pageID?c("ActorURI").create(h,this.pageID):h,o=new(c("AsyncRequest"))().setHandler(this._onTypResponse.bind(this,k)).setErrorHandler(c("emptyFunction")).setData(m).setURI(n).setAllowCrossPageTransition(true).setOption("asynchronous_DEPRECATED",!l);if(c("MercuryServerRequestsConfig").msgrRegion)o.setRequestHeader("X-MSGR-Region",c("MercuryServerRequestsConfig").msgrRegion);o.send()};i.prototype._onTypResponse=function(j,k){var l=k.getPayload()||{};if(l.offline)c("AvailableList").set(j,c("AvailableListConstants").OFFLINE,"typing_response")};Object.assign(i.prototype,{notifyDelay:1e3});f.exports=i}),null);
__d("EmployeeLinkMatcher",["CurrentUser"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new RegExp("^[\\s.,:]"),i=new RegExp("(?:\\b)(([BDFTPSXJN]|(AIP)|(PR )|(PO ))\\d{4,})(?:\\b)","im"),j=new RegExp("(?:\\b)(designpack://.+)(?:\\b)","im"),k=function k(n){if(!c("CurrentUser").isEmployee())return null;var o=i.exec(n)||j.exec(n);if(o===null)return null;return{lnk:o[1],idx:o.index+(h.exec(o[0])?1:0)}},l=function l(n){var o=c("CurrentUser").isEmployee()&&(i.exec(n)!==null||j.exec(n)!==null);return o},m={match:k,isMatch:l};f.exports=m}),null);
__d("EmployeeLinkRanges",["EmployeeLinkMatcher","UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={PHABRICATOR_PREFIX:"https://phabricator.intern.facebook.com/",TASKS_PREFIX:"https://our.intern.facebook.com/intern/tasks/?t=",BUSINESS_PREFIX:"https://our.intern.facebook.com/intern/business/?q=",SEV_PREFIX:"https://our.intern.facebook.com/intern/sevmanager/view/s/",CHRONOS_PREFIX:"https://our.intern.facebook.com/intern/chronos/lucky/?query=",ADS_PARTNER_PREFIX:"https://our.intern.facebook.com/intern/ads/partner_projects/projects/",SRT_JOB_PREFIX:"https://our.intern.facebook.com/intern/bunny/?srt+",ANALYTICS_NOTEBOOKS_PREFIX:"https://our.intern.facebook.com/intern/bunny/?anp+",FBLEARNER_RUN_PREFIX:"https://our.intern.facebook.com/intern/fblearner/details/",PURCHASE_REQUEST_PREFIX:"https://our.intern.facebook.com/intern/bunny/?q=pr+",PURCHASE_ORDER_PREFIX:"https://our.intern.facebook.com/intern/bunny/?q=po+",get:function i(j){__p&&__p();var k=arguments.length<=1||arguments[1]===undefined?0:arguments[1],l=j.substr(k),m=c("EmployeeLinkMatcher").match(l);if(!m)return[];var n=m.lnk,o=m.idx,p=c("UnicodeUtils").strlen(l.substr(0,o));k+=p;var q="";if(n.substr(0,3).toLowerCase()==="aip")q=this.ADS_PARTNER_PREFIX+n.substr(3);else if(n.substr(0,3).toLowerCase()==="pr ")q=this.PURCHASE_REQUEST_PREFIX+n.substr(3);else if(n.substr(0,3).toLowerCase()==="po ")q=this.PURCHASE_ORDER_PREFIX+n.substr(3);else switch(n[0].toLowerCase()){case"d":if(n.indexOf("designpack://")===0)q=n;else q=this.PHABRICATOR_PREFIX+n.toUpperCase();break;case"p":q=this.PHABRICATOR_PREFIX+n.toUpperCase();break;case"t":q=this.TASKS_PREFIX+n.substr(1);break;case"b":q=this.BUSINESS_PREFIX+n.substr(1);break;case"s":q=this.SEV_PREFIX+n.substr(1);break;case"x":q=this.CHRONOS_PREFIX+n.substr(1);break;case"j":q=this.SRT_JOB_PREFIX+n.substr(1);break;case"n":q=this.ANALYTICS_NOTEBOOKS_PREFIX+n.substr(1);break;case"f":q=this.FBLEARNER_RUN_PREFIX+n.substr(1);break;default:return[]}var r=n.length,s=[{offset:k,length:r,entity:{url:q}}];return s.concat(this.get(j,k+r))}};f.exports=h}),null);
__d("EventReminderDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("ExplicitRegistrationDispatcher"))({strict:false})}),null);
__d("EventReminderActions",["EventReminderDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({DELETE_EVENT_REMINDER:null,UPDATE_EVENT_REMINDER:null}),i={Types:h,updateEventReminder:function j(k,event,l){c("EventReminderDispatcher").dispatch({type:i.Types.UPDATE_EVENT_REMINDER,threadID:k,event:event,participantsEventStatus:l})},deleteEventReminder:function j(k){c("EventReminderDispatcher").dispatch({type:i.Types.DELETE_EVENT_REMINDER,threadID:k})}};f.exports=i}),null);
__d("EventReminderConstants",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({INITIAL:"initial",GOING:"going",WATCHED:"watched",UNWATCHED:"unwatched"}),i=Object.freeze({ASSOCIATED_EVENT:"ASSOCIATED_EVENT"}),j=Object.freeze({GOING:"GOING",DECLINED:"DECLINED",INVITED:"INVITED"}),k=Object.freeze({NO_ERROR:"NO_ERROR",PAST_TIME:"PAST_TIME",AFTER_ONE_YEAR:"AFTER_ONE_YEAR"});f.exports={EventGuestStates:h,EventPlanType:i,GuestStates:j,TimeErrorType:k}}),null);
__d("ImageSourceType",[],(function a(b,c,d,e,f,g){var h=Object.freeze({PROFILE_PICTURE:"profile_picture",IMAGE:"image"});f.exports=h}),null);
__d("PhotoResizeModeConst",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CONTAIN:"s",COVER:"p"})}),null);
__d("ImageSourceRequest",["CurrentUser","ImageSourceType","KeyedCallbackManager","PhotoResizeModeConst","MercuryServerDispatcher"],(function a(b,c,d,e,f,g){__p&&__p();function h(){"use strict";this._request={fbid:null,type:null,width:null,height:null,resize_mode:null};this._callback=null}h.prototype.setFBID=function(l){"use strict";this._request.fbid=l;return this};h.prototype.setType=function(l){"use strict";if(![c("ImageSourceType").PROFILE_PICTURE,c("ImageSourceType").IMAGE].includes(l))throw new TypeError("ImageSourceRequest.setType: invalid type "+l);this._request.type=l;return this};h.prototype.setDimensions=function(l,m){"use strict";this._request.width=l;this._request.height=m;return this};h.prototype.setResizeMode=function(l){"use strict";if(![c("PhotoResizeModeConst").COVER,c("PhotoResizeModeConst").CONTAIN].includes(l))throw new TypeError("ImageSourceRequest.setResizeMode: invalid resize mode "+l);this._request.resize_mode=l;return this};h.prototype.setCallback=function(l){"use strict";this._callback=l;return this};h.prototype.send=function(){"use strict";__p&&__p();if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error("ImageSourceRequest: You must set all the fields");var l=j(),m=k(this._request);l.executeOrEnqueue(m,this._callback);if(l.getUnavailableResourcesFromRequest(m).length===1){c("MercuryServerDispatcher").trySend("/ajax/image_source.php",{requests:[this._request]});return true}return false};var i=null;function j(){__p&&__p();if(i)return i;var l=new(c("KeyedCallbackManager"))();i=l;c("MercuryServerDispatcher").registerEndpoints({"/ajax/image_source.php":{request_user_id:c("CurrentUser").getID(),mode:c("MercuryServerDispatcher").BATCH_DEFERRED_MULTI,batch_function:function m(n,o){var p;(p=n.requests).push.apply(p,o.requests);return n},handler:function m(n,o){var p=o.getData().requests;for(var q=0;q<p.length;++q)l.setResource(k(p[q]),n[q])}}});return l}function k(l){return[l.fbid,l.type,l.width,l.height,l.resize_mode].join("|")}f.exports=h}),null);
__d("MercuryAssert",["MercuryIDs"],(function a(b,c,d,e,f,g){__p&&__p();f.exports={isParticipantID:function h(i){if(!c("MercuryIDs").isValid(i))throw new Error("bad_participant_id "+i)},allParticipantIDs:function h(i){i.forEach(this.isParticipantID)},isUserParticipantID:function h(i){var j=c("MercuryIDs").tokenize(i);if(j.type!="fbid")throw new Error("bad_user_id "+i)},isEmailParticipantID:function h(i){var j=c("MercuryIDs").tokenize(i);if(j.type!="email")throw new Error("bad_email_id "+i)},allThreadID:function h(i){i.forEach(this.isThreadID)},isThreadID:function h(i){if(!c("MercuryIDs").isValid(i))throw new Error("bad_thread_id "+i)}}}),null);
__d("bs_js_boolean",[],(function a(b,c,d,e,f,g){"use strict";function h(i){if(i)return true;else return false}g.to_js_boolean=h}),null);
__d("bs_caml_exceptions",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=[0];function i(m){m[1]=h[0];h[0]+=1;return m}function j(){h[0]+=1;return h[0]}function k(m){var n=j(0),o=[m,n];o.tag=248;return o}function l(m){if(m===undefined)return 0;else if(m.tag===248)return 1;else{var n=m[0];if(n!==undefined)return+(n.tag===248);else return 0}}g.caml_set_oo_id=i;g.get_id=j;g.create=k;g.isCamlExceptionOrOpenVariant=l}),null);
__d("bs_js_exn",["bs_caml_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("bs_caml_exceptions").create("Js_exn.Error");function i(q){if(c("bs_caml_exceptions").isCamlExceptionOrOpenVariant(q))return q;else return[h,q]}function j(q){throw new Error(q)}function k(q){throw new EvalError(q)}function l(q){throw new RangeError(q)}function m(q){throw new ReferenceError(q)}function n(q){throw new SyntaxError(q)}function o(q){throw new TypeError(q)}function p(q){throw new URIError(q)}g.$$Error=h;g.internalToOCamlException=i;g.raiseError=j;g.raiseEvalError=k;g.raiseRangeError=l;g.raiseReferenceError=m;g.raiseSyntaxError=n;g.raiseTypeError=o;g.raiseUriError=p}),null);
__d("bs_block",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){j.tag=i;return j}g.__=h}),null);
__d("bs_js_types",["bs_block"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k){__p&&__p();if(typeof k==="undefined")return[0,k];else if(k===null)return[1,k];else if(typeof k==="number")return[3,k];else if(typeof k==="string")return[4,k];else if(typeof k==="boolean")return[2,k];else if(typeof k==="function")return[5,k];else if(typeof k==="object")return[6,k];else return[7,k]}function i(k){__p&&__p();var l=typeof k;if(l==="undefined")return 3;else if(k===null)return 2;else if(l==="number")return c("bs_block").__(0,[k]);else if(l==="string")return c("bs_block").__(1,[k]);else if(l==="boolean")if(k===true)return 1;else return 0;else if(l==="function")return c("bs_block").__(2,[k]);else if(l==="object")return c("bs_block").__(3,[k]);else return c("bs_block").__(4,[k])}function j(k,l){switch(l){case 0:return+(typeof k==="undefined");case 1:return+(k===null);case 2:return+(typeof k==="boolean");case 3:return+(typeof k==="number");case 4:return+(typeof k==="string");case 5:return+(typeof k==="function");case 6:return+(typeof k==="object");case 7:return+(typeof k==="symbol")}}g.reify_type=h;g.test=j;g.classify=i}),null);
__d("bs_caml_builtin_exceptions",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=["Out_of_memory",0],i=["Sys_error",-1],j=["Failure",-2],k=["Invalid_argument",-3],l=["End_of_file",-4],m=["Division_by_zero",-5],n=["Not_found",-6],o=["Match_failure",-7],p=["Stack_overflow",-8],q=["Sys_blocked_io",-9],r=["Assert_failure",-10],s=["Undefined_recursive_module",-11];h.tag=248;i.tag=248;j.tag=248;k.tag=248;l.tag=248;m.tag=248;n.tag=248;o.tag=248;p.tag=248;q.tag=248;r.tag=248;s.tag=248;g.out_of_memory=h;g.sys_error=i;g.failure=j;g.invalid_argument=k;g.end_of_file=l;g.division_by_zero=m;g.not_found=n;g.match_failure=o;g.stack_overflow=p;g.sys_blocked_io=q;g.assert_failure=r;g.undefined_recursive_module=s}),null);
__d("bs_caml_int32",["bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(n,o){if(o===0)throw c("bs_caml_builtin_exceptions").division_by_zero;else return n/o|0}function i(n,o){if(o===0)throw c("bs_caml_builtin_exceptions").division_by_zero;else return n%o}function j(n){return(n&255)<<8|(n&65280)>>>8}function k(n){return(n&255)<<24|(n&65280)<<8|(n&16711680)>>>8|(n&4278190080)>>>24}var l=Math.imul||function(n,o){o|=0;return((n>>16)*o<<16)+(n&65535)*o|0},m=k;g.div=h;g.mod_=i;g.caml_bswap16=j;g.caml_int32_bswap=k;g.caml_nativeint_bswap=m;g.imul=l}),null);
__d("bs_caml_primitive",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(w,x){if(w<x)return-1;else if(w===x)return 0;else return 1}function i(w,x){if(w===x)return 0;else if(w<x)return-1;else if(w>x||w===w)return 1;else if(x===x)return-1;else return 0}function j(w,x){if(w===x)return 0;else if(w<x)return-1;else return 1}function k(w,x){if(w<x)return w;else return x}function l(w,x){if(w<x)return w;else return x}function m(w,x){if(w<x)return w;else return x}function n(w,x){if(w<x)return w;else return x}function o(w,x){if(w<x)return w;else return x}function p(w,x){if(w>x)return w;else return x}function q(w,x){if(w>x)return w;else return x}function r(w,x){if(w>x)return w;else return x}function s(w,x){if(w>x)return w;else return x}function t(w,x){if(w>x)return w;else return x}var u=h,v=h;g.caml_int_compare=h;g.caml_float_compare=i;g.caml_nativeint_compare=u;g.caml_string_compare=j;g.caml_int32_compare=v;g.caml_int_min=k;g.caml_float_min=l;g.caml_string_min=m;g.caml_nativeint_min=n;g.caml_int32_min=o;g.caml_int_max=p;g.caml_float_max=q;g.caml_string_max=r;g.caml_nativeint_max=s;g.caml_int32_max=t}),null);
__d("bs_caml_obj",["bs_block","bs_caml_primitive","bs_caml_builtin_exceptions"],(function a(b,c,aa,ba,ca,d){"use strict";__p&&__p();function e(v,w){var x=new Array(w);x.tag=v;return x}function f(v){var w=v.length|0,x=new Array(w);for(var y=0,z=w-1|0;y<=z;++y)x[y]=v[y];x.tag=v.tag|0;return x}function g(v,w){__p&&__p();var x=v.length|0;if(w<=0||w>x)throw[c("bs_caml_builtin_exceptions").invalid_argument,"Obj.truncate"];else if(x!==w){for(var y=w,z=x-1|0;y<=z;++y)v[y]=0;v.length=w;return 0}else return 0}function h(v){return c("bs_block").__(250,[v])}function i(v,w){var x=w.length|0;for(var y=0,z=x-1|0;y<=z;++y)v[y]=w[y];var A=w.tag|0;if(A!==0){v.tag=A;return 0}else return 0}function j(v,w){__p&&__p();while(true){var x=w,y=v;if(y===x)return 0;else{var z=typeof y,A=typeof x;if(z==="string")return c("bs_caml_primitive").caml_string_compare(y,x);else{var B=+(z==="number"),C=+(A==="number");if(B!==0)if(C!==0)return c("bs_caml_primitive").caml_int_compare(y,x);else return-1;else if(C!==0)return 1;else if(z==="boolean"||z==="undefined"||y===null){var D=y,E=x;if(D===E)return 0;else if(D<E)return-1;else return 1}else if(z==="function"||A==="function")throw[c("bs_caml_builtin_exceptions").invalid_argument,"compare: functional value"];else{var F=y.tag|0,G=x.tag|0;if(F===250){v=y[0];continue}else if(G===250){w=x[0];continue}else if(F===248)return c("bs_caml_primitive").caml_int_compare(y[1],x[1]);else if(F===251)throw[c("bs_caml_builtin_exceptions").invalid_argument,"equal: abstract value"];else if(F!==G)if(F<G)return-1;else return 1;else{var H=y.length|0,I=x.length|0;if(H===I){var J=y,K=x,L=0,M=H;while(true){var N=L;if(N===M)return 0;else{var O=j(J[N],K[N]);if(O!==0)return O;else{L=N+1|0;continue}}}}else if(H<I){var P=y,Q=x,R=0,S=H;while(true){var T=R;if(T===S)return-1;else{var U=j(P[T],Q[T]);if(U!==0)return U;else{R=T+1|0;continue}}}}else{var V=y,W=x,X=0,Y=I;while(true){var Z=X;if(Z===Y)return 1;else{var $=j(V[Z],W[Z]);if($!==0)return $;else{X=Z+1|0;continue}}}}}}}}}}function k(v,w){__p&&__p();while(true){var x=w,y=v;if(y===x)return 1;else{var z=typeof y;if(z==="string"||z==="number"||z==="boolean"||z==="undefined"||y===null)return 0;else{var A=typeof x;if(z==="function"||A==="function")throw[c("bs_caml_builtin_exceptions").invalid_argument,"equal: functional value"];else if(A==="number"||A==="undefined"||x===null)return 0;else{var B=y.tag|0,C=x.tag|0;if(B===250){v=y[0];continue}else if(C===250){w=x[0];continue}else if(B===248)return+(y[1]===x[1]);else if(B===251)throw[c("bs_caml_builtin_exceptions").invalid_argument,"equal: abstract value"];else if(B!==C)return 0;else{var D=y.length|0,E=x.length|0;if(D===E){var F=y,G=x,H=0,I=D;while(true){var J=H;if(J===I)return 1;else if(k(F[J],G[J])){H=J+1|0;continue}else return 0}}else return 0}}}}}}function l(v,w){if(w!==null)return k(v,w);else return+(v===w)}function m(v,w){if(w!==undefined)return k(v,w);else return+(v===w)}function n(v,w){if(w==null)return+(v===w);else return k(v,w)}function o(v,w){return 1-k(v,w)}function p(v,w){return+(j(v,w)>=0)}function q(v,w){return+(j(v,w)>0)}function r(v,w){return+(j(v,w)<=0)}function s(v,w){return+(j(v,w)<0)}function t(v,w){if(j(v,w)<=0)return v;else return w}function u(v,w){if(j(v,w)>=0)return v;else return w}d.caml_obj_block=e;d.caml_obj_dup=f;d.caml_obj_truncate=g;d.caml_lazy_make_forward=h;d.caml_update_dummy=i;d.caml_compare=j;d.caml_equal=k;d.caml_equal_null=l;d.caml_equal_undefined=m;d.caml_equal_nullable=n;d.caml_notequal=o;d.caml_greaterequal=p;d.caml_greaterthan=q;d.caml_lessthan=s;d.caml_lessequal=r;d.caml_min=t;d.caml_max=u}),null);
__d("bs_caml_string",["bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(u){return String.fromCharCode(u)}function i(u,v){if(v>=u.length||v<0)throw[c("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return u.charCodeAt(v)}function j(u){if(u<0)throw[c("bs_caml_builtin_exceptions").invalid_argument,"String.create"];else return new Array(u)}function k(u,v,w,x){if(w>0){for(var y=v,z=(w+v|0)-1|0;y<=z;++y)u[y]=x;return 0}else return 0}function l(u,v,w,x,y){__p&&__p();if(y>0){var z=u.length-v|0;if(y<=z){for(var A=0,B=y-1|0;A<=B;++A)w[x+A|0]=u.charCodeAt(v+A|0);return 0}else{for(var C=0,D=z-1|0;C<=D;++C)w[x+C|0]=u.charCodeAt(v+C|0);for(var E=z,F=y-1|0;E<=F;++E)w[x+E|0]=0;return 0}}else return 0}function m(u,v,w,x,y){__p&&__p();if(y>0)if(u===w){var z=u,A=v,B=x,C=y;if(A<B){var D=(z.length-B|0)-1|0,E=C-1|0,F=D>E?E:D;for(var G=F;G>=0;--G)z[B+G|0]=z[A+G|0];return 0}else if(A>B){var H=(z.length-A|0)-1|0,I=C-1|0,J=H>I?I:H;for(var K=0;K<=J;++K)z[B+K|0]=z[A+K|0];return 0}else return 0}else{var L=u.length-v|0;if(y<=L){for(var M=0,N=y-1|0;M<=N;++M)w[x+M|0]=u[v+M|0];return 0}else{for(var O=0,P=L-1|0;O<=P;++O)w[x+O|0]=u[v+O|0];for(var Q=L,R=y-1|0;Q<=R;++Q)w[x+Q|0]=0;return 0}}else return 0}function n(u){var v=u.length,w=new Array(v);for(var x=0,y=v-1|0;x<=y;++x)w[x]=u.charCodeAt(x);return w}function o(u){__p&&__p();var v=u,w=0,x=u.length,y="",z=x;if(w===0&&x<=4096&&x===v.length)return String.fromCharCode.apply(null,v);else{var A=0;while(z>0){var B=z<1024?z:1024,C=new Array(B);m(v,A,C,0,B);y=y+String.fromCharCode.apply(null,C);z=z-B|0;A=A+B|0}return y}}function p(u){var v=u.length,w=new Array(v);for(var x=0,y=v-1|0;x<=y;++x)w[x]=u[x];return o(w)}function q(u){if(u>31)return+(u<127);else return 0}function r(u,v){return u.charCodeAt(v)+(u.charCodeAt(v+1|0)<<8)|0}function s(u,v){return((u.charCodeAt(v)+(u.charCodeAt(v+1|0)<<8)|0)+(u.charCodeAt(v+2|0)<<16)|0)+(u.charCodeAt(v+3|0)<<24)|0}function t(u,v){if(v<0||v>=u.length)throw[c("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return u.charCodeAt(v)}g.bytes_of_string=n;g.bytes_to_string=o;g.caml_is_printable=q;g.caml_string_of_char_array=p;g.caml_string_get=i;g.caml_create_string=j;g.caml_fill_string=k;g.caml_blit_string=l;g.caml_blit_bytes=m;g.caml_string_get16=r;g.caml_string_get32=s;g.string_of_char=h;g.get=t}),null);
__d("bs_char",["bs_caml_string","bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(m){if(m<0||m>255)throw[c("bs_caml_builtin_exceptions").invalid_argument,"Char.chr"];else return m}function i(m){__p&&__p();var n=0;if(m>=40)if(m!==92)n=m>=127?1:2;else return"\\\\";else if(m>=32)if(m>=39)return"\\'";else n=2;else if(m>=14)n=1;else switch(m){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:n=1;break;case 13:return"\\r"}switch(n){case 1:var o=new Array(4);o[0]=92;o[1]=48+(m/100|0)|0;o[2]=48+(m/10|0)%10|0;o[3]=48+m%10|0;return c("bs_caml_string").bytes_to_string(o);case 2:var p=new Array(1);p[0]=m;return c("bs_caml_string").bytes_to_string(p)}}function j(m){if(m>=65&&m<=90||m>=192&&m<=214||m>=216&&m<=222)return m+32|0;else return m}function k(m){if(m>=97&&m<=122||m>=224&&m<=246||m>=248&&m<=254)return m-32|0;else return m}function l(m,n){return m-n|0}g.chr=h;g.escaped=i;g.lowercase=j;g.uppercase=k;g.compare=l}),null);
__d("bs_caml_array",["bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(p,q,i){var r=new Array(i),s=0,t=q;while(s<i){r[s]=p[t];s=s+1|0;t=t+1|0}return r}function i(p,q){while(true){var r=q,s=p;if(r){q=r[1];p=r[0].length+s|0;continue}else return s}}function j(p,q,r){__p&&__p();while(true){var s=r,t=q;if(s){var u=s[0],v=u.length,w=t,x=0;while(x<v){p[w]=u[x];w=w+1|0;x=x+1|0}r=s[1];q=w;continue}else return 0}}function k(p){var q=i(0,p),r=new Array(q);j(r,0,p);return r}function l(p,q,r){if(q<0||q>=p.length)throw[c("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else{p[q]=r;return 0}}function m(p,q){if(q<0||q>=p.length)throw[c("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return p[q]}function n(i,p){var q=new Array(i);for(var r=0,s=i-1|0;r<=s;++r)q[r]=p;return q}function o(p,q,r,s,i){if(s<=q){for(var t=0,u=i-1|0;t<=u;++t)r[t+s|0]=p[t+q|0];return 0}else{for(var v=i-1|0;v>=0;--v)r[v+s|0]=p[v+q|0];return 0}}g.caml_array_sub=h;g.caml_array_concat=k;g.caml_make_vect=n;g.caml_array_blit=o;g.caml_array_get=m;g.caml_array_set=l}),null);
__d("bs_curry",["bs_caml_array"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(G,H){__p&&__p();while(true){var I=H,J=G,K=J.length,L=K?K:1,M=I.length,N=L-M|0;if(N)if(N<0){H=c("bs_caml_array").caml_array_sub(I,L,-N|0);G=J.apply(null,c("bs_caml_array").caml_array_sub(I,0,L));continue}else return function(J,I){return function(O){return h(J,I.concat([O]))}}(J,I);else return J.apply(null,I)}}function i(G,H,I){__p&&__p();if(I>7||I<0)return h(G,[H]);else switch(I){case 0:case 1:return G(H);case 2:return function(J){return G(H,J)};case 3:return function(J,K){return G(H,J,K)};case 4:return function(J,K,L){return G(H,J,K,L)};case 5:return function(J,K,L,M){return G(H,J,K,L,M)};case 6:return function(J,K,L,M,N){return G(H,J,K,L,M,N)};case 7:return function(J,K,L,M,N,O){return G(H,J,K,L,M,N,O)}}}function j(G,H){var I=G.length;if(I===1)return G(H);else return i(G,H,I)}function k(G){var H=G.length;if(H===1)return G;else return function(I){return j(G,I)}}function l(G,H,I,J){__p&&__p();if(J>7||J<0)return h(G,[H,I]);else switch(J){case 0:case 1:return h(G(H),[I]);case 2:return G(H,I);case 3:return function(K){return G(H,I,K)};case 4:return function(K,L){return G(H,I,K,L)};case 5:return function(K,L,M){return G(H,I,K,L,M)};case 6:return function(K,L,M,N){return G(H,I,K,L,M,N)};case 7:return function(K,L,M,N,O){return G(H,I,K,L,M,N,O)}}}function m(G,H,I){var J=G.length;if(J===2)return G(H,I);else return l(G,H,I,J)}function n(G){var H=G.length;if(H===2)return G;else return function(I,J){return m(G,I,J)}}function o(G,H,I,J,K){__p&&__p();var L=0;if(K>7||K<0)return h(G,[H,I,J]);else switch(K){case 0:case 1:L=1;break;case 2:return h(G(H,I),[J]);case 3:return G(H,I,J);case 4:return function(M){return G(H,I,J,M)};case 5:return function(M,N){return G(H,I,J,M,N)};case 6:return function(M,N,O){return G(H,I,J,M,N,O)};case 7:return function(M,N,O,P){return G(H,I,J,M,N,O,P)}}if(L===1)return h(G(H),[I,J])}function p(G,H,I,J){var K=G.length;if(K===3)return G(H,I,J);else return o(G,H,I,J,K)}function q(G){var H=G.length;if(H===3)return G;else return function(I,J,K){return p(G,I,J,K)}}function r(G,H,I,J,K,L){__p&&__p();var M=0;if(L>7||L<0)return h(G,[H,I,J,K]);else switch(L){case 0:case 1:M=1;break;case 2:return h(G(H,I),[J,K]);case 3:return h(G(H,I,J),[K]);case 4:return G(H,I,J,K);case 5:return function(N){return G(H,I,J,K,N)};case 6:return function(N,O){return G(H,I,J,K,N,O)};case 7:return function(N,O,P){return G(H,I,J,K,N,O,P)}}if(M===1)return h(G(H),[I,J,K])}function s(G,H,I,J,K){var L=G.length;if(L===4)return G(H,I,J,K);else return r(G,H,I,J,K,L)}function t(G){var H=G.length;if(H===4)return G;else return function(I,J,K,L){return s(G,I,J,K,L)}}function u(G,H,I,J,K,L,M){__p&&__p();var N=0;if(M>7||M<0)return h(G,[H,I,J,K,L]);else switch(M){case 0:case 1:N=1;break;case 2:return h(G(H,I),[J,K,L]);case 3:return h(G(H,I,J),[K,L]);case 4:return h(G(H,I,J,K),[L]);case 5:return G(H,I,J,K,L);case 6:return function(O){return G(H,I,J,K,L,O)};case 7:return function(O,P){return G(H,I,J,K,L,O,P)}}if(N===1)return h(G(H),[I,J,K,L])}function v(G,H,I,J,K,L){var M=G.length;if(M===5)return G(H,I,J,K,L);else return u(G,H,I,J,K,L,M)}function w(G){var H=G.length;if(H===5)return G;else return function(I,J,K,L,M){return v(G,I,J,K,L,M)}}function x(G,H,I,J,K,L,M,N){__p&&__p();var O=0;if(N>7||N<0)return h(G,[H,I,J,K,L,M]);else switch(N){case 0:case 1:O=1;break;case 2:return h(G(H,I),[J,K,L,M]);case 3:return h(G(H,I,J),[K,L,M]);case 4:return h(G(H,I,J,K),[L,M]);case 5:return h(G(H,I,J,K,L),[M]);case 6:return G(H,I,J,K,L,M);case 7:return function(P){return G(H,I,J,K,L,M,P)}}if(O===1)return h(G(H),[I,J,K,L,M])}function y(G,H,I,J,K,L,M){var N=G.length;if(N===6)return G(H,I,J,K,L,M);else return x(G,H,I,J,K,L,M,N)}function z(G){var H=G.length;if(H===6)return G;else return function(I,J,K,L,M,N){return y(G,I,J,K,L,M,N)}}function A(G,H,I,J,K,L,M,N,O){__p&&__p();var P=0;if(O>7||O<0)return h(G,[H,I,J,K,L,M,N]);else switch(O){case 0:case 1:P=1;break;case 2:return h(G(H,I),[J,K,L,M,N]);case 3:return h(G(H,I,J),[K,L,M,N]);case 4:return h(G(H,I,J,K),[L,M,N]);case 5:return h(G(H,I,J,K,L),[M,N]);case 6:return h(G(H,I,J,K,L,M),[N]);case 7:return G(H,I,J,K,L,M,N)}if(P===1)return h(G(H),[I,J,K,L,M,N])}function B(G,H,I,J,K,L,M,N){var O=G.length;if(O===7)return G(H,I,J,K,L,M,N);else return A(G,H,I,J,K,L,M,N,O)}function C(G){var H=G.length;if(H===7)return G;else return function(I,J,K,L,M,N,O){return B(G,I,J,K,L,M,N,O)}}function D(G,H,I,J,K,L,M,N,O,P){__p&&__p();var Q=0;if(P>7||P<0)return h(G,[H,I,J,K,L,M,N,O]);else switch(P){case 0:case 1:Q=1;break;case 2:return h(G(H,I),[J,K,L,M,N,O]);case 3:return h(G(H,I,J),[K,L,M,N,O]);case 4:return h(G(H,I,J,K),[L,M,N,O]);case 5:return h(G(H,I,J,K,L),[M,N,O]);case 6:return h(G(H,I,J,K,L,M),[N,O]);case 7:return h(G(H,I,J,K,L,M,N),[O])}if(Q===1)return h(G(H),[I,J,K,L,M,N,O])}function E(G,H,I,J,K,L,M,N,O){var P=G.length;if(P===8)return G(H,I,J,K,L,M,N,O);else return D(G,H,I,J,K,L,M,N,O,P)}function F(G){var H=G.length;if(H===8)return G;else return function(I,J,K,L,M,N,O,P){return E(G,I,J,K,L,M,N,O,P)}}g.app=h;g.curry_1=i;g._1=j;g.__1=k;g.curry_2=l;g._2=m;g.__2=n;g.curry_3=o;g._3=p;g.__3=q;g.curry_4=r;g._4=s;g.__4=t;g.curry_5=u;g._5=v;g.__5=w;g.curry_6=x;g._6=y;g.__6=z;g.curry_7=A;g._7=B;g.__7=C;g.curry_8=D;g._8=E;g.__8=F}),null);
__d("bs_caml_utils",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=String.prototype.repeat&&function(i,j){return j.repeat(i)}||function(i,j){__p&&__p();if(j.length==0||i==0)return"";if(j.length*i>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");var k="";for(;;){if((i&1)==1)k+=j;i>>>=1;if(i==0)break;j+=j}return k};g.repeat=h}),null);
__d("bs_caml_int64",["bs_caml_int32","bs_caml_utils","bs_caml_primitive","bs_caml_builtin_exceptions"],(function aa(ba,a,ca,da,ea,b){"use strict";__p&&__p();var c=[-2147483648,0],d=[2147483647,1],e=[0,1],f=[0,0],g=[-1,4294967295];function h(B){return+((B&2147483648)!==0)}function i(B,C){var D=C[1],E=B[1],F=E+D&4294967295,G=h(E)&&(h(D)||!h(F))||h(D)&&!h(F)?1:0,H=B[0]+C[0]+G&4294967295;return[H,F>>>0]}function j(B){var C=B[0]^-1,D=B[1]^-1;return[C,D>>>0]}function k(B,C){if(B[0]===C[0])return+(B[1]===C[1]);else return 0}function l(B,C){if(C!==null)return k(B,C);else return 0}function m(B,C){if(C!==undefined)return k(B,C);else return 0}function n(B,C){if(C==null)return 0;else return k(B,C)}function o(B){if(k(B,c))return c;else return i(j(B),e)}function p(B,C){return i(B,o(C))}function q(B,C){if(C){var D=B[1];if(C>=32)return[D<<(C-32|0),0];else{var E=D>>>(32-C|0)|B[0]<<C;return[E,D<<C>>>0]}}else return B}function r(B,C){__p&&__p();if(C){var D=B[0],E=C-32|0;if(E)if(E>0){var F=D>>>E;return[0,F>>>0]}else{var G=D>>>C,H=D<<(-E|0)|B[1]>>>C;return[G,H>>>0]}else return[0,D>>>0]}else return B}function s(B,C){__p&&__p();if(C){var D=B[0];if(C<32){var E=D>>C,F=D<<(32-C|0)|B[1]>>>C;return[E,F>>>0]}else{var G=D>>(C-32|0);return[D>=0?0:-1,G>>>0]}}else return B}function t(B){if(B[0]!==0||B[1]!==0)return 0;else return 1}function u(B,C){__p&&__p();while(true){var D=C,E=B,F=0,G,H=E[0],I=0,J=0,K=0;if(H!==0)K=4;else if(E[1]!==0)K=4;else return f;if(K===4)if(D[0]!==0)J=3;else if(D[1]!==0)J=3;else return f;if(J===3)if(H!==-2147483648)I=2;else if(E[1]!==0)I=2;else{G=D[1];F=1}if(I===2){var L=D[0],M=E[1],N=0;if(L!==-2147483648)N=3;else if(D[1]!==0)N=3;else{G=M;F=1}if(N===3){var O=D[1];if(H<0)if(L<0){C=o(D);B=o(E);continue}else return o(u(o(E),D));else if(L<0)return o(u(E,o(D)));else{var P=H>>>16,Q=H&65535,R=M>>>16,S=M&65535,T=L>>>16,U=L&65535,V=O>>>16,W=O&65535,X=0,Y=0,Z=0,$=S*W;Z=($>>>16)+R*W;Y=Z>>>16;Z=(Z&65535)+S*V;Y=Y+(Z>>>16)+Q*W;X=Y>>>16;Y=(Y&65535)+R*V;X+=Y>>>16;Y=(Y&65535)+S*U;X+=Y>>>16;Y=Y&65535;X=X+(P*W+Q*V+R*U+S*T)&65535;var Aa=Y|X<<16,Ba=$&65535|(Z&65535)<<16;return[Aa,Ba>>>0]}}}if(F===1)if((G&1)===0)return f;else return c}}function fa(B){var C=a("bs_caml_int32").caml_int32_bswap(B[1]),D=a("bs_caml_int32").caml_int32_bswap(B[0]);return[C,D>>>0]}function ga(B,C){return[B[0]^C[0],(B[1]^C[1])>>>0]}function ha(B,C){return[B[0]|C[0],(B[1]|C[1])>>>0]}function ia(B,C){return[B[0]&C[0],(B[1]&C[1])>>>0]}function v(B,C){var D=C[0],E=B[0];if(E>D)return 1;else if(E<D)return 0;else return+(B[1]>=C[1])}function ja(B,C){return 1-k(B,C)}function ka(B,C){return 1-v(B,C)}function w(B,C){if(B[0]>C[0])return 1;else if(B[0]<C[0])return 0;else return+(B[1]>C[1])}function la(B,C){return 1-w(B,C)}function ma(B,C){if(v(B,C))return C;else return B}function na(B,C){if(w(B,C))return B;else return C}function x(B){return B[0]*4294967296+B[1]}var y=Math.pow(2,32),oa=Math.pow(2,63),pa=-Math.pow(2,63);function z(B){__p&&__p();if(isNaN(B)||!isFinite(B))return f;else if(B<=pa)return c;else if(B+1>=oa)return d;else if(B<0)return o(z(-B));else{var C=B/y|0,D=B%y|0;return[C,D>>>0]}}function A(B,C){__p&&__p();while(true){var D=C,E=B,F=E[0],G=0,H=0;if(D[0]!==0)H=2;else if(D[1]!==0)H=2;else throw a("bs_caml_builtin_exceptions").division_by_zero;if(H===2)if(F!==-2147483648)if(F!==0)G=1;else if(E[1]!==0)G=1;else return f;else if(E[1]!==0)G=1;else if(k(D,e)||k(D,g))return E;else if(k(D,c))return e;else{var I=D[0],J=s(E,1),K=q(A(J,D),1),L=0;if(K[0]!==0)L=3;else if(K[1]!==0)L=3;else if(I<0)return e;else return o(e);if(L===3){var M=u(D,K),N=i(E,o(M));return i(K,A(N,D))}}if(G===1){var O=D[0],P=0;if(O!==-2147483648)P=2;else if(D[1]!==0)P=2;else return f;if(P===2)if(F<0)if(O<0){C=o(D);B=o(E);continue}else return o(A(o(E),D));else if(O<0)return o(A(E,o(D)));else{var Q=f,R=E;while(v(R,D)){var S=a("bs_caml_primitive").caml_float_max(1,Math.floor(x(R)/x(D))),T=Math.ceil(Math.log(S)/Math.LN2),U=T<=48?1:Math.pow(2,T-48),V=z(S),W=u(V,D);while(W[0]<0||w(W,R)){S-=U;V=z(S);W=u(V,D)}if(t(V))V=e;Q=i(Q,V);R=i(R,o(W))}return Q}}}}function qa(B,C){var D=u(A(B,C),C);return i(B,o(D))}function ra(B,C){var D=A(B,C),E=u(D,C);return[D,i(B,o(E))]}function sa(B,C){var D=a("bs_caml_primitive").caml_nativeint_compare(B[0],C[0]);if(D)return D;else return a("bs_caml_primitive").caml_nativeint_compare(B[1],C[1])}function ta(B){return[B<0?-1:0,B>>>0]}function ua(B){return B[1]|0}function va(B){__p&&__p();var C=function C(I){return(I>>>0).toString(16)},D=B[0],E=B[1],F=0;if(D!==0)F=1;else if(E!==0)F=1;else return"0";if(F===1)if(E!==0)if(D!==0){var G=C(B[1]),H=8-G.length|0;if(H<=0)return C(B[0])+G;else return C(B[0])+(a("bs_caml_utils").repeat(H,"0")+G)}else return C(B[1]);else return C(B[0])+"00000000"}function wa(B){return[2147483647&B[0],B[1]]}function xa(B){var C=new Int32Array([B[1],B[0]]);return new Float64Array(C.buffer)[0]}function ya(B){var C=new Float64Array([B]),D=new Int32Array(C.buffer),E=D[1],F=E,G=D[0],H=G;return[F,H>>>0]}function za(B,C){var D=B.charCodeAt(C+4|0)<<32|B.charCodeAt(C+5|0)<<40|B.charCodeAt(C+6|0)<<48|B.charCodeAt(C+7|0)<<56,E=B.charCodeAt(C)|B.charCodeAt(C+1|0)<<8|B.charCodeAt(C+2|0)<<16|B.charCodeAt(C+3|0)<<24;return[D,E>>>0]}b.min_int=c;b.max_int=d;b.one=e;b.zero=f;b.not=j;b.of_int32=ta;b.to_int32=ua;b.add=i;b.neg=o;b.sub=p;b.lsl_=q;b.lsr_=r;b.asr_=s;b.is_zero=t;b.mul=u;b.xor=ga;b.or_=ha;b.and_=ia;b.swap=fa;b.ge=v;b.eq=k;b.neq=ja;b.lt=ka;b.gt=w;b.le=la;b.equal_null=l;b.equal_undefined=m;b.equal_nullable=n;b.min=ma;b.max=na;b.to_float=x;b.of_float=z;b.div=A;b.mod_=qa;b.div_mod=ra;b.compare=sa;b.to_hex=va;b.discard_sign=wa;b.float_of_bits=xa;b.bits_of_float=ya;b.get64=za}),null);
__d("bs_caml_format",["bs_curry","bs_caml_int32","bs_caml_int64","bs_caml_utils","bs_caml_builtin_exceptions"],(function a(b,c,aa,ba,ca,d){"use strict";__p&&__p();function e(x){throw[c("bs_caml_builtin_exceptions").failure,x]}function f(x){__p&&__p();if(x>=65)if(x>=97)if(x>=123)return-1;else return x-87|0;else if(x>=91)return-1;else return x-55|0;else if(x>57||x<48)return-1;else return x-48|0}function g(x){switch(x){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function h(x){__p&&__p();var y=1,z=2,A=0;if(x[A]==="-"){y=-1;A=A+1|0}var B=x.charCodeAt(A),C=x.charCodeAt(A+1|0);if(B===48)if(C>=89)if(C!==98)if(C!==111){if(C===120){z=1;A=A+2|0}}else{z=0;A=A+2|0}else{z=3;A=A+2|0}else if(C!==66)if(C!==79){if(C>=88){z=1;A=A+2|0}}else{z=0;A=A+2|0}else{z=3;A=A+2|0}return[A,y,z]}function i(x){__p&&__p();var y=h(x),z=y[0],A=g(y[2]),B=4294967295,C=x.length,D=z<C?x.charCodeAt(z):0,E=f(D);if(E<0||E>=A)throw[c("bs_caml_builtin_exceptions").failure,"int_of_string"];var F=function F(I,J){__p&&__p();while(true){var K=J,L=I;if(K===C)return L;else{var M=x.charCodeAt(K);if(M===95){J=K+1|0;continue}else{var N=f(M);if(N<0||N>=A)throw[c("bs_caml_builtin_exceptions").failure,"int_of_string"];else{var O=A*L+N;if(O>B)throw[c("bs_caml_builtin_exceptions").failure,"int_of_string"];else{J=K+1|0;I=O;continue}}}}}},G=y[1]*F(E,z+1|0),H=G|0;if(A===10&&G!==H)throw[c("bs_caml_builtin_exceptions").failure,"int_of_string"];return H}function j(x){__p&&__p();var y=h(x),z=y[2],A=y[0],B=c("bs_caml_int64").of_int32(g(z)),C=c("bs_caml_int64").of_int32(y[1]),D;switch(z){case 0:D=[536870911,4294967295];break;case 1:D=[268435455,4294967295];break;case 2:D=[429496729,2576980377];break;case 3:D=[2147483647,4294967295];break}var E=x.length,F=A<E?x.charCodeAt(A):0,G=c("bs_caml_int64").of_int32(f(F));if(c("bs_caml_int64").lt(G,[0,0])||c("bs_caml_int64").ge(G,B))throw[c("bs_caml_builtin_exceptions").failure,"int64_of_string"];var H=function H(K,L){__p&&__p();while(true){var M=L,N=K;if(M===E)return N;else{var O=x.charCodeAt(M);if(O===95){L=M+1|0;continue}else{var P=c("bs_caml_int64").of_int32(f(O));if(c("bs_caml_int64").lt(P,[0,0])||c("bs_caml_int64").ge(P,B)||c("bs_caml_int64").gt(N,D))throw[c("bs_caml_builtin_exceptions").failure,"int64_of_string"];else{var Q=c("bs_caml_int64").add(c("bs_caml_int64").mul(B,N),P);L=M+1|0;K=Q;continue}}}}},I=c("bs_caml_int64").mul(C,H(G,A+1|0)),J=c("bs_caml_int64").or_(I,[0,0]);if(c("bs_caml_int64").eq(B,[0,10])&&c("bs_caml_int64").neq(I,J))throw[c("bs_caml_builtin_exceptions").failure,"int64_of_string"];return J}function k(x){switch(x){case 0:return 8;case 1:return 16;case 2:return 10}}function l(x){if(x>=65&&x<=90||x>=192&&x<=214||x>=216&&x<=222)return x+32|0;else return x}function m(x){__p&&__p();var y=x.length;if(y>31)throw[c("bs_caml_builtin_exceptions").invalid_argument,"format_int: format too long"];var z=["+","-"," ",0,2,0,0,0,1,-1,"f"],A=0;while(true){var B=A;if(B>=y)return z;else{var C=x.charCodeAt(B),D=0;if(C>=69)if(C>=88)if(C>=121)D=1;else switch(C-88|0){case 0:z[4]=1;z[7]=1;A=B+1|0;continue;case 13:case 14:case 15:D=5;break;case 12:case 17:D=4;break;case 23:z[4]=0;A=B+1|0;continue;case 29:z[4]=2;A=B+1|0;continue;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:D=1;break;case 32:z[4]=1;A=B+1|0;continue}else if(C>=72)D=1;else{z[5]=1;z[7]=1;z[10]=String.fromCharCode(l(C));A=B+1|0;continue}else{var E=C-32|0;if(E>25||E<0)D=1;else switch(E){case 3:z[3]=1;A=B+1|0;continue;case 0:case 11:D=2;break;case 13:z[0]="-";A=B+1|0;continue;case 14:z[9]=0;var F=B+1|0;while(function(F){return function(){var H=x.charCodeAt(F)-48|0;return+(H>=0&&H<=9)}}(F)()){z[9]=(c("bs_caml_int32").imul(z[9],10)+x.charCodeAt(F)|0)-48|0;F=F+1|0}A=F;continue;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 15:D=1;break;case 16:z[2]="0";A=B+1|0;continue;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:D=3;break}}switch(D){case 1:A=B+1|0;continue;case 2:z[1]=String.fromCharCode(C);A=B+1|0;continue;case 3:z[6]=0;var G=B;while(function(G){return function(){var H=x.charCodeAt(G)-48|0;return+(H>=0&&H<=9)}}(G)()){z[6]=(c("bs_caml_int32").imul(z[6],10)+x.charCodeAt(G)|0)-48|0;G=G+1|0}A=G;continue;case 4:z[5]=1;z[4]=2;A=B+1|0;continue;case 5:z[5]=1;z[10]=String.fromCharCode(C);A=B+1|0;continue}}}}function n(x,y){__p&&__p();var z=x[0],A=x[1],B=x[2],C=x[3],D=x[4],E=x[5],F=x[6],G=x[7],H=x[8],I=y.length;if(E&&(H<0||A!=="-"))I=I+1|0;if(C)if(D){if(D===1)I=I+2|0}else I=I+1|0;var J="";if(z==="+"&&B===" ")for(var K=I,L=F-1|0;K<=L;++K)J=J+B;if(E)if(H<0)J=J+"-";else if(A!=="-")J=J+A;if(C&&D===0)J=J+"0";if(C&&D===1)J=J+"0x";if(z==="+"&&B==="0")for(var M=I,N=F-1|0;M<=N;++M)J=J+B;J=G?J+y.toUpperCase():J+y;if(z==="-")for(var O=I,P=F-1|0;O<=P;++O)J=J+" ";return J}function o(x,y){__p&&__p();if(x==="%d")return String(y);else{var z=m(x),A=z,B=y,C=B<0?A[5]?(A[8]=-1,-B):B>>>0:B,D=C.toString(k(A[4]));if(A[9]>=0){A[2]=" ";var E=A[9]-D.length|0;if(E>0)D=c("bs_caml_utils").repeat(E,"0")+D}return n(A,D)}}function p(x,y){__p&&__p();var z=m(x),A=z[5]&&c("bs_caml_int64").lt(y,[0,0])?(z[8]=-1,c("bs_caml_int64").neg(y)):y,B="",C=z[4];switch(C){case 0:var D=[0,8],E="01234567";if(c("bs_caml_int64").lt(A,[0,0])){var F=c("bs_caml_int64").discard_sign(A),G=c("bs_caml_int64").div_mod(F,D),H=c("bs_caml_int64").add([268435456,0],G[0]),I=G[1];B=String.fromCharCode(E.charCodeAt(I[1]|0))+B;while(c("bs_caml_int64").neq(H,[0,0])){var J=c("bs_caml_int64").div_mod(H,D);H=J[0];I=J[1];B=String.fromCharCode(E.charCodeAt(I[1]|0))+B}}else{var K=c("bs_caml_int64").div_mod(A,D),L=K[0],M=K[1];B=String.fromCharCode(E.charCodeAt(M[1]|0))+B;while(c("bs_caml_int64").neq(L,[0,0])){var N=c("bs_caml_int64").div_mod(L,D);L=N[0];M=N[1];B=String.fromCharCode(E.charCodeAt(M[1]|0))+B}}break;case 1:B=c("bs_caml_int64").to_hex(A)+B;break;case 2:var O=[0,10],P="0123456789";if(c("bs_caml_int64").lt(A,[0,0])){var Q=c("bs_caml_int64").discard_sign(A),R=c("bs_caml_int64").div_mod(Q,O),S=c("bs_caml_int64").div_mod(c("bs_caml_int64").add([0,8],R[1]),O),T=c("bs_caml_int64").add(c("bs_caml_int64").add([214748364,3435973836],R[0]),S[0]),U=S[1];B=String.fromCharCode(P.charCodeAt(U[1]|0))+B;while(c("bs_caml_int64").neq(T,[0,0])){var V=c("bs_caml_int64").div_mod(T,O);T=V[0];U=V[1];B=String.fromCharCode(P.charCodeAt(U[1]|0))+B}}else{var W=c("bs_caml_int64").div_mod(A,O),X=W[0],Y=W[1];B=String.fromCharCode(P.charCodeAt(Y[1]|0))+B;while(c("bs_caml_int64").neq(X,[0,0])){var Z=c("bs_caml_int64").div_mod(X,O);X=Z[0];Y=Z[1];B=String.fromCharCode(P.charCodeAt(Y[1]|0))+B}}break}if(z[9]>=0){z[2]=" ";var $=z[9]-B.length|0;if($>0)B=c("bs_caml_utils").repeat($,"0")+B}return n(z,B)}function q(x,y){__p&&__p();var z=m(x),A=z[9]<0?6:z[9],B=y<0?(z[8]=-1,-y):y,C="";if(isNaN(B)){C="nan";z[2]=" "}else if(isFinite(B)){var D=z[10];switch(D){case"e":C=B.toExponential(A);var E=C.length;if(C[E-3|0]==="e")C=C.slice(0,E-1|0)+("0"+C.slice(E-1|0));break;case"f":C=B.toFixed(A);break;case"g":var F=A!==0?A:1;C=B.toExponential(F-1|0);var G=C.indexOf("e"),H=Number(C.slice(G+1|0))|0;if(H<-4||B>=1e21||B.toFixed().length>F){var I=G-1|0;while(C[I]==="0")I=I-1|0;if(C[I]===".")I=I-1|0;C=C.slice(0,I+1|0)+C.slice(G);var J=C.length;if(C[J-3|0]==="e")C=C.slice(0,J-1|0)+("0"+C.slice(J-1|0))}else{var K=F;if(H<0){K=K-(H+1|0)|0;C=B.toFixed(K)}else while(function(){C=B.toFixed(K);return+(C.length>(F+1|0))}())K=K-1|0;if(K!==0){var L=C.length-1|0;while(C[L]==="0")L=L-1|0;if(C[L]===".")L=L-1|0;C=C.slice(0,L+1|0)}}break;default:}}else{C="inf";z[2]=" "}return n(z,C)}var r=function r(x,e){__p&&__p();var y=+x;if(x.length>0&&y===y)return y;x=x.replace(/_/g,"");y=+x;if(x.length>0&&y===y||/^[+-]?nan$/i.test(x))return y;if(/^ *0x[0-9a-f_]+p[+-]?[0-9_]+/i.test(x)){var z=x.indexOf("p");z=z==-1?x.indexOf("P"):z;var A=+x.substring(z+1);y=+x.substring(0,z);return y*Math.pow(2,A)}if(/^\+?inf(inity)?$/i.test(x))return Infinity;if(/^-inf(inity)?$/i.test(x))return-Infinity;e("float_of_string")};function s(x){return c("bs_curry")._2(r,x,e)}var t=o,u=o,v=i,w=i;d.caml_format_float=q;d.caml_format_int=o;d.caml_nativeint_format=t;d.caml_int32_format=u;d.caml_float_of_string=s;d.caml_int64_format=p;d.caml_int_of_string=i;d.caml_int32_of_string=v;d.caml_int64_of_string=j;d.caml_nativeint_of_string=w}),null);
__d("bs_caml_io",["bs_curry","bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(u,v){return u+v}var i=["",function(u,v){var w=v.length-1|0;if(typeof process!=="undefined"&&process.stdout&&process.stdout.write)return process.stdout.write(v);else if(v[w]==="\n")return 0;else return 0}],j=["",function(u,v){var w=v.length-1|0;if(v[w]==="\n")return 0;else return 0}];function k(){throw[c("bs_caml_builtin_exceptions").failure,"caml_ml_open_descriptor_in not implemented"]}function l(){throw[c("bs_caml_builtin_exceptions").failure,"caml_ml_open_descriptor_out not implemented"]}function m(u){if(u[0]!==""){c("bs_curry")._2(u[1],u,u[0]);u[0]="";return 0}else return 0}var n=function n(u){return typeof process!=="undefined"&&process.stdout&&(process.stdout.write(u),true)};function o(u,v,w,x){__p&&__p();var y=w===0&&x===v.length?v:v.slice(w,x);if(typeof process!=="undefined"&&process.stdout&&process.stdout.write&&u===i)return process.stdout.write(y);else{var z=y.lastIndexOf("\n");if(z<0){u[0]=u[0]+y;return 0}else{u[0]=u[0]+y.slice(0,z+1|0);m(u);u[0]=u[0]+y.slice(z+1|0);return 0}}}function p(u,v){return o(u,String.fromCharCode(v),0,1)}function q(u,v,w,x){throw[c("bs_caml_builtin_exceptions").failure,"caml_ml_input ic not implemented"]}function r(){throw[c("bs_caml_builtin_exceptions").failure,"caml_ml_input_char not implemnted"]}function s(){return[i,[j,0]]}var t=undefined;g.$caret=h;g.stdin=t;g.stdout=i;g.stderr=j;g.caml_ml_open_descriptor_in=k;g.caml_ml_open_descriptor_out=l;g.caml_ml_flush=m;g.node_std_output=n;g.caml_ml_output=o;g.caml_ml_output_char=p;g.caml_ml_input=q;g.caml_ml_input_char=r;g.caml_ml_out_channels_list=s}),null);
__d("bs_caml_missing_polyfill",[],(function a(b,c,d,e,f,g){"use strict";var h=function h(i){throw new Error(i)};g.not_implemented=h}),null);
__d("bs_caml_sys",["bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(q){var r=typeof process==="undefined"?undefined:process;if(r!==undefined){var s=r.env[q];if(s!==undefined)return s;else throw c("bs_caml_builtin_exceptions").not_found}else throw c("bs_caml_builtin_exceptions").not_found}function i(){var q=typeof process==="undefined"?undefined:process;if(q!==undefined)return q.uptime();else return-1}function j(){return[((Date.now()|0)^4294967295)*Math.random()|0]}function k(){return 127}function l(){var q=typeof process==="undefined"?undefined:process;if(q!==undefined)return q.cwd();else return"/"}function m(){var q=typeof process==="undefined"?undefined:process;if(q!==undefined)if(q.argv==null)return["",[""]];else return[q.argv[0],q.argv];else return["",[""]]}function n(q){var r=typeof process==="undefined"?undefined:process;if(r!==undefined)return r.exit(q);else return 0}function o(){throw[c("bs_caml_builtin_exceptions").failure,"caml_sys_is_directory not implemented"]}function p(){throw[c("bs_caml_builtin_exceptions").failure,"caml_sys_file_exists not implemented"]}g.caml_sys_getenv=h;g.caml_sys_time=i;g.caml_sys_random_seed=j;g.caml_sys_system_command=k;g.caml_sys_getcwd=l;g.caml_sys_get_argv=m;g.caml_sys_exit=n;g.caml_sys_is_directory=o;g.caml_sys_file_exists=p}),null);
__d("bs_camlinternalFormatBasics",["bs_block"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k){__p&&__p();if(typeof k==="number")return 0;else switch(k.tag|0){case 0:return c("bs_block").__(0,[h(k[0])]);case 1:return c("bs_block").__(1,[h(k[0])]);case 2:return c("bs_block").__(2,[h(k[0])]);case 3:return c("bs_block").__(3,[h(k[0])]);case 4:return c("bs_block").__(4,[h(k[0])]);case 5:return c("bs_block").__(5,[h(k[0])]);case 6:return c("bs_block").__(6,[h(k[0])]);case 7:return c("bs_block").__(7,[h(k[0])]);case 8:return c("bs_block").__(8,[k[0],h(k[1])]);case 9:var l=k[0];return c("bs_block").__(9,[l,l,h(k[2])]);case 10:return c("bs_block").__(10,[h(k[0])]);case 11:return c("bs_block").__(11,[h(k[0])]);case 12:return c("bs_block").__(12,[h(k[0])]);case 13:return c("bs_block").__(13,[h(k[0])]);case 14:return c("bs_block").__(14,[h(k[0])])}}function i(k,l){__p&&__p();if(typeof k==="number")return l;else switch(k.tag|0){case 0:return c("bs_block").__(0,[i(k[0],l)]);case 1:return c("bs_block").__(1,[i(k[0],l)]);case 2:return c("bs_block").__(2,[i(k[0],l)]);case 3:return c("bs_block").__(3,[i(k[0],l)]);case 4:return c("bs_block").__(4,[i(k[0],l)]);case 5:return c("bs_block").__(5,[i(k[0],l)]);case 6:return c("bs_block").__(6,[i(k[0],l)]);case 7:return c("bs_block").__(7,[i(k[0],l)]);case 8:return c("bs_block").__(8,[k[0],i(k[1],l)]);case 9:return c("bs_block").__(9,[k[0],k[1],i(k[2],l)]);case 10:return c("bs_block").__(10,[i(k[0],l)]);case 11:return c("bs_block").__(11,[i(k[0],l)]);case 12:return c("bs_block").__(12,[i(k[0],l)]);case 13:return c("bs_block").__(13,[i(k[0],l)]);case 14:return c("bs_block").__(14,[i(k[0],l)])}}function j(k,l){__p&&__p();if(typeof k==="number")return l;else switch(k.tag|0){case 0:return c("bs_block").__(0,[j(k[0],l)]);case 1:return c("bs_block").__(1,[j(k[0],l)]);case 2:return c("bs_block").__(2,[k[0],j(k[1],l)]);case 3:return c("bs_block").__(3,[k[0],j(k[1],l)]);case 4:return c("bs_block").__(4,[k[0],k[1],k[2],j(k[3],l)]);case 5:return c("bs_block").__(5,[k[0],k[1],k[2],j(k[3],l)]);case 6:return c("bs_block").__(6,[k[0],k[1],k[2],j(k[3],l)]);case 7:return c("bs_block").__(7,[k[0],k[1],k[2],j(k[3],l)]);case 8:return c("bs_block").__(8,[k[0],k[1],k[2],j(k[3],l)]);case 9:return c("bs_block").__(9,[j(k[0],l)]);case 10:return c("bs_block").__(10,[j(k[0],l)]);case 11:return c("bs_block").__(11,[k[0],j(k[1],l)]);case 12:return c("bs_block").__(12,[k[0],j(k[1],l)]);case 13:return c("bs_block").__(13,[k[0],k[1],j(k[2],l)]);case 14:return c("bs_block").__(14,[k[0],k[1],j(k[2],l)]);case 15:return c("bs_block").__(15,[j(k[0],l)]);case 16:return c("bs_block").__(16,[j(k[0],l)]);case 17:return c("bs_block").__(17,[k[0],j(k[1],l)]);case 18:return c("bs_block").__(18,[k[0],j(k[1],l)]);case 19:return c("bs_block").__(19,[j(k[0],l)]);case 20:return c("bs_block").__(20,[k[0],k[1],j(k[2],l)]);case 21:return c("bs_block").__(21,[k[0],j(k[1],l)]);case 22:return c("bs_block").__(22,[j(k[0],l)]);case 23:return c("bs_block").__(23,[k[0],j(k[1],l)]);case 24:return c("bs_block").__(24,[k[0],k[1],j(k[2],l)])}}g.concat_fmtty=i;g.erase_rel=h;g.concat_fmt=j}),null);
__d("bs_pervasives",["bs_curry","bs_caml_io","bs_caml_sys","bs_caml_format","bs_caml_string","bs_caml_exceptions","bs_caml_missing_polyfill","bs_caml_builtin_exceptions","bs_camlinternalFormatBasics"],(function aa(ba,a,ca,da,ea,b){"use strict";__p&&__p();function c(R){throw[a("bs_caml_builtin_exceptions").failure,R]}function d(R){throw[a("bs_caml_builtin_exceptions").invalid_argument,R]}var e=a("bs_caml_exceptions").create("Pervasives.Exit");function f(R){if(R>=0)return R;else return-R|0}function g(R){return R^-1}var h=-2147483648;function i(R){if(R<0||R>255)throw[a("bs_caml_builtin_exceptions").invalid_argument,"char_of_int"];else return R}function j(R){if(R)return"true";else return"false"}function k(R){switch(R){case"false":return 0;case"true":return 1;default:throw[a("bs_caml_builtin_exceptions").invalid_argument,"bool_of_string"]}}function l(R){return""+R}function m(R){__p&&__p();var S=R.length,T=0;while(true){var U=T;if(U>=S)return R+".";else{var V=a("bs_caml_string").get(R,U);if(V>=48)if(V>=58)return R;else{T=U+1|0;continue}else if(V!==45)return R;else{T=U+1|0;continue}}}}function n(R){return m(a("bs_caml_format").caml_format_float("%.12g",R))}function o(R,S){if(R)return[R[0],o(R[1],S)];else return S}var p=a("bs_caml_io").stdin,q=a("bs_caml_io").stdout,r=a("bs_caml_io").stderr;function s(R,S,T){return a("bs_caml_io").caml_ml_open_descriptor_out(a("bs_caml_missing_polyfill").not_implemented("caml_sys_open not implemented by bucklescript yet\n"))}function t(R){return s([1,[3,[4,[7,0]]]],438,R)}function u(R){return s([1,[3,[4,[6,0]]]],438,R)}function v(){__p&&__p();var R=a("bs_caml_io").caml_ml_out_channels_list(0);while(true){var S=R;if(S){try{a("bs_caml_io").caml_ml_flush(S[0])}catch(T){}R=S[1];continue}else return 0}}function w(R,S){return a("bs_caml_io").caml_ml_output(R,S,0,S.length)}function x(R,S){return a("bs_caml_io").caml_ml_output(R,S,0,S.length)}function y(R,S,T,U){if(T<0||U<0||T>(S.length-U|0))throw[a("bs_caml_builtin_exceptions").invalid_argument,"output"];else return a("bs_caml_io").caml_ml_output(R,S,T,U)}function z(R,S,T,U){if(T<0||U<0||T>(S.length-U|0))throw[a("bs_caml_builtin_exceptions").invalid_argument,"output_substring"];else return a("bs_caml_io").caml_ml_output(R,S,T,U)}function A(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_output_value not implemented by bucklescript yet\n")}function B(R){a("bs_caml_io").caml_ml_flush(R);return a("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}function C(R){try{a("bs_caml_io").caml_ml_flush(R)}catch(S){}try{return a("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}catch(T){return 0}}function D(R,S,T){return a("bs_caml_io").caml_ml_open_descriptor_in(a("bs_caml_missing_polyfill").not_implemented("caml_sys_open not implemented by bucklescript yet\n"))}function E(R){return D([0,[7,0]],0,R)}function F(R){return D([0,[6,0]],0,R)}function G(R,S,T,U){if(T<0||U<0||T>(S.length-U|0))throw[a("bs_caml_builtin_exceptions").invalid_argument,"input"];else return a("bs_caml_missing_polyfill").not_implemented("caml_ml_input not implemented by bucklescript yet\n")}function H(R,S,T,U){__p&&__p();while(true){var V=U,W=T;if(V<=0)return 0;else{var X=a("bs_caml_missing_polyfill").not_implemented("caml_ml_input not implemented by bucklescript yet\n");if(X){U=V-X|0;T=W+X|0;continue}else throw a("bs_caml_builtin_exceptions").end_of_file}}}function I(R,S,T,U){if(T<0||U<0||T>(S.length-U|0))throw[a("bs_caml_builtin_exceptions").invalid_argument,"really_input"];else return H(R,S,T,U)}function J(R,S){var T=a("bs_caml_string").caml_create_string(S);I(R,T,0,S);return a("bs_caml_string").bytes_to_string(T)}function K(R){__p&&__p();var S=function S(U,V,W){__p&&__p();while(true){var X=W,Y=V;if(X){var Z=X[0],$=Z.length;a("bs_caml_string").caml_blit_bytes(Z,0,U,Y-$|0,$);W=X[1];V=Y-$|0;continue}else return U}},T=function T(U,V){__p&&__p();while(true){var W=V,X=U,Y=a("bs_caml_missing_polyfill").not_implemented("caml_ml_input_scan_line not implemented by bucklescript yet\n");if(Y)if(Y>0){var Z=a("bs_caml_string").caml_create_string(Y-1|0);a("bs_caml_missing_polyfill").not_implemented("caml_ml_input not implemented by bucklescript yet\n");a("bs_caml_io").caml_ml_input_char(R);if(X){var $=(W+Y|0)-1|0;return S(a("bs_caml_string").caml_create_string($),$,[Z,X])}else return Z}else{var bb=a("bs_caml_string").caml_create_string(-Y|0);a("bs_caml_missing_polyfill").not_implemented("caml_ml_input not implemented by bucklescript yet\n");V=W-Y|0;U=[bb,X];continue}else if(X)return S(a("bs_caml_string").caml_create_string(W),W,X);else throw a("bs_caml_builtin_exceptions").end_of_file}};return a("bs_caml_string").bytes_to_string(T(0,0))}function L(){try{return a("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}catch(R){return 0}}function M(R){return a("bs_caml_io").caml_ml_output_char(q,R)}function N(R){return x(q,R)}function O(R){return w(q,R)}function fa(R){return x(q,""+R)}function ga(R){return x(q,m(a("bs_caml_format").caml_format_float("%.12g",R)))}function ha(R){return 0}function ia(){a("bs_caml_io").caml_ml_output_char(q,10);return a("bs_caml_io").caml_ml_flush(q)}function ja(R){return a("bs_caml_io").caml_ml_output_char(r,R)}function ka(R){return x(r,R)}function la(R){return w(r,R)}function ma(R){return x(r,""+R)}function na(R){return x(r,m(a("bs_caml_format").caml_format_float("%.12g",R)))}function oa(R){return 0}function pa(){a("bs_caml_io").caml_ml_output_char(r,10);return a("bs_caml_io").caml_ml_flush(r)}function qa(){a("bs_caml_io").caml_ml_flush(q);return K(p)}function ra(){return a("bs_caml_format").caml_int_of_string((a("bs_caml_io").caml_ml_flush(q),K(p)))}function sa(){return a("bs_caml_format").caml_float_of_string((a("bs_caml_io").caml_ml_flush(q),K(p)))}function ta(R){return R[1]}function ua(R,S){return[a("bs_camlinternalFormatBasics").concat_fmt(R[0],S[0]),R[1]+("%,"+S[1])]}var P=[v];function va(R){var S=P[0];P[0]=function(){a("bs_curry")._1(R,0);return a("bs_curry")._1(S,0)};return 0}function Q(){return a("bs_curry")._1(P[0],0)}function wa(R){Q(0);return a("bs_caml_sys").caml_sys_exit(R)}var xa=2147483647,ya=Infinity,za=-Infinity,Aa=NaN,Ba=Number.MAX_VALUE,Ca=Number.MIN_VALUE,Da=2220446049250313e-31,Ea=a("bs_caml_io").caml_ml_flush,Fa=a("bs_caml_io").caml_ml_output_char,Ga=a("bs_caml_io").caml_ml_output_char;function Ha(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_output_int not implemented by bucklescript yet\n")}function Ia(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_out not implemented by bucklescript yet\n")}function Ja(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_out not implemented by bucklescript yet\n")}function Ka(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n")}function La(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n")}var Ma=a("bs_caml_io").caml_ml_input_char,Na=a("bs_caml_io").caml_ml_input_char;function Oa(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_input_int not implemented by bucklescript yet\n")}function Pa(){return a("bs_caml_missing_polyfill").not_implemented("caml_input_value not implemented by bucklescript yet\n")}function Qa(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_in not implemented by bucklescript yet\n")}function Ra(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_in not implemented by bucklescript yet\n")}function Sa(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n")}function Ta(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n")}function Ua(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n")}function Va(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_out_64 not implemented by bucklescript yet\n")}function Wa(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_out_64 not implemented by bucklescript yet\n")}function Xa(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n")}function Ya(R,S){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_in_64 not implemented by bucklescript yet\n")}function Za(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_in_64 not implemented by bucklescript yet\n")}function $a(){return a("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n")}var ab=[Va,Wa,Xa,Ya,Za,$a];b.invalid_arg=d;b.failwith=c;b.Exit=e;b.abs=f;b.max_int=xa;b.min_int=h;b.lnot=g;b.infinity=ya;b.neg_infinity=za;b.nan=Aa;b.max_float=Ba;b.min_float=Ca;b.epsilon_float=Da;b.char_of_int=i;b.string_of_bool=j;b.bool_of_string=k;b.string_of_int=l;b.string_of_float=n;b.$at=o;b.stdin=p;b.stdout=q;b.stderr=r;b.print_char=M;b.print_string=N;b.print_bytes=O;b.print_int=fa;b.print_float=ga;b.print_endline=ha;b.print_newline=ia;b.prerr_char=ja;b.prerr_string=ka;b.prerr_bytes=la;b.prerr_int=ma;b.prerr_float=na;b.prerr_endline=oa;b.prerr_newline=pa;b.read_line=qa;b.read_int=ra;b.read_float=sa;b.open_out=t;b.open_out_bin=u;b.open_out_gen=s;b.flush=Ea;b.flush_all=v;b.output_char=Fa;b.output_string=x;b.output_bytes=w;b.output=y;b.output_substring=z;b.output_byte=Ga;b.output_binary_int=Ha;b.output_value=A;b.seek_out=Ia;b.pos_out=Ja;b.out_channel_length=Ka;b.close_out=B;b.close_out_noerr=C;b.set_binary_mode_out=La;b.open_in=E;b.open_in_bin=F;b.open_in_gen=D;b.input_char=Ma;b.input_line=K;b.input=G;b.really_input=I;b.really_input_string=J;b.input_byte=Na;b.input_binary_int=Oa;b.input_value=Pa;b.seek_in=Qa;b.pos_in=Ra;b.in_channel_length=Sa;b.close_in=Ta;b.close_in_noerr=L;b.set_binary_mode_in=Ua;b.LargeFile=ab;b.string_of_format=ta;b.$caret$caret=ua;b.exit=wa;b.at_exit=va;b.valid_float_lexem=m;b.unsafe_really_input=H;b.do_at_exit=Q}),null);
__d("bs_list",["bs_curry","bs_caml_obj","bs_pervasives","bs_caml_builtin_exceptions"],(function aa(ba,a,ca,da,ea,b){"use strict";__p&&__p();function c(q){__p&&__p();var r=0,s=q;while(true){var t=s,u=r;if(t){s=t[1];r=u+1|0;continue}else return u}}function fa(q){if(q)return q[0];else throw[a("bs_caml_builtin_exceptions").failure,"hd"]}function ga(q){if(q)return q[1];else throw[a("bs_caml_builtin_exceptions").failure,"tl"]}function ha(q,r){__p&&__p();if(r<0)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.nth"];else{var s=q,t=r;while(true){var u=t,v=s;if(v)if(u){t=u-1|0;s=v[1];continue}else return v[0];else throw[a("bs_caml_builtin_exceptions").failure,"nth"]}}}function d(q,r){while(true){var s=r,t=q;if(t){r=[t[0],s];q=t[1];continue}else return s}}function ia(q){return d(q,0)}function e(q){if(q)return a("bs_pervasives").$at(q[0],e(q[1]));else return 0}function f(q,r){if(r){var s=a("bs_curry")._1(q,r[0]);return[s,f(q,r[1])]}else return 0}function g(q,r,s){if(s){var t=a("bs_curry")._2(r,q,s[0]);return[t,g(q+1|0,r,s[1])]}else return 0}function ja(q,r){return g(0,q,r)}function ka(q,r){__p&&__p();var s=0,t=r;while(true){var u=t,v=s;if(u){t=u[1];s=[a("bs_curry")._1(q,u[0]),v];continue}else return v}}function la(q,r){while(true){var s=r;if(s){a("bs_curry")._1(q,s[0]);r=s[1];continue}else return 0}}function ma(q,r){__p&&__p();var s=0,t=q,u=r;while(true){var v=u,w=s;if(v){a("bs_curry")._2(t,w,v[0]);u=v[1];s=w+1|0;continue}else return 0}}function na(q,r,s){while(true){var t=s,u=r;if(t){s=t[1];r=a("bs_curry")._2(q,u,t[0]);continue}else return u}}function h(q,r,s){if(r)return a("bs_curry")._2(q,r[0],h(q,r[1],s));else return s}function i(q,r,s){if(r)if(s){var t=a("bs_curry")._2(q,r[0],s[0]);return[t,i(q,r[1],s[1])]}else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.map2"];else if(s)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.map2"];else return 0}function oa(q,r,s){__p&&__p();var t=0,u=r,v=s;while(true){var w=v,x=u,y=t;if(x)if(w){v=w[1];u=x[1];t=[a("bs_curry")._2(q,x[0],w[0]),y];continue}else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.rev_map2"];else if(w)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.rev_map2"];else return y}}function pa(q,r,s){__p&&__p();while(true){var t=s,u=r;if(u)if(t){a("bs_curry")._2(q,u[0],t[0]);s=t[1];r=u[1];continue}else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.iter2"];else if(t)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.iter2"];else return 0}}function qa(q,r,s,t){__p&&__p();while(true){var u=t,v=s,w=r;if(v)if(u){t=u[1];s=v[1];r=a("bs_curry")._3(q,w,v[0],u[0]);continue}else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.fold_left2"];else if(u)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.fold_left2"];else return w}}function j(q,r,s,t){if(r)if(s)return a("bs_curry")._3(q,r[0],s[0],j(q,r[1],s[1],t));else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.fold_right2"];else if(s)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.fold_right2"];else return t}function ra(q,r){__p&&__p();while(true){var s=r;if(s)if(a("bs_curry")._1(q,s[0])){r=s[1];continue}else return 0;else return 1}}function sa(q,r){__p&&__p();while(true){var s=r;if(s)if(a("bs_curry")._1(q,s[0]))return 1;else{r=s[1];continue}else return 0}}function ta(q,r,s){__p&&__p();while(true){var t=s,u=r;if(u)if(t)if(a("bs_curry")._2(q,u[0],t[0])){s=t[1];r=u[1];continue}else return 0;else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.for_all2"];else if(t)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.for_all2"];else return 1}}function ua(q,r,s){__p&&__p();while(true){var t=s,u=r;if(u)if(t)if(a("bs_curry")._2(q,u[0],t[0]))return 1;else{s=t[1];r=u[1];continue}else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.exists2"];else if(t)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.exists2"];else return 0}}function va(q,r){__p&&__p();while(true){var s=r;if(s)if(a("bs_caml_obj").caml_compare(s[0],q)){r=s[1];continue}else return 1;else return 0}}function wa(q,r){__p&&__p();while(true){var s=r;if(s)if(s[0]===q)return 1;else{r=s[1];continue}else return 0}}function xa(q,r){__p&&__p();while(true){var s=r;if(s){var t=s[0];if(a("bs_caml_obj").caml_compare(t[0],q)){r=s[1];continue}else return t[1]}else throw a("bs_caml_builtin_exceptions").not_found}}function ya(q,r){__p&&__p();while(true){var s=r;if(s){var t=s[0];if(t[0]===q)return t[1];else{r=s[1];continue}}else throw a("bs_caml_builtin_exceptions").not_found}}function za(q,r){__p&&__p();while(true){var s=r;if(s)if(a("bs_caml_obj").caml_compare(s[0][0],q)){r=s[1];continue}else return 1;else return 0}}function Aa(q,r){__p&&__p();while(true){var s=r;if(s)if(s[0][0]===q)return 1;else{r=s[1];continue}else return 0}}function k(q,r){if(r){var s=r[1],t=r[0];if(a("bs_caml_obj").caml_compare(t[0],q))return[t,k(q,s)];else return s}else return 0}function l(q,r){if(r){var s=r[1],t=r[0];if(t[0]===q)return s;else return[t,l(q,s)]}else return 0}function Ba(q,r){__p&&__p();while(true){var s=r;if(s){var t=s[0];if(a("bs_curry")._1(q,t))return t;else{r=s[1];continue}}else throw a("bs_caml_builtin_exceptions").not_found}}function Ca(q){__p&&__p();return function(r){__p&&__p();var s=0,t=r;while(true){var u=t,v=s;if(u){var w=u[1],x=u[0];if(a("bs_curry")._1(q,x)){t=w;s=[x,v];continue}else{t=w;continue}}else return d(v,0)}}}function Da(q,r){__p&&__p();var s=0,t=0,u=r;while(true){var v=u,w=t,x=s;if(v){var y=v[1],z=v[0];if(a("bs_curry")._1(q,z)){u=y;s=[z,x];continue}else{u=y;t=[z,w];continue}}else return[d(x,0),d(w,0)]}}function Ea(q){if(q){var r=q[0],s=Ea(q[1]);return[[r[0],s[0]],[r[1],s[1]]]}else return[0,0]}function Fa(q,r){if(q)if(r)return[[q[0],r[0]],Fa(q[1],r[1])];else throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.combine"];else if(r)throw[a("bs_caml_builtin_exceptions").invalid_argument,"List.combine"];else return 0}function m(q,r,s){if(r)if(s){var t=s[0],u=r[0];if(a("bs_curry")._2(q,u,t)<=0)return[u,m(q,r[1],s)];else return[t,m(q,r,s[1])]}else return r;else return s}function n(q,r){__p&&__p();while(true){var s=r,t=q;if(t)if(s){r=s[1];q=t-1|0;continue}else throw[a("bs_caml_builtin_exceptions").assert_failure,["list.ml",223,11]];else return s}}function o(q,r){__p&&__p();var p=function p(u,r){__p&&__p();var v=0;if(u!==2)if(u!==3)v=1;else if(r){var w=r[1];if(w){var x=w[1];if(x){var y=x[0],z=w[0],A=r[0];if(a("bs_curry")._2(q,A,z)<=0)if(a("bs_curry")._2(q,z,y)<=0)return[A,[z,[y,0]]];else if(a("bs_curry")._2(q,A,y)<=0)return[A,[y,[z,0]]];else return[y,[A,[z,0]]];else if(a("bs_curry")._2(q,A,y)<=0)return[z,[A,[y,0]]];else if(a("bs_curry")._2(q,z,y)<=0)return[z,[y,[A,0]]];else return[y,[z,[A,0]]]}else v=1}else v=1}else v=1;else if(r){var B=r[1];if(B){var C=B[0],D=r[0];if(a("bs_curry")._2(q,D,C)<=0)return[D,[C,0]];else return[C,[D,0]]}else v=1}else v=1;if(v===1){var E=u>>1,F=u-E|0,G=n(E,r),H=s(E,r),I=s(F,G),J=H,K=I,L=0;while(true){var M=L,N=K,O=J;if(O)if(N){var P=N[0],Q=O[0];if(a("bs_curry")._2(q,Q,P)>0){L=[Q,M];J=O[1];continue}else{L=[P,M];K=N[1];continue}}else return d(O,M);else return d(N,M)}}},s=function s(u,r){__p&&__p();var v=0;if(u!==2)if(u!==3)v=1;else if(r){var w=r[1];if(w){var x=w[1];if(x){var y=x[0],z=w[0],A=r[0];if(a("bs_curry")._2(q,A,z)>0)if(a("bs_curry")._2(q,z,y)>0)return[A,[z,[y,0]]];else if(a("bs_curry")._2(q,A,y)>0)return[A,[y,[z,0]]];else return[y,[A,[z,0]]];else if(a("bs_curry")._2(q,A,y)>0)return[z,[A,[y,0]]];else if(a("bs_curry")._2(q,z,y)>0)return[z,[y,[A,0]]];else return[y,[z,[A,0]]]}else v=1}else v=1}else v=1;else if(r){var B=r[1];if(B){var C=B[0],D=r[0];if(a("bs_curry")._2(q,D,C)>0)return[D,[C,0]];else return[C,[D,0]]}else v=1}else v=1;if(v===1){var E=u>>1,F=u-E|0,G=n(E,r),H=p(E,r),I=p(F,G),J=H,K=I,L=0;while(true){var M=L,N=K,O=J;if(O)if(N){var P=N[0],Q=O[0];if(a("bs_curry")._2(q,Q,P)<=0){L=[Q,M];J=O[1];continue}else{L=[P,M];K=N[1];continue}}else return d(O,M);else return d(N,M)}}},t=c(r);if(t<2)return r;else return p(t,r)}function Ga(q,r){__p&&__p();var p=function p(u,r){__p&&__p();var v=0;if(u!==2)if(u!==3)v=1;else if(r){var w=r[1];if(w){var x=w[1];if(x){var y=x[0],z=w[0],A=r[0],B=a("bs_curry")._2(q,A,z);if(B)if(B<0){var C=a("bs_curry")._2(q,z,y);if(C)if(C<0)return[A,[z,[y,0]]];else{var D=a("bs_curry")._2(q,A,y);if(D)if(D<0)return[A,[y,[z,0]]];else return[y,[A,[z,0]]];else return[A,[z,0]]}else return[A,[z,0]]}else{var E=a("bs_curry")._2(q,A,y);if(E)if(E<0)return[z,[A,[y,0]]];else{var F=a("bs_curry")._2(q,z,y);if(F)if(F<0)return[z,[y,[A,0]]];else return[y,[z,[A,0]]];else return[z,[A,0]]}else return[z,[A,0]]}else{var G=a("bs_curry")._2(q,z,y);if(G)if(G<0)return[z,[y,0]];else return[y,[z,0]];else return[z,0]}}else v=1}else v=1}else v=1;else if(r){var H=r[1];if(H){var I=H[0],J=r[0],K=a("bs_curry")._2(q,J,I);if(K)if(K<0)return[J,[I,0]];else return[I,[J,0]];else return[J,0]}else v=1}else v=1;if(v===1){var L=u>>1,M=u-L|0,N=n(L,r),O=s(L,r),P=s(M,N),Q=O,R=P,S=0;while(true){var T=S,U=R,V=Q;if(V)if(U){var W=U[1],X=U[0],Y=V[1],Z=V[0],$=a("bs_curry")._2(q,Z,X);if($)if($>0){S=[Z,T];Q=Y;continue}else{S=[X,T];R=W;continue}else{S=[Z,T];R=W;Q=Y;continue}}else return d(V,T);else return d(U,T)}}},s=function s(u,r){__p&&__p();var v=0;if(u!==2)if(u!==3)v=1;else if(r){var w=r[1];if(w){var x=w[1];if(x){var y=x[0],z=w[0],A=r[0],B=a("bs_curry")._2(q,A,z);if(B)if(B>0){var C=a("bs_curry")._2(q,z,y);if(C)if(C>0)return[A,[z,[y,0]]];else{var D=a("bs_curry")._2(q,A,y);if(D)if(D>0)return[A,[y,[z,0]]];else return[y,[A,[z,0]]];else return[A,[z,0]]}else return[A,[z,0]]}else{var E=a("bs_curry")._2(q,A,y);if(E)if(E>0)return[z,[A,[y,0]]];else{var F=a("bs_curry")._2(q,z,y);if(F)if(F>0)return[z,[y,[A,0]]];else return[y,[z,[A,0]]];else return[z,[A,0]]}else return[z,[A,0]]}else{var G=a("bs_curry")._2(q,z,y);if(G)if(G>0)return[z,[y,0]];else return[y,[z,0]];else return[z,0]}}else v=1}else v=1}else v=1;else if(r){var H=r[1];if(H){var I=H[0],J=r[0],K=a("bs_curry")._2(q,J,I);if(K)if(K>0)return[J,[I,0]];else return[I,[J,0]];else return[J,0]}else v=1}else v=1;if(v===1){var L=u>>1,M=u-L|0,N=n(L,r),O=p(L,r),P=p(M,N),Q=O,R=P,S=0;while(true){var T=S,U=R,V=Q;if(V)if(U){var W=U[1],X=U[0],Y=V[1],Z=V[0],$=a("bs_curry")._2(q,Z,X);if($)if($<0){S=[Z,T];Q=Y;continue}else{S=[X,T];R=W;continue}else{S=[Z,T];R=W;Q=Y;continue}}else return d(V,T);else return d(U,T)}}},t=c(r);if(t<2)return r;else return p(t,r)}var Ha=a("bs_pervasives").$at,Ia=e,Ja=Ca,p=o,Ka=o;b.length=c;b.hd=fa;b.tl=ga;b.nth=ha;b.rev=ia;b.append=Ha;b.rev_append=d;b.concat=Ia;b.flatten=e;b.iter=la;b.iteri=ma;b.map=f;b.mapi=ja;b.rev_map=ka;b.fold_left=na;b.fold_right=h;b.iter2=pa;b.map2=i;b.rev_map2=oa;b.fold_left2=qa;b.fold_right2=j;b.for_all=ra;b.exists=sa;b.for_all2=ta;b.exists2=ua;b.mem=va;b.memq=wa;b.find=Ba;b.filter=Ja;b.find_all=Ca;b.partition=Da;b.assoc=xa;b.assq=ya;b.mem_assoc=za;b.mem_assq=Aa;b.remove_assoc=k;b.remove_assq=l;b.split=Ea;b.combine=Fa;b.sort=p;b.stable_sort=o;b.fast_sort=Ka;b.sort_uniq=Ga;b.merge=m}),null);
__d("bs_bytes",["bs_char","bs_list","bs_curry","bs_caml_obj","bs_caml_int32","bs_caml_string","bs_caml_primitive","bs_caml_builtin_exceptions"],(function a(aa,b,ba,ca,da,c){"use strict";__p&&__p();function d(P,Q){var R=b("bs_caml_string").caml_create_string(P);b("bs_caml_string").caml_fill_string(R,0,P,Q);return R}function e(P,Q){var R=b("bs_caml_string").caml_create_string(P);for(var S=0,T=P-1|0;S<=T;++S)R[S]=b("bs_curry")._1(Q,S);return R}var f=[];function g(P){var Q=P.length,R=b("bs_caml_string").caml_create_string(Q);b("bs_caml_string").caml_blit_bytes(P,0,R,0,Q);return R}function h(P){return b("bs_caml_string").bytes_to_string(g(P))}function i(P){return g(b("bs_caml_string").bytes_of_string(P))}function j(P,Q,R){if(Q<0||R<0||Q>(P.length-R|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.sub / Bytes.sub"];else{var S=b("bs_caml_string").caml_create_string(R);b("bs_caml_string").caml_blit_bytes(P,Q,S,0,R);return S}}function k(P,Q,R){return b("bs_caml_string").bytes_to_string(j(P,Q,R))}function l(P,Q,R){var S=(P.length+Q|0)+R|0,T=b("bs_caml_string").caml_create_string(S),U=Q<0?[-Q|0,0]:[0,Q],V=U[1],W=U[0],X=b("bs_caml_primitive").caml_int_min(P.length-W|0,S-V|0);if(X>0)b("bs_caml_string").caml_blit_bytes(P,W,T,V,X);return T}function m(P,Q,R,S){if(Q<0||R<0||Q>(P.length-R|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.fill / Bytes.fill"];else return b("bs_caml_string").caml_fill_string(P,Q,R,S)}function n(P,Q,R,S,T){if(T<0||Q<0||Q>(P.length-T|0)||S<0||S>(R.length-T|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Bytes.blit"];else return b("bs_caml_string").caml_blit_bytes(P,Q,R,S,T)}function o(P,Q,R,S,T){if(T<0||Q<0||Q>(P.length-T|0)||S<0||S>(R.length-T|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.blit / Bytes.blit_string"];else return b("bs_caml_string").caml_blit_string(P,Q,R,S,T)}function p(P,Q){for(var R=0,S=Q.length-1|0;R<=S;++R)b("bs_curry")._1(P,Q[R]);return 0}function q(P,Q){for(var R=0,S=Q.length-1|0;R<=S;++R)b("bs_curry")._2(P,R,Q[R]);return 0}function r(P,Q){__p&&__p();if(Q){var R=Q[0],S=[0],T=[0];b("bs_list").iter(function(W){S[0]=S[0]+1|0;T[0]=T[0]+W.length|0;return 0},Q);var U=b("bs_caml_string").caml_create_string(T[0]+b("bs_caml_int32").imul(P.length,S[0]-1|0)|0);b("bs_caml_string").caml_blit_bytes(R,0,U,0,R.length);var V=[R.length];b("bs_list").iter(function(W){b("bs_caml_string").caml_blit_bytes(P,0,U,V[0],P.length);V[0]=V[0]+P.length|0;b("bs_caml_string").caml_blit_bytes(W,0,U,V[0],W.length);V[0]=V[0]+W.length|0;return 0},Q[1]);return U}else return f}function s(P,Q){return P.concat(Q)}function t(P){var Q=P-9|0;if(Q>4||Q<0)if(Q!==23)return 0;else return 1;else if(Q!==2)return 1;else return 0}function u(P){var Q=P.length,R=0;while(R<Q&&t(P[R]))R=R+1|0;var S=Q-1|0;while(S>=R&&t(P[S]))S=S-1|0;if(S>=R)return j(P,R,(S-R|0)+1|0);else return f}function v(P){__p&&__p();var Q=0;for(var R=0,S=P.length-1|0;R<=S;++R){var T=P[R],U;if(T>=32){var V=T-34|0;U=V>58||V<0?V>=93?4:1:V>57||V<1?2:1}else U=T>=11?T!==13?4:2:T>=8?2:4;Q=Q+U|0}if(Q===P.length)return g(P);else{var W=b("bs_caml_string").caml_create_string(Q);Q=0;for(var X=0,Y=P.length-1|0;X<=Y;++X){var Z=P[X],$=0;if(Z>=35)if(Z!==92)if(Z>=127)$=1;else W[Q]=Z;else $=2;else if(Z>=32)if(Z>=34)$=2;else W[Q]=Z;else if(Z>=14)$=1;else switch(Z){case 8:W[Q]=92;Q=Q+1|0;W[Q]=98;break;case 9:W[Q]=92;Q=Q+1|0;W[Q]=116;break;case 10:W[Q]=92;Q=Q+1|0;W[Q]=110;break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:$=1;break;case 13:W[Q]=92;Q=Q+1|0;W[Q]=114;break}switch($){case 1:W[Q]=92;Q=Q+1|0;W[Q]=48+(Z/100|0)|0;Q=Q+1|0;W[Q]=48+(Z/10|0)%10|0;Q=Q+1|0;W[Q]=48+Z%10|0;break;case 2:W[Q]=92;Q=Q+1|0;W[Q]=Z;break}Q=Q+1|0}return W}}function w(P,Q){var R=Q.length;if(R){var S=b("bs_caml_string").caml_create_string(R);for(var T=0,U=R-1|0;T<=U;++T)S[T]=b("bs_curry")._1(P,Q[T]);return S}else return Q}function x(P,Q){var R=Q.length;if(R){var S=b("bs_caml_string").caml_create_string(R);for(var T=0,U=R-1|0;T<=U;++T)S[T]=b("bs_curry")._2(P,T,Q[T]);return S}else return Q}function y(P){return w(b("bs_char").uppercase,P)}function z(P){return w(b("bs_char").lowercase,P)}function A(P,Q){if(Q.length){var R=g(Q);R[0]=b("bs_curry")._1(P,Q[0]);return R}else return Q}function B(P){return A(b("bs_char").uppercase,P)}function C(P){return A(b("bs_char").lowercase,P)}function D(P,Q,R,S){__p&&__p();while(true){var T=R;if(T>=Q)throw b("bs_caml_builtin_exceptions").not_found;else if(P[T]===S)return T;else{R=T+1|0;continue}}}function E(P,Q){return D(P,P.length,0,Q)}function F(P,Q,R){var S=P.length;if(Q<0||Q>S)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.index_from / Bytes.index_from"];else return D(P,S,Q,R)}function G(P,Q,R){__p&&__p();while(true){var S=Q;if(S<0)throw b("bs_caml_builtin_exceptions").not_found;else if(P[S]===R)return S;else{Q=S-1|0;continue}}}function H(P,Q){return G(P,P.length-1|0,Q)}function I(P,Q,R){if(Q<-1||Q>=P.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.rindex_from / Bytes.rindex_from"];else return G(P,Q,R)}function J(P,Q,R){var S=P.length;if(Q<0||Q>S)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.contains_from / Bytes.contains_from"];else try{D(P,S,Q,R);return 1}catch(T){if(T===b("bs_caml_builtin_exceptions").not_found)return 0;else throw T}}function K(P,Q){return J(P,0,Q)}function L(P,Q,R){if(Q<0||Q>=P.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.rcontains_from / Bytes.rcontains_from"];else try{G(P,Q,R);return 1}catch(S){if(S===b("bs_caml_builtin_exceptions").not_found)return 0;else throw S}}var M=b("bs_caml_obj").caml_compare,N=b("bs_caml_string").bytes_to_string,O=b("bs_caml_string").bytes_of_string;c.make=d;c.init=e;c.empty=f;c.copy=g;c.of_string=i;c.to_string=h;c.sub=j;c.sub_string=k;c.extend=l;c.fill=m;c.blit=n;c.blit_string=o;c.concat=r;c.cat=s;c.iter=p;c.iteri=q;c.map=w;c.mapi=x;c.trim=u;c.escaped=v;c.index=E;c.rindex=H;c.index_from=F;c.rindex_from=I;c.contains=K;c.contains_from=J;c.rcontains_from=L;c.uppercase=y;c.lowercase=z;c.capitalize=B;c.uncapitalize=C;c.compare=M;c.unsafe_to_string=N;c.unsafe_of_string=O}),null);
__d("bs_string",["bs_list","bs_bytes","bs_caml_int32","bs_caml_string","bs_caml_primitive"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(H,I){return c("bs_caml_string").bytes_to_string(c("bs_bytes").make(H,I))}function i(H,I){return c("bs_caml_string").bytes_to_string(c("bs_bytes").init(H,I))}function j(H){return c("bs_caml_string").bytes_to_string(c("bs_bytes").copy(c("bs_caml_string").bytes_of_string(H)))}function k(H,I,J){return c("bs_caml_string").bytes_to_string(c("bs_bytes").sub(c("bs_caml_string").bytes_of_string(H),I,J))}function l(H,I){__p&&__p();if(I){var J=I[0],K=[0],L=[0];c("bs_list").iter(function(O){K[0]=K[0]+1|0;L[0]=L[0]+O.length|0;return 0},I);var M=c("bs_caml_string").caml_create_string(L[0]+c("bs_caml_int32").imul(H.length,K[0]-1|0)|0);c("bs_caml_string").caml_blit_string(J,0,M,0,J.length);var N=[J.length];c("bs_list").iter(function(O){c("bs_caml_string").caml_blit_string(H,0,M,N[0],H.length);N[0]=N[0]+H.length|0;c("bs_caml_string").caml_blit_string(O,0,M,N[0],O.length);N[0]=N[0]+O.length|0;return 0},I[1]);return c("bs_caml_string").bytes_to_string(M)}else return""}function m(H,I){return c("bs_bytes").iter(H,c("bs_caml_string").bytes_of_string(I))}function n(H,I){return c("bs_bytes").iteri(H,c("bs_caml_string").bytes_of_string(I))}function o(H,I){return c("bs_caml_string").bytes_to_string(c("bs_bytes").map(H,c("bs_caml_string").bytes_of_string(I)))}function p(H,I){return c("bs_caml_string").bytes_to_string(c("bs_bytes").mapi(H,c("bs_caml_string").bytes_of_string(I)))}function q(H){var I=H-9|0;if(I>4||I<0)if(I!==23)return 0;else return 1;else if(I!==2)return 1;else return 0}function r(H){if(H===""||!(q(H.charCodeAt(0))||q(H.charCodeAt(H.length-1|0))))return H;else return c("bs_caml_string").bytes_to_string(c("bs_bytes").trim(c("bs_caml_string").bytes_of_string(H)))}function s(H){__p&&__p();var I=function I(J){__p&&__p();while(true){var K=J;if(K>=H.length)return 0;else{var L=H.charCodeAt(K);if(L>=32){var M=L-34|0;if(M>58||M<0)if(M>=93)return 1;else{J=K+1|0;continue}else if(M>57||M<1)return 1;else{J=K+1|0;continue}}else return 1}}};if(I(0))return c("bs_caml_string").bytes_to_string(c("bs_bytes").escaped(c("bs_caml_string").bytes_of_string(H)));else return H}function t(H,I){return c("bs_bytes").index(c("bs_caml_string").bytes_of_string(H),I)}function u(H,I){return c("bs_bytes").rindex(c("bs_caml_string").bytes_of_string(H),I)}function v(H,I,J){return c("bs_bytes").index_from(c("bs_caml_string").bytes_of_string(H),I,J)}function w(H,I,J){return c("bs_bytes").rindex_from(c("bs_caml_string").bytes_of_string(H),I,J)}function x(H,I){return c("bs_bytes").contains(c("bs_caml_string").bytes_of_string(H),I)}function y(H,I,J){return c("bs_bytes").contains_from(c("bs_caml_string").bytes_of_string(H),I,J)}function z(H,I,J){return c("bs_bytes").rcontains_from(c("bs_caml_string").bytes_of_string(H),I,J)}function A(H){return c("bs_caml_string").bytes_to_string(c("bs_bytes").uppercase(c("bs_caml_string").bytes_of_string(H)))}function B(H){return c("bs_caml_string").bytes_to_string(c("bs_bytes").lowercase(c("bs_caml_string").bytes_of_string(H)))}function C(H){return c("bs_caml_string").bytes_to_string(c("bs_bytes").capitalize(c("bs_caml_string").bytes_of_string(H)))}function D(H){return c("bs_caml_string").bytes_to_string(c("bs_bytes").uncapitalize(c("bs_caml_string").bytes_of_string(H)))}var E=c("bs_caml_primitive").caml_string_compare,F=c("bs_bytes").fill,G=c("bs_bytes").blit_string;g.make=h;g.init=i;g.copy=j;g.sub=k;g.fill=F;g.blit=G;g.concat=l;g.iter=m;g.iteri=n;g.map=o;g.mapi=p;g.trim=r;g.escaped=s;g.index=t;g.rindex=u;g.index_from=v;g.rindex_from=w;g.contains=x;g.contains_from=y;g.rcontains_from=z;g.uppercase=A;g.lowercase=B;g.capitalize=C;g.uncapitalize=D;g.compare=E}),null);
__d("FBID.bs",["invariant","bs_js_exn","bs_string","gkx","bs_js_types","bs_js_boolean"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(l){if(c("gkx")("AT5AGDWr7VWKZPg1PvTz69G07vIW7nWrxrA4PloGCgjyPuof8r7WUUsWLIKzWOZMmcJyN6U1BeEUXZmBqPUEAKAe")){c("bs_js_boolean").to_js_boolean(c("bs_js_types").test(l,4))||h(0);c("bs_js_boolean").to_js_boolean(+(l!=="0"))||h(0);var m=/^[0-9]+$/;c("bs_js_boolean").to_js_boolean(+m.test(l))||h(0)}return l}function j(l){try{return[i(l)]}catch(m){var n=c("bs_js_exn").internalToOCamlException(m);if(n[0]===c("bs_js_exn").$$Error)return 0;else throw n}}var k=c("bs_string").compare;g.compare=k;g.ofString=j;g.ofStringExn=i}),null);
__d("MercuryActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LOG_MESSAGE:"ma-type:log-message",USER_GENERATED_MESSAGE:"ma-type:user-generated-message",ADD_GROUP_ADMINS:"ma-type:add_group_admins",REMOVE_GROUP_ADMINS:"ma-type:remove_group_admins",CHANGE_READ_STATUS:"ma-type:change_read_status",MARK_THREAD_SEEN:"ma-type:mark_thread_seen",CHANGE_MUTE_SETTINGS:"ma-type:change-mute-settings",SEND_MESSAGE:"ma-type:send-message",DELETE_MESSAGES:"ma-type:delete-messages",DELETE_THREAD:"ma-type:delete-thread",UPDATE_SNIPPET:"ma-type:update-snippet",CHANGE_ARCHIVED_STATUS:"ma-type:change-archived-status",CHANGE_PAGE_FOLLOW_UP_STATUS:"ma-type:change-page-follow-up-status",CHANGE_FOLDER:"ma-type:change-folder",ADD_PARTICIPANTS:"ma-type:add-participants",CANCEL_ATTACHMENT_PLACEHOLDER:"ma-type:cancel-attachment-placeholder",CONFIRM_ATTACHMENT_PLACEHOLDER:"ma-type:confirm-attachment-placeholder",CHANGE_FLAG:"ma-type:change_flag",MOVE_PENDING_TO_INBOX:"ma-type:move_pending_to_inbox",CREATE_PAGE_ADMIN_NOTE:"ma-type:create-page-admin-note",REPLACE_MESSAGE:"ma-type:replace-message",UPDATE_CUSTOM_LIKE:"ma-type:update_custom_like",UNWRAP_MESSAGE:"ma-type:unwrap-message",JOINABLE_MODE:"ma-type:joinable-mode",APPROVAL_MODE:"ma-type:approval-mode",APPROVAL_QUEUE:"ma-type:approval-queue",IS_PIN_PROTECTED:"ma-type:is_pin_protected",REACTION_UPDATE:"ma-type:reaction-update",LIVE_LOCATION_UPDATE:"ma-type:live-location-update",UPDATE_RTC_CALL_DATA:"ma-type:update-rtc-call-data",UPDATE_COMM_STATUS:"ma-type:update-comm-status",EVENT_RSVP_CHANGED:"ma-type:event-rsvp-changed",BLOCK_STATUS_CHANGED:"ma-type:block-status-changed",UPDATE_COMM_ITEM_OWNER:"ma-type:update-comm-item-owner",MONTAGE_DIRECT_EXPIRE:"ma-type:montage-direct-expire",GROUPS_SYNC_STATUS_CHANGED:"ma-type:groups-sync-status-changed",GROUPS_SYNC_METADATA_UPDATE:"ma-type:groups-sync-metadata-update"})}),null);
__d("MercuryViewer",["CurrentUser","MercuryAssert"],(function a(b,c,d,e,f,g){"use strict";var h="fbid:"+c("CurrentUser").getID(),i={getID:function j(){return h},isViewer:function j(k){c("MercuryAssert").isParticipantID(k);return k===h}};f.exports=i}),null);
__d("bs_array",["bs_curry","bs_js_exn","bs_caml_array","bs_caml_exceptions","bs_caml_builtin_exceptions"],(function aa(ba,a,ca,da,ea,b){"use strict";__p&&__p();function c(x,y){if(x)if(x<0)throw[a("bs_caml_builtin_exceptions").invalid_argument,"Array.init"];else{var z=a("bs_caml_array").caml_make_vect(x,a("bs_curry")._1(y,0));for(var A=1,B=x-1|0;A<=B;++A)z[A]=a("bs_curry")._1(y,A);return z}else return[]}function d(x,y,c){var z=a("bs_caml_array").caml_make_vect(x,[]);for(var A=0,B=x-1|0;A<=B;++A)z[A]=a("bs_caml_array").caml_make_vect(y,c);return z}function e(x){var y=x.length;if(y)return a("bs_caml_array").caml_array_sub(x,0,y);else return[]}function f(x,y){var z=x.length;if(z)if(y.length)return x.concat(y);else return a("bs_caml_array").caml_array_sub(x,0,z);else return e(y)}function g(x,y,z){if(z<0||y>(x.length-z|0))throw[a("bs_caml_builtin_exceptions").invalid_argument,"Array.sub"];else return a("bs_caml_array").caml_array_sub(x,y,z)}function h(x,y,z,A){if(y<0||z<0||y>(x.length-z|0))throw[a("bs_caml_builtin_exceptions").invalid_argument,"Array.fill"];else{for(var B=y,C=(y+z|0)-1|0;B<=C;++B)x[B]=A;return 0}}function i(x,y,z,A,B){if(B<0||y<0||y>(x.length-B|0)||A<0||A>(z.length-B|0))throw[a("bs_caml_builtin_exceptions").invalid_argument,"Array.blit"];else return a("bs_caml_array").caml_array_blit(x,y,z,A,B)}function j(x,y){for(var z=0,A=y.length-1|0;z<=A;++z)a("bs_curry")._1(x,y[z]);return 0}function k(x,y){var z=y.length;if(z){var A=a("bs_caml_array").caml_make_vect(z,a("bs_curry")._1(x,y[0]));for(var B=1,C=z-1|0;B<=C;++B)A[B]=a("bs_curry")._1(x,y[B]);return A}else return[]}function l(x,y){for(var z=0,A=y.length-1|0;z<=A;++z)a("bs_curry")._2(x,z,y[z]);return 0}function m(x,y){var z=y.length;if(z){var A=a("bs_caml_array").caml_make_vect(z,a("bs_curry")._2(x,0,y[0]));for(var B=1,C=z-1|0;B<=C;++B)A[B]=a("bs_curry")._2(x,B,y[B]);return A}else return[]}function n(x){__p&&__p();var y=x.length-1|0,z=0;while(true){var A=z,B=y;if(B<0)return A;else{z=[x[B],A];y=B-1|0;continue}}}function o(x,y){while(true){var z=y,A=x;if(z){y=z[1];x=A+1|0;continue}else return A}}function p(x){__p&&__p();if(x){var y=a("bs_caml_array").caml_make_vect(o(0,x),x[0]),z=1,A=x[1];while(true){var B=A,C=z;if(B){y[C]=B[0];A=B[1];z=C+1|0;continue}else return y}}else return[]}function q(x,y,z){var A=y;for(var B=0,C=z.length-1|0;B<=C;++B)A=a("bs_curry")._2(x,A,z[B]);return A}function r(x,y,z){var A=z;for(var B=y.length-1|0;B>=0;--B)A=a("bs_curry")._2(x,y[B],A);return A}var s=a("bs_caml_exceptions").create("Array.Bottom");function t(x,y){__p&&__p();var z=function z(D,E){__p&&__p();var I=((E+E|0)+E|0)+1|0,J=I;if((I+2|0)<D){if(a("bs_curry")._2(x,a("bs_caml_array").caml_array_get(y,I),a("bs_caml_array").caml_array_get(y,I+1|0))<0)J=I+1|0;if(a("bs_curry")._2(x,a("bs_caml_array").caml_array_get(y,J),a("bs_caml_array").caml_array_get(y,I+2|0))<0)J=I+2|0;return J}else if((I+1|0)<D&&a("bs_curry")._2(x,a("bs_caml_array").caml_array_get(y,I),a("bs_caml_array").caml_array_get(y,I+1|0))<0)return I+1|0;else if(I<D)return I;else throw[s,E]},A=function A(D,E,G){__p&&__p();try{var I=D,J=E,H=G;while(true){var F=J,K=z(I,F);if(a("bs_curry")._2(x,a("bs_caml_array").caml_array_get(y,K),H)>0){a("bs_caml_array").caml_array_set(y,F,a("bs_caml_array").caml_array_get(y,K));J=K;continue}else return a("bs_caml_array").caml_array_set(y,F,H)}}catch(L){var M=a("bs_js_exn").internalToOCamlException(L);if(M[0]===s)return a("bs_caml_array").caml_array_set(y,M[1],G);else throw M}},B=function B(D,E){__p&&__p();try{var I=D,J=E;while(true){var F=J,K=z(I,F);a("bs_caml_array").caml_array_set(y,F,a("bs_caml_array").caml_array_get(y,K));J=K;continue}}catch(L){var M=a("bs_js_exn").internalToOCamlException(L);if(M[0]===s)return M[1];else throw M}},C=function C(I,G){__p&&__p();while(true){var E=I,J=(E-1|0)/3|0;if(E===J)throw[a("bs_caml_builtin_exceptions").assert_failure,["array.ml",168,4]];if(a("bs_curry")._2(x,a("bs_caml_array").caml_array_get(y,J),G)<0){a("bs_caml_array").caml_array_set(y,E,a("bs_caml_array").caml_array_get(y,J));if(J>0){I=J;continue}else return a("bs_caml_array").caml_array_set(y,0,G)}else return a("bs_caml_array").caml_array_set(y,E,G)}},D=y.length;for(var E=((D+1|0)/3|0)-1|0;E>=0;--E)A(D,E,a("bs_caml_array").caml_array_get(y,E));for(var F=D-1|0;F>=2;--F){var G=a("bs_caml_array").caml_array_get(y,F);a("bs_caml_array").caml_array_set(y,F,a("bs_caml_array").caml_array_get(y,0));C(B(F,0),G)}if(D>1){var H=a("bs_caml_array").caml_array_get(y,1);a("bs_caml_array").caml_array_set(y,1,a("bs_caml_array").caml_array_get(y,0));return a("bs_caml_array").caml_array_set(y,0,H)}else return 0}function u(x,y){__p&&__p();var z=function z(G,H,I,J,K,L,M){__p&&__p();var N=G+H|0,O=J+K|0,P=G,Q=a("bs_caml_array").caml_array_get(y,G),R=J,S=a("bs_caml_array").caml_array_get(I,J),T=M;while(true){var U=T,V=S,W=R,X=Q,Y=P;if(a("bs_curry")._2(x,X,V)<=0){a("bs_caml_array").caml_array_set(L,U,X);var Z=Y+1|0;if(Z<N){T=U+1|0;Q=a("bs_caml_array").caml_array_get(y,Z);P=Z;continue}else return i(I,W,L,U+1|0,O-W|0)}else{a("bs_caml_array").caml_array_set(L,U,V);var $=W+1|0;if($<O){T=U+1|0;S=a("bs_caml_array").caml_array_get(I,$);R=$;continue}else return i(y,Y,L,U+1|0,N-Y|0)}}},A=function A(G,H,I,J){for(var K=0,L=J-1|0;K<=L;++K){var M=a("bs_caml_array").caml_array_get(y,G+K|0),N=(I+K|0)-1|0;while(N>=I&&a("bs_curry")._2(x,a("bs_caml_array").caml_array_get(H,N),M)>0){a("bs_caml_array").caml_array_set(H,N+1|0,a("bs_caml_array").caml_array_get(H,N));N=N-1|0}a("bs_caml_array").caml_array_set(H,N+1|0,M)}return 0},B=function B(G,H,I,J){if(J<=5)return A(G,H,I,J);else{var D=J/2|0,E=J-D|0;B(G+D|0,H,I+D|0,E);B(G,y,G+E|0,D);return z(G+E|0,D,H,I+D|0,E,H,I)}},C=y.length;if(C<=5)return A(0,y,0,C);else{var D=C/2|0,E=C-D|0,F=a("bs_caml_array").caml_make_vect(E,a("bs_caml_array").caml_array_get(y,0));B(D,F,0,E);B(0,y,E,D);return z(E,D,F,0,E,y,0)}}var v=d,w=a("bs_caml_array").caml_array_concat,fa=u;b.init=c;b.make_matrix=d;b.create_matrix=v;b.append=f;b.concat=w;b.sub=g;b.copy=e;b.fill=h;b.blit=i;b.to_list=n;b.of_list=p;b.iter=j;b.map=k;b.iteri=l;b.mapi=m;b.fold_left=q;b.fold_right=r;b.sort=t;b.stable_sort=u;b.fast_sort=fa}),null);
__d("ReasonReact.bs",["bs_array","bs_curry","React","bs_caml_builtin_exceptions"],(function aa(ba,a,ca,da,ea,b){"use strict";__p&&__p();function c(H,I,J){var K=[H,I].concat(J);return a("React").createElement.apply(null,K)}var d=null;function e(){return 0}function f(H,I,J){a("bs_curry")._1(H,J);return a("bs_curry")._1(I,J)}var g=[e,f];function h(){return 0}function i(){return 0}function j(){return 0}function k(){return 0}function l(){return 1}function m(H){return H[1]}function n(){return"RenderNotImplemented"}function o(){return 0}function p(H,I){return 0}function q(){return 0}function r(H,I,J){var K=H.reasonProps;if(K==null)if(I)return[a("bs_curry")._1(I[0],H)];else throw[a("bs_caml_builtin_exceptions").invalid_argument,"A JS component called the Reason component "+(J+" which didn't implement the JS->Reason React props conversion.")];else return K}function s(H){__p&&__p();var I=H,J=[];while(true){var K=I;if(K){J.push(K[0]);I=K[1];continue}else return J.reverse()}}function t(H){__p&&__p();return a("React").createClass({displayName:H,subscriptions:null,self:function I(J,K){var L=this;return[L.handleMethod,J,K,L.sendMethod,L.onUnmountMethod]},transitionNextTotalState:function I(J,K){if(typeof K==="number")return[0,J];else switch(K.tag|0){case 0:return[0,{reasonState:K[0]}];case 1:return[[K[0]],J];case 2:return[[K[1]],{reasonState:K[0]}]}},getInitialState:function I(){var J=this,K=r(J.props,J.jsPropsToReason,H);return{reasonState:a("bs_curry")._1(K[0][10],0)}},componentDidMount:function I(){__p&&__p();var J=this,K=this,L=r(K.props,K.jsPropsToReason,H),M=L[0],N=K.state,O=N.reasonState,P=J.self(O,M[11]);if(M[13]!==q){var Q=s(a("bs_curry")._1(M[13],P)).map(function(Y){var F=Y[1],Z=a("bs_curry")._1(Y[0],0);return function(){return a("bs_curry")._1(F,Z)}});J.subscriptions=Q}if(M[4]!==h){var R=a("bs_curry")._1(M[4],P),S=J.transitionNextTotalState(N,R),T=S[1],U=S[0],V=+(T===N);if(V!==0)if(U){var W=U[0];return K.setState(function(){return d},J.handleMethod(function(Y,P){return a("bs_curry")._1(W,P)}))}else return 0;else if(U){var X=U[0];return K.setState(T,J.handleMethod(function(Y,P){return a("bs_curry")._1(X,P)}))}else return K.setState(T,null)}else return 0},componentDidUpdate:function I(J,K){var L=this,M=this,N=M.state,O=N.reasonState,P=M.props,Q=r(P,M.jsPropsToReason,H),R=Q[0];if(R[5]!==j){var S=+(J===P),T=S!==0?Q:r(J,M.jsPropsToReason,H),U=K.reasonState,V=L.self(O,R[11]),W=V[0],X=T[0][11],Y=V[3],Z=V[4],$=[W,U,X,Y,Z];return a("bs_curry")._1(R[5],[$,V])}else return 0},componentWillUnmount:function I(){__p&&__p();var J=this,K=this,L=r(K.props,K.jsPropsToReason,H),M=L[0],N=K.state,O=N.reasonState;if(M[6]!==k)a("bs_curry")._1(M[6],J.self(O,M[11]));var P=J.subscriptions;if(P!==null){P.forEach(function(F){return a("bs_curry")._1(F,0)});return 0}else return 0},componentWillUpdate:function I(J,K){var L=this,M=this,N=r(J,M.jsPropsToReason,H),O=N[0];if(O[7]!==i){var P=M.props,Q=+(J===P),R=Q!==0?N:r(P,M.jsPropsToReason,H),S=M.state,T=S.reasonState,U=K.reasonState,V=L.self(U,O[11]),W=V[0],X=R[0][11],Y=V[3],Z=V[4],$=[W,T,X,Y,Z];return a("bs_curry")._1(O[7],[$,V])}else return 0},componentWillReceiveProps:function I(J){__p&&__p();var K=this,L=this,M=r(J,L.jsPropsToReason,H),N=M[0];if(N[3]!==m){var O=L.props,P=+(J===O),Q=P!==0?M:r(O,L.jsPropsToReason,H),R=Q[0];return L.setState(function(S,T){var U=S.reasonState,V=K.self(U,R[11]),W=a("bs_curry")._1(N[3],V);if(W!==S)return{reasonState:W};else return S},null)}else return 0},shouldComponentUpdate:function I(J,K,L){var M=this,N=this,O=N.props,P=r(N.props,N.jsPropsToReason,H),Q=+(J===O),R=Q!==0?P:r(J,N.jsPropsToReason,H),S=R[0],T=K.reasonState,U=M.self(T,S[11]);if(S[8]!==l){var V=N.state,W=V.reasonState,X=U[0],Y=P[0][11],Z=U[3],$=U[4],pa=[X,W,Y,Z,$];return a("bs_curry")._1(S[8],[pa,U])}else return 1},onUnmountMethod:function I(J){var K=this,L=K.subscriptions;if(L!==null){L.push(J);return 0}else return K.subscriptions=[J]},handleMethod:function I(J){var K=this,L=this;return function(M){var N=L.state,O=N.reasonState,P=r(L.props,L.jsPropsToReason,H);return a("bs_curry")._2(J,M,K.self(O,P[0][11]))}},sendMethod:function I(J){__p&&__p();var K=this,L=this,M=r(L.props,L.jsPropsToReason,H),N=M[0];if(N[12]!==p){var O=[function(){return 0}],P=a("bs_curry")._1(N[12],J);return L.setState(function(Q,R){__p&&__p();var S=Q.reasonState,T=a("bs_curry")._1(P,S);if(T){var U=K.transitionNextTotalState(Q,T),V=U[1],W=U[0];if(W)O[0]=W[0];if(V!==Q)return V;else return d}else return d},K.handleMethod(function(Q,R){return a("bs_curry")._1(O[0],R)}))}else return 0},reduceMethod:function I(J,K){var L=this;return L.sendMethod(a("bs_curry")._1(J,K))},render:function I(){var J=this,K=this,L=r(K.props,K.jsPropsToReason,H),M=L[0],N=K.state,O=N.reasonState;return a("bs_curry")._1(M[9],J.self(O,M[11]))}})}function u(H){return[H,t(H),[0],m,h,j,k,i,l,n,o,0,p,q,0]}var v=u,w=u,x=u,y=u;function z(H,I,J){var K=H?H[0]:undefined,L=I?I[0]:undefined,M=[J],N=J[14];if(N)return a("bs_curry")._2(N[0],K,L);else return a("React").createElement(J[1],{key:K,ref:L,reasonProps:M})}function A(H,I){var J=H[1].prototype;J.jsPropsToReason=[I];return H[1]}var B=u("interop");function fa(H,I,J){var K=[function(M,N){var O=H,P=I,Q=J,R=M,S=N,T=Object.assign(Object.assign({},P),{ref:S,key:R}),U=[O,T].concat(Q);return a("React").createElement.apply(null,U)}],L=B.slice();L[14]=K;return L}function C(){var H=typeof window==="undefined"?undefined:window;if(H!==undefined){var I=H.location.pathname;switch(I){case"":case"/":return 0;default:var J=I.slice(1),K=J[J.length-1|0],L=K==="/"?J.slice(0,-1):J;return a("bs_array").to_list(L.split("/"))}}else return 0}function ga(){var H=typeof window==="undefined"?undefined:window;if(H!==undefined){var I=H.location.hash;switch(I){case"":case"#":return"";default:return I.slice(1)}}else return""}function ha(){var H=typeof window==="undefined"?undefined:window;if(H!==undefined){var I=H.location.search;switch(I){case"":case"?":return"";default:return I.slice(1)}}else return""}function ia(C){var H=typeof history==="undefined"?undefined:history,I=typeof window==="undefined"?undefined:window;if(H!==undefined&&I!==undefined){H.pushState(null,"",C);I.dispatchEvent(new Event("popstate"));return 0}else return 0}function D(){return[C(0),ga(0),ha(0)]}function ja(H){var I=typeof window==="undefined"?undefined:window;if(I!==undefined){var J=function J(){return a("bs_curry")._1(H,D(0))};I.addEventListener("popstate",J);return J}else return function(){return 0}}function ka(H){var I=typeof window==="undefined"?undefined:window;if(I!==undefined){I.removeEventListener("popstate",H);return 0}else return 0}function E(){return 0}function la(){return[E]}function ma(G,H){if(H[0]===E){H[0]=G;return[H]}else return 0}function F(H){H[0]=E;return 0}function G(H,I){return a("bs_curry")._1(H[0],I)}var na=[ia,ja,ka,D],oa=[la,ma,F,G];b.Callback=g;b.statelessComponent=v;b.statelessComponentWithRetainedProps=w;b.reducerComponent=x;b.reducerComponentWithRetainedProps=y;b.element=z;b.wrapReasonForJs=A;b.createDomElement=c;b.wrapJsForReason=fa;b.Router=na;b.RemoteAction=oa}),null);
__d("Utils.bs",["bs_array","bs_curry","bs_js_boolean","bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(q){if(q==null)return 0;else return+q}function i(q,r){if(q)return q[0];else return r}function j(q){return+((q==null?0:[q])!==0)}function k(q){if(q)return q[0];else return 0}function l(q){if(q==null)return 0;else return[+q]}function m(q){if(q)return c("bs_js_boolean").to_js_boolean(q[0]);else return undefined}function n(q){if(q)return c("bs_js_boolean").to_js_boolean(q[0]);else return false}function o(q,r){__p&&__p();var s=q,t=r,u=0;while(true){var v=u,w=t;if(w){var x=w[1],y=c("bs_curry")._1(s,w[0]);if(y){u=[y[0],v];t=x;continue}else{t=x;continue}}else return v}}function p(q){return c("bs_array").map(function(r){if(r)return r[0];else throw[c("bs_caml_builtin_exceptions").invalid_argument,"arrayCompact: sorry, something went wrong."]},q.filter(function(r){if(r)return 1;else return 0}))}g.isTruthy=h;g.$pipe$unknown=i;g.isDefined=j;g.isSomeTrue=k;g.nullUndefinedBooleanToOptionBool=l;g.optionBoolToNullUndefinedBoolean=m;g.optionBoolToBoolean=n;g.listFilterMap=o;g.arrayCompact=p}),null);
__d("bs_js_dict",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(n,o){delete n[o];return 0};function i(n){var o=Object.keys(n),p=o.length,j=new Array(p);for(var q=0,r=p-1|0;q<=r;++q){var s=o[q];j[q]=[s,n[s]]}return j}function j(n){var o=Object.keys(n),p=o.length,q=new Array(p);for(var r=0,s=p-1|0;r<=s;++r)q[r]=n[o[r]];return q}function k(i){__p&&__p();var n={},o=i;while(true){var p=o;if(p){var q=p[0];n[q[0]]=q[1];o=p[1];continue}else return n}}function l(i){var n={},o=i.length;for(var p=0,q=o-1|0;p<=q;++p){var r=i[p];n[r[0]]=r[1]}return n}function m(n,o){var p={},q=Object.keys(o),r=q.length;for(var s=0,t=r-1|0;s<=t;++s){var u=q[s];p[u]=n(o[u])}return p}g.unsafeDeleteKey=h;g.entries=i;g.values=j;g.fromList=k;g.fromArray=l;g.map=m}),null);
__d("bs_js_primitive",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(n){if(n===null)return 1;else return+(n===undefined)}function i(n){if(n===null||n===undefined)return 0;else return[n]}function j(n){if(n===undefined)return 0;else return[n]}function k(n){if(n===null)return 0;else return[n]}function l(n){if(n)return n[0];else return undefined}function m(n){if(n)return n[0][1];else return undefined}g.is_nil_undef=h;g.null_undefined_to_opt=i;g.undefined_to_opt=j;g.null_to_opt=k;g.option_get=l;g.option_get_unwrap=m}),null);
__d("MessengerState.bs",["FBID.bs","bs_list","bs_array","bs_block","bs_curry","Utils.bs","Arbiter","bs_js_dict","bs_caml_obj","FBIDCheck","MercuryIDs","CurrentUser","ReasonReact.bs","bs_js_primitive","MessagingTag","TypingStates","MercuryViewer","ChannelConstants","MercuryActionType","MercuryThreadIDMap","MercuryPayloadSource","setTimeoutAcrossTransitions"],(function aa(ba,a,ca,da,ea,b){"use strict";__p&&__p();function c(z){return z[0]}function d(z){return z[1]}function e(z){return z[2]}function f(z){return z[3]}function g(z){return z[4]}function h(z){return z.reduce(function(A,B){if(A)return 1;else if(B.action_type==="mga-type:mark-all-seen")return+(B.folder===a("MessagingTag").PENDING);else return 0},0)}function i(z,A){if(a("bs_caml_obj").caml_equal(z.action_type,a("MercuryActionType").USER_GENERATED_MESSAGE)&&z.folder===a("MessagingTag").PENDING)return+(A===a("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE);else return 0}var j=function j(z,A){delete z[A];return 0};function k(z,A,B){var C=z[4][A];if(C!==undefined){var D=C[B];if(D!==undefined)return a("bs_curry")._2(j,C,B);else return 0}else return 0}function l(c,z){__p&&__p();var A=z.thread_fbid;if(A==null)if(z.type==="typ"||z.type==="page_typing"){var B=a("FBID.bs").ofString(z.from.toString());if(B)return a("MercuryIDs").getThreadIDFromUserID(B[0]);else return null}else return null;else{var C=a("MercuryThreadIDMap").getForFBID(c);return C.getClientIDFromServerIDNow(A.toString())}}function m(z,A){__p&&__p();return a("bs_array").fold_left(function(A,B){__p&&__p();if(B.tag){var C=A,D=[];a("bs_js_dict").entries(C[4]).forEach(function(Z){var T=Z[0];a("bs_js_dict").entries(Z[1]).forEach(function(Z){if(Z[1]<Date.now()-3e4){D.push([T,Z[0]]);return 0}else return 0});return 0});if(D.length){D.forEach(function(Z){return k(C,Z[0],Z[1])});return[C[0],C[1],C[2],C[3],C[4]]}else return C}else{var E=B[0];if(typeof E==="number")if(E){var F=A;return[F[0],F[1],F[2],F[3]+1|0,F[4]]}else{var G=A;return[G[0],G[1],G[2],0,G[4]]}else switch(E.tag|0){case 0:var H=A,I=E[0];Object.keys(I).forEach(function(Z){var $=I[Z],fa=a("Utils.bs").$pipe$unknown(a("bs_js_primitive").undefined_to_opt(H[1][Z]),0);if($>fa){H[1][Z]=$;return 0}else return 0});return[H[0],H[1],H[2],H[3],H[4]];case 1:var J=A,K=E[0];a("bs_array").iter(function(Z){J[2].add(Z);return 0},K);return[J[0],J[1],J[2],J[3],J[4]];case 2:var L=A,M=E[0];M.forEach(function(Z){__p&&__p();var $=Z.fbid,E=a("Utils.bs").nullUndefinedBooleanToOptionBool(Z.is_messenger_ignored);if(E)if(E[0]!==0){L[2].add(a("MercuryIDs").getParticipantIDFromUserID($));return 0}else{+L[2]["delete"](a("MercuryIDs").getParticipantIDFromUserID($));return 0}else return 0});return[L[0],L[1],L[2],L[3],L[4]];case 3:var N=A,O=E[0];return[N[0],N[1],N[2],O,N[4]];case 4:var P=A,Q=E[0];Q.forEach(function(Z){var $=Z.author;if(a("bs_caml_obj").caml_equal(Z.action_type,a("MercuryActionType").USER_GENERATED_MESSAGE)&&a("bs_caml_obj").caml_notequal($,a("MercuryViewer").getID())){var T=Z.thread_id;return k(P,T,$)}else return 0});return[P[0],P[1],P[2],P[3],P[4]];case 5:var R=A,S=E[0],T=l(R[0],S);if(T==null)return R;else{var U=a("FBID.bs").ofString(S.from.toString());if(U){var V=S.persona_id,W=V==null?a("MercuryIDs").getParticipantIDFromUserID(U[0]):a("MercuryIDs").getParticipantIDFromUserID(V);if(S.st===a("TypingStates").TYPING){var X=R[4][T];if(X!==undefined){X[W]=Date.now();return[R[0],R[1],R[2],R[3],R[4]]}else{var Y={};Y[W]=Date.now();R[4][T]=Y;return[R[0],R[1],R[2],R[3],R[4]]}}else if(S.st===a("TypingStates").INACTIVE){k(R,T,W);return[R[0],R[1],R[2],R[3],R[4]]}else return R}else return R}}}},A,z)}function n(c){var z=[a("ChannelConstants").getArbiterType("typ"),a("ChannelConstants").getArbiterType("ttyp")];if(!a("FBIDCheck").isUser_deprecated(c))z.push(a("ChannelConstants").getArbiterType("page_typing"));return z}var o={},p=a("ReasonReact.bs").reducerComponent("MessengerStateProvider"),q=function q(z,A){delete z[A];return 0};function r(z,A){a("ReasonReact.bs").RemoteAction[3](z,[a("bs_block").__(0,[a("bs_block").__(5,[A])])]);a("setTimeoutAcrossTransitions")(function(){return a("ReasonReact.bs").RemoteAction[3](z,[a("bs_block").__(1,[0])])},3e4);return 0}function s(c,z,A){__p&&__p();var B=z?z[0]:a("ReasonReact.bs").RemoteAction[0](0),C=[0],D=[[c,{},new Set(),0,{}]],E=a("ReasonReact.bs").RemoteAction[1](function(H){D[0]=m(H,D[0]);return a("bs_list").iter(function(I){return a("bs_curry")._1(I,D[0])},C[0])},B);a("Arbiter").subscribe(n(c),function(A,H){var I=H.obj,J=I.to;if(!(J==null)&&J.toString()!==c)return 0;else{r(B,I);return 0}});var F=function F(H){__p&&__p();var I=p.slice();I[9]=function(J){return a("bs_curry")._1(H,J[1])};I[10]=function(){return D[0]};I[12]=function(J,A){return a("bs_block").__(0,[J])};I[13]=function(J){__p&&__p();var u=J[3];return[[function(){__p&&__p();var K=u;C[0]=[K,C[0]];return function(J){var L=K;C[0]=a("bs_list").filter(function(M){return+(M!==L)})(C[0]);if(C[0])return 0;else{if(E)a("ReasonReact.bs").RemoteAction[2](E[0]);return a("bs_curry")._2(q,o,c)}}},function(K){return a("bs_curry")._1(K,0)}],0]};return I},G=[B,F];o[c]=G;return G}function t(z,A){var c=A?A[0]:a("CurrentUser").getID(),B=o[c];if(B!==undefined)return B[1];else return s(c,z,0)[1]}function u(z,A){var c=z?z[0]:a("CurrentUser").getID(),B=o[c];if(B!==undefined)return a("ReasonReact.bs").RemoteAction[3](B[0],A);else{var C=s(c,0,0);return a("ReasonReact.bs").RemoteAction[3](C[0],A)}}function v(c,z){return u(c==null?0:[c],z)}function w(z){__p&&__p();var A=[];if(!(z==null)){var B=z.delivery_receipts;if(!(B==null))A.push(a("bs_block").__(0,[a("bs_block").__(0,[B])]));var C=z.message_ignored_ids;if(!(C==null))A.push(a("bs_block").__(0,[a("bs_block").__(1,[C])]));var D=z.participants;if(!(D==null))A.push(a("bs_block").__(0,[a("bs_block").__(2,[D])]));var E=z.pending_folder_unseen_count;if(!(E==null))A.push(a("bs_block").__(0,[a("bs_block").__(3,[E])]));var F=z.actions,G=z.payload_source;if(!(F==null))if(!(G==null))F.forEach(function(L){if(i(L,G)){A.push(a("bs_block").__(0,[1]));return 0}else return 0});var H=z.global_actions;if(!(H==null)){var I=h(H);if(I!==0)A.push(a("bs_block").__(0,[0]))}var J=z.actions,K=z.payload_source;if(!(J==null))if(!(K==null)&&K===a("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE&&J.length>0)A.push(a("bs_block").__(0,[a("bs_block").__(4,[a("bs_array").map(function(L){return{action_type:L.action_type,author:L.author,thread_id:L.thread_id}},J)])]))}return A}var x=a("ReasonReact.bs").wrapReasonForJs(p,function(z){return a("bs_curry")._1(t(0,a("bs_js_primitive").null_undefined_to_opt(z.fbid)),z.children)}),y=[t];b.fbid=c;b.deliveryReceipts=d;b.ignoredIds=e;b.pendingFolderUnseenCount=f;b.typing=g;b.send=u;b.sendJS=v;b.processJSActions=w;b.Provider=y;b.jsComponent=x}),null);
__d("MercurySingletonProvider",["CurrentUser"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){this.$MercurySingletonProvider1={};this.$MercurySingletonProvider2=i}h.prototype.getForFBID=function(i){if(!this.$MercurySingletonProvider1[i])this.$MercurySingletonProvider1[i]=new this.$MercurySingletonProvider2(i);return this.$MercurySingletonProvider1[i]};h.prototype.get=function(){return this.getForFBID(c("CurrentUser").getID())};h.mock=function(i){throw new Error("MercurySingletonProvider.mock() must only be used in tests.")};f.exports=h}),null);
__d("MercuryThreadInformer",["ArbiterMixin","LogHistory","MercuryAssert","MercurySingletonProvider","mapObject","mixin"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("LogHistory").getInstance("mercury_informer");h=babelHelpers.inherits(k,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;k.get=function(){return l.get()};k.getForFBID=function(m){return l.getForFBID(m)};function k(m){__p&&__p();i.constructor.call(this);this.$MercuryThreadInformer1=m;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7=false;this.$MercuryThreadInformer8=false;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};this.$MercuryThreadInformer12=0}k.prototype.updatedThread=function(m){this.$MercuryThreadInformer3[m]=true;this.$MercuryThreadInformer13()};k.prototype.invalidatedThread=function(m){this.$MercuryThreadInformer4[m]=true;this.$MercuryThreadInformer13()};k.prototype.deletedThread=function(m){this.$MercuryThreadInformer2[m]=true;this.$MercuryThreadInformer13()};k.prototype.updatedThreadlist=function(){this.$MercuryThreadInformer6=true;this.$MercuryThreadInformer13()};k.prototype.updatedUnseenState=function(){this.$MercuryThreadInformer7=true;this.$MercuryThreadInformer13()};k.prototype.updatedUnreadState=function(){this.$MercuryThreadInformer8=true;this.$MercuryThreadInformer13()};k.prototype.changedThreadReadState=function(m,n,o){if(!this.$MercuryThreadInformer5[m]||this.$MercuryThreadInformer5[m].timestamp<o)this.$MercuryThreadInformer5[m]={mark_as_read:n,timestamp:o};this.$MercuryThreadInformer13()};k.prototype.receivedMessage=function(m){c("MercuryAssert").isThreadID(m.thread_id);var n=m.thread_id;if(!this.$MercuryThreadInformer9[n])this.$MercuryThreadInformer9[n]=[];this.$MercuryThreadInformer9[n].push(m);this.updatedThread(n)};k.prototype.reorderedMessages=function(m,n){this.$MercuryThreadInformer10[m]={source:n};this.$MercuryThreadInformer13()};k.prototype.updatedMessage=function(m,n,o){if(!this.$MercuryThreadInformer11[m])this.$MercuryThreadInformer11[m]={};this.$MercuryThreadInformer11[m][n]={source:o};this.updatedThread(m)};k.prototype.synchronizeInforms=function(m){this.$MercuryThreadInformer12++;try{m()}catch(n){throw n}finally{this.$MercuryThreadInformer12--;this.$MercuryThreadInformer13()}};k.prototype.listen=function(m,n){return this.subscribe("threads-updated",function(o,p){if(p[m])n(m)})};k.prototype.$MercuryThreadInformer13=function(){__p&&__p();if(!this.$MercuryThreadInformer12){var m=this.$MercuryThreadInformer2,n=this.$MercuryThreadInformer3,o=this.$MercuryThreadInformer4,p=this.$MercuryThreadInformer5,q=this.$MercuryThreadInformer6,r=this.$MercuryThreadInformer7,s=this.$MercuryThreadInformer8,t=this.$MercuryThreadInformer9,u=this.$MercuryThreadInformer10,v=this.$MercuryThreadInformer11;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7=false;this.$MercuryThreadInformer8=false;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};var w=Object.keys(n);if(w.length||q)this.inform("threadlist-updated",w);if(w.length)this.$MercuryThreadInformer14("threads-updated",n);for(var x in o){this.$MercuryThreadInformer14("thread-invalidated",o);break}for(var x in p){this.$MercuryThreadInformer14("thread-read-changed",p);break}for(x in m){this.$MercuryThreadInformer14("threads-deleted",m);break}if(r)this.$MercuryThreadInformer14("unseen-updated",null);if(s)this.$MercuryThreadInformer14("unread-updated",null);for(x in t){this.$MercuryThreadInformer14("messages-received",t);break}for(x in u){this.$MercuryThreadInformer14("messages-reordered",u);break}for(x in v){this.$MercuryThreadInformer14("messages-updated",v);break}}};k.prototype.$MercuryThreadInformer14=function(m,n){if(m==="threads-updated")j.debug(m,JSON.stringify(n));this.inform(m,n)};var l=new(c("MercurySingletonProvider"))(k);f.exports=k}),null);
__d("MercuryDispatcher",["invariant","ArbiterMixin","MessengerState.bs","LogHistory","MercuryActionType","MercuryPayloadSource","MercurySingletonProvider","MercuryThreadInformer","isEmpty","mixin"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("LogHistory").getInstance("mercury_dispatcher");i=babelHelpers.inherits(l,c("mixin")(c("ArbiterMixin")));j=i&&i.prototype;l.getForFBID=function(n){return m.getForFBID(n)};l.get=function(){return m.get()};function l(n){j.constructor.call(this);this.$MercuryDispatcher1=n}l.prototype.handleUpdate=function(n){__p&&__p();this.$MercuryDispatcher2(n);!!n.from_client!==!!n.preprocessed||h(0);delete n.preprocessed;if(!c("isEmpty")(n))c("MercuryThreadInformer").getForFBID(this.$MercuryDispatcher1).synchronizeInforms(function(){__p&&__p();if(n.payload_source===c("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)this.inform("invalidate-global-state",{});if(n.payload_source===c("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE){var o=n.threads&&n.threads.length>0&&n.threads[0]&&n.threads[0].thread_id;if(o)this.inform("invalidate-thread-state",o)}this.inform("update-thread-ids",n.newlyAddedClientIDs);this.inform("update-participants",n);this.inform("update-threads",n);this.inform("update-unread",n);this.inform("update-threadlist",n);this.inform("update-messages",n);this.inform("update-unseen",n);this.inform("update-typing-state",n);this.inform("update-delivery",n);this.inform("update-roger",n.roger);this.inform("update-blocked-users",n);this.inform("update-ignored-users",n);this.inform("model-update-completed",null);this.inform("update-work-group-threads",n);c("MessengerState.bs").sendJS(this.$MercuryDispatcher1,c("MessengerState.bs").processJSActions(n))}.bind(this))};l.prototype.$MercuryDispatcher2=function(n){__p&&__p();var o=n.payload_source;if(o===c("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS||o===c("MercuryPayloadSource").CLIENT_MARK_THREAD_SEEN)return;var p={from_client:n.from_client,messages:null};if(n.actions){var q=n.actions.filter(function(r){return r.action_type===c("MercuryActionType").USER_GENERATED_MESSAGE||r.action_type===c("MercuryActionType").LOG_MESSAGE}).map(function(r){return{action_type:r.action_type,other_user_fbid:r.other_user_fbid,thread_fbid:r.thread_fbid,message_id:r.message_id}});if(q.length)p.messages=q}k.debug("update:"+o,JSON.stringify(p))};var m=new(c("MercurySingletonProvider"))(l);f.exports=l}),null);
__d("MercuryActionStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNSENT:0,SUCCESS:1,UNCONFIRMED:3,FAILED_UNKNOWN_REASON:4,UNABLE_TO_CONFIRM:5,RESENT:6,RESENDING:7,ERROR:10})}),null);
__d("EmojiLikeConstants",["EmojiStaticConfig"],(function a(b,c,d,e,f,g){"use strict";var h=c("EmojiStaticConfig").sizeMap,i=Object.freeze({XSMALL:"xsmall",SMALL:"small",MEDIUM:"medium",LARGE:"large"}),j={dp16:"xsmall",dp32:"small",dp64:"medium",db64:"medium",dp128:"large"},k=Object.freeze({PICKER:"picker",HOT_LIKE:"hot_like"}),l=[983040],m="hot_emoji_source",n="hot_emoji_size",o="emoji_like",p="\ud83d\udc4d",q=[128077];f.exports={FB_THUMBS_UP_EMOJI:l,size:i,sizeMap:h,sizeMapTransfer:j,source:k,SOURCE_TAG_PREFIX:m,TAG_PREFIX_NEW:n,TAG_PREFIX_OLD:o,THUMBS_UP_EMOJI:p,THUMBS_UP_EMOJI_CODES:q}}),null);
__d("MercuryTagHelper",[],(function a(b,c,d,e,f,g){"use strict";var h={get:function i(j,k){var l=j.find(function(m){return m.startsWith(k)});return l&&l.substr(l.indexOf(":")+1)}};f.exports=h}),null);
__d("EmojiLikeUtils",["EmojiLikeConstants","EmoticonEmojiList","MercuryTagHelper"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(n,o){if(!n.tags)n.tags=[i(o)];else n.tags.push(i(o));return n}function i(n){var o=c("EmojiLikeConstants").TAG_PREFIX_NEW;return o+":"+n}function j(n,o){if(!n.tags)n.tags=[k(o)];else n.tags.push(k(o));return n}function k(n){return c("EmojiLikeConstants").SOURCE_TAG_PREFIX+":"+n}function l(n){return m(n)!=null}function m(n){if(!n.tags)return null;var o=c("MercuryTagHelper").get(n.tags,c("EmojiLikeConstants").TAG_PREFIX_NEW);if(o)return o;return c("MercuryTagHelper").get(n.tags,c("EmojiLikeConstants").TAG_PREFIX_OLD)}f.exports={getEmojiSize:m,isEmojiLike:l,setEmojiSize:h,setEmojiSource:j}}),null);
__d("MercuryAttachmentContentType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PHOTO:"attach:image",VIDEO:"attach:video",MUSIC:"attach:music",VOICE:"attach:voice",TEXT:"attach:text",MSWORD:"attach:ms:word",MSXLS:"attach:ms:xls",MSPPT:"attach:ms:ppt",ORION:"attach:orion",SHOERACK_INVITATION:"attach:shoerackinvite",UNKNOWN:"attach:unknown"})}),null);
__d("MercuryAttachmentType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ERROR:"error",FILE:"file",PHOTO:"photo",STICKER:"sticker",SHARE:"share",UNKNOWN:"unknown",VIDEO:"video",ANIMATED_IMAGE:"animated_image",EMOJI_LIKE:"emoji_like",GIFT:"gift",THIRDPARTYSTICKER:"third_party_sticker"})}),null);
__d("StoryAttachmentStyle",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",INSPIRATION_PHOTO:"inspiration_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",CANCELED_EVENT:"canceled_event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",ANIMATED_IMAGE_VIDEO:"animated_image_video",ANIMATED_IMAGE_VIDEO_AUTOPLAY:"animated_image_video_autoplay",NOTE:"note",TOPIC:"topic",TOPIC_FOLLOWING_TOPIC:"topic_following_topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",VIDEO_DIRECT_RESPONSE:"video_direct_response",VIDEO_DIRECT_RESPONSE_AUTOPLAY:"video_direct_response_autoplay",VIDEO_SHOP:"video_shop",INSPIRATION_VIDEO:"inspiration_video",MULTI_VIDEOS_STITCHED:"multi_videos_stitched",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",MULTI_SHARE_NON_LINK_VIDEO:"multi_share_non_link_video",MULTI_SHARE_SEARCH_END_CARD:"multi_share_search_end_card",MULTI_SHARE_FIXED_TEXT:"multi_share_fixed_text",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",BIRTHDAY_PERCEPTICONS:"birthday_percepticons",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GAMETIME_LEAGUE:"gametime_league",GAMETIME_PLAY:"gametime_play",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",POST_CHANNEL:"post_channel",TEXT_FOR_COLLAGE:"text_for_collage",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",P2P_PAYMENT:"p2p_payment",P2P_SERVER_BUBBLE:"p2p_server_bubble",INSTANT_ARTICLE:"instant_article",MOMENTS_APP_INVITATION:"moments_app_invitation",MOMENTS_APP_PHOTO_REQUEST:"moments_app_photo_request",RIDE_ORDERED:"ride_ordered",RIDE_RECEIPT:"ride_receipt",BUSINESS_MESSAGE_ITEMS:"business_message_items",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_PROMOTION:"retail_promotion",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",GROUP_ADD_MEMBERS:"group_add_memebers",GROUP_MEMBER_ADDED:"group_member_added",RTC_CALL_LOG:"rtc_call_log",EVENTS_PENDING_POST_QUEUE:"events_pending_post_queue",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",EGO_HSCROLL:"ego_hscroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",RICH_MEDIA_COLLECTION:"rich_media_collection",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",RETAIL_AGENT_ITEM_RECEIPT:"retail_agent_item_receipt",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",AIRLINE_CONFIRMATION:"airline_confirmation",AIRLINE_CHECK_IN:"airline_check_in",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_FLIGHT_RESCHEDULE_UPDATE:"airline_flight_reschedule_update",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",GENIE_MESSAGE:"genie_message",MOVIE_BOT_MOVIE_LIST:"movie_bot_movie_list",MOVIE_BOT_MOVIE_SHOWTIME_LIST:"movie_bot_movie_showtime_list",GROUPSMASH_MEDIA:"groupsmash_media",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action",EVENT_TICKET_DEPRECATED:"event_ticket",VERTICAL_ATTACHMENT_LIST:"vertical_attachment_list",INSTANT_ARTICLE_LEGACY:"instant_article_legacy",FUNDRAISER_PAGE:"fundraiser_page",FINANCIAL_BILL_PAYMENT_REQUEST:"financial_bill_payment_request",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD:"goodwill_throwback_friendversary_polaroids_card",WELCOME_CARD_IMAGE:"welcome_card_image",LARGE_IMAGE_LIKE:"large_image_like",ASK_FRIENDS:"ask_friends",CULTURAL_MOMENT:"cultural_moment",TELEPHONE_CALL_LOG:"telephone_call_log",SUPER_EMOJI:"super_emoji",BOOK:"book",SUBTOPIC_CUSTOMIZATION_QUESTION:"subtopic_customization_question",SUBTOPIC_CUSTOMIZATION_OPTION:"subtopic_customization_option",RESTAURANT:"restaurant",CONNECTION_QUESTION:"connection_question",CONNECTION_QUESTION_OPTION:"connection_question_option",PYMI_ITEM:"pymi_item",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD:"goodwill_throwback_friendversary_collage_card",CITY:"city",AVATAR_WITH_SHARE:"avatar_with_share",LIGHTWEIGHT_PLACE:"lightweight_place",QUOTED_SHARE:"quoted_share",SMS_LOG:"sms_log",CENTERED_TEXT:"centered_text",GOODWILL_THROWBACK_FRIENDVERSARY_DATA_CARD:"goodwill_throwback_friendversary_data_card",GOODWILL_THROWBACK_FACEVERSARY_COLLAGE_CARD:"goodwill_throwback_faceversary_collage_card",GOODWILL_THROWBACK_ANNIVERSARY_COLLAGE_CARD:"goodwill_throwback_anniversary_collage_card",MESSAGE_EVENT:"message_event",MESSAGE_THREAD:"message_thread",QUOTE:"quote",VOTER_REGISTRATION_SHARE:"voter_registration_share",AIRLINE_ITINERARY:"airline_itinerary",AIRLINE_UPDATE:"airline_update",PLACE_LIST:"place_list",IMPLICIT_PLACE_LIST_CONVERSION:"implicit_place_list_conversion",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",MINUTIAE_UNIT:"minutiae_unit",INSTANT_ARTICLE_PHOTO:"instant_article_photo",INSTANT_ARTICLE_VIDEO:"instant_article_video",PHOTO_LINK_SHARE:"photo_link_share",PHOTO_LINK_SHARE_WITH_INSTAGRAM_CONTEXT:"photo_link_share_with_instagram_context",BUSINESS_LOCATION:"business_location",GOODWILL_WEATHER:"goodwill_weather",CULTURAL_MOMENT_HOLIDAY_CARD:"cultural_moment_holiday_card",TRANSACTION_INVOICE:"transaction_invoice",GROUP:"group",COMMENT_PLACE_INFO:"comment_place_info",COMMENT_PRODUCT_INFO:"comment_product_info",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD_IPB:"goodwill_throwback_friendversary_polaroids_card_ipb",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD_IPB:"goodwill_throwback_friendversary_collage_card_ipb",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",FUNDRAISER_PERSON_FOR_PERSON:"fundraiser_person_for_person",FUNDRAISER_FOR_STORY:"fundraiser_for_story",MESSAGE_LIVE_LOCATION:"message_live_location",MESSENGER_INVITE:"messenger_invite",MESSENGER_NATIVE_TEMPLATES:"messenger_native_templates",GAMES_INSTANT_PLAY:"games_instant_play",PROFILE_MEDIA:"profile_media",NATIVE_TEMPLATES:"native_templates",NATIVE_TEMPLATES_FOX:"native_templates_fox",NATIVE_TEMPLATES_KEEP_ATTACHED:"native_templates_keep_attached",GOODWILL_THROWBACK_VIDEO_BASIC:"goodwill_throwback_video_basic",COMMERCE_PRODUCT_MINI:"commerce_product_mini",COMMERCE_PRODUCT_MINI_LIST:"commerce_product_mini_list",COMMENT:"comment",MESSENGER_TEAM_BOT_SHARE:"messenger_team_bot_share",LIVE_VIDEO_SCHEDULE:"live_video_schedule",PRODUCT_ITEM:"product_item",PLATFORM_INSTANT_APP:"platform_instant_app",YEAR_OVERVIEW:"year_overview",NATIVE_COMPONENT_FLOW_BOOKING_REQUEST:"native_component_flow_booking_request",FRIEND_REQUEST:"friend_request",MESSENGER_GROUP_JOINABLE_LINK:"messenger_group_joinable_link",SOCIAL_SEARCH_CONVERSION_PROMPT:"social_search_conversion_prompt",MDOTME_USER_LINK:"mdotme_user_link",DYNAMIC_MULTI_SHARE_ITEMS:"dynamic_multi_share_items",EVENT_REMINDER:"event_reminder",INSTANT_GAMES_SHARE_MESSAGE:"instant_games_share_message",MESSENGER_PLATFORM_COMPACT_ITEM:"messenger_platform_compact_item",MESSENGER_PLATFORM_COVER_ITEM:"messenger_platform_cover_item",MULTI_SHARE_NON_LINK_VIDEO_AUTO_SCROLL:"multi_share_non_link_video_auto_scroll",ENDORSEMENT:"endorsement",OFFER_VIEW_LIVE_COUNTDOWN:"offer_view_live_countdown",ENHANCED_LINK_REDDIT_POST:"enhanced_link_reddit_post",MESSENGER_COMMERCE_COVER_ITEM:"messenger_commerce_cover_item",ENHANCED_LINK_YELP_BUSINESS:"enhanced_link_yelp_business",PAGES_PLATFORM_LEAD_GEN:"pages_platform_lead_gen",NATIVE_STORY:"native_story",MFS_BILL_PAY_CREATION_UPDATE:"mfs_bill_pay_creation_update",MFS_BILL_PAY_REFERENCE_CODE_UPDATE:"mfs_bill_pay_reference_code_update",MFS_BILL_PAY_AGENT_CASH_IN_UPDATE:"mfs_bill_pay_agent_cash_in_update",ISSUE_POSITION:"issue_position",PAGES_PLATFORM_BOOKING_MESSAGE:"pages_platform_booking_message",EXTERNAL_GALLERY:"external_gallery",MEME_SHARE:"meme_share",MESSENGER_PLATFORM_ELEMENT:"messenger_platform_element",INSTANT_GAMES_SHARE_SCORE_MESSAGE:"instant_games_share_score_message",MESSENGER_PLATFORM_BUTTON_LIST:"messenger_platform_button_list",BALLOT:"ballot",LIGHTWEIGHT_ACTION:"lightweight_action",TAROT_DIGEST:"tarot_digest",EVENT_TOUR:"event_tour",ADAPTIVE_MEDIA:"adaptive_media",DYNAMIC_GAME_BOARD:"dynamic_game_board",PAYMENT_PLATFORM:"payment_platform",OMNI_M_FLOW:"omni_m_flow",GROUP_QUIZ:"group_quiz",TRIAL_AD:"trial_ad",TEEM_COLLECTIONS:"teem_collections",CRISIS_DONATION:"crisis_donation",CRISIS_STATUS:"crisis_status",CRISIS_SHARE:"crisis_share",CRISIS_MARK_SAFE:"crisis_mark_safe",CRISIS_LISTING:"crisis_listing",VR_CONTENT:"vr_content",VIDEO_RECOMMENDATION_HSCROLL:"video_recommendation_hscroll",VIDEO_TRAILER:"video_trailer",SHOW_PAGE_SHARE:"show_page_share",MFS_ATTACHMENT:"mfs_attachment",GROUP_TASK:"group_task",CHECKLIST:"checklist",VIDEO_RECOMMENDATION_SINGLETON:"video_recommendation_singleton",PAGE_REVIEW_PROMPT:"page_review_prompt",VIDEO_SHOW:"video_show",UNCONNECTED_VIDEO:"unconnected_video",SHOW_SHARE:"show_share",JOB_SEARCH_JOB_APPLICATION:"job_search_job_application",PAGE_MESSENGER_ATTACHMENT:"page_messenger_attachment",CONTACT_YOUR_REP:"contact_your_rep",LIVE_ELECTION_RESULTS:"live_election_results",LOCATION_EXTENSION:"location_extension",PLACE_RECOMMENDATION:"place_recommendation",JOB_SEARCH_JOB_OPENING:"job_search_job_opening",PAGE_MESSAGE_ONLINE_INDICATOR:"page_message_online_indicator",LOCAL_PIVOT:"local_pivot",ORION_REQUEST_NEW:"orion_request_new",PHOTO_WITH_SHIELD:"photo_with_shield",PLAYABLE_AD:"playable_ad",FUN_FACT_PROMPT:"fun_fact_prompt",FUN_FACT_STACK:"fun_fact_stack",FATIGUED_SHARE:"fatigued_share",DISCUSSION_QUESTION:"discussion_question",PARTIES_INVITE:"parties_invite",PROFILE_INTRO_CARD_BIO:"profile_intro_card_bio",PAGES_SHARE:"pages_share",PRODUCT_RECOMMENDATION_LIST:"product_recommendation_list",VISUAL_POLL:"visual_poll",MULTI_PLACE_RECOMMENDATION:"multi_place_recommendation",PAGE_IN_COMMENT:"page_in_comment",MESSENGER_PLATFORM_MEDIA_ATTACHMENT:"messenger_platform_media_attachment",SCHEDULED_VIDEO_ANNOUNCEMENT:"scheduled_video_announcement",HSCROLL_ITEM:"hscroll_item",MESSENGER_CALL_LOG:"messenger_call_log",PAGE_REVIEW_UPDATE:"page_review_update",LOYALTY_CARD_OFFER:"loyalty_card_offer",GOODWILL_GRID:"goodwill_grid",TRAVEL_PLAN:"travel_plan",FIND_PLAYERS:"find_players",ASSET3D:"asset3d",MESSENGER_GROUP_PERSONAL_LINK:"messenger_group_personal_link",FREQUENTLY_ASKED_QUESTION:"frequently_asked_question",STORY_LIST:"story_list",GOODWILL_SHARED_CARD:"goodwill_shared_card",PAYMENT_BUBBLE_VIEW:"PAYMENT_BUBBLE_VIEW",POST_TO_EVENT_CREATE:"post_to_event_create",MONTAGE_DIRECT:"montage_direct",NEO_INVITATION:"NEO_INVITATION",NATIVE_TEMPLATES_LINK_SHARE_TEST:"native_templates_link_share_test",GOODWILL_HSCROLL:"goodwill_hscroll",NEO_KID_INITIATE_FRIENDING:"NEO_KID_INITIATE_FRIENDING",EVENT_MICRO_ATTACHMENT:"event_micro_attachment",SAVED_LIST:"saved_list",LOCAL_GUIDE:"local_guide",MEET_UP_EVENT:"meet_up_event",DONATION:"donation",BREAKING_NEWS:"breaking_news",VIDEO_REQUEST:"video_request",GOODWILL_COLLAGE:"goodwill_collage",LEAD_FORM:"lead_form",LEAD_FORM_USER_INFO:"lead_form_user_info",EVENT_TICKET_ORDER:"event_ticket_order",PROFILE_CHANNEL:"profile_channel",ICE_BREAKER:"ICE_BREAKER",MOVIE:"movie",ALOHA_CALL:"aloha_call",TIP_JAR_PAYMENT:"tip_jar_payment",COMMENT_MESSAGE_INFO:"comment_message_info",CASH_ON_DELIVERY_ORDER:"cash_on_delivery_order",VOTER_REGISTRATION_DRIVE:"voter_registration_drive",LIVING_ROOM:"living_room",ACHIEVEMENT_POST:"achievement_post",M_BIRTHDAY_REMINDER:"m_birthday_reminder",INSIGHTS_CHART:"insights_chart",GROUP_PROACTIVE_FLAGGED_POST_QUEUE:"group_proactive_flagged_post_queue",PYI_ATTACHMENTS:"pyi_attachments",SHOW_CLICK_TO_WATCH_TAB:"show_click_to_watch_tab",SHOW_MASKED:"show_masked",SHOW_CONTINUE_WATCHING:"show_continue_watching",FOX_ALBUM:"fox_album",TOOL_SHARE:"tool_share",PHONE_REMOVED_ACTION_LIST:"phone_removed_action_list",AMP:"amp",LDP_APP_INSTANCE:"ldp_app_instance",PAGE_RECOMMENDATION_V2:"page_recommendation_v2",PLAY_WITH_FRIENDS:"play_with_friends"})}),null);
__d("MercuryAttachment",["cx","EmojiLikeUtils","MercuryAttachmentContentType","MercuryAttachmentType","MercuryAudioType","StoryAttachmentStyle"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function i(m){return m===Object(m)},j="_1c_u",k=new Set([c("MercuryAttachmentType").ANIMATED_IMAGE,c("MercuryAttachmentType").PHOTO,c("MercuryAttachmentType").VIDEO,c("MercuryAttachmentType").THIRDPARTYSTICKER]),l={getAttachIconClass:function m(n){__p&&__p();switch(n){case c("MercuryAttachmentContentType").PHOTO:return"_y2-";case c("MercuryAttachmentContentType").VIDEO:return"_y2_";case c("MercuryAttachmentContentType").MUSIC:return"_y30";case c("MercuryAttachmentContentType").VOICE:return"_y31";case c("MercuryAttachmentContentType").TEXT:return"_y32";case c("MercuryAttachmentContentType").MSWORD:return"_y33";case c("MercuryAttachmentContentType").MSXLS:return"_y34";case c("MercuryAttachmentContentType").MSPPT:return"_y35"}return"_y36"},getAttachIconClassByMime:function m(n){return this.getAttachIconClass(this.getAttachTypeByMime(n))},getAttachTypeByMime:function m(n){__p&&__p();if(n.startsWith("image"))return c("MercuryAttachmentContentType").PHOTO;else if(n.startsWith("video"))return c("MercuryAttachmentContentType").VIDEO;else if(n.startsWith("audio"))return c("MercuryAttachmentContentType").MUSIC;else if(n.startsWith("text/plain"))return c("MercuryAttachmentContentType").TEXT;else if(n=="application/msword"||n.startsWith("application/vnd.ms-word")||n.startsWith("application/vnd.openxmlformats-officedocument.wordprocessingml"))return c("MercuryAttachmentContentType").MSWORD;else if(n.startsWith("application/vnd.ms-excel")||n.startsWith("application/vnd.openxmlformats-officedocument.spreadsheetml"))return c("MercuryAttachmentContentType").MSXLS;else if(n.startsWith("application/vnd.ms-powerpoint")||n.startsWith("application/vnd.openxmlformats-officedocument.presentationml"))return c("MercuryAttachmentContentType").MSPPT;else return c("MercuryAttachmentContentType").UNKNOWN},convertRaw:function m(n){__p&&__p();var o=[];for(var p=0;p<n.length;p++){var q=n[p];if(q.attach_type===c("MercuryAttachmentType").PHOTO)o.push(q);else if(q.filename){var r=l.getAttachTypeByMime(q.filetype),s={};s.attach_type=c("MercuryAttachmentType").FILE;s.name=q.filename;s.icon_type=r;s.url="";o.push(s)}}return o},get:function m(n){__p&&__p();var o=[];if(n.attachments)o=n.attachments;else if(n.raw_attachments)o=this.convertRaw(n.raw_attachments);var p=c("EmojiLikeUtils").getEmojiSize(n);if(p)o=o.concat([{attach_type:c("MercuryAttachmentType").EMOJI_LIKE,size:p}]);if(!(n.attachments&&n.attachments.length>0)){if(n.sticker_id)return o.concat([{attach_type:c("MercuryAttachmentType").STICKER}]);if(n.preview_attachments&&n.preview_attachments.length>0)return o.concat(n.preview_attachments)}return o},resizeContain:function m(n,o){var p=n.width/n.height,q=o.width/o.height;if(q<p)return{width:Math.ceil(Math.min(n.height*q,o.width)),height:Math.ceil(Math.min(n.height,o.height))};else return{width:Math.ceil(Math.min(n.width,o.width)),height:Math.ceil(Math.min(n.width/q,o.height))}},isBubblePreferred:function m(n){return this.isFileAttachment(n)},isPhotoAttachment:function m(n){return!!(n.attach_type==c("MercuryAttachmentType").PHOTO||n.attach_type==c("MercuryAttachmentType").ANIMATED_IMAGE||n.attach_type==c("MercuryAttachmentType").THIRDPARTYSTICKER||n.attach_type==c("MercuryAttachmentType").FILE&&n.preview_url)},isPhotoGroupAttachment:function m(n){return k.has(n.attach_type)},isSinglePhotoGroupAttachment:function m(n){return!!(n.attachments&&n.attachments.length===1&&n.attachments[0]&&this.isPhotoGroupAttachment(n.attachments[0]))},isVideoAttachment:function m(n){return n.attach_type==c("MercuryAttachmentType").VIDEO},isShareAttachment:function m(n){return n.attach_type==c("MercuryAttachmentType").SHARE},isFileAttachment:function m(n){return n.attach_type==c("MercuryAttachmentType").FILE},isErrorAttachment:function m(n){return n.attach_type==c("MercuryAttachmentType").ERROR},isStickerAttachment:function m(n){return n.attach_type==c("MercuryAttachmentType").STICKER},isEmojiLikeAttachment:function m(n){return n.attach_type===c("MercuryAttachmentType").EMOJI_LIKE},isVoiceAttachment:function m(n){if(!n.metadata)return false;return n.metadata.type===c("MercuryAudioType").AudioClip||n.metadata.type===c("MercuryAudioType").VoiceMessageWithTranscript},hasAttribution:function m(n){return!!n.app_attribution},isLightweightActionAttachment:function m(n){return l.isShareAttachment(n)&&n.share&&n.share.target!=null&&n.share.target.lwa_type!=null},isSingleVideoAttachment:function m(n){var o=this.get(n).filter(i).filter(function(p){return this.isVideoAttachment(p)}.bind(this));return o.length===1},isSharedVideoAttachment:function m(n){var o=n.attach_type===c("MercuryAttachmentType").SHARE&&n.share&&n.share.subattachments&&n.share.subattachments[0];return!!(o&&o.target&&o.target.video_id)},isGenieSharedVideoAttachment:function m(n){return!!(n.attach_type===c("MercuryAttachmentType").SHARE&&n.share&&n.share.style_list.indexOf(c("StoryAttachmentStyle").GENIE_MESSAGE)>-1&&n.share.target&&n.share.target.attachment&&this.isSharedVideoAttachment(n.share.target.attachment))},isSharedVideoAttachmentMessage:function m(n){var o=this.get(n).filter(i).filter(function(p){return this.isSharedVideoAttachment(p)||this.isGenieSharedVideoAttachment(p)}.bind(this));return o.length===1},getVideoElem:function m(n,o){var p=o.getMessageElement(n);if(!p)return null;var q=p.getElementsByClassName(j);return q&&q.length?q[0]:p}};f.exports=l}),null);
__d("MercurySendErrorLogger",["Banzai","BanzaiLogger"],(function a(b,c,d,e,f,g){var h=c("BanzaiLogger").create({retry:true}),i=c("Banzai").isEnabled("mercury_send_error_logging"),j={log:function k(l){if(!i)return;var m={message_id:l.message_id,timestamp_client:Date.now(),error_type:l.error_data.type,error_code:l.error_data.code,error_description:l.error_data.description,is_transient:l.error_data.is_transient};h.log("MercurySendErrorLoggerConfig",m)}};f.exports=j}),null);
__d("MercuryServerPayloadPreprocessor",["invariant","MessengerEnvironment","MercuryIDs","MercuryActionStatus","MercuryActionType","MercuryAttachment","MercuryDispatcher","MercurySendErrorLogger","MercurySingletonProvider","MercuryThreadIDMap","URI"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(k){this.$MercuryServerPayloadPreprocessor1=k;this.$MercuryServerPayloadPreprocessor2=c("MercuryThreadIDMap").getForFBID(this.$MercuryServerPayloadPreprocessor1);this.$MercuryServerPayloadPreprocessor3=c("MercuryDispatcher").getForFBID(this.$MercuryServerPayloadPreprocessor1)}i.getForFBID=function(k){return j.getForFBID(k)};i.get=function(){return j.get()};i.prototype.handleUpdate=function(k){__p&&__p();var l={};!k.from_client||h(0);(k.threads||[]).forEach(function(x){this.$MercuryServerPayloadPreprocessor4(x,l);var y=this.$MercuryServerPayloadPreprocessor2.getServerIDFromClientIDNow(x.thread_id);e(["MercuryServerRequests"],function(z){var A=z.getForFBID(this.$MercuryServerPayloadPreprocessor1);A.markThreadFetched(x.thread_id);if(y)A.markThreadFetched(y);A.updateLastActionTimestamp(x.timestamp)}.bind(this))}.bind(this));(k.work_top_named_threads||[]).forEach(function(x){this.$MercuryServerPayloadPreprocessor4(x,l);var y=this.$MercuryServerPayloadPreprocessor2.getServerIDFromClientIDNow(x.thread_id);e(["MercuryServerRequests"],function(z){var A=z.getForFBID(this.$MercuryServerPayloadPreprocessor1);A.markThreadFetched(x.thread_id);if(y)A.markThreadFetched(y);A.updateLastActionTimestamp(x.timestamp)}.bind(this))}.bind(this));(k.ordered_threadlists||[]).forEach(function(x){var y=x.thread_fbids||[];y=y.concat(x.other_user_fbids||[]);x.thread_ids=y.map(function(z){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(z.toString())}.bind(this))}.bind(this));if(k.delivery_receipts){var m={};for(var n=k.delivery_receipts,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=r.other_user_fbid?c("MercuryIDs").getThreadIDFromUserID(r.other_user_fbid):this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(r.thread_fbid);if(s)m[s]=r.time}k.delivery_receipts=m}k.actions=k.actions||[];k.actions.forEach(function(x){__p&&__p();if(x.action_type===c("MercuryActionType").SEND_MESSAGE&&x.status===c("MercuryActionStatus").ERROR)c("MercurySendErrorLogger").log(x);var y=null,z=null;if(x.other_user_fbid){z=c("MercuryIDs").getThreadIDFromUserID(x.other_user_fbid);y=x.other_user_fbid}else if(x.thread_fbid){z=c("MercuryIDs").getThreadIDFromThreadFBID(x.thread_fbid);y=x.thread_fbid}else if(x.thread_id){z=c("MercuryIDs").getThreadIDFromThreadFBID(x.thread_id);y=x.thread_id}else if(x.status&&x.status!=c("MercuryActionStatus").SUCCESS&&x.client_thread_id)z=x.client_thread_id;else h(0);y=y&&y.toString();x.thread_id=this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(y)?this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(y):z;if(x.action_type==c("MercuryActionType").SEND_MESSAGE&&x.client_thread_id&&y){x.thread_id=x.client_thread_id;this.$MercuryServerPayloadPreprocessor2.forceSetServerIDToClientID(y,x.client_thread_id);l[y]=x.client_thread_id}x.thread_id||h(0);if(!k.payload_source||!k.payload_source.startsWith("server"))e(["MercuryServerRequests"],function(A){A.getForFBID(this.$MercuryServerPayloadPreprocessor1).updateLastActionTimestamp(x.timestamp)}.bind(this))}.bind(this));this.$MercuryServerPayloadPreprocessor5(k);this.$MercuryServerPayloadPreprocessor6(k);if(k.end_of_history){var t=[];for(var u=0;u<k.end_of_history.length;u++){var v=k.end_of_history[u];if(v.type=="user")t.push("user:"+v.fbid);else if(v.type=="thread"&&this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(v.fbid))t.push(this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(v.fbid))}k.end_of_history=t}if(k.roger){var w={};Object.keys(k.roger).forEach(function(x){__p&&__p();var y=Object.keys(k.roger[x]),z=void 0;if(x)z=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(x);else if(y.length===1)z=c("MercuryIDs").getThreadIDFromUserID(y[0]);if(z){var A=k.roger[x];w[z]={};for(var B in A)if(Object.prototype.hasOwnProperty.call(A,B)){var C=c("MercuryIDs").getParticipantIDFromUserID(B);w[z][C]=A[B]}}}.bind(this));k.roger=w}k.newlyAddedClientIDs=l;k.preprocessed=true;this.$MercuryServerPayloadPreprocessor3.handleUpdate(k)};i.prototype.$MercuryServerPayloadPreprocessor4=function(k,l){__p&&__p();var m=k.other_user_fbid?k.other_user_fbid:k.thread_fbid;m||h(0);var n=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(m);if(!n){n=k.other_user_fbid?c("MercuryIDs").getThreadIDFromUserID(k.other_user_fbid):c("MercuryIDs").getThreadIDFromThreadFBID(k.thread_fbid);this.$MercuryServerPayloadPreprocessor2.setServerIDToClientID(m,n);this.$MercuryServerPayloadPreprocessor2.setDeprecatedServerIDToClientID(k.thread_id,n);l[m]=n}k.thread_id=n};i.prototype.$MercuryServerPayloadPreprocessor5=function(k){__p&&__p();k.actions.forEach(function(l){if(l.action_type===c("MercuryActionType").USER_GENERATED_MESSAGE){l.attachments=l.attachments||[];l.attachments.forEach(function(m){if(c("MercuryAttachment").isShareAttachment(m)&&c("MessengerEnvironment").messengerui){var n=new(c("URI"))(m.share.uri);if(!n.getDomain())m.share.uri=n.setDomain("facebook.com").setSubdomain(c("URI").getRequestURI().getSubdomain()).setProtocol("https").toString()}})}})};i.prototype.$MercuryServerPayloadPreprocessor6=function(k){__p&&__p();k.actions.forEach(function(l){__p&&__p();if(l.action_type!==c("MercuryActionType").USER_GENERATED_MESSAGE)return;var m=l;if(!m.has_attachment||!m.attachments)return;for(var n=m.attachments.length-1;n>=0;n-=1){var o=m.attachments[n];if(!o.share||!o.share.style_list||o.share.style_list[0]!="genie_message")continue;if(o.share.target.genie_id)m.author=c("MercuryIDs").getParticipantIDFromUserID(o.share.target.genie_id);if(o.share.target&&!o.share.target.attachment){m.attachments.splice(n,1);m.has_attachment=m.attachments.length>0}}})};var j=new(c("MercurySingletonProvider"))(i);f.exports=i}),null);
__d("MercuryErrorType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SERVER:1,TRANSPORT:2,TIMEOUT:3})}),null);
__d("MercuryGlobalActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MARK_ALL_READ:"mga-type:mark-all-read",MARK_ALL_SEEN:"mga-type:mark-all-seen"})}),null);
__d("MercuryLogMessageType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SUBSCRIBE:"log:subscribe",UNSUBSCRIBE:"log:unsubscribe",VIDEO_CALL:"log:video-call",PHONE_CALL:"log:phone-call",THREAD_NAME:"log:thread-name",THREAD_IMAGE:"log:thread-image",SERVER_ERROR:"log:error-msg",LIVE_LISTEN:"log:live-listen",WALLPAPER:"log:wallpaper",ORION:"log:orion",SWITCH_TO_WORK:"log:switch",PAGE_REPLY:"log:page-reply",GENERIC_ADMIN_TEXT:"log:generic-admin-text"})}),null);
__d("MercuryMessageClientState",[],(function a(b,c,d,e,f,g){var h=Object.freeze({DO_NOT_SEND_TO_SERVER:"do_not_send_to_server",SEND_TO_SERVER:"send_to_server"});f.exports=h}),null);
__d("MercuryMessageIDs.bs",["bs_curry","KeyedCallbackManager"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("KeyedCallbackManager"))();function i(k,l){var m=k.filter(function(o){return+(o.indexOf("id")===-1)}),n=function n(o){return c("bs_curry")._1(l,k.map(function(p){var q=o[p];if(q!==undefined)return q;else return p}))};return h.executeOrEnqueue(m,n)}function j(k,l){h.setResource(k,l);return 0}g.getServerIDs=i;g.addServerID=j}),null);
__d("MercuryServerSendMessageQueueOptions",[],(function a(b,c,d,e,f,g){function h(i,j,k,l,m,n){"use strict";this.success_handler=i;this.error_handler=j;this.transport_error_handler=k;this.timeout_handler=l;this.timeout=m;this.connection_retries=n}f.exports=h}),null);
__d("MercuryServerSendMessageQueueSimulatedError",["AsyncRequest","AsyncResponse"],(function a(b,c,d,e,f,g){var h=9999,i={create:function j(k){var l=new(c("AsyncRequest"))(this.endpoint_uri).setData({message_batch:[k],client:this.client}),m=new(c("AsyncResponse"))(l,{});Object.assign(m,{error:h,silentError:false,transientError:true,request:l});return m}};f.exports=i}),null);
__d("MNCommerceBubbleType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FB_RETAIL_RECEIPT:1,FB_RETAIL_CANCELLATION:2,FB_RETAIL_SHIPMENT:3,FB_RETAIL_SHIPMENT_TRACKING_EVENT_ETA:4,FB_RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:5,FB_RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:6,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:7,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:8,FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:9,FB_RETAIL_SHIPMENT_ETA:10,FB_RETAIL_NOW_IN_STOCK:11,FB_RETAIL_AGENT_ITEM_SUGGESTION:12,FB_RETAIL_AGENT_ITEM_RECEIPT:13,FB_RETAIL_PROMOTIONAL_MSG:14})}),null);
__d("MNCommerceCallToActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({OPEN_NATIVE:1,OPEN_URL:2,OPEN_CANCEL_RIDE_MUTATION:3,POSTBACK:4,ACCOUNT_LINK:5,MANAGE_MESSAGES:6,SHARE:7,PAYMENT:8,FACEBOOK_REPORT_A_PROBLEM:9,SUBSCRIPTION_PRESELECT:10,NAVIGATION:11,EXTENSIBLE_SHARE:12,OPEN_REACT_NATIVE_MINI_APP:13,OPEN_PAGE_ABOUT:14,OPEN_BRANDED_CAMERA:15,OPEN_THREAD:16})}),null);
__d("P2PPaymentRequestStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({INITED:1,DECLINED:2,TRANSFER_INITED:3,TRANSFER_COMPLETED:4,TRANSFER_FAILED:5,CANCELED:6,EXPIRED:7})}),null);
__d("P2PTransferStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18,CANCELED_SENDER_CANCEL:19,PENDING_SENDER_IDV_REVIEW:20,PENDING_RECEIVER_IDV_REVIEW:21})}),null);
__d("bs_js_null_undefined",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k,l){if(k==null)return k;else return l(k)}function i(k,l){if(k==null)return 0;else return l(k)}function j(k){if(k)return k[0];else return undefined}g.bind=h;g.iter=i;g.from_opt=j}),null);
__d("MessengerStoryAttachmentTransformer.bs",["fbt","URI","bs_array","Utils.bs","bs_string","bs_caml_array","bs_js_boolean","bs_caml_format","CurrentUser","bs_js_primitive","FundsAvailability","bs_js_null_undefined","P2PTransferStatus","MNCommerceBubbleType","PaymentModulesClient","MercuryAttachmentType","bs_caml_builtin_exceptions","P2PPaymentRequestStatus","ServicesCalendarSyncType","MNCommerceCallToActionType","LeadGenInfoFieldTypes"],(function aa(ba,a,ca,da,ea,b,c){"use strict";__p&&__p();function d(B){return a("bs_array").map(function(C){var D=C.user_confirmation,E=D==null?[null,null,null,null,false]:[D.cancel_button_label,D.continue_button_label,D.confirmation_message,D.confirmation_title,true],F=C.payment_metadata;return{action_link:C.action_link,action_type:a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("MNCommerceCallToActionType")[C.action_open_type])),action_objects:C.action_objects,title:C.title,confirmation_cancel_label:E[0],confirmation_continue_label:E[1],confirmation_message:E[2],confirmation_title:E[3],id:C.id,is_disabled:C.is_disabled,is_mutable_by_server:C.is_mutable_by_server,payment_metadata:F==null?{payment_module_config:null,total_price:null}:{payment_module_config:F.payment_module_config,total_price:F.total_price},render_style:C.render_style,webview_metadata:{fallback_url:C.webview_metadata.fallback_url,messenger_extensions:C.webview_metadata.messenger_extensions,webview_height_ratio:C.webview_metadata.webview_height_ratio,webview_share_button:C.webview_metadata.webview_share_button},should_show_user_confirmation:E[4],page_id:C.page_id}},B)}function e(B){return a("bs_array").map(function(C){var D=C.url,E=D==null?null:new(a("URI"))(D).getUnqualifiedURI().toString();return{title:C.title,uri:E}},B)}function fa(B){if(!(B==null)&&B!=="")return"#"+a("bs_string").sub(B,2,B.length-2|0);else return null}function ga(B){if(B==null)return null;else return{url:B.uri,src:B.uri,width:B.width,height:B.height}}function f(B,C){var D=C.cover_photo,E;if(D==null)E=[null,null,null];else{var F=D.photo.image,G=F==null?[null,null]:[F.uri,{height:F.height,width:F.width}];E=[D.photo.id,G[0],G[1]]}var H=C.location,I=H==null?[null,null]:[H.latitude,H.longitude],J=C.overall_star_rating;return{address:C.address.single_line_full_address,category:C.top_category_name,coverPhotoID:E[0],coverPhotoURL:E[1],coverPhotoDimensions:E[2],latitude:I[0],longitude:I[1],name:C.name,rating:J==null?null:J.value,pageID:C.id,priceRange:C.price_range_description,viewerID:B}}function g(B){var C=B.group_commerce_item_seller,D=B.primary_photo,E;if(D==null)E=null;else{var F=D.image;E=F==null?null:F.uri}return{caption:B.group_commerce_item_description.text,desc:B.group_commerce_item_description.text,owner_id:C==null?null:C.id,price:B.formatted_price.text,text:B.group_commerce_item_description.text,title:B.group_commerce_item_title,thumb_url:E,url:B.url}}function h(B){return{app_name:B.application_name,artists:B.artist_names,audio_url:B.audio_url,duration_ms:B.duration_ms,title:B.music_title}}function i(B){var C=B.payment;return{id:B.id,desc:B.desc,display_total_cost:B.total_cost,merchant_name:B.merchant_name,target_url:B.target_url,thumb_url:B.thumb_url,raw_amount:B.raw_amount,payment_id:C==null?null:C.id,total_cost:{amount:a("bs_caml_format").caml_float_of_string(B.price_amount),currency:B.price_currency},name:B.name}}function j(B){return{fundraiserID:B.fundraiserID,canDonate:B.canDonate,hasViewerDonated:B.hasViewerDonated,fundraiserDetailedProgressText:B.fundraiserDetailedProgressText,fundraiserSubtitleText:B.fundraiserSubtitleText,focusedCoverPhoto:B.focusedCoverPhoto}}function k(B){return{id:B.id,name:B.name,desc:B.desc,thumb_url:B.thumb_url,item_url:B.item_url,title:B.name,text:B.desc,source:B.source,image_aspect_ratio:B.image_aspect_ratio,metalines:{metaline_1:B.first_metaline,metaline_2:B.second_metaline,metaline_3:B.third_metaline},default_action:B.default_action,call_to_actions:d(B.call_to_actions)}}function l(B){__p&&__p();var C=function C($){var E=$.page_call_to_action;if(E==null)return undefined;else return E.id},D=function D($){var E=$.page_call_to_action;if(E==null)return false;else{var F=E.component_flow_service_config;if(F==null)return false;else return true}},E=B.page,F=E==null?[undefined,undefined,undefined,false]:[E.id,a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("ServicesCalendarSyncType")[E.calendar_sync_type])),C(E),D(E)],G=B.native_component_flow_request,H;if(G==null)H=null;else{var I=G.page,J=G.page,K=G.page,L;if(K==null)L=undefined;else{var M=K.profile_picture;L=M==null?undefined:M.uri}var N=G.suggested_time_range,O=G.product_item,P=G.product_item,Q=G.product_item,R=G.product_item,S;if(R==null)S=undefined;else{var T=R.profile_picture;S=T==null?undefined:T.uri}var U=G.user,V=G.user,W=G.job_application,X=G.user,Y;if(X==null)Y=undefined;else{var ha=X.profile_picture;Y=ha==null?undefined:ha.uri}H={additionalInfo:G.additional_info,archivedStatus:G.archived_status,availability:G.availability,hasSavedToCalendar:G.has_saved_to_calendar,requestFlowType:G.request_flow_type,generalInfo:G.service_general_info,id:G.id,pageID:I==null?undefined:I.id,pageName:J==null?undefined:J.name,pageProfilePic:L,preferredTimeRange:N==null?null:{end:N.end,start:N.start},price:O==null?null:O.experimental_freeform_price,duration:P==null?null:P.duration_in_seconds,requestAdminApprovalType:G.request_admin_approval_type,requestedTime:G.requested_time,serviceName:Q==null?null:Q.name,serviceProfilePic:S,specialRequest:G.special_request,status:G.booking_status_value,statusLabel:G.status,userID:U==null?undefined:U.id,username:V==null?undefined:V.short_name,jobApplicationID:W==null?undefined:W.id,userProfilePic:Y}}var ia=B.message_bubble_type,Z;switch(ia){case"CANCELLED":Z=["Cancelled",c._("Cancelled")];break;case"DECLINED":Z=["Declined",c._("Declined")];break;case"REQUESTED":Z=["Requested",c._("Requested")];break;case"SCHEDULEED":Z=["Scheduled",c._("Scheduled")];break;default:throw[a("bs_caml_builtin_exceptions").invalid_argument,"Erroneous target status"]}return{id:B.id,pageID:F[0],calendarSyncType:F[1],ctaID:F[2],hasServiceConfig:F[3],userID:B.user.id,status:Z[0],statusLabel:Z[1],viewerID:a("CurrentUser").getAccountID(),requestMetadata:H}}function m(B){return{live_location_id:B.live_location_id,is_expired:a("bs_js_boolean").to_js_boolean(B.is_expired),expiration_time:B.expiration_time,sender:B.sender,coordinate:B.coordinate,location_title:B.location_title,sender_destination:B.sender_destination,stop_reason:B.stop_reason}}function n(B){var C=B.first_metaline;return{desc:B.description,id:B.id,image_aspect_ratio:B.image_aspect_ratio,item_url:B.target_url,metalines:C==null?{}:{metaline_1:C},name:B.name,source:B.source_name,text:B.description,thumb_url:B.image_url,title:B.name,default_action:B.default_action,call_to_actions:d(B.call_to_actions),media_blob_attachments:B.media_blob_attachments}}function o(B){var C=a("bs_array").map(n,B.business_items.nodes),D=d(B.call_to_actions);return{message:B.message,call_to_actions:D,items:C}}function p(B){return{message:B.message,call_to_actions:d(B.call_to_actions),items:a("bs_array").map(n,B.promotion_items.nodes)}}function q(B){var C=B.structured_address.streets,D=B.partner_logo;return{account_holder_name:B.account_holder_name,adjustments:a("bs_array").map(function(E){return{adjustment_type:E.adjustment_type,display_adjustment_amount:E.adjustment_amount}},B.adjustments),cancellation_url:B.cancellation_url,items:a("bs_array").map(n,B.items.nodes),merchant_name:B.merchant_name,messenger_commerce_bubble_type:a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("MNCommerceBubbleType")[B.messenger_commerce_bubble_type])),order_id:B.order_id,order_time:B.order_time,order_url:B.order_url,payment_method:B.payment_method,receipt_id:B.receipt_id,recipient_name:B.recipient_name,shipping_cost:B.shipping_cost,shipping_method:B.shipping_method,status:B.status,structured_address:{city:B.structured_address.city,state:B.structured_address.state,country:B.structured_address.country,postal_code:B.structured_address.postal_code,street_1:a("bs_caml_array").caml_array_get(C,0),street_2:a("bs_caml_array").caml_array_get(C,1)},subtotal:B.subtotal,total_cost:B.total_cost,total_tax:B.total_tax,partner_logo:D==null?undefined:D.uri}}function r(B,C){return{payment_modules_client:a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("PaymentModulesClient")[C.payment_modules_client])),is_viewer_seller:C.is_viewer_seller,payment_snippet:C.payment_snippet,item_list:a("bs_array").map(function(D){return{item_id:D.item_id,name:D.name,subtitle:D.subtitle,description:D.description,unit_price:D.unit_price,image_urls:a("bs_array").map(function(E){return E.uri},D.images),quantity:D.quantity}},C.item_list),components:C.components,payment_call_to_actions:C.payment_call_to_actions,click_action:C.click_action,actor_id:B,invoicer_id:C.invoicer_id}}var s=function s(B){__p&&__p();var C=a("LeadGenInfoFieldTypes"),D={},E=[];for(var F=B.field_data_list,G=Array.isArray(F),H=0,F=G?F:F[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var I;if(G){if(H>=F.length)break;I=F[H++]}else{H=F.next();if(H.done)break;I=H.value}var J=I,K=J.field_type,L=J.label,M=J.values;if(K===C.CUSTOM||K===C.ZIP)E.push({label:L,values:M});else D[K]={label:L,values:M}}D.questions=E;return D};function t(B,C){var D=C.invite_recipient,E=D==null?null:D.id,F=C.invite_sender,G=F==null?null:F.id;return{quick_invite_id:C.id,recipient_id:E,sender_id:G,is_viewer_recipient:a("bs_js_boolean").to_js_boolean(+(B===E))}}function u(B){var C=function C(F){if(F==null)return null;else return F.uri},D=B.listing_category,E=D==null?[null,null]:[D.offer_image,D.request_image];return{listingType:B.listing_type,mapURI:C(B.map_image),offerURI:C(E[0]),requestURI:C(E[1])}}function v(B){return{sender:B.sender,receiver:B.receiver,transfer_id:B.transfer_id,bubbleView:B.bubble_view}}function w(B){__p&&__p();var C=B.receiver_profile,D;if(C==null)D=null;else{var E=C.profile_picture;D={id:C.id,name:C.short_name,full_name:C.name,picture:E==null?null:E.uri,profile_url:C.url}}var F=B.sender,G;if(F==null)G={};else{var H=F.profile_picture;G={id:F.id,name:F.name,full_name:F.full_name,picture:H==null?null:H.uri,profile_uri:F.url}}var I=B.transfer_context,J;if(I==null)J=[null,null,null];else{var K=I.transfer_theme;J=[I.memoText,a("bs_array").map(function(N){var C=N.image;if(C==null)return null;else return C.uri},I.memo_images),K==null?null:K.id]}var L=B.platform_item,M=L==null?null:{name:L.name,description:L.description,image:a("bs_array").map(function(N){var C=N.image;if(C==null)return null;else return C.uri},L.photos),refURL:L.url};return{sender:G,amountWithSymbol:B.transaction_amount.formatted_amount,status:a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("P2PTransferStatus")[B.transfer_status])),receiver:D,transfer_id:B.transfer_id,completedTime:B.completedTime,updatedTime:B.updatedTime,creationTime:B.creationTime,amount:B.transaction_amount.amount,memoText:J[0],memoPhotoURLs:J[1],themeID:J[2],discountAmount:B.amount_fb_discount.formatted,fundsAvailability:a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("FundsAvailability")[B.funds_availability])),groupThreadFBID:B.group_thread_fbid,platform_item:M,statusDescription:{markup:B.status_description},bubbleView:B.bubble_view,currencyCode:B.currency_amount.currency}}function x(B){__p&&__p();var C=B.requester,D;if(C==null)D=undefined;else{var E=C.profile_picture;D={id:C.id,name:C.short_name,full_name:C.name,picture:E==null?null:E.uri,profile_url:C.url}}var F=B.requestee,G;if(F==null)G=undefined;else{var H=F.profile_picture;G={id:F.id,name:F.short_name,full_name:F.name,picture:H==null?null:H.uri,profile_url:F.url}}var I=a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("P2PPaymentRequestStatus")[B.request_status])),J=B.transfer,K=J==null?[null,""]:[w(J),J.id],L=B.request_theme;return{amount:B.transaction_amount.amount,amountWithSymbol:B.amount.formatted,requestee:G,requester:D,currentStatus:I,currency:B.amount.currency,creationTime:B.creation_time,groupThreadFBID:B.group_thread_fbid,id:B.id,memoText:B.memo_text,themeID:L==null?null:L.id,transfer:K[0],transferID:K[1],updatedTime:B.updated_time,bubbleView:B.bubble_view,statusDescription:{markup:B.status_description}}}function y(B){var C=x({amount:B.amount,transaction_amount:B.transaction_amount,requester:B.requester,requestee:B.requestee,request_status:B.request_status,request_theme:B.request_theme,id:B.id,memo_text:B.memo_text,transfer:B.transfer,creation_time:B.creation_time,group_thread_fbid:B.group_thread_fbid,updated_time:B.updated_time,bubble_view:B.bubble_view,status_description:B.status_description}),D={individualRequests:a("bs_array").map(x,B.individual_requests)};return Object.assign(C,D)}function z(B,C){__p&&__p();var D=C.media,E=D==null?null:D.animated_image,F=D==null?null:D.image,G={};a("bs_array").iter(function(U){var H=U.value;G[U.key]=H==null?null:H.text;return 0},C.properties);var H=C.target,I;if(H==null)I=null;else switch(H.tag|0){case 0:I=u(H[0]);break;case 1:I=v(H[0]);break;case 2:I=w(H[0]);break;case 3:I=y(H[0]);break;case 4:I=r(B,H[0]);break;case 7:I=p(H[0]);break;case 8:I=o(H[0]);break;case 10:I=s(H[0]);break;case 11:I=m(H[0]);break;case 12:I=t(B,H[0]);break;case 13:I=l(H[0]);break;case 14:var J=H[0],K=J.genie_sender,L=K==null?[null,null]:[K.messaging_actor.id,K.messaging_actor.name],M=L[0],N=J.story_attachment,O=N==null?null:A(B,{legacy_attachment_id:M,story_attachment:{action_links:N.action_links,messaging_attribution:N.messaging_attribution,messenger_call_to_actions:N.messenger_call_to_actions,deduplication_key:N.deduplication_key,description:N.description,media:N.media,properties:N.properties,source:N.source,style_list:N.style_list,title_with_entities:N.title_with_entities,url:N.url,subattachments:[],target:null}});I={genie_id:M,genie_name:L[1],attachment:O};break;case 16:I=h(H[0]);break;case 18:I=k(H[0]);break;case 19:I=i(H[0]);break;case 20:I=j(H[0]);break;case 21:I=q(H[0]);break;case 23:I=g(H[0]);break;case 24:I=f(B,H[0]);break;default:I=H[0]}var P=C.target,Q=!(P==null)&&P.tag===7?0:null,R=C.description,S=C.source,T=C.title_with_entities;return{description:R==null?null:R.text,media:{animated_image:E==null?null:E.uri,animated_image_size:E==null?{height:null,width:null}:{height:E.height,width:E.width},image:F==null?null:F.uri,image_size:F==null?{height:null,width:null}:{height:F.height,width:F.width},duration:D==null?null:D.playable_duration,playable:D==null?null:D.is_playable,source:D==null?null:D.playable_url},source:S==null?null:S.text,style_list:C.style_list,title:T==null?null:T.text,action_links:e(C.action_links),messaging_attribution:C.messaging_attribution,messenger_ctas:a("bs_array").map(function(U){return{id:U.id,page_id:a("Utils.bs").$pipe$unknown(a("bs_js_primitive").null_undefined_to_opt(U.page_id),""),action_title:U.title,action_url:U.action_link,action_open_type:a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("MNCommerceCallToActionType")[U.action_open_type])),is_high_confidence:a("Utils.bs").$pipe$unknown(a("bs_js_primitive").null_undefined_to_opt(U.is_high_confidence),false),is_mutable_by_server:U.is_mutable_by_server,native_url:U.native_url,is_disabled:U.is_disabled,webview_metadata:{fallback_url:U.webview_metadata.fallback_url,messenger_extensions:U.webview_metadata.messenger_extensions,webview_height_ratio:U.webview_metadata.webview_height_ratio,webview_share_button:U.webview_metadata.webview_share_button}}},C.messenger_call_to_actions),properties:G,uri:C.url,deduplication_key:C.deduplication_key,target:I,label:Q}}function A(B,C){var D=C.story_attachment,E;if(D==null)E=null;else{var F={share_id:C.legacy_attachment_id,subattachments:a("bs_array").map(function(H){return z(B,H)},D.subattachments)},G={description:D.description,media:D.media,source:D.source,style_list:D.style_list,title_with_entities:D.title_with_entities,properties:D.properties,url:D.url,deduplication_key:D.deduplication_key,action_links:D.action_links,messaging_attribution:D.messaging_attribution,messenger_call_to_actions:D.messenger_call_to_actions,target:D.target};E=Object.assign(F,z(B,G))}return{app_attribution:null,attach_type:a("MercuryAttachmentType").SHARE,name:null,url:null,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:null,metadata:null,share:E,thumbnail_url:null}}b._getCallToActions=d;b._getActionLinks=e;b._getColor=fa;b._getLogo=ga;b._getPageTarget=f;b._getGroupCommerceProductItemTarget=g;b._getExternalSongTarget=h;b._getAgentSuggestionItemTarget=i;b._getFundraiserTarget=j;b._getRetailItemTarget=k;b._getPagesPlatformBookingMessageTarget=l;b._getMessageLiveLocationTarget=m;b._getBusinessRetailItem=n;b._getMessengerBusinessMessageTarget=o;b._getMessengerRetailPromotionTarget=p;b._getMessengerRetailReceiptTarget=q;b._getPagesPlatformAttachmentTarget=r;b._getPagesPlatformLeadGenInfoTarget=s;b._getQuickInviteTarget=t;b._getCrisisListingTarget=u;b._getMoneyTransferTarget=v;b._getP2PTransferTarget=w;b._getP2PTransferRequestTarget=x;b._getP2PTransferRequestWithIndividualRequests=y;b.transformStoryAttachment=z;b.getExtensibleAttachmentPayload=A}),null);
__d("MessengerAttachmentTransformer.bs",["fbt","bs_array","bs_js_boolean","bs_pervasives","bs_caml_primitive","MercuryAttachmentType","MercuryAttachmentContentType","MessengerStoryAttachmentTransformer.bs"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(q){__p&&__p();if(q.is_malicious)return{app_attribution:null,icon_type:c("MercuryAttachmentContentType").UNKNOWN,metadata:null,name:null,preview_height:null,preview_url:null,preview_width:null,rel:null,share:null,thumbnail_url:null,url:null,attach_type:c("MercuryAttachmentType").ERROR,error_msg:h._("This attachment has been marked as malicious."),message_file_fbid:null,url_shimhash:null,url_skipshim:null};else{var r=q.attribution_app,s;if(r==null)s=null;else{var t=r.square_logo;s={id:r.id,icon_url:t==null?null:t.uri,metadata:q.attribution_metadata,name:r.name}}var u=q.url;return{app_attribution:s,icon_type:q.content_type,metadata:null,name:q.filename,preview_height:null,preview_url:null,preview_width:null,rel:"ignore",share:null,thumbnail_url:null,url:u==null?null:u,attach_type:c("MercuryAttachmentType").FILE,error_msg:undefined,message_file_fbid:q.message_file_fbid,url_shimhash:q.url_shimhash,url_skipshim:q.url_skipshim}}}function j(q,r,s){var t=q.chat_image,u=t==null?[null,null,null]:[t.uri,t.width,t.height],v=u[0],w=q.chat_image,x=w==null?null:{width:w.width,height:w.height},y=q.large_image,z=y==null?[null,null]:[y.uri,{width:y.width,height:y.height}],A=q.inbox_image,B=A==null?[null,null]:[A.uri,{width:A.width,height:A.height}],C=q.attribution_app,D;if(C==null)D=null;else{var E=C.square_logo;D={id:C.id,icon_url:E==null?null:E.uri,metadata:q.attribution_metadata,name:C.name}}return{app_attribution:D,attach_type:c("MercuryAttachmentType").VIDEO,name:q.filename,url:q.playable_url,rel:"async",preview_url:v,preview_width:u[1],preview_height:u[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c("MercuryAttachmentContentType").VIDEO,metadata:{fbid:q.legacy_attachment_id,render_as_sticker:c("bs_js_boolean").to_js_boolean(+(q.video_type==="SPEAKING_STICKER")),dimensions:{width:q.original_dimensions.x,height:q.original_dimensions.y},duration:q.playable_duration_in_ms,large_size:z[1],large_preview:z[0],chat_size:x,chat_preview:v,inbox_size:B[1],inbox_preview:B[0],pageid:s?r:undefined},thumbnail_url:v,share:null}}function k(q){var r=q.attribution_app,s;if(r==null)s=null;else{var t=r.square_logo;s={id:r.id,icon_url:t==null?null:t.uri,metadata:q.attribution_metadata,name:r.name}}return{app_attribution:s,attach_type:c("MercuryAttachmentType").FILE,name:q.filename,url:q.playable_url,rel:"ignore",preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c("MercuryAttachmentContentType").MUSIC,metadata:{duration:q.playable_duration_in_ms,isVoicemail:q.is_voicemail?"1":"0",type:q.audio_type==="VOICE_MESSAGE"?"fb_voice_message":q.audio_type==="VOICE_MESSAGE_WITH_TRANSCRIPT"?"fb_voice_message_with_transcript":"file_attachment"},thumbnail_url:null,share:null,url_shimhash:q.url_shimhash,url_skipshim:q.url_skipshim}}function l(q,r,s){var t=q.preview_image,u=t==null?[null,null,null]:[t.uri,t.width,t.height],v=q.animated_image,w=v==null?null:v.uri,x=q.attribution_app,y;if(x==null)y=null;else{var z=x.square_logo;y={id:x.id,icon_url:z==null?null:z.uri,metadata:q.attribution_metadata,name:x.name}}return{app_attribution:y,attach_type:c("MercuryAttachmentType").ANIMATED_IMAGE,name:q.filename,url:w,rel:"async",preview_url:u[0],preview_width:u[1],preview_height:u[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c("MercuryAttachmentContentType").PHOTO,metadata:{fbid:q.legacy_attachment_id,image:w,dimensions:c("bs_pervasives").string_of_int(q.original_dimensions.x)+(","+c("bs_pervasives").string_of_int(q.original_dimensions.y)),pageid:s?r:undefined},thumbnail_url:w,share:null}}function m(q){__p&&__p();var r=q.original_extension==="gif"?c("MercuryAttachmentType").ANIMATED_IMAGE:q.render_as_sticker?c("MercuryAttachmentType").THIRDPARTYSTICKER:c("MercuryAttachmentType").PHOTO,s=q.preview,t=s==null?[null,null,null]:[s.uri,s.width,s.height],u;if(r===c("MercuryAttachmentType").PHOTO){var v=q.large_preview;u=v==null?[null,null,null]:[v.uri,v.width,v.height]}else u=[null,null,null];var w=q.attribution_app,x;if(w==null)x=null;else{var y=w.square_logo;x={id:w.id,icon_url:y==null?null:y.uri,metadata:q.attribution_metadata,name:w.name}}var z=q.thumbnail;return{app_attribution:x,attach_type:r,name:q.filename,url:null,rel:"async",preview_url:t[0],preview_width:t[1],preview_height:t[2],large_preview_url:u[0],large_preview_width:u[1],large_preview_height:u[2],icon_type:c("MercuryAttachmentContentType").PHOTO,metadata:{fbid:q.legacy_attachment_id,dimensions:c("bs_pervasives").string_of_int(q.original_dimensions.x)+(","+c("bs_pervasives").string_of_int(q.original_dimensions.y))},thumbnail_url:z==null?null:z.uri,share:null,photo_encodings:q.photo_encodings}}function n(q,r){var s=q,t=r;if(q>=r){var u=c("bs_caml_primitive").caml_float_min(120,s/2),v=u/(s/2);return[u|0,t/2*v|0]}else{var w=c("bs_caml_primitive").caml_float_min(120,t/2),x=w/(t/2);return[s/2*x|0,w|0]}}function o(q){var r=n(q.width,q.height),s=q.pack,t=q.sprite_image,u=q.sprite_image_2x,v=q.padded_sprite_image,w=q.padded_sprite_image_2x;return{app_attribution:null,attach_type:c("MercuryAttachmentType").STICKER,name:null,url:q.url,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:c("MercuryAttachmentContentType").UNKNOWN,metadata:{accessibilityLabel:q.label,stickerID:q.id,packID:s==null?null:s.id,frameCount:q.frame_count,frameRate:q.frame_rate,framesPerRow:q.frame_count>1?q.frames_per_row:1,framesPerCol:q.frame_count>1?q.frames_per_column:1,height:r[1],width:r[0],spriteURI:t==null?null:t.uri,spriteURI2x:u==null?null:u.uri,paddedSpriteURI:v==null?null:v.uri,paddedSpriteURI2x:w==null?null:w.uri,thumbnail_url:null,share:null}}}function p(q,r,s){__p&&__p();var t=[],u=r.extensible_attachment;if(!(u==null))t.push(c("MessengerStoryAttachmentTransformer.bs").getExtensibleAttachmentPayload(q,u));var v=r.sticker;if(!(v==null))t.push(o(v));var w=r.blob_attachments;if(!(w==null))c("bs_array").iter(function(x){__p&&__p();switch(x.tag|0){case 0:t.push(m(x[0]));return 0;case 1:t.push(l(x[0],q,s));return 0;case 2:t.push(k(x[0]));return 0;case 3:t.push(j(x[0],q,s));return 0;case 4:t.push(i(x[0]));return 0}},w);return t}g._getFilePayload=i;g._getVideoPayload=j;g._getAudioPayload=k;g._getAnimatedImagePayload=l;g._getImagePayload=m;g._getStickerDimensions=n;g._getStickerPayload=o;g.transformAttachment=p}),null);
__d("InstantGameUpdateXMATUpdateType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNKNOWN:"unknown",GAME_SCORE:"game_score",CUSTOM_MESSAGE:"custom_message"})}),null);
__d("MNCommerceMessageType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",ROBOT_TEXT:"robot_text",LOCATION:"location",FORCED_FETCH_MESSAGE:"forced_fetch_message",SENDER_ACTION:"sender_action",RETAIL_PRODUCT_SUBSCRIPTION:"retail_product_subscription",RETAIL_PROMOTION:"retail_promotion",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_SHIPMENT:"retail_shipment",SHIPMENT_TRACKING_EVENT:"shipment_tracking_event",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_CHECKIN:"airline_checkin",AIRLINE_BOARDINGPASS:"airline_boardingpass",AIRLINE_UPDATE:"airline_update",AIRLINE_ITINERARY:"airline_itinerary",CONTENT_SUBSCRIPTION:"content_subscription",AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble",NON_AD:"non_ad",UNKNOWN:"unknown",OTHER:"other",TEMPLATE:"template",OPEN_GRAPH:"open_graph",GENERIC:"generic",LIST:"list",COMPACT_LIST:"compact_list",BUTTON:"button",RECEIPT:"receipt",GENERIC_LEGACY:"generic_legacy",ICE_BREAKER:"ice_breaker",FALLBACK:"fallback",RIDE_INTENT:"ride_intent",RIDE_SIGNUP:"ride_signup",RIDE_WELCOME:"ride_welcome",RIDE_ORDER_CONFIRMATION:"ride_order_confirmation",RIDE_REQUESTED:"ride_requested",RIDE_DRIVER_ON_THE_WAY:"ride_driver_on_the_way",RIDE_NO_DRIVER:"ride_no_driver",RIDE_DRIVER_ARRIVING:"ride_driver_arriving",RIDE_DRIVER_CANCELED:"ride_driver_canceled",RIDE_RIDER_CANCELED:"ride_rider_canceled",RIDE_COMPLETE:"ride_complete",RIDE_ADMIN_MESSAGE:"ride_admin_message",RIDE_RECEIPT:"ride_receipt",RIDE_REENGAGEMENT_FIRST_RIDE:"ride_reengagement_first_ride",GET_RIDE:"give_get_ride",GIVE_RIDE:"send_give_get_ride",REFERER_PROMO:"referer_promo",INSTANT_GAMES_SHARE:"instant_games_share",INSTANT_GAMES_SCORE:"instant_games_score",INSTANT_GAMES_LIVE_STREAM:"instant_games_live_stream",LINK:"link_admin_message",UNLINK:"unlink_admin_message",BLOCK_ALL:"block_all_admin_message",UNBLOCK_ALL:"unblock_all_admin_message",BLOCK_PROMOTION:"block_promotion_admin_message",UNBLOCK_PROMOTION:"unblock_promotion_admin_message",INITIAL_PROMOTION:"initial_promotion_admin_message",WEAK_CONSENT_ADMIN_MESSAGE:"weak_consent_admin_message",MESSENGER_TEAM_BOT_MESSAGE:"messenger_team_bot",MESSENGER_BOT_BASE_GENERIC:"messenger_bot_base_generic",COMMERCE_COMPACT_LIST:"commerce_compact_list",FEEDBACK:"feedback",MEDIA:"media",PLACE_CARD:"place_card"})}),null);
__d("MessagingGenericAdminTextType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ALOHA_AUTOCONNECT_INVITED:"aloha_autoconnect_invited",ALOHA_CONTACT_ADDED:"aloha_contact_added",ALOHA_CONTACT_ADDED_TO_ALOHA_PROXY_USER:"aloha_contact_added_to_aloha_proxy_user",ALOHA_CONTACT_REMOVED:"aloha_contact_removed",ALOHA_INVITE_OWNER_ACCEPT:"aloha_invite_owner_accept",ALOHA_INVITE_OWNER_DECLINE:"aloha_invite_owner_decline",ALOHA_MEDIA_ADDED:"aloha_media_added",ALOHA_MEDIA_SENT:"aloha_media_sent",ALOHA_VISUAL_MEDIA_SENT:"aloha_visual_media_sent",ALOHA_OWNER_INVITED:"aloha_owner_invited",ALOHA_PROXY_USER_NAME_SET:"aloha_proxy_user_name_set",ALOHA_PROXY_USER_PROFILE_PHOTO_SET:"aloha_proxy_user_profile_photo_set",ALOHA_WIFI_CREDENTIALS_SET:"aloha_wifi_credentials_set",MADE_POLL_VOTE:"made_poll_vote",ALOHA_USER_JOINED_CALL_ON_ALOHA:"aloha_user_joined_call_on_aloha",ALOHA_CALL_ENDED_ON_ALOHA:"aloha_call_ended_on_aloha",GROUP_POLL:"group_poll",GENERIC_NEW_CONNECTION:"generic_new_connection",CONFIRM_FRIEND_REQUEST:"confirm_friend_request",THREAD_CUSTOMIZATION_UPSELL:"thread_customization_upsell",PHONE_CONTACT_UPLOAD:"phone_contact_upload",RELATIONSHIP_CREATED:"relationship_created",ACCEPT_PENDING_THREAD:"accept_pending_thread",RAMP_UP_WELCOME_MESSAGE:"ramp_up_welcome_message",CHANGE_THREAD_THEME:"change_thread_theme",CHANGE_THREAD_ICON:"change_thread_icon",GROUP_THREAD_CREATED:"group_thread_created",THREAD_EPHEMERAL_SEND_MODE:"thread_ephemeral_send_mode",INVITE_ACCEPTED:"invite_accepted",MESSENGER_INVITE_SENT:"messenger_invite_sent",TURN_ON_PUSH:"turn_on_push",JOURNEY_PROMPT_COLOR:"journey_prompt_color",JOURNEY_PROMPT_LIKE:"journey_prompt_like",JOURNEY_PROMPT_NICKNAME:"journey_prompt_nickname",JOURNEY_PROMPT_SETUP:"journey_prompt_setup",CHANGE_THREAD_NICKNAME:"change_thread_nickname",NOTIFY_GROUP_MAYORSHIP:"notify_group_mayorship",PROMPT_GROUP_MAYORSHIP_CUSTOMIZATION:"prompt_group_mayorship_customization",MESSAGE_COUNT_MILESTONE_MESSAGE:"message_count_milestone_message",BOT_THREAD_SUBSCRIPTION:"bot_thread_subscription",RTC_CALL_LOG:"rtc_call_log",RTC_INSTANT_VIDEO_LIFECYCLE:"rtc_instant_video_lifecycle",JOURNEY_PROMPT_BOT:"journey_prompt_bot",RIDE_ORDERED_MESSAGE:"ride_ordered_message",DESTINATION_ETA_MESSAGE:"destination_eta_message",RIDE_ARRIVED_MESSAGE:"ride_arrived_message",JOURNEY_PROMPT_NEW_SETUP:"journey_prompt_new_setup",LIGHTWEIGHT_EVENT_CREATE:"lightweight_event_create",LIGHTWEIGHT_EVENT_DELETE:"lightweight_event_delete",LIGHTWEIGHT_EVENT_NOTIFY:"lightweight_event_notify",LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:"lightweight_event_notify_before_event",LIGHTWEIGHT_EVENT_RSVP:"lightweight_event_rsvp",LIGHTWEIGHT_EVENT_UPDATE:"lightweight_event_update",LIGHTWEIGHT_EVENT_UPDATE_LOCATION:"lightweight_event_update_location",LIGHTWEIGHT_EVENT_UPDATE_TIME:"lightweight_event_update_time",LIGHTWEIGHT_EVENT_UPDATE_TITLE:"lightweight_event_update_title",SAFETY_LOCATION_REQUEST_SENT:"safety_location_request_sent",SAFETY_LOCATION_REQUEST_RESPONDED:"safety_location_request_responded",SAFETY_LOCATION_REQUEST_DENIED:"safety_location_request_denied",AD_MANAGE_MESSAGE:"ad_manage_message",AD_REPLY_MESSAGE:"ad_reply_message",TAGGED_PHOTO:"tagged_photo",GAME_SCORE:"game_score",INSTANT_GAME_UPDATE:"instant_game_update",INSTANT_GAME_BOT_INTRO:"instant_game_bot_intro",MEDIA_SUBSCRIPTION_MANAGE:"media_subscription_manage",M_AI_SURVEY:"m_ai_survey",PHONE_NUMBER_LOOKUP_NOTICE:"phone_number_lookup_notice",MESSENGER_PRECHECKED_PLUGIN:"messenger_prechecked_plugin",ADD_CONTACT:"add_contact",PRODUCT_INVOICE_RECEIPT_REJECTED:"product_invoice_receipt_rejected",PRODUCT_INVOICE_PAID:"product_invoice_paid",PRODUCT_INVOICE_VOIDED:"product_invoice_voided",PRODUCT_INVOICE_SHIPPED:"product_invoice_shipped",PRODUCT_INVOICE_PAYMENT_EXPIRED:"product_invoice_payment_expired",PRODUCT_INVOICE_RECEIPT_UPLOADED:"product_invoice_receipt_uploaded",CHANGE_JOINABLE_SETTING:"change_joinable_setting",CHANGE_THREAD_ADMINS:"change_thread_admins",CHANGE_THREAD_APPROVAL_MODE:"change_thread_approval_mode",CAPY_SESSION_BEGIN:"capy_session_begin",CAPY_SESSION_BOT_BEGIN:"capy_session_bot_begin",CAPY_SESSION_END:"capy_session_end",CAPY_AGENT_JOIN:"capy_agent_join",CAPY_AGENT_DUMPED:"capy_agent_dumped",CAPY_SESSION_WAIT_TIME:"capy_session_wait_time",GROUP_SMS_PARTICIPANT_JOINED:"group_sms_participant_joined",GROUP_SMS_PARTICIPANT_CAPPED:"group_sms_participant_capped",SMS_PHONE_NUMBER_CHECK:"sms_phone_number_check",MESSENGER_BOT_REVIEW_SENT:"messenger_bot_review_sent",MESSENGER_CODE_SCAN:"messenger_code_scan",MESSENGER_LIVECHAT_PLUGIN_OPEN:"messenger_livechat_plugin_open",MINGLE_MATCH_SUCCESS:"mingle_match_success",MINGLE_PARTICIPANT_MATCHED:"mingle_participant_matched",MN_ACCOUNT_LINKING_TEXT:"mn_account_linking_text",MN_ACCOUNT_UNLINKING_TEXT:"mn_account_unlinking_text",MN_ACCOUNT_FORCED_UNLINKING_TEXT:"mn_account_forced_unlinking_text",MN_REF_SEND_TEXT:"mn_ref_send_text",ADS_WELCOME_MSG:"ads_welcome_msg",THREAD_JOINABLE_PROMOTION_TEXT:"thread_joinable_promotion_text",PAGES_PLATFORM_REQUEST_TEXT:"pages_platform_request_text",MESSENGER_NEW_USER_GET_STARTED:"messenger_new_user_get_started",SMS_PHONE_NUMBER_TOGGLE:"sms_phone_number_toggle",PAGES_PLATFORM_CREATE_APPOINTMENT:"Pages_Platform_create_appointment",INTERNAL_CAREER_JOBSY_REACHOUT_CONNECTED:"internal_career_jobsy_reachout_connected",JOINABLE_GROUP_THREAD_CREATED:"joinable_group_thread_created",JOINABLE_ROOM_CREATED_WITH_CO_CREATORS:"joinable_room_created_with_co_creators",PAGES_PLATFORM_ACCEPT_APPOINTMENT:"pages_platform_accept_appointment",PAGES_PLATFORM_REFERRAL_CONFIRMED_APPOINTMENT:"pages_platform_referral_confirmed_appointment",PAGES_PLATFORM_DECLINE_APPOINTMENT:"pages_platform_decline_appointment",PAGES_PLATFORM_USER_CANCEL:"pages_platform_user_cancel",PAGES_PLATFORM_ADMIN_CANCEL:"pages_platform_admin_cancel",MESSENGER_OMNIM_CREATE_FLOW:"messenger_omnim_create_flow",MESSENGER_OMNIM_UPDATE_FLOW:"messenger_omnim_update_flow",MESSENGER_OMNIM_UPDATE_FLOW_STATE:"messenger_omnim_update_flow_state",MESSENGER_GROUP_DESCRITPION_UPDATE:"messenger_group_description_update",MESSENGER_EXTENSION_ADD_CART:"messenger_extension_add_cart",MESSENGER_EXTENSION_ADD_FAVORITE:"messenger_extension_add_favorite",MESSENGER_AD_CONTEXT:"messenger_ad_context",PAGES_PLATFORM_APPOINTMENT_REMINDER:"pages_platform_appointment_reminder",PAGES_PLATFORM_ADMIN_DECLINE:"pages_platform_admin_decline",POKE_RECEIVED:"poke_received",MESSENGER_STATION_SUBSCRIPTION:"messenger_station_subscription",MESSENGER_USER_ALSO_ON_MESSENGER:"messenger_user_also_on_messenger",MESSENGER_INBOX2_BIRTHDAY_BUMP:"messenger_inbox2_birthday_bump",MESSENGER_RESPOND_REMINDER_CONFIRMATION:"messenger_respond_reminder_confirmation",MESSENGER_RESPOND_REMINDER:"messenger_respond_reminder",MESSENGER_RESPOND_REMINDER_USER_CANCEL:"messenger_respond_reminder_user_cancel",MESSENGER_RESPOND_REMINDER_CANCEL_SUGGESTION:"messenger_respond_reminder_cancel_suggestion",STARTED_SHARING_VIDEO:"started_sharing_video",LIVE_VIDEO_CHAT:"live_video_chat",PARTICIPANT_JOINED_GROUP_CALL:"participant_joined_group_call",MESSENGER_ONLY_PHONE_JOINED_WITH_NEW_ACCOUNT:"messenger_only_phone_joined_with_new_account",PAGES_COMMERCE_PAYMENT_ENABLED:"pages_commerce_payment_enabled",GROUP_PAYMENT_REQUEST:"group_payment_request",P2P_CALL_ESCALATED_TO_GROUP_CALL:"p2p_call_escalated_to_group_call",INVITED_TO_ESCALATED_P2P_CALL:"invited_to_escalated_p2p_call",EVENT_UPCOMING:"event_upcoming",PAGES_VISITOR_POST_SEND_MESSAGE_UPSELL:"pages_visitor_post_send_message_upsell",PAGES_LOW_MESSAGE_RESPONSE_RATE:"pages_low_message_response_rate",PAGES_START_CALL:"pages_start_call",PARTIES_INVITE:"parties_invite",PAGES_JOIN_LOYALTY_PROGRAM:"pages_join_loyalty_program",WORK_INVITE_CLAIMED:"work_invite_claimed",P2P_PAYMENT_REQUEST_REMINDER:"p2p_payment_request_reminder",PHOTO_TAG_BUMP:"photo_tag_bump",MESSENGER_CALL_UPGRADE_LEGACY_CLIENT:"messenger_call_upgrade_legacy_client",DIRECTED_WALL_POST:"directed_wall_post",MESSENGER_CALL_LOG:"messenger_call_log",P2P_PAYMENT_MONEY_RAIN_GAME_ENTRY_POINT:"p2p_payment_money_rain_game_entry_point",MESSENGER_MONTAGE_MENTIONS:"messenger_montage_mentions",PAGES_MESSAGING_BLOCK_WORDS:"pages_messaging_block_words",ALOHA_CALL_INVITE:"aloha_call_invite",SHIPPO_TRACKING_UPDATES:"shippo_tracking_updates",NEO_APPROVED_CONNECTION_ADDED:"neo_approved_connection_added",CHANGE_FAVORITE_COLOR:"change_favorite_color",MARKETPLACE_ITEM_CHANGED:"marketplace_item_changed",SERVICES_VERTICAL_REDEEMED_REFERRAL:"services_vertical_redeemed_referral",SERVICES_VERTICAL_OPT_OUT_REQUESTS:"services_vertical_opt_out_requests",SERVICES_VERTICAL_OPT_OUT_REQUESTS_SUCCESS:"services_vertical_opt_out_requests_success",SERVICES_VERTICAL_LEAD_GEN_SURVEY:"services_vertical_lead_gen_survey",SERVICES_VERTICAL_LEAD_GEN_SURVEY_EDIT:"services_vertical_lead_gen_survey_edit",PAGES_MARK_AS_PAID:"pages_mark_as_paid",MIGRATED_TO_WORKPLACE:"migrated_to_workplace",MESSENGER_GROUP_EVENT_STATUS_UPDATE:"messenger_group_event_status_update",NEO_APPROVED_USER_REMOVED_FROM_GROUP:"neo_approved_user_removed_from_group",LIVE_CHAT_SUPPORT_AGENT_JOIN:"live_chat_support_agent_join",LIVE_CHAT_SUPPORT_SESSION_BEGIN:"live_chat_support_session_begin",LIVE_CHAT_SUPPORT_SESSION_END:"live_chat_support_session_end",MONTAGE_DIRECT_KEEP:"montage_direct_keep",MONTAGE_DIRECT_EXPIRE:"montage_direct_expire",CHSBOT_CONVERSATION_ENDED:"chsbot_conversation_ended",CHSBOT_LIVE_CHAT_SUPPORT_AGENT_BEGIN:"chsbot_live_chat_support_agent_begin",CHSBOT_LIVE_CHAT_SUPPORT_AGENT_END:"chsbot_live_chat_support_agent_end",CHSBOT_LIVE_PHONE_SUPPORT_AGENT_CALLING:"chsbot_live_phone_support_agent_calling",CHSBOT_SUPPORT_REQUESTED:"chsbot_support_requested",MESSENGER_SUBSCRIBE_TO_UPDATES:"messenger_subscribe_to_updates",MESSENGER_UNSUBSCRIBE_FROM_UPDATES:"messenger_unsubscribe_from_updates",MESSENGER_BLOCK_MESSAGES:"messenger_block_messages",MESSENGER_UNBLOCK_MESSAGES:"messenger_unblock_messages",THANKS_FOR_SHARING_MESSAGE_CONTEXT:"thanks_for_sharing_message_context",GROUP_ADMIN_MODEL_NUX:"group_admin_model_nux",MESSENGER_PAYMENT_INCENTIVE_INFO:"messenger_payment_incentive_info",MESSENGER_PLATFORM_PERSONA:"messenger_platform_persona",MESSENGER_GROUP_SYNC_OPT_IN:"messenger_group_sync_opt_in",MESSENGER_GROUP_SYNC_OPT_OUT:"messenger_group_sync_opt_out",MENTORSHIP_MATCH:"mentorship_match",PAGES_CALL_DEFLECTION_UPSELL:"pages_call_deflection_upsell",RTC_PHOTOBOOTH:"rtc_photobooth",DELAYED_PHONE_NUMBER_MATCH:"delayed_phone_number_match"})}),null);
__d("MercuryMessageSourceTags",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHAT:"source:chat",EMAIL:"source:email",MESSENGER:"source:messenger",MOBILE:"source:mobile"})}),null);
__d("MessagingTagUtils",["MessagingSourceEnum","MessagingTagConstants","MercuryMessageSourceTags"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new Set(Object.values(c("MessagingSourceEnum")));function i(l){__p&&__p();for(var m=l,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p;if(h.has(q))return q}return c("MessagingSourceEnum").UNKNOWN}function j(l){__p&&__p();for(var m=l,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p,r=q.split(c("MessagingTagConstants").app_id_root);if(r.length>1)return r[1].trim()}return null}function k(l,m){__p&&__p();var n=[],o=j(l);if(o&&c("MessagingTagConstants").orca_app_ids.indexOf(o)!==-1)n.push(c("MercuryMessageSourceTags").MESSENGER);if(c("MessagingTagConstants").chat_sources.indexOf(m)!==-1)n.push(c("MercuryMessageSourceTags").CHAT);if(c("MessagingTagConstants").email_source===m)n.push(c("MercuryMessageSourceTags").EMAIL);if(c("MessagingTagConstants").mobile_sources.indexOf(m)!==-1)n.push(c("MercuryMessageSourceTags").MOBILE);return n}f.exports={getSourceFromTags:i,getSourceTags:k}}),null);
__d("P2PPaymentLogMessageSubtype",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail",REQUEST_CANCELED_BY_REQUESTER:"request_canceled_by_requester",REQUEST_DECLINED_BY_REQUESTEE:"request_declined_by_requestee",REQUEST_EXPIRED:"request_expired",REQUEST_REMINDER:"request_reminder",MONEY_RAIN_GAME_ENTRY_POINT:"money_rain_game_entry_point"})}),null);
__d("MessengerMessageTransformer.bs",["bs_array","bs_block","bs_string","FBIDCheck","getByPath","bs_js_boolean","MercuryIDs","bs_pervasives","bs_caml_format","CurrentUser","bs_js_primitive","MessagingTag","bs_js_null_undefined","MercuryActionType","MessagingTagUtils","MessagingSourceEnum","StoryAttachmentStyle","MNCommerceMessageType","MercuryLogMessageType","P2PPaymentLogMessageSubtype","MessagingGenericAdminTextType","MessengerAttachmentTransformer.bs","InstantGameUpdateXMATUpdateType"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(o,p,q){__p&&__p();var r;if(o.__typename==="GroupPollExtensibleMessageAdminText"){var s=o.question,t;if(s==null)t=[{},null];else{var u=Object.assign({},s);Object.assign(u,{total_count:o.total_count,options:c("bs_array").map(function(v){var w=Object.assign({},v);return Object.assign(w,{total_count:v.voters.nodes.length,voters:c("bs_array").map(function(x){return x.id},v.voters.nodes)})},s.options.nodes)});t=[u,s.id]}r={message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[p])),untypedData:{event_type:c("bs_string").lowercase(o.event_type),question_id:t[1],question_json:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(JSON.stringify(t[0])))}}}else r=o.__typename==="InstantGameUpdateExtensibleMessageAdminText"?{message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[p])),untypedData:{game_id:c("getByPath")(o,["game","id"]),update_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("InstantGameUpdateXMATUpdateType")[o.update_type])),collapsed_text:o.collapsed_text,expanded_text:o.expanded_text,leaderboard_json:o.leaderboard_json,cta_url:c("getByPath")(o,["instant_game_update_data","cta_url"]),cta_title:c("getByPath")(o,["instant_game_update_data","cta_title"]),custom_image_url:c("getByPath")(o,["instant_game_update_data","photo","image","uri"]),template:c("getByPath")(o,["instant_game_update_data","template"])}}:o.__typename==="MessengerAdContextAdminText"?{message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[p])),untypedData:{ad_url:o.ad_url}}:o.__typename==="AdExtensibleMessageAdminText"?{message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[p])),untypedData:{ad_client_token:o.ad_client_token,ad_id:o.ad_id,ad_preferences_link:o.ad_preferences_link,ad_properties:o.ad_properties}}:o.__typename==="ThemeColorExtensibleMessageAdminText"||o.__typename==="ThreadIconExtensibleMessageAdminText"||o.__typename==="ThreadNicknameExtensibleMessageAdminText"||o.__typename==="AcceptPendingThreadExtensibleMessageAdminText"||o.__typename==="AddContactExtensibleMessageAdminText"||o.__typename==="RtcCallLogExtensibleMessageAdminText"||o.__typename==="GameScoreExtensibleMessageAdminText"||o.__typename==="ConfirmFriendRequestExtensibleMessageAdminText"||o.__typename==="PartiesInviteExtensibleMessageAdminText"||o.__typename==="AppointmentReminderExtensibleMessageAdminText"||o.__typename==="GraphQLServicesAppointmentsOptOutExtensibleMessageAdminText"||o.__typename==="ServicesLeadGenSurveyExtensibleMessageAdminText"||o.__typename==="ServicesLeadGenSurveyEditExtensibleMessageAdminText"||o.__typename==="PagesPlatformCreateAppointmentExtensibleMessageAdminText"?{message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[p])),untypedData:Object.assign({},o)}:{message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[p])),untypedData:undefined};return{log_message_body:q,log_message_data:r,log_message_type:c("MercuryLogMessageType").GENERIC_ADMIN_TEXT}}function i(o){return c("bs_array").map(function(p){if(p==="p2p_transfer")return c("StoryAttachmentStyle").ORION;else if(p==="p2p_payment_request")return c("StoryAttachmentStyle").ORION_REQUEST;else return p},o)}function j(o){__p&&__p();var p=o.target,q;if(p==null)q=null;else if(p.__typename==="CrisisListing")q=c("bs_block").__(0,[{listing_type:p.listing_type,listing_category:p.listing_category,map_image:p.map_image}]);else if(p.__typename==="MoneyTransfer")q=c("bs_block").__(1,[{sender:p.sender,receiver:p.receiver,transfer_id:p.transfer_id,bubble_view:p.bubble_view}]);else if(p.__typename==="PeerToPeerTransfer")q=c("bs_block").__(2,[{sender:p.sender,receiver_profile:p.receiver_profile,transaction_amount:p.transaction_amount,transfer_status:p.transfer_status,transfer_id:p.transfer_id,completedTime:p.completedTime,updatedTime:p.updatedTime,creationTime:p.creationTime,transfer_context:p.transfer_context,amount_fb_discount:p.amount_fb_discount,funds_availability:p.funds_availability,group_thread_fbid:p.group_thread_fbid,platform_item:p.platform_item,id:p.id,status_description:p.status_description,bubble_view:p.bubble_view,currency_amount:p.currency_amount}]);else if(p.__typename==="PeerToPeerPaymentRequest")q=c("bs_block").__(3,[{amount:p.amount,transaction_amount:p.transaction_amount,requester:p.requester,requestee:p.requestee,request_status:p.request_status,request_theme:p.request_theme,id:p.id,memo_text:p.memo_text,transfer:p.transfer,creation_time:p.creation_time,group_thread_fbid:p.group_thread_fbid,updated_time:p.updated_time,status_description:p.status_description,bubble_view:p.bubble_view,individual_requests:p.individual_requests}]);else if(p.__typename==="PaymentPlatformAttachment")q=c("bs_block").__(4,[{payment_modules_client:p.payment_modules_client,is_viewer_seller:p.is_viewer_seller,payment_snippet:p.payment_snippet,item_list:p.item_list,components:p.components,payment_call_to_actions:p.payment_call_to_actions,click_action:p.click_action,invoicer_id:p.invoicer_id}]);else if(p.__typename==="MomentsAppMessengerInvitation")q=c("bs_block").__(5,[{snippet:p.snippet}]);else if(p.__typename==="MomentsAppMessengerPhotoRequest")q=c("bs_block").__(6,[{snippet:p.snippet}]);else if(p.__typename==="MessengerRetailPromotion")q=c("bs_block").__(7,[{message:p.message,call_to_actions:p.call_to_actions,promotion_items:p.promotion_items}]);else if(p.__typename==="MessengerBusinessMessage")q=c("bs_block").__(8,[{message:p.message,call_to_actions:p.call_to_actions,business_items:p.business_items}]);else if(p.__typename==="Video")q=c("bs_block").__(9,[{video_id:p.video_id}]);else if(p.__typename==="PagesPlatformLeadGenInfo")q=c("bs_block").__(10,[{field_data_list:p.field_data_list}]);else if(p.__typename==="MessageLiveLocation")q=c("bs_block").__(11,[{live_location_id:p.live_location_id,is_expired:p.is_expired,expiration_time:p.expiration_time,sender:p.sender,coordinate:p.coordinate,location_title:p.location_title,sender_destination:p.sender_destination,stop_reason:p.stop_reason}]);else if(p.__typename==="QuickInvite")q=c("bs_block").__(12,[{id:p.id,invite_sender:p.invite_sender,invite_recipient:p.invite_recipient}]);else if(p.__typename==="PagesPlatformBookingMessage")q=c("bs_block").__(13,[{id:p.id,page:p.page,message_bubble_type:p.message_bubble_type,user:p.user,native_component_flow_request:p.native_component_flow_request}]);else if(p.__typename==="GenieMessage")q=c("bs_block").__(14,[{genie_sender:p.genie_sender,story_attachment:p.story_attachment}]);else if(p.__typename==="Event")q=c("bs_block").__(15,[{eventID:p.eventID,guestStatus:p.guestStatus,canViewerJoin:p.canViewerJoin,timeString:p.timeString,event_place:p.event_place,social_context:p.social_context,watchStatus:p.watchStatus,connection_style:p.connection_style,canViewerWatch:p.canViewerWatch}]);else if(p.__typename==="ExternalSong")q=c("bs_block").__(16,[{application_name:p.application_name,artist_names:p.artist_names,audio_url:p.audio_url,duration_ms:p.duration_ms,music_title:p.music_title}]);else if(p.__typename==="LightweightAction")q=c("bs_block").__(17,[{lwa_state:p.lwa_state,lwa_type:p.lwa_type}]);else if(p.__typename==="MessengerRetailItem")q=c("bs_block").__(18,[{id:p.id,name:p.name,desc:p.desc,thumb_url:p.thumb_url,item_url:p.item_url,source:p.source,image_aspect_ratio:p.image_aspect_ratio,first_metaline:p.first_metaline,second_metaline:p.second_metaline,third_metaline:p.third_metaline,default_action:p.default_action,call_to_actions:p.call_to_actions}]);else if(p.__typename==="AgentItemSuggestion")q=c("bs_block").__(19,[{id:p.id,desc:p.desc,total_cost:p.total_cost,merchant_name:p.merchant_name,target_url:p.target_url,thumb_url:p.thumb_url,raw_amount:p.raw_amount,payment:p.payment,price_amount:p.price_amount,price_currency:p.price_currency,name:p.name}]);else if(p.__typename==="FundraiserPersonToCharity"||p.__typename==="FundraiserPersonForPerson"){var r=p.fundraiser_detailed_progress_text,s=p.fundraiser_subtitle_text,t=p.focused_cover_photo;q=c("bs_block").__(20,[{fundraiserID:p.id,canDonate:p.can_donate,hasViewerDonated:p.has_viewer_donated,fundraiserDetailedProgressText:r==null?null:r.text,fundraiserSubtitleText:s==null?null:s.text,focusedCoverPhoto:t==null?null:{src:t.photo.image.uri,data:{height:t.photo.image.height,width:t.photo.image.width}}}])}else q=p.__typename==="MessengerRetailReceipt"?c("bs_block").__(21,[{account_holder_name:p.account_holder_name,adjustments:p.retail_adjustments,cancellation_url:p.cancellation_url,items:p.retail_items,merchant_name:p.merchant_name,messenger_commerce_bubble_type:p.bubble_type,order_id:p.receipt_id,order_time:p.order_time_for_display,order_url:p.receipt_url,payment_method:p.order_payment_method,receipt_id:p.id,recipient_name:p.recipient_name,shipping_cost:p.shipping_cost,shipping_method:p.shipping_method,status:p.status,structured_address:p.structured_address,subtotal:p.subtotal,total_cost:p.total,total_tax:p.tax,partner_logo:p.partner_log}]):p.__typename==="JobApplication"?c("bs_block").__(22,[{id:p.id}]):p.__typename==="GroupCommerceProductItem"?c("bs_block").__(23,[{group_commerce_item_description:p.group_commerce_item_description,group_commerce_item_seller:p.group_commerce_item_seller,formatted_price:p.formatted_price,group_commerce_item_title:p.group_commerce_item_title,primary_photo:p.primary_photo,url:p.url}]):p.__typename==="Page"?c("bs_block").__(24,[{address:p.address,top_category_name:p.top_category_name,cover_photo:p.cover_photo,location:p.location,name:p.name,overall_star_rating:p.overall_star_rating,id:p.id,price_range_description:p.price_range_description}]):p.__typename==="MessengerEventReminder"?c("bs_block").__(25,[{is_active:p.is_active}]):p.__typename==="AirlineBoardingPassCollectionMessageAttachment"?c("bs_block").__(26,[{tint_color:p.tint_color,logo:p.logo,flight_label:p.flight_label,boarding_time_label:p.boarding_time_label,departure_label:p.departure_label,passenger_names_label:p.passenger_names_label,passenger_seat_label:p.passenger_seat_label,flight_terminal_label:p.flight_terminal_label,flight_gate_label:p.flight_gate_label,view_boarding_pass_cta_label:p.view_boarding_pass_cta_label,boarding_passes:p.boarding_passes,share_cta_label:p.share_cta_label,message_cta_label:p.message_cta_label,boarding_pass_title_label:p.boarding_pass_title_label,boarding_pass_error_title_label:p.boarding_pass_error_title_label}]):p.__typename==="AirlineCheckInReminderMessageAttachment"?c("bs_block").__(27,[{pnr_number:p.pnr_number,tint_color:p.tint_color,checkin_url:p.checkin_url,booking_number_label:p.booking_number_label,flight_label:p.flight_label,arrival_time_label:p.arrival_time_label,departure_time_label:p.departure_time_label,checkin_cta_label:p.checkin_cta_label,logo:p.logo,flight_infos:p.flight_infos}]):p.__typename==="AirlineUpdateMessageAttachment"?c("bs_block").__(28,[{pnr_number:p.pnr_number,tint_color:p.tint_color,update_type:p.update_type,departure_time_label:p.departure_time_label,arrival_time_label:p.arrival_time_label,booking_number_label:p.booking_number_label,flight_gate_label:p.flight_gate_label,flight_label:p.flight_label,flight_status_label:p.flight_status_label,passenger_names_label:p.passenger_names_label,passenger_seat_label:p.passenger_seat_label,logo:p.logo,flight_info:p.flight_info,hightlighted_labels:p.hightlighted_labels}]):p.__typename==="AirlineItineraryMessageAttachment"?c("bs_block").__(29,[{confirmation_number:p.confirmation_number,pnr_number:p.pnr_number,tint_color:p.tint_color,formatted_total:p.formatted_total,itemized_price_infos:p.itemized_price_infos,formatted_tax:p.formatted_tax,formatted_base_price:p.formatted_base_price,passenger_infos:p.passenger_infos,logo:p.logo,aircraft_type_label:p.aircraft_type_label,arrival_time_label:p.arrival_time_label,base_price_label:p.base_price_label,booking_number_label:p.booking_number_label,cabin_type_label:p.cabin_type_label,departure_time_label:p.departure_time_label,flight_confirmation_label:p.flight_confirmation_label,flight_date_label:p.flight_date_label,flight_label:p.flight_label,flight_terminal_label:p.flight_terminal_label,itinerary_error_title_label:p.itinerary_error_title_label,itinerary_title_label:p.itinerary_title_label,passenger_name_label:p.passenger_name_label,passenger_names_label:p.passenger_names_label,passenger_seat_label:p.passenger_seat_label,purchase_summary_label:p.purchase_summary_label,taxes_label:p.taxes_label,total_label:p.total_label,view_details_cta_label:p.view_details_cta_label,itinerary_legs:p.itinerary_legs}]):p.__typename==="MessengerRetailShipmentTrackingEvent"?c("bs_block").__(30,[{id:p.id,shipment:p.shipment,tracking_event_time_for_display:p.tracking_event_time_for_display,shipment_tracking_event_type:p.shipment_tracking_event_type,messenger_commerce_location:p.messenger_commerce_location,tracking_event_description:p.tracking_event_description,bubble_type:p.bubble_type}]):p.__typename==="MessengerRetailShipment"?c("bs_block").__(31,[{id:p.id,tracking_number:p.tracking_number,shipdate_for_display:p.shipdate_for_display,estimated_delivery_time_for_display:p.estimated_delivery_time_for_display,commerce_origin:p.commerce_origin,commerce_destination:p.commerce_destination,retail_carrier:p.retail_carrier,shipment_tracking_events:p.shipment_tracking_events,receipt:p.receipt,recipient:p.recipient,retail_shipment_items:p.retail_shipment_items,bubble_type:p.bubble_type}]):p.__typename==="TicketOrderAttachment"?c("bs_block").__(33,[{ticket_order_id:p.ticket_order_id,event:p.event}]):p.__typename==="LeadGenDeepLinkData"?c("bs_block").__(32,[{id:p.id,cover_image:p.cover_image,headline:p.headline,name:p.name,page:p.page}]):p.__typename==="UserLeadGenInfo"?c("bs_block").__(34,[{id:p.id,field_data:p.field_data}]):p.__typename==="IceBreakerMessageAttachment"?c("bs_block").__(35,[{ice_breaker_title:p.ice_breaker_title,ice_breaker_messages:p.ice_breaker_messages,ad_id:p.ad_id}]):p.__typename==="MontageDirect"?c("bs_block").__(36,[{message_state:p.message_state,is_keep_disabled:p.is_keep_disabled,blob_media_type:p.blob_media_type,blob_media:p.blob_media,image:p.image}]):null;return{description:o.description,media:o.media,source:o.source,style_list:i(o.style_list),title_with_entities:o.title_with_entities,properties:o.properties,url:o.url,deduplication_key:o.deduplication_key,action_links:o.action_links,messaging_attribution:o.messaging_attribution,messenger_call_to_actions:o.messenger_call_to_actions,target:q}}function k(o){var p=j({description:o.description,media:o.media,source:o.source,style_list:o.style_list,title_with_entities:o.title_with_entities,properties:o.properties,url:o.url,deduplication_key:o.deduplication_key,action_links:o.action_links,messaging_attribution:o.messaging_attribution,messenger_call_to_actions:o.messenger_call_to_actions,target:o.target});if(p==null)return null;else{var q=c("bs_array").map(j,o.subattachments);return Object.assign({subattachments:q},p)}}function l(o){__p&&__p();var p=o.blob_attachments,q=[];if(!(p==null))c("bs_array").iter(function(r){__p&&__p();if(r.__typename==="MessageImage"){q.push(c("bs_block").__(0,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,preview:r.preview,large_preview:r.large_preview,thumbnail:r.thumbnail,legacy_attachment_id:r.legacy_attachment_id,original_dimensions:r.original_dimensions,original_extension:r.original_extension,render_as_sticker:r.render_as_sticker,photo_encodings:r.photo_encodings}]));return 0}else if(r.__typename==="MessageAnimatedImage"){q.push(c("bs_block").__(1,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,animated_image:r.animated_image,legacy_attachment_id:r.legacy_attachment_id,preview_image:r.preview_image,original_dimensions:r.original_dimensions}]));return 0}else if(r.__typename==="MessageAudio"){q.push(c("bs_block").__(2,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,playable_url:r.playable_url,playable_duration_in_ms:r.playable_duration_in_ms,is_voicemail:r.is_voicemail,audio_type:r.audio_type,url_shimhash:r.url_shimhash,url_skipshim:r.url_skipshim}]));return 0}else if(r.__typename==="MessageVideo"){q.push(c("bs_block").__(3,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,playable_url:r.playable_url,playable_duration_in_ms:r.playable_duration_in_ms,legacy_attachment_id:r.legacy_attachment_id,chat_image:r.chat_image,video_type:r.video_type,original_dimensions:r.original_dimensions,large_image:r.large_image,inbox_image:r.inbox_image}]));return 0}else if(r.__typename==="MessageFile"){q.push(c("bs_block").__(4,[{attribution_app:r.attribution_app,attribution_metadata:r.attribution_metadata,filename:r.filename,url:r.url,content_type:r.content_type,is_malicious:r.is_malicious,message_file_fbid:r.message_file_fbid,url_shimhash:r.url_shimhash,url_skipshim:r.url_skipshim}]));return 0}else return 0},p);return q}function m(o){__p&&__p();var p=o.message;if(p==null)return[];else{var q=[];c("bs_array").iter(function(r){__p&&__p();var p=r.entity;if(p==null)return 0;else{var s=p.id,t=p.thread_key;if(s==null)if(t==null)return 0;else{var u=t.thread_fbid;if(u==null)return 0;else{q.push({id:u,offset:r.offset,length:r.length,type:r.__typename});return 0}}else{q.push({id:s,offset:r.offset,length:r.length,type:r.__typename});return 0}}},p.ranges);return q}}function n(o,p,q,r){__p&&__p();var s={};c("bs_array").iter(function($){s[$.user.id]=$.reaction;return 0},p.message_reactions);var t=+c("FBIDCheck").isUser_deprecated(p.message_sender.id),u=t?c("MessagingTagUtils").getSourceFromTags(p.tags_list):c("MessagingSourceEnum").UNKNOWN,v=t?c("MessagingTagUtils").getSourceTags(p.tags_list,u):[],w=p.commerce_message_type,x=p.customizations,y=p.replied_to_message,z;if(y==null)z=null;else{var A=y.message;z=A==null?null:c("bs_js_null_undefined").from_opt([n(o,A,q,r)])}var B={thread_id:q.thread_id,thread_fbid:q.thread_fbid,other_user_fbid:q.other_user_fbid,action_type:p.__typename==="UserMessage"?c("MercuryActionType").USER_GENERATED_MESSAGE:c("MercuryActionType").LOG_MESSAGE,message_id:p.message_id,threading_id:null,offline_threading_id:p.offline_threading_id,author:c("MercuryIDs").getParticipantIDFromUserID(p.message_sender.id),author_email:p.message_sender.email,ephemeral_ttl_mode:p.ttl,timestamp:c("bs_caml_format").caml_float_of_string(p.timestamp_precise),is_unread:p.unread,is_filtered_content:c("bs_js_boolean").to_js_boolean(+(p.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT)!==-1)),is_filtered_content_bh:c("bs_js_boolean").to_js_boolean(+(p.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT_BH)!==-1)),is_filtered_content_account:c("bs_js_boolean").to_js_boolean(+(p.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT_ACCOUNT)!==-1)),is_filtered_content_quasar:c("bs_js_boolean").to_js_boolean(+(p.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT_QUASAR)!==-1)),is_filtered_content_invalid_app:c("bs_js_boolean").to_js_boolean(+(p.tags_list.indexOf(c("MessagingTag").FILTERED_CONTENT_INVALID_APP)!==-1)),is_sponsored:p.is_sponsored,ad_id:p.ad_id,ad_client_token:p.ad_client_token,commerce_message_type:w==null?null:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MNCommerceMessageType")[w])),customizations:x==null?[]:x,source:u,source_tags:v,tags:p.tags_list,is_spoof_warning:c("bs_js_boolean").to_js_boolean(+(p.tags_list.indexOf(c("MessagingTag").DOMAIN_AUTH_FAIL)!==-1||p.tags_list.indexOf(c("MessagingTag").SPAM_SPOOFING)!==-1||p.tags_list.indexOf(c("MessagingTag").SPOOF_WARNING)!==-1)),folder:q.folder,platform_xmd:p.platform_xmd_encoded,message_source:p.message_source_data,montage_reply_data:p.montage_reply_data,replied_to_message:z,skip_bump_thread:false,profile_ranges:m(p),reactions:s,has_attachment:null,attachments:null,raw_attachments:null,ranges:null,meta_ranges:null,status:null,log_message_type:null,log_message_data:null,log_message_body:null,body:null,subject:null,creator_info:null};if(p.__typename==="UserMessage"){var C=l(p),D=p.extensible_attachment,E;if(D==null)E=null;else{var F=D.story_attachment;E={legacy_attachment_id:D.legacy_attachment_id,story_attachment:F==null?null:k(F)}}var G=c("MessengerAttachmentTransformer.bs").transformAttachment(o,{extensible_attachment:E,blob_attachments:C,sticker:p.sticker},r),H=p.message,I=p.page_admin_sender;Object.assign(B,{body:H==null?null:H.text,creator_info:I==null?null:{creatorID:I.admin_id,creatorName:I.name,creatorType:I.sender_type,labelType:I.label_type,pageID:I.page_id,profileURI:I.profile_uri},subject:null,has_attachment:c("bs_js_boolean").to_js_boolean(+(G.length>0)),attachments:G,raw_attachments:null,ranges:undefined,meta_ranges:p.meta_ranges.map(function($){return babelHelpers["extends"]({},$,{data:JSON.parse($.data)})})})}else if(p.__typename==="VoiceCallMessage"||p.__typename==="VideoCallMessage"){var J=p.__typename,K=J==="VoiceCallMessage"?c("MercuryLogMessageType").PHONE_CALL:c("MercuryLogMessageType").VIDEO_CALL,L=p.message_sender.id,M=q.other_user_fbid,N=M==null?null:c("MercuryIDs").getParticipantIDFromUserID(L===M?c("CurrentUser").getID():M),O=p.answered;Object.assign(B,{log_message_type:K,log_message_data:{answered:O==null?false:O,caller:c("MercuryIDs").getParticipantIDFromUserID(L),callee:N},log_message_body:p.snippet})}else if(p.__typename==="ThreadNameMessage")Object.assign(B,{log_message_type:c("MercuryLogMessageType").THREAD_NAME,log_message_data:{name:p.thread_name},log_message_body:p.snippet});else if(p.__typename==="ThreadImageMessage"){var P=p.image_with_metadata,Q;if(P==null)Q=null;else{var R=P.preview;Q={preview_url:R==null?null:R.uri,metadata:{fbid:P.legacy_attachment_id,dimensions:c("bs_pervasives").string_of_int(P.original_dimensions.x)+(","+c("bs_pervasives").string_of_int(P.original_dimensions.y))}}}Object.assign(B,{log_message_type:c("MercuryLogMessageType").THREAD_IMAGE,log_message_data:{image:Q},log_message_body:p.snippet})}else if(p.__typename==="ParticipantsAddedMessage"){var S=p.participants_added;Object.assign(B,{log_message_type:c("MercuryLogMessageType").SUBSCRIBE,log_message_data:{added_participants:S==null?[]:c("bs_array").map(function($){return c("MercuryIDs").getParticipantIDFromUserID($.id)},S)},log_message_body:p.snippet})}else if(p.__typename==="ParticipantLeftMessage"){var T=p.participants_removed;Object.assign(B,{log_message_type:c("MercuryLogMessageType").UNSUBSCRIBE,log_message_data:{removed_participants:T==null?[]:c("bs_array").map(function($){return c("MercuryIDs").getParticipantIDFromUserID($.id)},T)},log_message_body:p.snippet})}else if(p.__typename==="GenericAdminTextMessage"){var U=p.extensible_message_admin_text,V=p.extensible_message_admin_text_type;if(U==null){if(!(V==null))Object.assign(B,{log_message_body:p.snippet,log_message_data:{message_type:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingGenericAdminTextType")[V])),untypedData:undefined},log_message_type:c("MercuryLogMessageType").GENERIC_ADMIN_TEXT})}else if(!(V==null))Object.assign(B,h(U,V,p.snippet))}else if(p.__typename==="P2PPaymentRequestMessage"){var W=p.p2p_sender,X=p.p2p_receiver,Y=p.amount,Z=p.message_type;Object.assign(B,{log_message_body:p.snippet,log_message_data:{transfer_id:p.transfer_id,senderId:W==null?null:c("MercuryIDs").getParticipantIDFromUserID(W.id),receiverId:X==null?null:c("MercuryIDs").getParticipantIDFromUserID(X.id),formattedAmount:Y==null?null:Y.formatted,subtype:Z==null?null:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("P2PPaymentLogMessageSubtype")[Z]))},log_message_type:c("MercuryLogMessageType").ORION})}return B}g._getGenericAdminTextMessage=h;g._getStyleList=i;g.unsafeCastExtensibleAttachmentWithoutSubattachments=j;g.unsafeCastExtensibleAttachment=k;g.unsafeCastBlobAttachments=l;g._getProfileRanges=m;g.transformMessage=n}),null);
__d("MessengerAttachmentTransformerForSend.bs",["bs_array","bs_caml_array","MercuryAttachmentType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j,k,l){__p&&__p();var m=k.node;if(m==null)return{attach_type:c("MercuryAttachmentType").ERROR};else{var n;if(m.__typename==="ExtensibleMessageAttachment"){var o=m.story_attachment;n={legacy_attachment_id:m.legacy_attachment_id,story_attachment:o==null?null:c("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(o)}}else n=null;var p=m.__typename==="Sticker"?m:null,q=m.__typename,r;switch(q){case"MessageAnimatedImage":case"MessageAudio":case"MessageFile":case"MessageImage":case"MessageVideo":r=[m];break;default:r=null}var s=c("MessengerMessageTransformer.bs").unsafeCastBlobAttachments({blob_attachments:r}),t=c("MessengerAttachmentTransformer.bs").transformAttachment(j,{extensible_attachment:n,blob_attachments:s,sticker:p},l);if(t.length)return c("bs_caml_array").caml_array_get(t,0);else return{}}}function i(j,k,l){return c("bs_array").map(function(m){return h(j,m,l)},k)}g._transform=h;g.transform=i}),null);
__d("XMessagingSendController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/send/",{})}),null);
__d("MercuryServerSendMessageQueue",["fbt","BanzaiODS","ChatReliabilityInstrumentation","LogHistory","MercuryLoggingHelper","MercuryServerRequestsConfig","MessengerAttachmentTransformerForSend.bs","Run","MercuryServerDispatcher","MercuryServerSendMessageQueueSimulatedError","XMessagingSendController","idx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("LogHistory").getInstance("mercury_server_send_message_queue");function j(k,l,m,n){__p&&__p();var o;this.pending_message=null;this.queue=[];this.$MercuryServerSendMessageQueue5=function(){if(this.queue.length||this.pending_message)return h._("You haven't sent your message yet. Do you want to leave without sending?");return undefined}.bind(this);this.sender_id=k;this.queue_id=l;this.$MercuryServerSendMessageQueue2=m.success_handler;this.$MercuryServerSendMessageQueue1=m.error_handler;this.$MercuryServerSendMessageQueue4=m.transport_error_handler;this.$MercuryServerSendMessageQueue3=m.timeout_handler;this.client=n;c("Run").onBeforeUnload(this.$MercuryServerSendMessageQueue5,false);var p=null;if(c("MercuryServerRequestsConfig").msgrRegion)p={name:"X-MSGR-Region",value:c("MercuryServerRequestsConfig").msgrRegion};var q=this.__getSendURI(),r=(o={},o[q]={request_user_id:this.sender_id,endpoint_id:this.queue_id,mode:c("MercuryServerDispatcher").IMMEDIATE,customHeader:p,handler:this.handleSuccess.bind(this),error_handler:this.handleError.bind(this),transport_error_handler:this.handleTransportError.bind(this),timeout:m.timeout,timeout_handler:this.handleTimeout.bind(this),connection_retries:m.connection_retries},o);c("MercuryServerDispatcher").registerEndpoints(r)}j.prototype.__getSendURI=function(){return c("XMessagingSendController").getURIBuilder().getURI().toString()};j.prototype.__preparePayload=function(k){return{client:this.client,action_type:k.action_type,app_id:k.app_id,audio_ids:k.audio_ids,body:k.body,client_thread_id:k.client_thread_id,content_attachment:k.content_attachment,ephemeral_ttl_mode:k.ephemeral_ttl_mode,file_ids:k.file_ids,gif_ids:k.gif_ids,has_attachment:k.has_attachment,image_ids:k.image_ids,location_attachment:k.location_attachment,lightweight_action_attachment:k.lightweight_action_attachment,log_message_data:k.log_message_data,log_message_type:k.log_message_type,message_id:k.message_id,message_source_data:k.message_source_data,montage_reply_data:k.montage_reply_data,offline_threading_id:k.offline_threading_id,other_user_fbid:k.other_user_fbid,photo_fbids:k.photo_fbids,shareable_attachment:k.shareable_attachment,signature_id:k.signatureID,source:k.source,specific_to_list:k.specific_to_list,sticker_id:k.sticker_id,tags:k.tags,thread_fbid:k.thread_fbid,timestamp:k.timestamp,ui_push_phase:k.ui_push_phase,video_ids:k.video_ids,platform_xmd:k.platform_xmd,profile_xmd:k.profile_xmd,replied_to_message_id:k.replied_to_message?k.replied_to_message.message_id:null}};j.prototype.enqueue=function(k){this.queue.push(k);this.$MercuryServerSendMessageQueue6()};j.prototype.$MercuryServerSendMessageQueue6=function(){__p&&__p();if(this.pending_message||!this.queue.length){if(this.pending_message)this.$MercuryServerSendMessageQueue7();return}this.pending_message=this.queue.shift();var k=this.__preparePayload(this.pending_message);for(var l in k)if(k[l]===undefined||k[l]===null)delete k[l];if(!k.action_type){var m=c("MercuryLoggingHelper").obfuscateMessage(k);c("ChatReliabilityInstrumentation").logERROR("missing action type before sending to send controller");i.debug("missing_action_type",JSON.stringify(m))}if(!k.message_id){var n=c("MercuryLoggingHelper").obfuscateMessage(k);c("ChatReliabilityInstrumentation").logERROR("missing action type before sending to send controller"+JSON.stringify(n));i.debug("missing_message_id",JSON.stringify(n))}c("MercuryServerDispatcher").trySend(this.__getSendURI(),k,null,this.sender_id,this.queue_id)};j.prototype.$MercuryServerSendMessageQueue8=function(){while(this.queue.length)this.$MercuryServerSendMessageQueue9(this.queue.shift())};j.prototype.$MercuryServerSendMessageQueue9=function(k){this.$MercuryServerSendMessageQueue1(c("MercuryServerSendMessageQueueSimulatedError").create(k));i.error("mark_as_failed",JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,message:c("MercuryLoggingHelper").obfuscateMessage(k)}))};j.prototype.handleSuccess=function(k,l){__p&&__p();var m=(k.actions||[]).map(function(n){__p&&__p();var o,p=babelHelpers["extends"]({},n);if(n.graphql_payload&&n.graphql_payload.length>0){var q=c("MessengerAttachmentTransformerForSend.bs").transform(this.sender_id,n.graphql_payload,n.for_page);p=Object.assign(p,{attachments:q})}var r=(o=n)!=null?(o=o.log_message_data)!=null?o.graphql_image:o:o;if(r){var s=c("MessengerAttachmentTransformerForSend.bs").transform(this.sender_id,[r],n.for_page);p=Object.assign(p,{log_message_data:{image:s[0]}})}return p}.bind(this));k.actions=m;this.$MercuryServerSendMessageQueue2(k,l);this.pending_message=null;this.$MercuryServerSendMessageQueue6()};j.prototype.handleError=function(k){this.$MercuryServerSendMessageQueue1(k);this.$MercuryServerSendMessageQueue8();this.pending_message=null};j.prototype.handleTransportError=function(k){this.$MercuryServerSendMessageQueue4(k);this.$MercuryServerSendMessageQueue8();this.pending_message=null};j.prototype.handleTimeout=function(k){this.$MercuryServerSendMessageQueue3(k);this.$MercuryServerSendMessageQueue8();this.pending_message=null};j.prototype.$MercuryServerSendMessageQueue7=function(){i.debug("maybe_send_next_pending_message",JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,pending_message:c("MercuryLoggingHelper").obfuscateMessage(this.pending_message),queue:this.queue.map(function(l){return c("MercuryLoggingHelper").obfuscateMessage(l)})}));var k="send_queue.delayed.queue_length."+this.queue.length.toString();c("BanzaiODS").bumpEntityKey("chat.web",k)};f.exports=j}),null);
__d("MercurySingletonMixin",["CurrentUser"],(function a(b,c,d,e,f,g){__p&&__p();var h={_getInstances:function i(){if(!this._instances)this._instances={};return this._instances},get:function i(){return this.getForFBID(c("CurrentUser").getID())},getForFBID:function i(j){var k=this._getInstances();if(!k[j])k[j]=new this(j);return k[j]}};f.exports=h}),null);
__d("MercuryServerSendMessageQueueRouter",["BanzaiODS","LogHistory","MercuryServerSendMessageQueue","MercurySingletonMixin"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("LogHistory").getInstance("mercury_server_send_message_queue_router"),i="chat.web.send_queue_router";c("BanzaiODS").setEntitySample(i,.1);function j(k){"use strict";this.queues=new Map();this.fbid=k}j.prototype.enqueue=function(k,l,m,n){"use strict";var o=this.queues.get(k);if(o===undefined){o=new(c("MercuryServerSendMessageQueue"))(this.fbid,k,l,m);this.queues.set(k,o);h.debug("added queue",JSON.stringify({fbid:this.fbid,queue_id:k}));c("BanzaiODS").bumpEntityKey(i,"new_queue")}o.enqueue(n)};Object.assign(j,c("MercurySingletonMixin"));f.exports=j}),null);
__d("MercurySourceType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHAT_ORCA:"source:chat:orca",CHAT_LIGHT_SPEED:"source:chat:light_speed",CHAT_IPHONE:"source:chat:iphone",CHAT_JABBER:"source:chat:jabber",CHAT_MEEBO:"source:chat:meebo",CHAT_WEB:"source:chat:web",CHAT_TEST:"source:chat:test",CHAT_FORWARD_DIALOG:"source:chat:forward",CHAT:"source:chat",CONTACT_ADD_MUTATION:"source:contact_add:graphql_mutation",CONTACT_ADD_CYMK:"source:contact_add:cymk_suggestion",CUSTOMER_CHAT_PLUGIN:"source:discovery:customer_chat_plugin",EMAIL:"source:email",EVENT_MESSAGE_BLAST:"source:event_message_blast",EVENT_TICKETING:"source:event_ticket",EVENT_REMINDERS:"source:event_reminders",FUNDRAISER_MESSAGE_BLAST:"source:fundraiser_message_blast",GENERIC_ADMIN_TEXT:"source:generic_admin_text",GIGABOXX_API:"source:gigaboxx:api",GIGABOXX_BLAST:"source:gigaboxx:blast",GIGABOXX_EMAIL_REPLY:"source:gigaboxx:emailreply",GIGABOXX_MOBILE:"source:gigaboxx:mobile",GIGABOXX_WAP:"source:gigaboxx:wap",GIGABOXX_WEB:"source:gigaboxx:web",INVITE:"source:invite",LEIA:"source:leia",MESSENGER_WEB:"source:messenger:web",MESSENGER_WEB_SEARCH:"source:messenger:web_search",SAM_UFI:"source:sam:ufi",SHARE_DIALOG:"source:share:dialog",SEND_PLUGIN:"source:sendplugin",SMS:"source:sms",TEST:"source:test",TITAN_WAP:"source:titan:wap",TITAN_M_BASIC:"source:titan:m_basic",TITAN_M_FREE:"source:titan:m_free_basic",TITAN_M_JAPAN:"source:titan:m_japan",TITAN_M_MINI:"source:titan:m_mini",TITAN_M_TOUCH:"source:titan:m_touch",TITAN_M_APP:"source:titan:m_app",TITAN_M_TABLET:"source:titan:m_tablet",TITAN_M_ZERO:"source:titan:m_zero",TITAN_M_TALK:"source:titan:m_talk",TITAN_WEB:"source:titan:web",TITAN_FACEWEB_ANDROID:"source:titan:faceweb_android",TITAN_FACEWEB_BUFFY:"source:titan:faceweb_buffy",TITAN_FACEWEB_IPAD:"source:titan:faceweb_ipad",TITAN_FACEWEB_IPHONE:"source:titan:faceweb_iphone",TITAN_FACEWEB_UNKNOWN:"source:titan:faceweb_unknown",TITAN_API:"source:titan:api",TITAN_API_MOBILE:"source:titan:api_mobile",TITAN_ORCA:"source:titan:orca",TITAN_EMAIL_REPLY:"source:titan:emailreply",MOBILE:"source:mobile",PAGE_PLATFORM_API:"source:page_platform_api",PAGE_UNIFIED_INBOX:"source:page_unified_inbox",UNKNOWN:"source:unknown",WEB:"source:web",HELPCENTER:"source:helpcenter",NEW_SHARE_DIALOG:"source:share:dialog:new",PAID_PROMOTION:"source:paid_promotion",BUFFY_SMS:"source:buffy:sms",WEBRTC_MOBILE:"source:webrtc:mobile",MESSENGER_COMMERCE:"source:messenger:commerce",MESSENGER_BOT:"source:bot",MESSENGER_EMPLOYEE_ONLY_BOT:"source:bot:employee_only",MESSENGER_OMNIM:"source:messenger:omnim",PAGES_PRIVATE_REPLY:"source:pages:private_reply",MESSENGER_FORWARD_DIALOG:"source:messenger:forward",MESSENGER_AD:"source:messenger:ad",MARKETPLACE:"source:marketplace",MARKETPLACE_BOT:"source:marketplace:bot",MESSENGER_LEAD_GEN:"source:messenger:lead_gen",PAGES_MESSAGE_SHORTLINK:"source:pages:message_shortlink",STICKER_SUBSCRIBE:"source:messenger:sticker_subscribe",PHOTO_TAG:"source:messenger:photo_tag",INTERNAL_TEST_PENDING:"source:internal:test_pending",JOB_SEARCH_APPLICATION:"source:job_search:application",MESSENGER_JOINABLE_LINK:"source:messenger:joinable_link",MESSENGER_ADD_WITH_APPROVAL:"source:messenger:add_with_approval",MESSENGER_SMS_BRIDGE_CONVERT:"source:messenger:sms_bridge_conversion",TINCAN_ORCA:"source:tincan:orca",TINCAN_IOS:"source:tincan:ios",TINCAN_UNKNOWN:"source:tincan:unknown",FACEBOOK_GROUPS_CHANNELS:"source:groups:channels",GROUP_COMMERCE:"source:group_commerce",INTERNAL_TOOL:"source:internal:tool",PAGES_PLATFORM:"source:pages:platform",PAGES_RECOMMENDATION:"source:pages:recommendation",PAGES_ORDER_MANAGEMENT:"source:pages:order_management",PAGE_AUTO_RESPONSE:"source:pages:auto_response",PAGES_INVITE:"source:pages:invite",PAGES_CHAT_EXTENSION:"source:pages:chat_extension",SAVED_CHAT_EXTENSION:"source:saved:chat_extension",CREATOR_PAGE_INITIATE_TO_CREATOR_PAGE:"source:pages:creator_page_initiate_to_creator_page",LIVE_VIDEO_CHAT:"source:live_video_chat",GEMSTONE:"source:gemstone",FRIENDING_ADMIN_BUMP:"source:messenger_growth:friending_admin_bump",NEW_MESSENGER_USER_ADMIN_BUMP:"source:messenger_growth:new_messenger_user_admin_bump",EVENT_UPCOMING_BUMP:"source:messenger_growth:event_upcoming_bump",PHOTO_TAG_BUMP:"source:messenger_growth:photo_tag_bump",WALL_POST_BUMP:"source:messenger_growth:wall_post_bump",CUSTOMIZATION_UPSELL_BUMP:"source:messenger_growth:customization_upsell_bump",PAGE_COMMENT_MSG:"source:pages:question_triggered_convo",COMMENT_PIVOT:"source:messenger_growth:comment_pivot",PAGE_HOVERCARD:"source:pages:hovercard",INSTANT_GAMES:"source:instant_games",PAGE_EMAIL_REPLY:"source:pages:email_reply",PAGE_HOME_PAGE_PANEL:"source:page_home_page_panel",GROUPSYNC_MESSENGER_GROUP_CREATE:"source:groupsync:messenger_group_create",GROUPSYNC_SYNC_FROM_FB:"source:groupsync:sync_from_fb",GROUPSYNC_NAMING:"source:groupsync:naming",GROUPSYNC_THREAD_INFO_SYNC_FROM_FB:"source:groupsync:thread_info_sync",WORK_GROUP_SYNCED_CHAT_CREATION:"source:work:groupchat:creation",PAGE_PQI_MESSAGE:"source:pages:pqi_message",PAGE_PLUGIN_MESSAGE:"source:pages:page_plugin_message"})}),null);
__d("MercurySyncConstants",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({ARBITER_EVENT_INVALID_STATE:"SYNC:INVALID_STATE",ARBITER_EVENT_INVALID_STATE_RETRY:"SYNC:INVALID_STATE_RETRY",ARBITER_EVENT_INVALID_STATE_RECOVER:"SYNC:INVALID_STATE_RECOVER",ARBITER_EVENT_SERVER_REQUESTS_FAIL:"NET:SERVER_REQUESTS_FAIL",ARBITER_EVENT_SERVER_REQUESTS_RECOVER:"NET:SERVER_REQUESTS_RECOVER"});f.exports=h}),null);
__d("MercurySyncDeltaHolder",["MercurySingletonProvider"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.$MercurySyncDeltaHolder2=new Map();this.$MercurySyncDeltaHolder3=[];this.$MercurySyncDeltaHolder1=0}h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};h.prototype.peek=function(){this.$MercurySyncDeltaHolder3=this.$MercurySyncDeltaHolder3.sort(function(j,k){return j-k});return this.$MercurySyncDeltaHolder3[0]};h.prototype.getTop=function(){this.$MercurySyncDeltaHolder3=this.$MercurySyncDeltaHolder3.sort(function(j,k){return j-k});return this.$MercurySyncDeltaHolder3.reverse()[0]};h.prototype.pop=function(){this.$MercurySyncDeltaHolder3=this.$MercurySyncDeltaHolder3.sort(function(l,m){return l-m});if(this.$MercurySyncDeltaHolder3.length===0)return undefined;var j=this.$MercurySyncDeltaHolder3.shift(),k=this.$MercurySyncDeltaHolder2.get(j);this.$MercurySyncDeltaHolder2["delete"](j);return{seqID:j,delta:k}};h.prototype.push=function(j,k){if(this.$MercurySyncDeltaHolder2.has(j))return;this.$MercurySyncDeltaHolder2.set(j,k);this.$MercurySyncDeltaHolder3.push(j)};h.prototype.getLastSeqID=function(){return this.$MercurySyncDeltaHolder1};h.prototype.updateLastSeqID=function(j){this.$MercurySyncDeltaHolder1=j};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("XMercuryUnseenThreadIDsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/mercury/unseen_thread_ids/",{})}),null);
__d("XMessagingChangeMentionsMuteModeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/mercury/change_mentions_mute_thread/",{})}),null);
__d("XMessagingChangeReactionsMuteModeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/mercury/change_reactions_mute_thread/",{})}),null);
__d("MercuryServerRequests",["errorCode","invariant","Promise","Arbiter","AsyncResponse","BanzaiODS","ChannelConstants","ChatReliabilityInstrumentation","CurrentUser","FBJSON","EventProfiler","LogHistory","MercuryActionStatus","MercuryActionType","MercuryAPIArgsSource","MercuryAssert","MercuryConfig","MercuryDispatcher","MercuryErrorType","MercuryGlobalActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageClientState","MercuryPayloadSource","MercurySendErrorLogger","MercuryServerPayloadPreprocessor","MercuryServerRequestsConfig","MercuryServerSendMessageQueueRouter","MercuryServerURIs","MercurySingletonProvider","MercurySourceType","MercurySyncDeltaHolder","MercurySyncConstants","MercuryThreadIDMap","MercuryMessageIDs.bs","MessagingConfig","MessagingTag","MercuryServerSendMessageQueueOptions","MercuryServerDispatcher","XMercuryUnseenThreadIDsController","XMessagingChangeMentionsMuteModeController","XMessagingChangeReactionsMuteModeController","createObjectFrom","gkx","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("LogHistory").getInstance("mercury_server"),k=c("MercuryAPIArgsSource").MERCURY,l=30*1e3,m=true;function n(y){return y.getError()?"_"+y.getError():""}function o(y,z){__p&&__p();var A=babelHelpers["extends"]({},y),B=void 0;if(z.threads){if(!A.threads)A.threads={};for(B in z.threads)A.threads[B]=Object.keys(c("createObjectFrom")((A.threads[B]||[]).concat(z.threads[B]||[])))}if(z.messages){if(!A.messages)A.messages={};for(B in z.messages){if(!A.messages[B])A.messages[B]={};for(var C in z.messages[B])if(A.messages[B][C])A.messages[B][C]=s(A.messages[B][C],z.messages[B][C]);else A.messages[B][C]=z.messages[B][C]}}A.client=y.client||z.client;return A}function p(y,z){var A=Object.assign(c("createObjectFrom")(y.folders,true),c("createObjectFrom")(z.folders,true)),B=y.client||z.client;return{folders:Object.keys(A),client:B}}function q(y,z){for(var A in z)if(y[A]&&typeof y[A]==="object")y[A]=s(y[A],z[A]);else if(z[A]&&typeof z[A]==="object"){var B={};Object.assign(B,z[A]);y[A]=B}return y}function r(y,z){return z}function s(y,z){var A=y.offset<z.offset?y.offset:z.offset,B=y.offset+y.limit,C=z.offset+z.limit,D=B>C?B:C,E=D-A,F=y.timestamp>z.timestamp?y.timestamp:z.timestamp;return{offset:A,limit:E,timestamp:F}}function t(y,z){var A=y.client||z.client,B={ids:{},client:A};Object.assign(B.ids,y.ids,z.ids);return B}function u(y,z){__p&&__p();var A={},B=void 0,C=y.client||z.client;delete y.client;delete z.client;for(B in y)Object.assign(A,c("createObjectFrom")(y[B],B));for(B in z)Object.assign(A,c("createObjectFrom")(z[B],B));var D={client:C};for(var E in A){B=A[E];if(!D[B])D[B]=[];D[B].push(E)}return D}function v(y,z){var A=y.client||z.client,B=c("createObjectFrom")(y.ids,true),C=c("createObjectFrom")(z.ids,true),D=Object.assign(B,C);return{ids:Object.keys(D),client:A}}function w(y){__p&&__p();this.$MercuryServerRequests1=y;this.$MercuryServerRequests2=0;this.$MercuryServerRequests3={};this.$MercuryServerRequests4={};this.$MercuryServerRequests9=new Set();this.__threadIDMap=c("MercuryThreadIDMap").getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests5=c("MercuryDispatcher").getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests6=c("MercuryServerPayloadPreprocessor").getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests7=new(c("MercuryServerSendMessageQueueOptions"))(function(z,A){this.__handleUpdate(z,A)}.bind(this),function(z){return this.$MercuryServerRequests10(z)}.bind(this),function(z){this.$MercuryServerRequests11(z)}.bind(this),function(z){return this.$MercuryServerRequests12(z)}.bind(this),c("MercuryServerRequestsConfig").sendMessageTimeout,c("MessagingConfig").SEND_CONNECTION_RETRIES);this.$MercuryServerRequests8=c("MercurySyncDeltaHolder").getForFBID(this.$MercuryServerRequests1);this.$MercuryServerRequests13()}w.getForFBID=function(y){return x.getForFBID(y)};w.get=function(){return x.get()};w.prototype.fetchThreadlistInfo=function(y,z){__p&&__p();var A=arguments.length<=2||arguments[2]===undefined?c("MessagingTag").INBOX:arguments[2],B=arguments[3],C=arguments.length<=4||arguments[4]===undefined?k:arguments[4],D=arguments[5];if(m){m=false;c("EventProfiler").tagCurrentActiveInteractionsAs("FirstMercuryThreadFetch")}var E=B?c("MercuryServerDispatcher").IMMEDIATE:null;if(c("MercuryConfig").MessengerInboxRequests&&!E)E=c("MercuryServerDispatcher").BATCH_DEFERRED_MULTI;var F={client:C};F[A]={offset:y,limit:z,filter:B,before:D};this.__sendRequest(c("MercuryServerURIs").THREADLIST_INFO,F,E)};w.prototype.fetchUnseenThreadIDs=function(){var y=arguments.length<=0||arguments[0]===undefined?c("MessagingTag").INBOX:arguments[0],z=arguments.length<=1||arguments[1]===undefined?k:arguments[1];this.__sendRequest(c("XMercuryUnseenThreadIDsController").getURIBuilder().getURI().toString(),{})};w.prototype.fetchUnreadThreadIDs=function(y){var z=arguments.length<=1||arguments[1]===undefined?k:arguments[1];this.__sendRequest(c("MercuryServerURIs").UNREAD_THREADS,{folders:[y],client:z})};w.prototype.fetchThreadData=function(y){__p&&__p();var z=arguments.length<=1||arguments[1]===undefined?k:arguments[1];c("MercuryAssert").allThreadID(y);var A={threads:{},client:z},B=[],C=[];y.forEach(function(E){__p&&__p();if(this.$MercuryServerRequests3[E])return;this.$MercuryServerRequests3[E]=true;var F=this.__threadIDMap.getServerIDFromClientIDNow(E),G=c("MercuryIDs").tokenize(E);if(G.type=="user"){B.push(G.value);A.threads.user_ids=B}else if(G.type=="thread"){if(F)C.push(F);else C.push(G.value);A.threads.thread_fbids=C}else if(G.type=="root"){if(F){C.push(F);A.threads.thread_fbids=C}}else if(G.type!="pending")throw new Error("Unknown thread type",G)}.bind(this));this.$MercuryServerRequests5.inform("fetch-thread-data",A);if(A.threads.user_ids)A.threads.user_ids.forEach(function(E){if(!E){j.error("empty user id",JSON.stringify(B));c("ChatReliabilityInstrumentation").logERROR("Invalid user ID sent to thread_info.php: "+JSON.stringify(B))}});if(A.threads.thread_fbids)A.threads.thread_fbids.forEach(function(E){if(!E)c("ChatReliabilityInstrumentation").logERROR("Invalid FBID sent to thread_info.php: "+JSON.stringify(y))});for(var D in A.threads){this.__sendRequest(c("MercuryServerURIs").THREAD_INFO,A);break}};w.prototype.ensureThreadIsFetched=function(y){__p&&__p();var z=arguments.length<=1||arguments[1]===undefined?k:arguments[1];if(!this.__threadIDMap.getClientIDFromServerIDNow(y)&&!this.$MercuryServerRequests3[y]){if(!y){c("ChatReliabilityInstrumentation").logERROR("Ensure invalid FBID sent to thread_info.php");j.error("attempting to fetch empty thread_fbid. Bad idea!");return}this.$MercuryServerRequests3[y]=true;this.__sendRequest(c("MercuryServerURIs").THREAD_INFO,{threads:{thread_fbids:[y]},client:z})}};w.prototype.fetchThreadMessages=function(y,z,A,B,C){__p&&__p();var D=arguments.length<=5||arguments[5]===undefined?k:arguments[5];c("MercuryAssert").isThreadID(y);var E=void 0,F=void 0,G=c("MercuryIDs").tokenize(y),H=this.__threadIDMap.getServerIDFromClientIDNow(y),I=false;if(H){E=H;F=G.type=="user"?"user_ids":"thread_fbids"}else{E=G.value;switch(G.type){case"user":F="user_ids";I=true;break;case"thread":F="thread_fbids";break}}var J={messages:{},threads:{},client:D};if(F){J.messages[F]={};J.messages[F][E]={offset:z,timestamp:B,limit:A};if(I)J.threads[F]=[E];this.__sendRequest(c("MercuryServerURIs").THREAD_INFO,J,C)}else this.__threadIDMap.getServerIDFromClientID(y,function(K){J.messages.thread_fbids={};J.messages.thread_fbids[K]={offset:z,timestamp:B,limit:A};this.__sendRequest(c("MercuryServerURIs").THREAD_INFO,J,C)}.bind(this))};w.prototype.handleThreadInfoError=function(y,z){__p&&__p();var A,B=this,C=y.getData(),D=[];if(C.messages){for(var E in C.messages.thread_fbids){var F=this.__threadIDMap.getClientIDFromServerIDNow(E);if(F)D.push(this.$MercuryServerRequests14(F))}for(var G in C.messages.user_ids)D.push(this.$MercuryServerRequests14("user:"+G));for(var H in C.messages.group_ids)D.push(this.$MercuryServerRequests14("group:"+H))}if(D.length)this.$MercuryServerRequests5.handleUpdate({actions:D,from_client:true,payload_source:c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});if(C.threads&&(C.threads.user_ids||C.threads.thread_fbids||C.threads.group_ids||C.threads.thread_ids)){var I=5,J=true;if(!C.retry_count){C.retry_count=0;if(C.messages)delete C.messages}else if(C.retry_count>=I&&(!z||!c("gkx")("AT6272W7G37c2zZOpPDUPGXaehXUPvo7_ZqAqdSAoKzgP5DQ8Luz0w5hQkLZeaPa8UmuuAXTSUI8FctXnbHnbKTw"))){J=false;(C.threads.thread_ids||[]).concat(C.threads.thread_fbids||[]).forEach(function(L){if(L in this.$MercuryServerRequests3)delete this.$MercuryServerRequests3[L]},this)}[].concat(C.threads.thread_ids||[],C.threads.thread_fbids||[],C.threads.user_ids||[],C.threads.group_ids||[]).forEach(function(L){if(L)this.$MercuryServerRequests9.add(L);else c("ChatReliabilityInstrumentation").logERROR("lost a thread id somehow")}.bind(this));if(J){var K=Math.pow(2,Math.min(C.retry_count,I))*1e3;c("setTimeoutAcrossTransitions")(function(){j.log("retry_thread","{}");this.__sendRequest(c("MercuryServerURIs").THREAD_INFO,C)}.bind(this),K);C.retry_count++}if(this.$MercuryServerRequests9.size)(function(){var L=[];B.$MercuryServerRequests9.forEach(function(M){return L.push(M)});j.debug("failed threads",JSON.stringify(L));c("Arbiter").inform(c("MercurySyncConstants").ARBITER_EVENT_SERVER_REQUESTS_FAIL,L)})()}};w.prototype.markFolderAsRead=function(y){this.__sendRequest(c("MercuryServerURIs").MARK_FOLDER_READ,{folder:y});var z=[{action_type:c("MercuryGlobalActionType").MARK_ALL_READ,folder:y}];this.$MercuryServerRequests5.handleUpdate({global_actions:z,from_client:true,payload_source:c("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS})};w.prototype.changeThreadReadStatus=function(y,z,A,B,C,D){c("MercuryAssert").isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(E){var F,G={ids:(F={},F[E]=z,F),source:A,watermarkTimestamp:B,shouldSendReadReceipt:C,commerce_last_message_type:D};j.log("initiate_change_read_status",JSON.stringify({thread_id:y,thread_fbid:E,mark_as_read:z,watermarkTimestamp:B}));this.__sendRequest(c("MercuryServerURIs").CHANGE_READ_STATUS,G)}.bind(this))};w.prototype.changeThreadArchivedStatus=function(y,z,A){c("MercuryAssert").isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(B){var C={ids:{},source:A};C.ids[B]=z;this.__sendRequest(c("MercuryServerURIs").CHANGE_ARCHIVED_STATUS,C)}.bind(this))};w.prototype.changeThreadPageFollowUpStatus=function(y,z,A){c("MercuryAssert").isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(B){var C={ids:{},source:A};C.ids[B]=z;this.__sendRequest(c("MercuryServerURIs").CHANGE_PAGE_FOLLOW_UP_STATUS,C)}.bind(this))};w.prototype.changeThreadFolder=function(y,z){c("MercuryAssert").isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(A){var B={};B[z]=[A];this.__sendRequest(c("MercuryServerURIs").MOVE_THREAD,B)}.bind(this))};w.prototype.changeMutingOnThread=function(y,z){c("MercuryAssert").isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(A){this.__sendRequest(c("MercuryServerURIs").CHANGE_MUTE_THREAD,{thread_fbid:A,mute_settings:z,payload_source:k})}.bind(this))};w.prototype.changeMentionsMutingOnThread=function(y,z){c("MercuryAssert").isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(A){this.__sendRequest(c("XMessagingChangeMentionsMuteModeController").getURIBuilder().getURI(),{thread_fbid:A,mentions_mute_mode:z,payload_source:k})}.bind(this))};w.prototype.changeReactionsMutingOnThread=function(y,z){c("MercuryAssert").isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(A){this.__sendRequest(c("XMessagingChangeReactionsMuteModeController").getURIBuilder().getURI(),{thread_fbid:A,reactions_mute_mode:z,payload_source:k})}.bind(this))};w.prototype.markThreadSpam=function(y,z){c("MercuryAssert").isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(A){this.__sendRequest(c("MercuryServerURIs").MARK_SPAM,{id:A,source:z})}.bind(this))};w.prototype.unmarkThreadSpam=function(y,z){c("MercuryAssert").isThreadID(y);this.__threadIDMap.getServerIDFromClientID(y,function(A){this.__sendRequest(c("MercuryServerURIs").UNMARK_SPAM,{id:A,source:z})}.bind(this))};w.prototype.deleteThread=function(y,z){this.deleteThreads([y],z)};w.prototype.deleteThreads=function(y,z){c("Promise").all(y.map(function(A){c("MercuryAssert").isThreadID(A);return new(c("Promise"))(function(B){return this.__threadIDMap.getServerIDFromClientID(A,B)}.bind(this))}.bind(this))).then(function(A){this.__sendRequest(c("MercuryServerURIs").DELETE_THREAD,{ids:A,source:z})}.bind(this)).done()};w.prototype.deleteMessages=function(y,z){c("MercuryMessageIDs.bs").getServerIDs(z||[],function(A){this.__sendRequest(c("MercuryServerURIs").DELETE_MESSAGES,{message_ids:A})}.bind(this))};w.prototype.sendDeliveryReceipts=function(y,z){c("MercuryMessageIDs.bs").getServerIDs(y||[],function(A){this.__sendRequest(c("MercuryServerURIs").DELIVERY_RECEIPTS,{message_ids:A,thread_ids:z})}.bind(this))};w.prototype.sendNewMessage=function(y){__p&&__p();var z=arguments.length<=1||arguments[1]===undefined?k:arguments[1];if(!y.offline_threading_id)c("BanzaiODS").bumpEntityKey("chat.web","missing_otid_on_send");if(y.client_state&&y.client_state!==c("MercuryMessageClientState").SEND_TO_SERVER)return;var A=c("MercuryIDs").tokenize(y.thread_id),B=A.type,C=babelHelpers["extends"]({},y);C.thread_id=null;if(B=="user"){C.other_user_fbid=A.value;this.$MercuryServerRequests15(C,z)}else if(B=="thread"){C.thread_fbid=A.value;this.$MercuryServerRequests15(C,z)}else if(B=="root"&&A.value==C.offline_threading_id){C.client_thread_id=y.thread_id;this.$MercuryServerRequests15(C,z)}else{c("MercuryIDs").isLocalThread(y.thread_id)||i(0);this.__threadIDMap.getServerIDFromClientID(y.thread_id,function(D){C.thread_fbid=D;this.$MercuryServerRequests15(C,z)}.bind(this))}c("ChatReliabilityInstrumentation").logMESSAGE_SEND_START(c("FBJSON").stringify({otid:C.offline_threading_id,message_id:C.message_id,other_user_fbid:C.other_user_fbid,viewer_page_fbid:!C.creator_info?null:C.creator_info.pageID}))};w.prototype.$MercuryServerRequests15=function(y,z){c("Arbiter").inform(c("ChannelConstants").ATTEMPT_RECONNECT);this.$MercuryServerRequests4[y.message_id]=Date.now();c("MercuryServerSendMessageQueueRouter").getForFBID(this.$MercuryServerRequests1).enqueue(y.other_user_fbid||y.thread_fbid||y.client_thread_id,this.$MercuryServerRequests7,z,y)};w.prototype.__getSendMessageQueueOptions=function(){return this.$MercuryServerRequests7};w.prototype.markSeen=function(){var y=this.$MercuryServerRequests2;this.__sendRequest(c("MercuryServerURIs").MARK_SEEN,{seen_timestamp:y})};w.prototype.$MercuryServerRequests16=function(y,z,A,B){__p&&__p();var C=y.getData(),D=C.message_batch||[C];j.debug("handle_send_message_error_common",JSON.stringify({reliability_error_status:A,request_error_status:z,error_data:B,message_list:D}));var E=D.map(function(G){var H={action_type:c("MercuryActionType").SEND_MESSAGE,other_user_fbid:G.other_user_fbid,thread_fbid:G.thread_fbid,client_message_id:G.message_id,message_id:G.message_id,client_thread_id:G.client_thread_id,status:z,error_data:B};return H});E.forEach(function(G){if(G.action_type===c("MercuryActionType").SEND_MESSAGE&&G.status===c("MercuryActionStatus").ERROR)this.__logMercurySendError(G)},this);var F={actions:E,payload_source:c("MercuryPayloadSource").CLIENT_HANDLE_ERROR};this.$MercuryServerRequests6.handleUpdate(F)};w.prototype.handleSendMessageError=function(y){__p&&__p();var z=y.getPayload(),A=null,B=null;if(z&&z.error_payload){A=c("MercuryActionStatus").UNCONFIRMED;B="send_error"}else{A=c("MercuryActionStatus").ERROR;B="request_error"+n(y)}var C=y.error;if(C===1404102)c("AsyncResponse").verboseErrorHandler(y);var D=/<.*>/.test(y.getErrorDescription())?y.getErrorSummary():y.getErrorDescription();this.$MercuryServerRequests16(y.getRequest(),A,B,{type:c("MercuryErrorType").SERVER,code:y.getError(),description:D,is_transient:y.isTransient()})};w.prototype.handleSendMessageTransportError=function(y){this.$MercuryServerRequests16(y.getRequest(),c("MercuryActionStatus").ERROR,"transport_error"+n(y),{type:c("MercuryErrorType").TRANSPORT,code:y.getError(),is_transient:true})};w.prototype.handleSendMessageTimeout=function(y){this.$MercuryServerRequests16(y,c("MercuryActionStatus").ERROR,"transport_timeout",{type:c("MercuryErrorType").TIMEOUT,is_transient:true})};w.prototype.getLastActionTimestamp=function(){return this.$MercuryServerRequests2};w.prototype.__logMercurySendError=function(y){c("MercurySendErrorLogger").log(y)};w.prototype.updateLastActionTimestamp=function(y){var z=Date.now()-1e3*60*60*24;if(y&&y>z)this.$MercuryServerRequests2=Math.max(this.$MercuryServerRequests2,y)};w.prototype.markThreadFetched=function(y){delete this.$MercuryServerRequests3[y];if(this.$MercuryServerRequests9["delete"](y)&&!this.$MercuryServerRequests9.size){j.debug("no_failed_threads","{}");c("Arbiter").inform(c("MercurySyncConstants").ARBITER_EVENT_SERVER_REQUESTS_RECOVER)}};w.prototype.$MercuryServerRequests14=function(y){return{action_type:c("MercuryActionType").LOG_MESSAGE,thread_id:y,message_id:y,timestamp:Date.now(),is_unread:false,source:c("MercurySourceType").UNKNOWN,log_message_body:"",log_message_type:c("MercuryLogMessageType").SERVER_ERROR,log_message_data:{}}};w.prototype.__getForAsyncRequest=function(y){var z=y.getData(),A=z.request_user_id?z.request_user_id:c("CurrentUser").getID();return w.getForFBID(A)};w.prototype.__handleUpdate=function(y,z){this.__getForAsyncRequest(z).$MercuryServerRequests6.handleUpdate(y)};w.prototype.$MercuryServerRequests17=function(y){var z=this.__getForAsyncRequest(y);z.handleThreadInfoError(y)};w.prototype.$MercuryServerRequests18=function(y){var z=this.__getForAsyncRequest(y);z.handleThreadInfoError(y,true)};w.prototype.$MercuryServerRequests10=function(y){var z=this.__getForAsyncRequest(y.getRequest());z.handleSendMessageError(y)};w.prototype.$MercuryServerRequests11=function(y){var z=this.__getForAsyncRequest(y.getRequest());z.handleSendMessageTransportError(y)};w.prototype.$MercuryServerRequests12=function(y){var z=this.__getForAsyncRequest(y);z.handleSendMessageTimeout(y)};w.prototype.$MercuryServerRequests13=function(){__p&&__p();var y,z=null;if(c("MercuryServerRequestsConfig").msgrRegion)z={name:"X-MSGR-Region",value:c("MercuryServerRequestsConfig").msgrRegion};var A=(y={},y[c("MercuryServerURIs").THREAD_INFO]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").BATCH_DEFERRED_MULTI,customHeader:z,batch_function:o,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this),error_handler:function(E){return this.$MercuryServerRequests17(E.getRequest())}.bind(this),timeout_handler:function(E){return this.$MercuryServerRequests18(E)}.bind(this),timeout:l},y[c("MercuryServerURIs").MARK_FOLDER_READ]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").IMMEDIATE,customHeader:z,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)},y[c("MercuryServerURIs").CHANGE_READ_STATUS]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").IMMEDIATE,customHeader:z,handler:function(E,F){this.__handleUpdate(E,F);var G=(E.threads||[]).map(function(H){return H&&H.thread_id});j.log("response_change_read_status",JSON.stringify({threads:G}))}.bind(this)},y[c("MercuryServerURIs").MARK_SEEN]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:z,batch_function:r,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)},y[c("MercuryServerURIs").THREADLIST_INFO]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").BATCH_SUCCESSIVE_UNIQUE,customHeader:z,batch_function:q,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)},y[c("MercuryServerURIs").MARK_SPAM]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").IMMEDIATE,customHeader:z,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)},y[c("MercuryServerURIs").UNMARK_SPAM]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").IMMEDIATE,customHeader:z,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)},y[c("MercuryServerURIs").UNREAD_THREADS]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").BATCH_SUCCESSIVE_UNIQUE,customHeader:z,batch_function:p,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)},y[c("MercuryServerURIs").CHANGE_ARCHIVED_STATUS]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:z,batch_function:t,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)},y[c("MercuryServerURIs").CHANGE_PAGE_FOLLOW_UP_STATUS]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:z,batch_function:t,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)},y[c("MercuryServerURIs").DELETE_THREAD]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:z,batch_function:v,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)},y[c("MercuryServerURIs").DELETE_MESSAGES]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").IMMEDIATE,customHeader:z,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)},y[c("MercuryServerURIs").DELIVERY_RECEIPTS]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").IMMEDIATE,customHeader:z,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)},y[c("MercuryServerURIs").MOVE_THREAD]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:z,batch_function:u,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)},y[c("MercuryServerURIs").CHANGE_MUTE_THREAD]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").IMMEDIATE,customHeader:z,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)},y),B=c("XMercuryUnseenThreadIDsController").getURIBuilder().getURI().toString();A[B]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").IMMEDIATE,customHeader:z,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)};var C=c("XMessagingChangeMentionsMuteModeController").getURIBuilder().getURI().toString();A[C]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").IMMEDIATE,customHeader:z,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)};var D=c("XMessagingChangeReactionsMuteModeController").getURIBuilder().getURI().toString();A[D]={request_user_id:this.$MercuryServerRequests1,mode:c("MercuryServerDispatcher").IMMEDIATE,customHeader:z,handler:function(E,F){return this.__handleUpdate(E,F)}.bind(this)};c("MercuryServerDispatcher").registerEndpoints(A)};w.prototype.__sendRequest=function(y,z,A){if(this.$MercuryServerRequests8)switch(y){case c("MercuryServerURIs").THREADLIST_INFO:case c("MercuryServerURIs").THREAD_INFO:z.cachius_min_seq_id=this.$MercuryServerRequests8.getLastSeqID();break;default:break}c("MercuryServerDispatcher").trySend(y,z,A,this.$MercuryServerRequests1)};w.prototype.__getFBID=function(){return this.$MercuryServerRequests1};var x=new(c("MercurySingletonProvider"))(w);f.exports=w}),null);
__d("MercuryThreadIDMap",["KeyedCallbackManager","MercuryAssert","MercuryIDs","MercurySingletonProvider"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j){this.$MercuryThreadIDMap1=j;this.$MercuryThreadIDMap2=new(c("KeyedCallbackManager"))();this.$MercuryThreadIDMap3=new(c("KeyedCallbackManager"))()}h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};h.prototype.setServerIDToClientID=function(j,k){var l=this.getClientIDFromServerIDNow(j);if(l){l!==k;return}this.forceSetServerIDToClientID(j,k)};h.prototype.forceSetServerIDToClientID=function(j,k){this.$MercuryThreadIDMap2.setResource(j,k);this.$MercuryThreadIDMap3.setResource(k,j)};h.prototype.setDeprecatedServerIDToClientID=function(j,k){if(j)this.$MercuryThreadIDMap2.setResource(j,k)};h.prototype.getClientIDFromServerIDNow=function(j){return this.$MercuryThreadIDMap2.getResource(j)};h.prototype.getClientIDFromServerID=function(j,k){this.$MercuryThreadIDMap2.executeOrEnqueue(j,k);e(["MercuryServerRequests"],function(l){l.getForFBID(this.$MercuryThreadIDMap1).ensureThreadIsFetched(j)}.bind(this))};h.prototype.getServerIDFromClientIDNow=function(j){return this.$MercuryThreadIDMap3.getResource(j)};h.prototype.getServerIDFromClientID=function(j,k){c("MercuryAssert").isThreadID(j);var l=this.$MercuryThreadIDMap3.executeOrEnqueue(j,k);e(["MercuryServerRequests"],function(m){var n=this.$MercuryThreadIDMap3.getUnavailableResources(l),o=c("MercuryIDs").tokenize(j);if(n.length&&o.type!="root")m.getForFBID(this.$MercuryThreadIDMap1).fetchThreadData(n)}.bind(this))};h.prototype.hasClientIDForServerID=function(j){return!!this.getClientIDFromServerIDNow(j)};h.prototype.convertThreadIDIfAvailable=function(j){var k=this.getClientIDFromServerIDNow(j);return k||j};h.prototype.canLinkExternally=function(j){c("MercuryAssert").isThreadID(j);var k=c("MercuryIDs").tokenize(j);return k.type=="user"||!!this.getServerIDFromClientIDNow(j)};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("MercuryParticipantFetcher",["LogHistory","MercuryIDs","MercuryPayloadSource","MercuryServerPayloadPreprocessor","ShortProfiles","setImmediate","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("LogHistory").getInstance("short_profiles");function i(k){this.$MercuryParticipantFetcher4=c("MercuryServerPayloadPreprocessor").getForFBID(k);this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2=new Set();this.$MercuryParticipantFetcher3=new Set();this.$MercuryParticipantFetcher5=setInterval(this.$MercuryParticipantFetcher7.bind(this),20*1e3)}i.prototype.fetch=function(k){this.$MercuryParticipantFetcher8(k);this.$MercuryParticipantFetcher7()};i.prototype.fetchMulti=function(k){if(k.length){k.forEach(function(l){return this.$MercuryParticipantFetcher8(l)}.bind(this));this.$MercuryParticipantFetcher7()}};i.prototype.$MercuryParticipantFetcher8=function(k){if(!this.$MercuryParticipantFetcher3.has(k))this.$MercuryParticipantFetcher2.add(k)};i.prototype.$MercuryParticipantFetcher7=function(){__p&&__p();if(this.$MercuryParticipantFetcher1||this.$MercuryParticipantFetcher2.size===0)return;this.$MercuryParticipantFetcher1=true;c("setImmediate")(function(){__p&&__p();this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2.forEach(function(k){return this.$MercuryParticipantFetcher3.add(k)}.bind(this));this.$MercuryParticipantFetcher9(this.$MercuryParticipantFetcher2,function(k){k.forEach(function(l){return this.$MercuryParticipantFetcher3["delete"](l.id)}.bind(this));this.$MercuryParticipantFetcher10(k);if(this.$MercuryParticipantFetcher6)clearTimeout(this.$MercuryParticipantFetcher6)}.bind(this));this.$MercuryParticipantFetcher11();this.$MercuryParticipantFetcher2.clear()}.bind(this))};i.prototype.$MercuryParticipantFetcher11=function(){this.$MercuryParticipantFetcher6=c("setTimeoutAcrossTransitions")(function(){this.$MercuryParticipantFetcher3.forEach(function(k){return this.$MercuryParticipantFetcher2.add(k)}.bind(this));this.$MercuryParticipantFetcher3.clear()}.bind(this),11*1e3)};i.prototype.$MercuryParticipantFetcher9=function(k,l){__p&&__p();var m=[];k.forEach(function(n){var o=c("MercuryIDs").tokenize(n),p=o.type,q=o.value;p==="fbid"&&m.push(q)});if(m.length>0){c("ShortProfiles").getMulti(m,function(n){var o=[];for(var p in n)o.push(j(n[p],p));l(o);if(o.length!==m.length)h.error("server_fetch_participant_count_error",JSON.stringify({expectedIDs:m,receivedIDs:Object.keys(n)}))});h.debug("client_fetch_participants",JSON.stringify({userIDs:m}))}};i.prototype.$MercuryParticipantFetcher10=function(k){this.$MercuryParticipantFetcher4.handleUpdate({participants:k,from_client:false,payload_source:c("MercuryPayloadSource").SERVER_FETCH_PARTICIPANTS})};function j(k,l){__p&&__p();var m=babelHelpers["extends"]({gender:k.gender,fbid:k.id||l,href:k.uri,id:c("MercuryIDs").getParticipantIDFromUserID(k.id||l),image_src:k.thumbSrc,name:k.name,short_name:k.firstName,employee:k.employee,is_employee_away:k.is_employee_away,type:k.type,vanity:k.vanity,is_friend:k.is_friend,is_messenger_user:k.is_messenger_user,is_coworker:k.is_coworker},{});if(k.officeStatus){m.officeStatus=k.officeStatus;m.officeStatusEndDate=k.officeStatusEndDate;m.officeStatusComment=k.officeStatusComment;m.officeStatusLocation=k.officeStatusLocation}if(k.timezone||k.timezone===0)m.timezone=k.timezone;if(k.personal_id)m.personal_id=k.personal_id;if(k.work_id)m.work_id=k.work_id;return m}f.exports=i}),null);
__d("MercuryVanityIDMap.bs",["bs_string","bs_js_primitive","MercuryAssert","bs_js_null_undefined"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={},i={};function j(o){return c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(h[c("bs_string").lowercase(o)]))}function k(o){return c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(i[o]))}function l(o){var p=i[o];if(p!==undefined)return true;else return false}function m(o){var p=h[c("bs_string").lowercase(o)];if(p!==undefined)return true;else return false}function n(o,p){c("MercuryAssert").isParticipantID(p);var q=c("bs_string").lowercase(o);h[q]=p;i[p]=q;return 0}g.vanityToID=h;g.idToVanity=i;g.getID=j;g.getVanity=k;g.hasID=l;g.hasVanity=m;g.set=n}),null);
__d("MercuryParticipants",["fbt","CurrentUser","EventEmitter","ImageSourceRequest","ImageSourceType","ImmutableObject","KeyedCallbackManager","MercuryAssert","MercuryIDs","MercuryParticipantFetcher","MercuryParticipantTypes","MercuryParticipantsConstants","MercuryDispatcher","MercuryVanityIDMap.bs","PhotoResizeModeConst","createObjectFrom"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i="change";function j(l){__p&&__p();this.$MercuryParticipants1=l;this.$MercuryParticipants2=new(c("EventEmitter"))();this.$MercuryParticipants3=new(c("KeyedCallbackManager"))();this.$MercuryParticipants4=new(c("MercuryParticipantFetcher"))(this.$MercuryParticipants1);this.$MercuryParticipants5=c("MercuryDispatcher").getForFBID(this.$MercuryParticipants1);this.$MercuryParticipants5.subscribe("update-participants",function(m,n){if(n.participants&&n.participants.length>0)this.$MercuryParticipants6(n.participants)}.bind(this));this.$MercuryParticipants5.subscribe("invalidate-global-state",function(){this.$MercuryParticipants7()}.bind(this))}j.prototype.addListener=function(l,m){return this.$MercuryParticipants2.addListener(l,m)};j.prototype.getIDFromVanityOrFBID=function(l){if(!l)return null;if(c("MercuryVanityIDMap.bs").hasVanity(l))return c("MercuryVanityIDMap.bs").getID(l);if(/^\d+$/.test(l))return c("MercuryIDs").getParticipantIDFromUserID(l);return undefined};j.prototype.getNow=function(l){return this.$MercuryParticipants8(l)};j.prototype.getOrFetch=function(l){var m=this.$MercuryParticipants8(l);if(!m)this.$MercuryParticipants4.fetch(l);return m};j.prototype.get=function(l,m){c("MercuryAssert").isParticipantID(l);return this.$MercuryParticipants9([l],function(n){m(n[l])})};j.prototype.getMulti=function(l,m){return this.$MercuryParticipants9(l,m)};j.prototype.getBigImageMulti=function(l,m){__p&&__p();var n=arguments.length<=2||arguments[2]===undefined?c("MercuryParticipantsConstants").BIG_IMAGE_SIZE:arguments[2];c("MercuryAssert").allParticipantIDs(l);var o=false,p=this.$MercuryParticipants9(l,function(q){__p&&__p();var r={},s=0,t=new Set(),u=function(w,y){s++;r[w]=y;if(s===l.length){if(!o)m(r);if(t.size>0)this.$MercuryParticipants10(t)}}.bind(this),v=function(w,y){var z=this.$MercuryParticipants3.getResource(w);if(!z)return;this.$MercuryParticipants3.setResource(w,c("ImmutableObject").set(z,{big_image_src:y.uri}));t.add(w);u(w,y.uri)}.bind(this);for(var w in q){var x=q[w];if(!x.big_image_src)new(c("ImageSourceRequest"))().setFBID(c("MercuryIDs").getUserIDFromParticipantID(w)).setType(c("ImageSourceType").PROFILE_PICTURE).setDimensions(n,n).setResizeMode(c("PhotoResizeModeConst").COVER).setCallback(v.bind(null,w)).send();else u(x.id,x.big_image_src)}}.bind(this));return{remove:function q(){o=true;p.remove()}}};j.prototype.getOrderedBigImageMulti=function(l,m){return this.getBigImageMulti(l,function(n){m(l.map(function(o){return n[o]}))})};j.prototype.$MercuryParticipants9=function(l,m){__p&&__p();c("MercuryAssert").allParticipantIDs(l);var n=this.$MercuryParticipants3.executeOrEnqueue(l,m),o=this.$MercuryParticipants3.getUnavailableResources(n).filter(function(p){__p&&__p();var q=c("MercuryIDs").tokenize(p),r=q.type,s=q.value;if(r==="email"){this.$MercuryParticipants11(p,s);return false}if(r==="name"){this.$MercuryParticipants12(p,s);return false}return true}.bind(this));this.$MercuryParticipants4.fetchMulti(o);return this.$MercuryParticipants13(n)};j.prototype.$MercuryParticipants8=function(l){var m=this.$MercuryParticipants3.getResource(l);if(!m){var n=c("MercuryIDs").tokenize(l),o=n.type,p=n.value;if(o==="email")m=this.$MercuryParticipants11(l,p);if(o==="name")m=this.$MercuryParticipants12(l,p)}return m};j.prototype.$MercuryParticipants11=function(l,m){var n=new(c("ImmutableObject"))(k(l,m));this.$MercuryParticipants3.setResource(l,n);return n};j.prototype.$MercuryParticipants12=function(l,m){var n=new(c("ImmutableObject"))({gender:c("MercuryParticipantsConstants").UNKNOWN_GENDER,href:null,id:l,image_src:c("MercuryParticipantsConstants").EMAIL_IMAGE,big_image_src:c("MercuryParticipantsConstants").EMAIL_IMAGE,name:m,short_name:m,employee:false});this.$MercuryParticipants3.setResource(l,n);return n};j.prototype.$MercuryParticipants10=function(l){this.$MercuryParticipants2.emit(i,l)};j.prototype.$MercuryParticipants6=function(l){var m=l.map(function(n){return n.id});l=l.map(function(n){if(n.vanity)c("MercuryVanityIDMap.bs").set(n.vanity,n.id);var o=this.$MercuryParticipants3.getResource(n.id);return o?c("ImmutableObject").set(o,n):new(c("ImmutableObject"))(this.$MercuryParticipants14(n))}.bind(this));this.$MercuryParticipants3.addResourcesAndExecute(c("createObjectFrom")(m,l));this.$MercuryParticipants10(new Set(m))};j.prototype.$MercuryParticipants14=function(l){var m=l.type===c("MercuryParticipantTypes").USER||l.type===c("MercuryParticipantTypes").FRIEND;if(!m)return l;if(!l.name&&!l.href&&!l.vanity){var n=this.getDefaultName();l.name=n;l.short_name=n}return l};j.prototype.$MercuryParticipants13=function(l){return{remove:function(){this.$MercuryParticipants3.unsubscribe(l)}.bind(this)}};j.prototype.$MercuryParticipants7=function(){this.$MercuryParticipants3=new(c("KeyedCallbackManager"))()};j.prototype.getDefaultName=function(){return h._("Facebook User")};function k(l,m){return{gender:c("MercuryParticipantsConstants").UNKNOWN_GENDER,href:null,id:l,image_src:c("MercuryParticipantsConstants").EMAIL_IMAGE,big_image_src:c("MercuryParticipantsConstants").EMAIL_IMAGE,name:m,short_name:m,employee:false,fbid:undefined,accepts_messenger_user_feedback:undefined,is_business_enabled:undefined,is_messenger_platform_bot:undefined,is_employee_away:undefined,is_friend:undefined,is_messenger_user:undefined,is_verified:undefined,type:undefined,vanity:undefined,timezone:undefined,personal_id:undefined,work_id:undefined}}f.exports=new j(c("CurrentUser").getID())}),null);
__d("EventReminderMembersMap",["CurrentUser","EventReminderConstants","MercuryIDs","MercuryParticipants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("EventReminderConstants").EventGuestStates,i=c("EventReminderConstants").GuestStates;function j(k){this.$EventReminderMembersMap1=k;this.$EventReminderMembersMap2=new Map();this.$EventReminderMembersMap3=new Map();this.$EventReminderMembersMap4=new Map();this.$EventReminderMembersMap5=new Map();this.$EventReminderMembersMap6=new Map();this.$EventReminderMembersMap7=new Map()}j.prototype.setAllMembers=function(k,l){__p&&__p();if(!k)return;this.$EventReminderMembersMap2.set(l,i.INVITED);var m=[],n=[],o=[],p=[];for(var q in k){m.push(c("MercuryIDs").getParticipantIDFromUserID(q));var r=k[q];if(q===c("CurrentUser").getID())this.$EventReminderMembersMap2.set(l,r);var s={fbid:q,guestState:r,imageSrc:""};if(r===i.GOING)n.push(s);else if(r===i.DECLINED)o.push(s);else p.push(s)}var t=n.concat(o,p);this.$EventReminderMembersMap3.set(l,t);this.$EventReminderMembersMap4.set(l,n);this.$EventReminderMembersMap7.set(l,false);this.$EventReminderMembersMap8(l,m,t)};j.prototype.setAllMembersOfAssociatedEvent=function(k,l){__p&&__p();if(!k)return;this.$EventReminderMembersMap2.set(l,h.INITIAL);var m=[],n=[],o=[],p=[];k.map(function(r){__p&&__p();m.push(c("MercuryIDs").getParticipantIDFromUserID(r.participant_id));var s=r.participant_id.toString(),t=r.event_status||h.INITIAL;if(s===c("CurrentUser").getID())this.$EventReminderMembersMap2.set(l,t);var u={fbid:s,guestState:t,imageSrc:""};if(t===h.GOING)n.push(u);else if(t===h.WATCHED)o.push(u);else p.push(u)},this);var q=n.concat(o,p);this.$EventReminderMembersMap3.set(l,q);this.$EventReminderMembersMap4.set(l,n);this.$EventReminderMembersMap5.set(l,o);this.$EventReminderMembersMap6.set(l,p);this.$EventReminderMembersMap7.set(l,false);this.$EventReminderMembersMap8(l,m,q)};j.prototype.clearMembers=function(k){this.$EventReminderMembersMap2["delete"](k);this.$EventReminderMembersMap3["delete"](k);this.$EventReminderMembersMap4["delete"](k);this.$EventReminderMembersMap5["delete"](k);this.$EventReminderMembersMap6["delete"](k)};j.prototype.getAllMembers=function(k){return this.$EventReminderMembersMap3.get(k)};j.prototype.getGoingMembers=function(k){return this.$EventReminderMembersMap4.get(k)};j.prototype.getInterestedMembers=function(k){return this.$EventReminderMembersMap5.get(k)};j.prototype.getSelfGuestState=function(k){if(!this.$EventReminderMembersMap2.has(k))return i.INVITED;return this.$EventReminderMembersMap2.get(k)};j.prototype.getProfileImagesLoaded=function(k){return!!this.$EventReminderMembersMap7.get(k)};j.prototype.$EventReminderMembersMap8=function(k,l,m){c("MercuryParticipants").getBigImageMulti(l,function(n){for(var o=0;o<m.length;o++)if(m[o].fbid)m[o].imageSrc=n[c("MercuryIDs").getParticipantIDFromUserID(m[o].fbid)];this.$EventReminderMembersMap7.set(k,true);this.$EventReminderMembersMap1.__emitChange()}.bind(this))};f.exports=j}),null);
__d("EventReminderStateStore",["EventReminderActions","EventReminderConstants","EventReminderDispatcher","EventReminderMembersMap","EventRemindersGating","FluxStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("EventReminderConstants").EventPlanType,k=36e5;h=babelHelpers.inherits(l,c("FluxStore"));i=h&&h.prototype;function l(){i.constructor.call(this,c("EventReminderDispatcher"));this.__moduleID=f.id;this.$EventReminderStateStore1={};this.$EventReminderStateStore2=new(c("EventReminderMembersMap"))(this);this.$EventReminderStateStore3=new Map()}l.prototype.getEvent=function(m){return this.$EventReminderStateStore1[m]};l.prototype.getEventMembers=function(m){return this.$EventReminderStateStore2.getAllMembers(m)};l.prototype.getSelfGuestState=function(m){return this.$EventReminderStateStore2.getSelfGuestState(m)};l.prototype.getNumOfGoingMembers=function(m){var n=this.$EventReminderStateStore2.getGoingMembers(m);return n?n.length:0};l.prototype.getNumOfInterestedMembers=function(m){var n=this.$EventReminderStateStore2.getInterestedMembers(m);return n?n.length:0};l.prototype.getProfileImagesLoaded=function(m){return this.$EventReminderStateStore2.getProfileImagesLoaded(m)};l.prototype.shouldShowCTA=function(m,n){var o=this.getEvent(m),p=Date.now(),q=this.$EventReminderStateStore3.get(m);if((!o||!o.exist)&&n>c("EventRemindersGating").eventPlanCTAThreashold&&(!q||p-q>k)&&c("EventRemindersGating").shouldShowCTA){this.$EventReminderStateStore3.set(m,p);return true}else return false};l.prototype.clearEventMembers=function(m){this.$EventReminderStateStore2.clearMembers(m)};l.prototype.getTransformedEvent=function(event){if(event.room_type==="EVENT"){var m=event.event_place&&event.event_place.name,n=event.event_place&&event.event_place.address&&event.event_place.address.single_line_full_address;return{allowRSVP:true,eventDate:event.start_timestamp,eventName:event.name,eventLocationName:m,eventLocationAddress:n,eventID:event.id.toString(),eventType:j.ASSOCIATED_EVENT,exists:true}}return{allowRSVP:!!event.track_rsvp,eventDate:event.event_time,eventName:event.title,eventLocationName:event.location_name,eventLocationAddress:event.location_address,eventID:event.oid.toString(),eventType:event.event_type,exists:true}};l.prototype.__onDispatch=function(m){__p&&__p();var n=c("EventReminderActions").Types,o=m.threadID;switch(m.type){case n.UPDATE_EVENT_REMINDER:var event=m.event;this.$EventReminderStateStore1[o]=this.getTransformedEvent(event);if(this.$EventReminderStateStore1[o].allowRSVP)if(event.room_type==="EVENT")this.$EventReminderStateStore2.setAllMembersOfAssociatedEvent(m.participantsEventStatus,o);else this.$EventReminderStateStore2.setAllMembers(event.event_members,o);break;case n.DELETE_EVENT_REMINDER:this.$EventReminderStateStore1[o].exists=false;this.clearEventMembers(o);break}this.__emitChange()};f.exports=new l()}),null);
__d("MercuryMessageRenderLocations",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({CHAT:"chat",MESSENGER:"messenger",PAGES:"pages"});f.exports=h}),null);
__d("MessengerFormattingUtils",["cx","Newline.react","React","ReactFragment","UnicodeUtils","gkx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(u){return{offset:u[1].length,length:c("UnicodeUtils").strlen(u[2])+2,innerOffset:1,innerText:u[2]}}var j={pattern:/([\s_~\'\"(]|^)\*(\S(?:.*?\S)??)\*(?=[\s_~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s_~\'\"(]|^)\*(?:\S(?:.*?\S)??)\*(?=[\s_~,.;:!?\'\")]|$)/,formatter:function u(v){return c("React").createElement("b",null,v)},getRangeInMatch:i,recursivelyFormat:true},k={pattern:/([\s*~\'\"(]|^)_(\S(?:.*?\S)??)_(?=[\s*~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*~\'\"(]|^)_(?:\S(?:.*?\S)??)_(?=[\s*~,.;:!?\'\")]|$)/,formatter:function u(v){return c("React").createElement("i",null,v)},getRangeInMatch:i,recursivelyFormat:true},l={pattern:/([\s*_\'\"(]|^)~(\S(?:.*?\S)??)~(?=[\s*_,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*_\'\"(]|^)~(?:\S(?:.*?\S)??)~(?=[\s*_,.;:!?\'\")]|$)/,formatter:function u(v){return c("React").createElement("s",null,v)},getRangeInMatch:i,recursivelyFormat:true},m={pattern:/([\s*_~\'\"(]|^)`(\S(?:.*?\S)??)`(?=[\s\w*_~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*_~\'\"(]|^)`(?:\S(?:.*?\S)??)`(?=[\s\w*_~,.;:!?\'\")]|$)/,formatter:function u(v){return c("React").createElement("code",null,v)},getRangeInMatch:i,recursivelyFormat:false},n=function n(u){var v={blockquote1:c("React").createElement("blockquote",{className:"_pye"},c("React").createElement("div",{className:"_pyf"}),u),blockquote2:c("React").createElement(c("Newline.react"),null)};return c("ReactFragment").create(v)},o={pattern:/(^>>> ?)((.|(\r\n)|\r|\n)*?\S(.|(\r\n)|\r|\n)*?)^<<<\s*?((\r\n)|\r|\n|$)/gm,nonCapturingPattern:/(^>>> ?)((.|(\r\n)|\r|\n)*?\S(.|(\r\n)|\r|\n)*?)^<<<\s*((\r\n)|\r|\n|$)/m,formatter:n,getRangeInMatch:function u(v){return{offset:0,length:c("UnicodeUtils").strlen(v[0]),innerOffset:c("UnicodeUtils").strlen(v[1]),innerText:v[2]}},recursivelyFormat:true},p={pattern:/((^> )(.*\S.*)((\r\n)|\r|\n)?)(^> ?(.*)((\r\n)|\r|\n)?)*/gm,nonCapturingPattern:/(^> (.*\S.*)((\r\n)|\r|\n)?)(^> ?(.*)((\r\n)|\r|\n)?)*/m,formatter:n,getRangeInMatch:function u(v){var w=v[0],x=c("UnicodeUtils").strlen(w),y=c("UnicodeUtils").strlen(v[2]);return{offset:0,length:x,innerOffset:y,innerText:w.substring(y,x)}},recursivelyFormat:true,getAdditionalInnerRanges:function u(v){return t(v.innerText,[q]).map(function(w){return babelHelpers["extends"]({},w,{offset:w.offset+v.innerOffset,innerOffset:w.innerOffset+v.innerOffset})})}},q={pattern:/(^> ?)(.*?$)/gm,nonCapturingPattern:/^> ?(.*?$)/m,formatter:function u(v){return v},getRangeInMatch:function u(v){return{offset:0,length:c("UnicodeUtils").strlen(v[0]),innerOffset:c("UnicodeUtils").strlen(v[1]),innerText:v[2]}},recursivelyFormat:true},r=[j,k,l,m];if(c("gkx")("AT6IFGvJKEskVV3MpDhLcaRYk55exGzbLc4uf2H4PkUSB_m2BNrrV8nK4TTyE-IEyhbw2ed0C_HlWoHBx_yhMSmL")){r.push(o);r.push(p)}function s(u){var v=arguments.length<=1||arguments[1]===undefined?r:arguments[1];for(var w=0;w<v.length;w++){var x=v[w].nonCapturingPattern;if(x.test(u))return true}return false}function t(u){__p&&__p();var v=arguments.length<=1||arguments[1]===undefined?r:arguments[1],w=[];for(var x=0;x<v.length;x++){var y=v[x];y.pattern.lastIndex=0;var z=void 0;while((z=y.pattern.exec(u))!=null){var A=y.getRangeInMatch(z),B=u.substr(0,z.index+A.offset),C=c("UnicodeUtils").strlen(B),D={offset:C,length:A.length,innerText:A.innerText,innerOffset:C+A.innerOffset,formatter:y.formatter,recursivelyFormat:y.recursivelyFormat},E=y.getAdditionalInnerRanges?y.getAdditionalInnerRanges(D):[];w.push(D);w=w.concat(E)}}return w}f.exports={defaultFormatConfigs:r,hasMatch:s,getRanges:t,formatConfigs:{bold:j,italic:k,strikethrough:l,code:m,blockquote:o,multipleInlineBlockquote:p,singleInlineBlockquote:q}}}),null);
__d("MessengerMathUtils",["UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=2,i=/^(?:\$\$|\\\[)[\s\S]*?\S[\s\S]*?(?:\$\$|\\\])$/,j=/\\\([\s\S]*?\S[\s\S]*?\\\)/g;function k(p){return i.test(p)}function l(p){return p.substring(h,p.length-h)}function m(p){j.lastIndex=0;return j.test(p)}function n(p){var q=arguments.length<=1||arguments[1]===undefined?0:arguments[1],r=[];j.lastIndex=0;var s=void 0;while((s=j.exec(p))!==null){var t=p.substring(0,s.index),u=c("UnicodeUtils").strlen(t);r.push({offset:u,length:c("UnicodeUtils").strlen(s[0]),math:true})}return r}function o(p){__p&&__p();var q=p.length,r=0,s=0;for(var t=0;t<q;t++)if(p[t]==="\\")if(p.slice(t,t+6)==="\\begin"){r+=2;s=Math.max(s,r)}else if(p.slice(t,t+4)==="\\end")r-=2;else t++;else if(p[t]==="{"){r++;s=Math.max(s,r)}else if(p[t]==="}")r--;return s}f.exports={MATH_DELIMITER_LENGTH:h,isMathBlock:k,hasInlineMath:m,getInlineMathRanges:n,getMathBlockInner:l,getMaxBraceDepth:o}}),null);
__d("MessengerSupportedEmojiUtils",["cx","EmojiImageURL","EmojiLikeConstants","EmojiRenderer","EmoticonEmojiList","FBEmojiAliases","Image.react","MessengerSupportedEmoji","React","SupportedFBEmoji","Utf16","gkx","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=65039,j="_fe0f",k=/_fe0f/g,l=new RegExp("(\r\n|[ \r\n]|s)"),m={getSupportedEmojiKey:function n(o){__p&&__p();if(!o)return null;var p=null,q=this.parse(o);if(q.length===1&&q[0].length===o.length){var r=q[0].emoji.map(function(s){return c("Utf16").decode(s)});r[r.length-1]===i&&r.pop();p=r.map(function(s){return s.toString(16)}).join("_")}return this.isSupportedEmojiKey(p)?p:null},isSupportedEmoji:function n(o){return!!this.getSupportedEmojiKey(o)},isSupportedEmojiKey:function n(o){if(!o)return false;if(c("gkx")("AT7ffoM8gf91Fer7cUMkwGH62Vum20vkKo_AIqUOx27bu9y21PoFYcSzgDJj_KAeh5RgHmHKzv6c5n2RlIxDAfXE"))return!!c("SupportedFBEmoji")[function(p){var q=c("FBEmojiAliases")[p];if(q)return q.replace(k,"");return p}(o)];return!!c("MessengerSupportedEmoji").emoji[o]},getSupportedEmojiCodesArray:function n(o){__p&&__p();if(!o)return null;var p=this.parse(o);if(p.length===1&&p[0].length===o.length){var q=p[0].emoji.map(function(s){return c("Utf16").decode(s)});q[q.length-1]===i&&q.pop();var r=q.map(function(s){return s.toString(16)}).join("_");if(c("MessengerSupportedEmoji").emoji[r])return q}return null},getEmojiKeyFromCodes:function n(o){return o.map(function(p){return p.toString(16)}).join("_")},getClassSizeMap:function n(){var o,p=c("EmojiLikeConstants").size;return o={},o[p.XSMALL]="_2560",o[p.SMALL]="_1ifu",o[p.MEDIUM]="_19_r",o[p.LARGE]="_19_s",o},getEmojiMatchObj:function n(o){__p&&__p();var p=this.parse(o,1);if(p.length!==1)return null;var q=p[0].emoji,r=q.map(function(t){return c("Utf16").decode(t)});if(r[r.length-1]===i)r.pop();var s=r.map(function(t){return t.toString(16)}).join("_");return{emoji_key:s,emoji_str:q.join(""),is_supported:this.isSupportedEmojiKey(s),offset:p[0].offset,length:p[0].length}},getNewEmojiData:function n(o,p){__p&&__p();if(!o)return null;var q=this.getSupportedEmojiKey(o);if(!q)return null;var r=this.getClassSizeMap();p=this.transferSize(p);if(!c("EmojiLikeConstants").sizeMap[p])p=c("EmojiLikeConstants").size.XSMALL;var s=c("joinClasses")(r[p],"_1ift"),t=c("EmojiImageURL").getMessengerURL(q,c("EmojiLikeConstants").sizeMap[p]);return{emoji:c("React").createElement(c("Image.react"),{className:s,src:t}),emoji_key:q,url:t}},getEmojiOnlyContents:function n(o){__p&&__p();var p=o||"",q=[];while(p.length>0&&p.trim().length>0){var r=l.exec(p),s="";while(r&&r.length&&r.index===0){s+=r[0];p=p.replace(l,"");r=l.exec(p)}if(s.length>0)q.push({text:s});var t=c("EmoticonEmojiList").noncapturingRegexp.exec(p);if(t&&t.index===0){var u=c("EmoticonEmojiList").names[t[1]],v=c("EmoticonEmojiList").emote2emojis[u];q.push({emojiKey:v,text:t[1]});p=p.replace(t[1],"")}else{t=this.getEmojiMatchObj(p);if(t&&t.is_supported){q.push({emojiKey:t.emoji_key,text:t.emoji_str});p=p.replace(t.emoji_str,"")}else return null}}return q},getUrl:function n(o,p){if(o.endsWith(j))o=o.replace(j,"");p=this.transferSize(p);if(c("gkx")("AT7ffoM8gf91Fer7cUMkwGH62Vum20vkKo_AIqUOx27bu9y21PoFYcSzgDJj_KAeh5RgHmHKzv6c5n2RlIxDAfXE"))return c("EmojiImageURL").getFBEmojiURL(o,c("EmojiLikeConstants").sizeMap[p]);if(!c("MessengerSupportedEmoji").emoji[o])return null;return c("EmojiImageURL").getMessengerURL(o,c("EmojiLikeConstants").sizeMap[p])},containsEmoji:function n(o){return this.parse(o,1).length===1},parse:function n(o,p){return c("EmojiRenderer").parse(o,p)},transferSize:function n(o){return c("EmojiLikeConstants").sizeMapTransfer[o]||o}};f.exports=m}),null);
__d("P2PTriggersUtils",["P2PGKValues"],(function a(b,c,d,e,f,g){var h=/\$((\d{1,3}(,\d{3})*)|\d+)(\.\d{1,2})?(?=\s|\.\s|\,\s|$|\.$|\,$|\?|\!|\")/,i={canSeeTriggers:function j(k){if(!c("P2PGKValues").P2PEnabled)return false;return true},getMatches:function j(k){return k.match(h)}};f.exports=i}),null);
__d("RedditLinkMatcher",[],(function a(b,c,d,e,f,g){"use strict";var h=new RegExp("(^|\\s)(\\/[ru]\\/\\w{1,21})(?:\\b)","i"),i=function i(l){var m=h.exec(l);if(m===null)return null;return{lnk:m[2],idx:m.index+m[1].length}},j=function j(l){return h.exec(l)!==null},k={match:i,isMatch:j};f.exports=k}),null);
__d("RedditLinkRanges",["RedditLinkMatcher","UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={REDDIT_PREFIX:"https://reddit.com",get:function i(j){__p&&__p();var k=arguments.length<=1||arguments[1]===undefined?0:arguments[1],l=j.substr(k),m=c("RedditLinkMatcher").match(l);if(!m)return[];var n=m.lnk,o=m.idx,p=c("UnicodeUtils").strlen(l.substr(0,o));k+=p;var q="";switch(n[1].toLowerCase()){case"r":q=this.REDDIT_PREFIX+n;break;case"u":q=this.REDDIT_PREFIX+n;break;default:return[]}var r=n.length,s=[{offset:k,length:r,entity:{url:q}}];return s.concat(this.get(j,k+r))}};f.exports=h}),null);
__d("TextWithEntitiesMetadataType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NONE:0,CONCEPT:1,INTENT:2})}),null);
__d("getURLRanges",["URI","URLScraper","UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=arguments.length<=1||arguments[1]===undefined?0:arguments[1],k=i.substr(j),l=c("URLScraper").match(k);if(!l)return[];var m=l;if(!/^[a-z][a-z0-9\-+.]+:\/\//i.test(l))m="http://"+l;if(!c("URI").isValidURI(m))return[];var n=k.indexOf(l),o=c("UnicodeUtils").strlen(k.substr(0,n));j+=o;var p=l.length,q=[{offset:j,length:l.length,entity:{url:m}}];return q.concat(h(i,j+p))}f.exports=h}),null);
__d("shouldAddMRefParam",["isFacebookURI"],(function a(b,c,d,e,f,g){var h=function h(i){if(!c("isFacebookURI")(i)||i.getFragment())return false;if(/^\/events\//.test(i.getPath()))return true;return false};f.exports=h}),null);
__d("MercuryMessageBody.react",["cx","fbt","BootloadedComponent.react","CurrentUser","DateConsts","EmojiRenderer","EmoticonEmojiList","EmoticonsList","EmployeeLinkMatcher","EmployeeLinkRanges","EventRemindersGating","EventReminderStateStore","JSResource","Link.react","MercuryIDs","MercuryMessageRenderLocations","MessengerContactActions.bs","MessengerFormattingUtils","MessengerMathUtils","MessengerSupportedEmojiUtils","MessengerTextWithEntities.react","P2PTriggersUtils","React","RedditLinkMatcher","RedditLinkRanges","TextWithEntities.react","TextWithEntitiesMetadataType","UnicodeUtils","URI","URLMatcher","emptyFunction","getURLRanges","gkx","ifRequired","requireWeak","shouldAddMRefParam"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MessengerContactActions.bs").actions,m=c("React").PropTypes,n=function p(){n=c("emptyFunction");c("ifRequired")("ChatAppActions",function(q){q.setInitialDisplayDone()})};j=babelHelpers.inherits(o,c("React").PureComponent);k=j&&j.prototype;function o(p){__p&&__p();k.constructor.call(this,p);this.interpolator=function(q,r){__p&&__p();var s,t=this;if(r.className)return c("React").createElement("span",{className:r.className},q);if(r.math)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerMath.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,q),body:this.$MercuryMessageBody4(q),fallbackBody:q,inline:true,stripDelimiters:true,className:"_1e4d _1e4e"});if(r.id){var s=function(){__p&&__p();var y={};if(!c("CurrentUser").isWorkUser()&&!t.props.isFromViewer&&t.props.threadCustomColor)y.color=t.props.threadCustomColor;var z=t.props.onContactSelect,A=t.props.threadID?c("MercuryIDs").getThreadFBIDFromThreadID(t.props.threadID)===r.id:false,B=new(c("URI"))("/ajax/hovercard/user.php").setQueryData({id:r.id}),C=c("gkx")("AT6RjIJVvIfplq-ZeT5_MD81B3OgeLlmewNtJ7hzw811gUcL2KB7zXVo29pTy6tr5BFiWzx-vsgfOHRh3TsCXQ_N"),D=c("React").createElement(c("Link.react"),{className:"_ih-"+(c("CurrentUser").isWorkUser()&&r.id===c("CurrentUser").getID()?" _1zle":""),href:A?"#":r.url,"data-hovercard":C?B:null,style:y,onClick:z&&!A?function(E){this.$MercuryMessageBody3(z,r,E)}.bind(t):c("emptyFunction")},q);if(c("gkx")("AT7Q3RXvU0e0MR7WMB7vpMdOzYsW6m3MXSY9NFLfpMl_9zOHYMydsYAgMgpRAa3rIuTQCnrjzygxZViELyTXnLRu")&&!A&&z&&!C){if(typeof q==="string")r.contactName=q&&q.replace("@","");D=c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerAvatarActions.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:D,avatar:D,contact:r,showSendMessageItem:true,onAction:t.props.onContactSelect})}return{v:D}}();if(typeof s==="object")return s.v}if(r.formatter)if(r.recursivelyFormat){var u=this.renderBody(r.innerText,true,r.innerOffset);return r.formatter(u)}else return r.formatter(r.innerText);if(r.entity&&r.entity.url){var v=new(c("URI"))(r.entity.url.replace(/#+$/,""));if(c("shouldAddMRefParam")(v))v.addQueryData({__mref:"mb"});var w=v.toString();if(c("URI").isValidURI(w))return c("React").createElement(c("Link.react"),{href:{url:w,shimhash:r.entity.shimhash},s:r.entity.s,target:"_blank"},q);else return q}if(!r.entity){var x=typeof r.type==="number"?r.type:c("TextWithEntitiesMetadataType")[r.type];switch(x){case c("TextWithEntitiesMetadataType").NONE:return c("React").createElement("span",{className:"_2y9",title:JSON.stringify(r.data)},q);case c("TextWithEntitiesMetadataType").CONCEPT:return this.renderConceptMetadata(q,r.data);case c("TextWithEntitiesMetadataType").INTENT:return this.renderIntentMetadata(q,r.data);default:return q}}return q}.bind(this);this.state=this.parseMessageBody(p)}o.prototype.UNSAFE_componentWillReceiveProps=function(p){if(this.props.body!==p.body||this.props.metaRanges!==p.metaRanges||this.props.ranges!==p.ranges)this.setState(this.parseMessageBody(p))};o.prototype.parseMessageBody=function(p){__p&&__p();var q=(p.body||"").replace(/\s+$/,""),r=this.$MercuryMessageBody1(p.metaRanges||[]),s={normalizedBody:q,isEncrypted:false,isMathBlock:false,isRichText:false,ranges:[],filteredMetaRanges:r};if(q.length===0)return s;if(q.startsWith("?OTR")){s.isEncrypted=true;return s}if(c("MessengerMathUtils").isMathBlock(q)){s.isMathBlock=true;return s}var t=p.ranges,u=p.metaRanges,v=t&&t.length||u&&u.length||c("EmoticonsList").noncapturingRegexp.test(q)||c("EmojiRenderer").containsEmoji(q)||c("URLMatcher").match(q)||c("EmployeeLinkMatcher").isMatch(q)||c("RedditLinkMatcher").isMatch(q)||this.$MercuryMessageBody2(q,p)||c("MessengerSupportedEmojiUtils").containsEmoji(q)||c("EmoticonEmojiList").noncapturingRegexp.test(q)||c("MessengerFormattingUtils").hasMatch(q)||c("MessengerMathUtils").hasInlineMath(q);if(!v)return s;s.isRichText=true;if(t&&t.length===1&&t[0].className==="__in")t=c("getURLRanges")(q).concat(t);t=t||[];t=t.concat(c("getURLRanges")(q),c("EmployeeLinkRanges").get(q));t=t.concat(c("RedditLinkRanges").get(q));t=t.concat(c("MessengerFormattingUtils").getRanges(q));t=t.concat(c("MessengerMathUtils").getInlineMathRanges(q));s.ranges=t.filter(function(w){return w!=undefined});return s};o.prototype.hasFormatting=function(){return this.state.isRichText||this.state.isMathBlock||this.state.isEncrypted};o.prototype.$MercuryMessageBody3=function(p,q,r){c("gkx")("AT7Q3RXvU0e0MR7WMB7vpMdOzYsW6m3MXSY9NFLfpMl_9zOHYMydsYAgMgpRAa3rIuTQCnrjzygxZViELyTXnLRu")?r.preventDefault():p(l.MESSAGE,q,r)};o.prototype.$MercuryMessageBody4=function(p){if(this.props.isFromViewer)return"\\color{#fff}{"+c("MessengerMathUtils").getMathBlockInner(p)+"}";else return c("MessengerMathUtils").getMathBlockInner(p)};o.prototype.renderConceptMetadata=function(p,q){if(!q)return p;if(q.intent_name||q.name)return this.renderIntentMetadata(p,q);return p};o.prototype.renderIntentMetadata=function(p,q){__p&&__p();if(!q)return p;var r=q.intent_name||q.name;switch(r){case"request_time":return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ServicesVerticalRequestTimeTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,p),data:q,text:p,threadID:this.props.threadID});case"timestamp":if(this.$MercuryMessageBody5(q.value)&&c("EventRemindersGating").shouldShowTriggerWords)if(this.props.renderLocation===c("MercuryMessageRenderLocations").CHAT)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatEventPlanTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,p),data:q,text:p,threadID:this.props.threadID});else if(this.props.renderLocation===c("MercuryMessageRenderLocations").MESSENGER)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerEventPlanTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null,p),data:q,text:p,threadID:this.props.threadID});return p;default:return p}};o.prototype.renderIntentCTA=function(p){__p&&__p();if(p){var q=p.intent_name||p.name;switch(q){case"request_time":return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ServicesRequestTimeIntentCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null),data:p,isFromViewer:this.props.isFromViewer,threadID:this.props.threadID});case"create_event":c("requireWeak")("EventReminderActionsLogger",function(t){t.logTriggerOnTriggerCTA()});var r=this.props.threadID,s=r&&this.$MercuryMessageBody5(p.timestamp)&&c("EventReminderStateStore").shouldShowCTA(r,p.confidence);if(!s)return null;if(this.props.renderLocation===c("MercuryMessageRenderLocations").CHAT)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ChatEventPlanCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null),data:p,threadID:r});else if(this.props.renderLocation===c("MercuryMessageRenderLocations").MESSENGER)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerEventPlanCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("span",null),data:p,threadID:r})}}return null};o.prototype.renderCTAs=function(p){var q=null;if(p.length>0){var r=p[0]||{},s=typeof r.type==="number"?r.type:c("TextWithEntitiesMetadataType")[r.type];switch(s){case c("TextWithEntitiesMetadataType").CONCEPT:case c("TextWithEntitiesMetadataType").INTENT:q=this.renderIntentCTA(r.data);break}}return q};o.prototype.renderBody=function(p){__p&&__p();var q=arguments.length<=1||arguments[1]===undefined?false:arguments[1],r=arguments.length<=2||arguments[2]===undefined?0:arguments[2],s=this.state,t=s.isRichText,u=s.ranges,v=s.filteredMetaRanges,w=c("UnicodeUtils").strlen(p);if(!t)return c("React").createElement("span",{className:this.props.className},p);if(q){u=u.filter(function(B){return B.offset>=r&&B.offset+B.length<=r+w}).map(function(B){return babelHelpers["extends"]({},B,{offset:B.offset-r})});v=v.filter(function(B){return B.offset>=r&&B.offset+B.length<=r+w}).map(function(B){return babelHelpers["extends"]({},B,{offset:B.offset-r})})}var x={className:this.props.className,interpolator:this.interpolator,metaRanges:v,ranges:u,renderEmoji:true,renderEmoticons:true,text:p};if(this.$MercuryMessageBody2(p)){var y=c("React").createElement(c("TextWithEntities.react"),x);return c("React").createElement(c("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:y,bootloadLoader:c("JSResource")("TextWithEntitiesAndP2P.react").__setRef("MercuryMessageBody.react")},x,{getMessengerEmote:this.$MercuryMessageBody6,isSupportedEmoji:this.$MercuryMessageBody7,threadID:this.props.threadID}))}var z=c("React").createElement(c("MessengerTextWithEntities.react"),x);if(q)return z;var A=this.renderCTAs(this.props.metaRanges||[]);if(!A)return z;return c("React").createElement("span",null,z,A)};o.prototype.render=function(){__p&&__p();var p=this.state,q=p.normalizedBody,r=p.isEncrypted,s=p.isMathBlock;if(q.length===0)return null;n();if(this.props.plainText)return c("React").createElement("span",null,q);else if(r)return c("React").createElement("span",{className:"_89h"},i._("[encrypted message]"));else if(s)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("MessengerMath.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:c("React").createElement("div",null,q),body:this.$MercuryMessageBody4(q),fallbackBody:q,stripDelimiters:true,className:"_1e4d"});else return this.renderBody(q)};o.prototype.$MercuryMessageBody7=function(p){return c("MessengerSupportedEmojiUtils").isSupportedEmojiKey(p)};o.prototype.$MercuryMessageBody6=function(p){var q=c("EmoticonEmojiList").emote2emojis[p];return c("MessengerSupportedEmojiUtils").isSupportedEmojiKey(q)?q:null};o.prototype.$MercuryMessageBody5=function(p){var q=new Date(p*c("DateConsts").MS_PER_SEC),r=new Date(Date.now()+5*c("DateConsts").MS_PER_MIN),s=new Date(new Date().setFullYear(new Date().getFullYear()+1));return q>r&&q<s};o.prototype.$MercuryMessageBody1=function(p){var q=p.filter(function(r){return r.data&&(r.data.intent_name==="create_event"||r.data.name==="create_event")});return q.length!==0?q:p};o.prototype.$MercuryMessageBody2=function(p){var q=arguments.length<=1||arguments[1]===undefined?this.props:arguments[1];return!!(q.threadID&&c("P2PTriggersUtils").canSeeTriggers(q.threadID)&&c("P2PTriggersUtils").getMatches(p))};o.propTypes={body:m.string,customLike:m.object,isFromViewer:m.bool,metaRanges:m.array,ranges:m.array,threadCustomColor:m.string,threadID:m.string,onContactSelect:m.func,renderLocation:m.oneOf([c("MercuryMessageRenderLocations").CHAT,c("MercuryMessageRenderLocations").MESSENGER,c("MercuryMessageRenderLocations").PAGES])};f.exports=o}),null);
__d("MercuryMessageDeliveryState",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({SENDING:1,SENT:2,DELIVERED:3,ERROR:0,UNKNOWN:-1});f.exports=h}),null);
__d("MercuryMessageInfo",["MercuryActionStatus","MercuryIDs","MercuryMessageDeliveryState","MercuryViewer"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={isOutbound:function i(j){return j.author===c("MercuryViewer").getID()},isInbound:function i(j){return!h.isOutbound(j)},isSending:function i(j){return j.status===c("MercuryActionStatus").UNSENT||j.status===c("MercuryActionStatus").UNCONFIRMED||j.status===c("MercuryActionStatus").UNABLE_TO_CONFIRM||j.status===c("MercuryActionStatus").RESENDING},isSent:function i(j){return j.status===undefined||j.status===c("MercuryActionStatus").SUCCESS},hasError:function i(j){return j.status===c("MercuryActionStatus").FAILED_UNKNOWN_REASON||j.status===c("MercuryActionStatus").UNABLE_TO_CONFIRM||j.status===c("MercuryActionStatus").ERROR},getDeliveryState:function i(j,k){__p&&__p();if(this.hasError(j))return c("MercuryMessageDeliveryState").ERROR;if(this.isSending(j))return c("MercuryMessageDeliveryState").SENDING;if(this.isSent(j)){if(j.timestamp<=k)return c("MercuryMessageDeliveryState").DELIVERED;return c("MercuryMessageDeliveryState").SENT}return c("MercuryMessageDeliveryState").UNKNOWN},getPersona:function i(j){var k=j&&j.platform_xmd&&JSON.parse(j.platform_xmd);return k&&k.persona_id?{id:c("MercuryIDs").getParticipantIDFromUserID(k.persona_id)}:null}};f.exports=h}),null);
__d("MercuryErrorInfo",["fbt","MercuryErrorType","MercuryMessageInfo"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={getMessage:function j(k){__p&&__p();var l="";if(i.isConnectionError(k)){l=h._("This message didn't send.");if(i.isTransient(k))l=h._("{message} Check your internet connection and click to try again.",[h._param("message",l)])}else{if(k&&k.description)l=k.description;else l=h._("This message failed to send.");if(i.isTransient(k))l=h._("{message} Click to send again.",[h._param("message",l)])}return l},isConnectionError:function j(k){if(k&&k.type==c("MercuryErrorType").TRANSPORT)return k.code===1001||k.code===1004||k.code===1006;return false},isTransient:function j(k){return k&&k.is_transient},isPermanent:function j(k){return k?!this.isTransient(k):false},hasErrorStatus:function j(k){return c("MercuryMessageInfo").hasError(k)}};f.exports=i}),null);
__d("MercuryLocalIDs",["PresenceUtil","randomInt"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={generateMessageID:function j(k){var l=k||Date.now(),m=c("randomInt")(0,4294967295),n=c("PresenceUtil").getSessionID();return"<"+l+":"+m+"-"+n+"@mail.projektitan.com>"},generateThreadID:function j(k){return"root:"+h.generateOfflineThreadingID(k)},generateOfflineThreadingID:function j(k){var l=k||Date.now(),m=c("randomInt")(0,4294967295),n=("0000000000000000000000"+m.toString(2)).slice(-22),o=l.toString(2)+n;return i(o.slice(-63))}};function i(j){__p&&__p();var k="";while(j!="0"){var l=0,m="";for(var n=0;n<j.length;n++){l=2*l+parseInt(j[n],10);if(l>=10){m+="1";l-=10}else m+="0"}k=l.toString()+k;j=m.slice(m.indexOf("1"))}return k}f.exports=h}),null);
__d("MercurySendMessageFields",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({AUTO_RETRY_CNT:"auto_retry_cnt",MANUAL_RETRY_CNT:"manual_retry_cnt"})}),null);
__d("MercuryDisplayTimeFilterMessageRenderer",["fbt"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={renderFilteredContent:function j(k){if(k.is_filtered_content_bh)return h._("This message was removed because it contains blocked or harmful links.");if(k.is_filtered_content_account)return h._("This message has been temporarily removed because the sender's account requires verification.");if(k.is_filtered_content_quasar)return h._("This message was removed because it contains blocked or harmful content.");if(k.is_filtered_content_invalid_app)return h._("This message was removed because the app it's being sent from is blocked from sending messages.");return h._("This message has been temporarily removed because the sender's account requires verification, or it was identified as abusive.")}};f.exports=i}),null);
__d("MercuryGiftSnippetRenderer",["fbt"],(function a(b,c,d,e,f,g,h){"use strict";var i={renderText:function j(k,l){return k?h._("You sent a valentine."):h._("{name} sent a valentine.",[h._param("name",l)])}};f.exports=i}),null);
__d("MercurySyncDeltaTypes",[],(function a(b,c,d,e,f,g){"use strict";var h={AdminAddedToGroupThread:"AdminAddedToGroupThread",AdminRemovedFromGroupThread:"AdminRemovedFromGroupThread",AdminTextMessage:"AdminTextMessage",ChangeViewerStatus:"ChangeViewerStatus",DeliveryReceipt:"DeliveryReceipt",ForcedFetch:"ForcedFetch",MarkRead:"MarkRead",MarkUnread:"MarkUnread",MarkFolderSeen:"MarkFolderSeen",MessageDelete:"MessageDelete",NewMessage:"NewMessage",NoOp:"NoOp",PagesManagerEvent:"PagesManagerEvent",ParticipantLeftGroupThread:"ParticipantLeftGroupThread",ParticipantsAddedToGroupThread:"ParticipantsAddedToGroupThread",ReadReceipt:"ReadReceipt",ReplaceMessage:"ReplaceMessage",RTCEventLog:"RTCEventLog",ThreadAction:"ThreadAction",ThreadDelete:"ThreadDelete",ThreadFolder:"ThreadFolder",ThreadMuteSettings:"ThreadMuteSettings",ThreadName:"ThreadName",JoinableMode:"JoinableMode",ApprovalMode:"ApprovalMode",ApprovalQueue:"ApprovalQueue",ClientPayload:"ClientPayload",GenieMessage:"GenieMessage",MontageMessage:"MontageMessage",RtcCallData:"RtcCallData"};f.exports=h}),null);
__d("MercurySyncFakeDFFSender",["Arbiter","ChannelConstants","MercurySingletonProvider","MercurySyncDeltaTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ChannelConstants").getArbiterType(c("ChannelConstants").FAKE_DFF);i.getForFBID=function(k){return j.getForFBID(k)};i.get=function(){return j.get()};function i(k){this.$MercurySyncFakeDFFSender1=k}i.prototype.sendGlobalDFF=function(){c("Arbiter").inform(h,{obj:{delta:{"class":c("MercurySyncDeltaTypes").ForcedFetch},queue:this.$MercurySyncFakeDFFSender1}})};i.prototype.sendThreadDFF=function(k,l){c("Arbiter").inform(h,{obj:{delta:{"class":c("MercurySyncDeltaTypes").ForcedFetch,threadKey:{otherUserFbId:k,threadFbId:l}},queue:this.$MercurySyncFakeDFFSender1}})};i.prototype.sendMessageDFF=function(k,l,m){c("Arbiter").inform(h,{obj:{delta:{"class":c("MercurySyncDeltaTypes").ForcedFetch,threadKey:{otherUserFbId:k,threadFbId:l},messageId:m},queue:this.$MercurySyncFakeDFFSender1}})};var j=new(c("MercurySingletonProvider"))(i);f.exports=i}),null);
__d("MessagingGiftWrapConstants",[],(function a(b,c,d,e,f,g){"use strict";var h="gift_wrap",i="gift_unwrapped",j="valentines2016";f.exports={TAG_PREFIX:h,UNWRAPPED_TAG:i,VALENTINES_GIFT:j}}),null);
__d("MessagingGiftWrapChecker",["MercuryConfig","MercuryTagHelper","MessagingGiftWrapConstants"],(function a(b,c,d,e,f,g){"use strict";var h={shouldRenderWithGiftWrap:function k(l){return!!(l.tags&&i(l.tags)&&!j(l.tags))}};function i(k){return c("MercuryTagHelper").get(k,c("MessagingGiftWrapConstants").TAG_PREFIX)===c("MessagingGiftWrapConstants").VALENTINES_GIFT}function j(k){return!!c("MercuryTagHelper").get(k,c("MessagingGiftWrapConstants").UNWRAPPED_TAG)}f.exports=h}),null);
__d("MessengerGroupsSyncStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PENDING_OPT_IN:"PENDING_OPT_IN",OPT_IN:"OPT_IN",PENDING_OPT_OUT:"PENDING_OPT_OUT",OPT_OUT:"OPT_OUT",UNSET:"UNSET",UNSUPPORTED:"UNSUPPORTED"})}),null);
__d("XGroupsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/groups/{idorvanity}/{?view}/{?post_id}/",{idorvanity:{type:"String",required:true},view:{type:"Enum",enumType:1},post_id:{type:"Int"},rule_id:{type:"Int"},ref:{type:"String"},source_id:{type:"String"},notif_t:{type:"String"},nux:{type:"Enum",enumType:1},tip_id:{type:"Int"},member_tag_id:{type:"FBID"},inner_tab:{type:"String"},section:{type:"Enum",enumType:1},thread_id:{type:"String"},autopopup_create_chat_dialog:{type:"Bool",defaultValue:false},sorting_setting:{type:"String"},multi_events:{type:"String"},stories:{type:"Exists",defaultValue:false},queue:{type:"Enum",enumType:1},composer_prefill:{type:"String"},comment_id:{type:"Int"},reply_comment_id:{type:"Int"}})}),null);
__d("MercuryThreads",["invariant","ChatReliabilityInstrumentation","EventEmitter","EventReminderConstants","MercuryDisplayTimeFilterMessageRenderer","ImmutableObject","KeyedCallbackManager","LogHistory","MercuryActionType","MercuryAssert","MercuryAttachment","MercuryDispatcher","MercuryGiftSnippetRenderer","MercuryGlobalActionType","MercuryIDs","MercuryLocalIDs","MercuryLoggingHelper","MercuryLogMessageType","MercuryParticipants","MercuryPayloadSource","MercuryServerRequests","MercurySingletonProvider","MercurySyncFakeDFFSender","MercuryThreadInfo","MercuryThreadInformer","MessagingGenericAdminTextType","MessagingGiftWrapChecker","MessagingTag","PageCommItemStatus","MessengerGroupsSyncStatus","XGroupsController","URI","emptyFunction","ifRequired","requireWeak","setImmediate"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("EventReminderConstants").GuestStates,j=new(c("EventEmitter"))(),k=c("LogHistory").getInstance("mercury_threads"),l=new Set();function m(o){__p&&__p();this.$MercuryThreads1=o;this.$MercuryThreads2=c("MercuryServerRequests").getForFBID(this.$MercuryThreads1);this.$MercuryThreads3=c("MercuryThreadInformer").getForFBID(this.$MercuryThreads1);this.$MercuryThreads4=c("MercuryIDs").getParticipantIDFromUserID(this.$MercuryThreads1);this.$MercuryThreads5=c("MercuryDispatcher").getForFBID(this.$MercuryThreads1);this.$MercuryThreads6=c("MercurySyncFakeDFFSender").getForFBID(this.$MercuryThreads1);this.$MercuryThreads7=false;this.$MercuryThreads8=new(c("KeyedCallbackManager"))();this.$MercuryThreads9=new Set();this.$MercuryThreads10=false;this.$MercuryThreads11=new Set();this.$MercuryThreads12=new Set();this.$MercuryThreads13()}m.getForFBID=function(o){return n.getForFBID(o)};m.get=function(){return n.get()};m.prototype.getThreadMetaNow=function(o){c("MercuryAssert").isThreadID(o);var p=this.$MercuryThreads8.getResource(o);if(p&&!p.participants){c("ChatReliabilityInstrumentation").logERROR("participants are null!",{thread_id:o});this.$MercuryThreads6.sendThreadDFF(null,o);return new(c("ImmutableObject"))(babelHelpers["extends"]({},p,{participants:[]}))}return p};m.prototype.getOrFetch=function(o){var p=this.getThreadMetaNow(o);if(!p&&!this.$MercuryThreads12.has(o))this.$MercuryThreads11.add(o);if(this.$MercuryThreads11.size>0&&!this.$MercuryThreads10)this.$MercuryThreads14();return p};m.prototype.$MercuryThreads14=function(){__p&&__p();if(this.$MercuryThreads10)return;this.$MercuryThreads10=true;c("setImmediate")(function(){this.$MercuryThreads10=false;this.$MercuryThreads11.forEach(function(o){return this.$MercuryThreads12.add(o)}.bind(this));this.getMultiThreadMeta(Array.from(this.$MercuryThreads11),function(o){for(var p in o)Object.prototype.hasOwnProperty.call(o,p)&&this.$MercuryThreads12["delete"](p)}.bind(this));this.$MercuryThreads11.clear()}.bind(this))};m.prototype.getThreadMeta=function(o,p,q){return this.getMultiThreadMeta([o],function(r){return p(r[o])},q)};m.prototype.getMultiThreadMeta=function(o,p,q){__p&&__p();c("MercuryAssert").allThreadID(o);var r=this.$MercuryThreads8.executeOrEnqueue(o,p),s=this.$MercuryThreads8.getUnavailableResources(r);if(s.length){var t=[];for(var u=0;u<s.length;u++){var v=s[u],w=c("MercuryIDs").tokenize(v),x=w.type,y=w.value;if(x=="user"){var z=c("MercuryIDs").getParticipantIDFromUserID(y);this.createNewLocalThread(v,z===this.$MercuryThreads4?[this.$MercuryThreads4]:[this.$MercuryThreads4,z])}t.push(v)}if(t.length)this.$MercuryThreads2.fetchThreadData(t,q)}return r};m.addListener=function(o,p){return j.addListener(o,p)};m.prototype.unsubscribe=function(o){this.$MercuryThreads8.unsubscribe(o)};m.prototype.getCanonicalThreadToParticipant=function(o,p,q,r){var s=c("MercuryIDs").getThreadIDFromParticipantID(o);!!s||h(0);var t=this.$MercuryThreads8.getResource(s);if(t==undefined){t=this.createNewLocalThread(s,this.$MercuryThreads4===o?[this.$MercuryThreads4]:[this.$MercuryThreads4,o],p);!r&&this.$MercuryThreads2.fetchThreadData([s],q)}return t};m.prototype.createNewLocalThread=function(o,p,q){var r=this.$MercuryThreads8.getResource(o);if(!r){var s=c("MercuryIDs").tokenize(o),t=s.type,u=s.value;r=new(c("ImmutableObject"))({thread_id:o,participants:Array.from(p),admin_ids:[],name:"",snippet:"",snippet_sender:null,unread_count:q?q:0,message_count:0,image_src:null,timestamp:null,other_user_fbid:t==="user"?u:null,is_canonical_user:t=="user",is_canonical:this.$MercuryThreads15(p),is_subscribed:true,folder:c("MessagingTag").INBOX,is_archived:false,is_page_follow_up:false});this.$MercuryThreads8.setResource(o,r)}return r};m.prototype.createNewLocalThreadGenerateID=function(){var o=c("MercuryLocalIDs").generateThreadID();this.createNewLocalThread(o,[]);return o};m.prototype.isEmptyLocalThread=function(o){var p=this.$MercuryThreads8.getResource(o);if(!p)return false;return c("MercuryThreadInfo").isEmptyLocalThread(p)};m.prototype.isNewEmptyLocalThread=function(o){var p=this.$MercuryThreads8.getResource(o);if(!p)return false;return c("MercuryThreadInfo").isNewEmptyLocalThread(p)};m.prototype.$MercuryThreads16=function(o,p){__p&&__p();if(!o||!o.length)return;var q=new Map(),r=new Map(),s=new Map(),t=[];for(var u=0;u<o.length;u++){var v=o[u],w=v.action_type;if(w==c("MercuryActionType").LOG_MESSAGE&&v.log_message_type==c("MercuryLogMessageType").SERVER_ERROR)continue;var x=!p&&!!(v.thread_fbid||v.other_user_fbid||v.is_from_iris),y=v.thread_id;c("MercuryAssert").isThreadID(y);var z=this.$MercuryThreads8.getResource(y);if(!z&&!x&&w===c("MercuryActionType").USER_GENERATED_MESSAGE){z=this.$MercuryThreads17(v);if(!z.participants||!z.participants.length){k.debug("missing_local_participants",JSON.stringify(c("MercuryLoggingHelper").obfuscateMessage(v)));c("ChatReliabilityInstrumentation").logERROR("missing_local_participants",{thread_id:y});z=new(c("ImmutableObject"))(babelHelpers["extends"]({},z,{participants:[]}));var A=v.other_user_fbid,B=v.thread_fbid;if(A||B)this.$MercuryThreads6.sendThreadDFF(A,B);else continue}this.$MercuryThreads8.setResource(y,z)}if(!z)continue;if(w==c("MercuryActionType").LOG_MESSAGE||w==c("MercuryActionType").USER_GENERATED_MESSAGE)x=!p;if(z.server_timestamp&&v.timestamp<z.server_timestamp&&x)continue;if(z.server_timestamp&&w===c("MercuryActionType").USER_GENERATED_MESSAGE&&v.offline_threading_id&&v.author!==c("MercuryIDs").getParticipantIDFromUserID(this.$MercuryThreads1))if(l.has(v.offline_threading_id))continue;else l.add(v.offline_threading_id);if(!s.has(y))s.set(y,babelHelpers["extends"]({},z));else k.error("skipping thread metadata update",JSON.stringify({have:s.get(y),skipped:z}));var C=s.get(y);!!C||h(0);this.$MercuryThreads18(C,v,p);var D=q.get(y);if(w==c("MercuryActionType").USER_GENERATED_MESSAGE&&(!D||v.timestamp>D.timestamp))q.set(y,v);if(w==c("MercuryActionType").USER_GENERATED_MESSAGE||w==c("MercuryActionType").LOG_MESSAGE)if(v&&v.timestamp&&(!r.has(y)||v.timestamp>r.get(y).timestamp))r.set(y,v)}s.forEach(function(E,F){__p&&__p();var G=r.get(F),D=q.get(F);if(D)this.$MercuryThreads19(E,D);else if(G&&G.log_message_body){var H=babelHelpers["extends"]({},G,{body:G.log_message_body});this.$MercuryThreads19(E,H)}var I=E.timestamp;if(G&&!G.skip_bump_thread){if(G.timestamp>I)Object.assign(E,{timestamp:G.timestamp});var J=E.server_timestamp;if(!p&&G.timestamp>J)E.server_timestamp=G.timestamp}var K=new(c("ImmutableObject"))(E);if((!K.participants||!K.participants.length)&&!this.isEmptyLocalThread(K.thread_id)){var L=(o||[]).map(c("MercuryLoggingHelper").obfuscateMessage),M={update:c("MercuryLoggingHelper").obfuscateThread(K),actions:L};k.error("bad metadata update no_participants",JSON.stringify(M));c("ChatReliabilityInstrumentation").logERROR("refusing to set thread metadata with no participants",M);return}this.$MercuryThreads8.setResource(F,K);t.push(c("MercuryLoggingHelper").obfuscateThread(K))}.bind(this),this);t.length&&this.$MercuryThreads7&&k.debug("threads_updated",JSON.stringify({threads:t}))};m.prototype.$MercuryThreads18=function(o,p,q){__p&&__p();var r=p.action_type;if(r==c("MercuryActionType").USER_GENERATED_MESSAGE||r==c("MercuryActionType").LOG_MESSAGE){if(p.is_unread||p.skip_bump_thread)if(!(o.unread_count===0&&p.skip_bump_thread))if(p.timestamp>o.server_timestamp)o.unread_count++;o.message_count++;o.is_archived=false}switch(r){case c("MercuryActionType").DELETE_THREAD:o.message_count=0;this.$MercuryThreads20(p.thread_id);break;case c("MercuryActionType").USER_GENERATED_MESSAGE:if(o.unread_count===0&&p.author===this.$MercuryThreads4&&p.timestamp>=o.last_read_timestamp)o.last_read_timestamp=p.timestamp;if(p.offline_threading_id!==p.message_id)o.last_message_timestamp=p.timestamp;if(p.comm_status!=null)if(o.comm_status&&o.comm_status.toUpperCase()!==c("PageCommItemStatus").FOLLOW_UP)o.comm_status=p.comm_status;if(p.creator_info&&p.creator_info.pageID===this.$MercuryThreads1)o.folder=p.folder;this.$MercuryThreads21(o,p.author);break;case c("MercuryActionType").SEND_MESSAGE:var s=p.log_message_type;if(s==c("MercuryLogMessageType").THREAD_IMAGE){o.image_src=p.log_message_data.image?p.log_message_data.image.preview_url:null;this.$MercuryThreads22(p.thread_id)}if(s!==c("MercuryLogMessageType").SUBSCRIBE&&s!==c("MercuryLogMessageType").UNSUBSCRIBE)o.snippet_attachments=p.attachments;break;case c("MercuryActionType").LOG_MESSAGE:var s=p.log_message_type;if(s==c("MercuryLogMessageType").SUBSCRIBE&&!q){this.$MercuryThreads23(o,p.log_message_data.added_participants);this.$MercuryThreads22(p.thread_id)}else if(s==c("MercuryLogMessageType").UNSUBSCRIBE&&!q){this.$MercuryThreads24(o,p.log_message_data.removed_participants);this.$MercuryThreads22(p.thread_id)}else if(s==c("MercuryLogMessageType").THREAD_IMAGE){if(!q)o.image_src=p.log_message_data.image?p.log_message_data.image.preview_url:null}else if(s==c("MercuryLogMessageType").THREAD_NAME){if(o.name!==p.log_message_data.name)this.$MercuryThreads22(p.thread_id);o.name=p.log_message_data.name}else if(s===c("MercuryLogMessageType").GENERIC_ADMIN_TEXT)this.$MercuryThreads25(o,p);break;case c("MercuryActionType").CHANGE_READ_STATUS:var t=this.$MercuryThreads26(o,p,p.mark_as_read);if(t)o.last_read_timestamp=o.last_message_timestamp;var u=!o.read_only&&o.folder===c("MessagingTag").INBOX;if(t&&q)this.$MercuryThreads2.changeThreadReadStatus(o.thread_id,p.mark_as_read,p.source,o.last_read_timestamp,u,o.last_message_type);break;case c("MercuryActionType").CHANGE_ARCHIVED_STATUS:if(o.is_archived!=p.archived){o.is_archived=p.archived;if(o.comm_status!=null)o.comm_status=p.archived?c("PageCommItemStatus").DONE:c("PageCommItemStatus").TODO;this.$MercuryThreads22(p.thread_id)}break;case c("MercuryActionType").CHANGE_PAGE_FOLLOW_UP_STATUS:if(o.is_page_follow_up!=p.is_page_follow_up){o.is_page_follow_up=p.is_page_follow_up;this.$MercuryThreads22(p.thread_id)}break;case c("MercuryActionType").CHANGE_FOLDER:if(o.folder!=p.new_folder){o.folder=p.new_folder;if(o.comm_status!=null)if(p.new_folder===c("MessagingTag").OTHER)o.comm_status=c("PageCommItemStatus").SPAM;else if(p.new_folder===c("MessagingTag").INBOX)o.comm_status=c("PageCommItemStatus").TODO;this.$MercuryThreads22(p.thread_id)}break;case c("MercuryActionType").DELETE_MESSAGES:if(q){o.snippet="...";o.snippet_attachments=null;o.snippet_sender=null;this.$MercuryThreads22(p.thread_id)}else if(p.message_ids){o.message_count-=p.message_ids.length;c("ifRequired")("MercuryMessages",function(A){__p&&__p();A=A.getForFBID(this.$MercuryThreads1);for(var B=p.message_ids,C=Array.isArray(B),D=0,B=C?B:B[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var E;if(C){if(D>=B.length)break;E=B[D++]}else{D=B.next();if(D.done)break;E=D.value}var F=E,G=A.getMessagesFromIDs([F]),H=G[0];if(H&&H.timestamp>o.last_read_timestamp)o.unread_count=Math.max(0,o.unread_count-1)}this.$MercuryThreads22(p.thread_id)}.bind(this),c("emptyFunction"))}break;case c("MercuryActionType").UPDATE_SNIPPET:c("ifRequired")("MercuryMessages",function(A){__p&&__p();A=A.getForFBID(this.$MercuryThreads1);var B=0,C=1,D=A.getThreadMessagesRangeNow(p.thread_id,B,C),E=D[0];if(E){o.snippet=E.body;o.snippet_attachments=E.attachments;o.snippet_sender=E.author}else{o.snippet="...";o.snippet_attachments=null;o.snippet_sender=null;A.getThreadMessagesRange(p.thread_id,B,C,function(F){if(F.length)this.$MercuryThreads5.handleUpdate({from_client:true,actions:[{thread_id:p.thread_id,action_type:c("MercuryActionType").UPDATE_SNIPPET,deleted_ids:p.deleted_ids}]})}.bind(this))}this.$MercuryThreads22(p.thread_id)}.bind(this),c("emptyFunction"));break;case c("MercuryActionType").CHANGE_MUTE_SETTINGS:if(Object.prototype.hasOwnProperty.call(p,"reactions_mute_mode"))o.reactions_mute_mode=p.reactions_mute_mode;else if(Object.prototype.hasOwnProperty.call(p,"mentions_mute_mode"))o.mentions_mute_mode=p.mentions_mute_mode;else o.mute_until=!p.mute_until?undefined:p.mute_until;this.$MercuryThreads22(o.thread_id);break;case c("MercuryActionType").BLOCK_STATUS_CHANGED:o.can_reply=p.canViewerReply;this.$MercuryThreads22(o.thread_id);break;case c("MercuryActionType").ADD_PARTICIPANTS:this.$MercuryThreads23(o,p.participants);this.$MercuryThreads22(o.thread_id);break;case c("MercuryActionType").CHANGE_FLAG:this.$MercuryThreads27(o,p.mark_as_flag);this.$MercuryThreads22(o.thread_id);break;case c("MercuryActionType").MOVE_PENDING_TO_INBOX:this.$MercuryThreads28(o);this.$MercuryThreads22(o.thread_id);break;case c("MercuryActionType").UPDATE_CUSTOM_LIKE:o.custom_like_icon=p.custom_like;this.$MercuryThreads22(o.thread_id);break;case c("MercuryActionType").ADD_GROUP_ADMINS:o.admin_ids=o.admin_ids.concat(p.added_admin_ids.filter(function(A){return o.admin_ids.indexOf(A)===-1}));this.$MercuryThreads22(p.thread_id);break;case c("MercuryActionType").REMOVE_GROUP_ADMINS:o.admin_ids=o.admin_ids.filter(function(A){return p.removed_admin_ids.indexOf(A)===-1});this.$MercuryThreads22(p.thread_id);break;case c("MercuryActionType").JOINABLE_MODE:o.joinable_mode=p.joinable_mode;this.$MercuryThreads22(p.thread_id);break;case c("MercuryActionType").APPROVAL_MODE:o.approval_mode=p.approval_mode;this.$MercuryThreads22(p.thread_id);break;case c("MercuryActionType").APPROVAL_QUEUE:if(p.added_id&&o.approval_queue_ids&&o.approval_queue_ids.indexOf(p.added_id)===-1)o.approval_queue_ids=o.approval_queue_ids.concat(p.added_id);if(p.removed_id&&o.approval_queue_ids)o.approval_queue_ids=o.approval_queue_ids.filter(function(A){return p.removed_id!==A});if(p.added_group_id&&o.group_approval_queue&&!o.group_approval_queue.find(function(A){p.added_group_id.requester.id===A.requesterId}))o.group_approval_queue=o.group_approval_queue.concat([p.added_group_id]);if(p.removed_group_id&&o.group_approval_queue)o.group_approval_queue=o.group_approval_queue.filter(function(A){return p.removed_group_id!==A.requester.id});this.$MercuryThreads22(p.thread_id);break;case c("MercuryActionType").IS_PIN_PROTECTED:o.is_pin_protected=p.is_pin_protected;this.$MercuryThreads22(p.thread_id);break;case c("MercuryActionType").UPDATE_RTC_CALL_DATA:var v=p.initiator_fbid||(o.rtc_call_data?o.rtc_call_data.initiator_fbid:undefined);o.rtc_call_data=new(c("ImmutableObject"))({call_state:p.call_state,server_info_data:p.server_info_data,initiator_fbid:v});this.$MercuryThreads22(p.thread_id);break;case c("MercuryActionType").UPDATE_COMM_STATUS:this.$MercuryThreads29(o,p.comm_status);this.$MercuryThreads22(o.thread_id);break;case c("MercuryActionType").UPDATE_COMM_ITEM_OWNER:var w=void 0;if(p.id===null)w={nodes:[]};else w={nodes:[{admin:{id:p.id,name:p.name,profile_picture:{uri:p.profile_pic_uri}}}]};o.comm_item_owners=w;this.$MercuryThreads22(o.thread_id);break;case c("MercuryActionType").EVENT_RSVP_CHANGED:var x=o.participants_event_status.filter(function(A){return A.participant_id!==p.actor_fbid});x.push({participant_id:p.actor_fbid.toString(),event_status:p.rsvp_status});o.participants_event_status=x;this.$MercuryThreads22(p.thread_id);break;case c("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED:o.group_sync_status=p.groups_sync_status_string;this.$MercuryThreads22(p.thread_id);break;case c("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE:if(p.groups_sync_action===c("MessengerGroupsSyncStatus").OPT_IN){var y=new(c("URI"))(document.URL),z=c("XGroupsController").getURIBuilder().setString("idorvanity",p.fb_group_id).getURI().setDomain(y.getDomain().replace("messenger.com","facebook.com")).setPort(y.getPort()).setProtocol("https");o.group_sync_fb_url=z.toString()}else o.group_sync_fb_url=null;this.$MercuryThreads22(p.thread_id);break}};m.prototype.$MercuryThreads25=function(o,p){__p&&__p();var q,r=this;if(p.log_message_data&&p.log_message_data.untypedData)(function(){__p&&__p();var s=p.log_message_data.untypedData,event=o.lightweight_event;switch(p.log_message_data.message_type){case c("MessagingGenericAdminTextType").THREAD_EPHEMERAL_SEND_MODE:var t=parseInt(s.ttl,10);if(t!==null&&o.ephemeral_ttl_mode!==t){o.ephemeral_ttl_mode=t;r.$MercuryThreads22(p.thread_id)}break;case c("MessagingGenericAdminTextType").CHANGE_THREAD_NICKNAME:var u={};for(var v in o.custom_nickname){if(v==s.participant_id&&s.nickname.trim().length==0)continue;u[v]=o.custom_nickname[v]}if(s.nickname.trim().length>0)u[s.participant_id]=s.nickname;o.custom_nickname=u;r.$MercuryThreads22(p.thread_id);break;case c("MessagingGenericAdminTextType").CHANGE_THREAD_ICON:c("requireWeak")("MercuryThreadActions",function(z){z.getForFBID(this.$MercuryThreads1).updateCustomLike(p.thread_id,s.thread_icon)}.bind(r));break;case c("MessagingGenericAdminTextType").CHANGE_THREAD_THEME:var w=s.theme_color;if(w&&w.length>0)o.custom_color="#".concat(w.substring(2));else o.custom_color=null;r.$MercuryThreads22(p.thread_id);break;case c("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE:var x={};o.participants.map(function(z){var A=c("MercuryIDs").getUserIDFromParticipantID(z);if(A)x[A]=A===s.event_creator_id?i.GOING:i.INVITED},r);o.lightweight_event={track_rsvp:s.event_track_rsvp,title:s.event_title,event_time:parseInt(s.event_time,10),location_name:s.event_location_name,event_members:x,oid:s.event_id,event_type:s.event_type};r.$MercuryThreads22(p.thread_id);break;case c("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE:case c("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME:case c("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE:case c("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION:if(event)o.lightweight_event=r.$MercuryThreads30(s,event,event.event_members);r.$MercuryThreads22(p.thread_id);break;case c("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP:if(event&&event.event_members){var y=r.$MercuryThreads31(event.event_members,s);o.lightweight_event=r.$MercuryThreads30(s,event,y)}r.$MercuryThreads22(p.thread_id);break;case c("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE:case c("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY:o.lightweight_event=null;r.$MercuryThreads22(p.thread_id);break}})()};m.prototype.$MercuryThreads31=function(o,p){var q={};for(var r in o)q[r]=o[r];q[p.guest_id]=p.guest_status;return q};m.prototype.$MercuryThreads30=function(o,event,p){return{track_rsvp:event.track_rsvp,title:o.event_title===undefined?event.title:o.event_title,event_time:o.event_time===undefined?event.event_time:parseInt(o.event_time,10),location_name:o.event_location_name===undefined?event.location_name:o.event_location_name,event_members:p===undefined?event.event_members:p,oid:event.oid,event_type:event.event_type}};m.prototype.$MercuryThreads17=function(o){var p=c("MercuryIDs").tokenize(o.thread_id),q=p.type,r=p.value,s=q==="user",t=s||o.specific_to_list&&this.$MercuryThreads15(o.specific_to_list),u=t||s?this.$MercuryThreads32(o):o.specific_to_list;return new(c("ImmutableObject"))({thread_id:o.thread_id,participants:u,name:null,snippet:o.body,snippet_attachments:[],snippet_sender:o.author,unread_count:0,message_count:0,image_src:null,timestamp:o.timestamp,other_user_fbid:s?r:null,is_canonical_user:s,is_canonical:t,is_subscribed:true,folder:c("MessagingTag").INBOX,is_archived:false,is_page_follow_up:false})};m.prototype.$MercuryThreads26=function(o,p,q){__p&&__p();if(p.timestamp)this.$MercuryThreads33(o.thread_id,q,p.timestamp);if(!o||!o.thread_id||!o.participants)return false;if(!o.timestamp){this.$MercuryThreads9.add(o.thread_id);return false}var r=!o.unread_count;if(q==r)return false;o.unread_count=q?0:1;this.$MercuryThreads22(o.thread_id);return true};m.prototype.$MercuryThreads34=function(o){var p=this.$MercuryThreads8.getAllResources();for(var q in p)if(Object.prototype.hasOwnProperty.call(p,q)){var r=p[q];if(r.folder==o){this.$MercuryThreads8.setResource(q,c("ImmutableObject").setProperty(r,"unread_count",0));this.$MercuryThreads22(q)}}};m.prototype.$MercuryThreads23=function(o,p){__p&&__p();var q=new Set(o.participants);o.participants=Array.from(o.participants||[]);p.forEach(function(r){if(!q.has(r)){o.participants.push(r);if(r===this.$MercuryThreads4){o.is_subscribed=true;o.can_reply=true;o.cannot_reply_reason=null;this.$MercuryThreads6.sendThreadDFF(undefined,o.thread_fbid)}}}.bind(this))};m.prototype.$MercuryThreads24=function(o,p){__p&&__p();var q=new Set(p);if(o&&!o.participants)c("ChatReliabilityInstrumentation").logERROR("participants are null in thread_info!",{thread_info:o});else o.participants=o.participants.filter(function(r){return!q.has(r)});if(o&&!o.admin_ids)c("ChatReliabilityInstrumentation").logERROR("admin_ids are null in thread_info!",{thread_info:o});else o.admin_ids=o.admin_ids.filter(function(r){return!q.has(r)});if(q.has(this.$MercuryThreads4))o.is_subscribed=false;this.$MercuryThreads2.fetchThreadData([o.thread_id])};m.prototype.$MercuryThreads21=function(o,p){if(!o.participants){var q=JSON.stringify({thread_info:o,participant:p});k.error("missing_participants",q);return}var r=o.participants.indexOf(p);if(r>0)o.participants=[p].concat(o.participants.slice(0,r),o.participants.slice(r+1))};m.prototype.$MercuryThreads19=function(o,p){__p&&__p();var q=p.body,r=p.subject,s="";if(r){r=r.toLowerCase();if(q.slice(0,r.length).toLowerCase()==r)s=q;else if(q)s=r+" \xb7 "+q;else s=r}else s=q;if(p.is_filtered_content)s=c("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(p);if(c("MessagingGiftWrapChecker").shouldRenderWithGiftWrap(p)){var t=p.author,u=t==this.$MercuryThreads4,v=null;if(!u){v=o.custom_nickname&&o.custom_nickname[c("MercuryIDs").getUserIDFromParticipantID(t)];if(!v){var w=c("MercuryParticipants").getNow(t);if(w!=null)v=w.short_name}}s=c("MercuryGiftSnippetRenderer").renderText(u,v)}o.snippet=s;if(p.raw_attachments&&p.raw_attachments.length>0){var x=c("MercuryAttachment").convertRaw(p.raw_attachments);o.snippet_attachments=x}else o.snippet_attachments=p.attachments;if(p.log_message_type)o.snippet_sender=null;else o.snippet_sender=p.author};m.prototype.$MercuryThreads27=function(o,p){o.page_thread_info=babelHelpers["extends"]({},o.page_thread_info,{flagged:p})};m.prototype.$MercuryThreads29=function(o,p){o.comm_status=p};m.prototype.$MercuryThreads28=function(o){if(o.folder!==c("MessagingTag").PENDING)return;o.folder=c("MessagingTag").INBOX};m.prototype.$MercuryThreads15=function(o){return o.filter(function(p){return p!=this.$MercuryThreads4}.bind(this)).length<=1};m.prototype.$MercuryThreads13=function(){__p&&__p();this.$MercuryThreads5.subscribe("invalidate-thread-state",function(o,p){return this.$MercuryThreads35(p)}.bind(this));this.$MercuryThreads5.subscribe("invalidate-global-state",function(o,p){return this.$MercuryThreads36()}.bind(this));this.$MercuryThreads5.subscribe("update-threads",function(o,p){__p&&__p();var q=(p.actions||[]).filter(function(r){return r.thread_id});if(p.threads&&p.payload_source==c("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO)p.threads.forEach(function(r){var s=r.thread_id;if(this.$MercuryThreads9.has(s)){this.$MercuryThreads9["delete"](s);if(r.unread_count)this.$MercuryThreads2.changeThreadReadStatus(r.thread_id,true)}}.bind(this));this.$MercuryThreads37(p.threads);this.$MercuryThreads16(q,p.from_client);p.threads&&p.threads.forEach(function(r){this.$MercuryThreads22(r.thread_id)}.bind(this));if(p.global_actions)p.global_actions.forEach(function(r){if(r.action_type==c("MercuryGlobalActionType").MARK_ALL_READ)this.$MercuryThreads34(r.folder)}.bind(this));if(this.$MercuryThreads7){this.$MercuryThreads7=false;j.emit("change")}}.bind(this))};m.prototype.$MercuryThreads37=function(o){if(!o||!o.length)return;var p={},q=[];o.forEach(function(r){var s=new(c("ImmutableObject"))(r);p[r.thread_id]=s;q.push(c("MercuryLoggingHelper").obfuscateThread(s))});q.length&&k.debug("threads_added",JSON.stringify({threads:q}));this.$MercuryThreads8.addResourcesAndExecute(p)};m.prototype.$MercuryThreads22=function(o){this.$MercuryThreads7=true;this.$MercuryThreads3.updatedThread(o)};m.prototype.$MercuryThreads20=function(o){this.$MercuryThreads7=true;this.$MercuryThreads3.deletedThread(o)};m.prototype.$MercuryThreads33=function(o,p,q){this.$MercuryThreads7=true;this.$MercuryThreads3.changedThreadReadState(o,p,q)};m.prototype.$MercuryThreads35=function(o){this.$MercuryThreads8.setResource(o,undefined)};m.prototype.$MercuryThreads36=function(){this.$MercuryThreads7=false;this.$MercuryThreads8=new(c("KeyedCallbackManager"))();this.$MercuryThreads9=new Set();this.$MercuryThreads10=false;this.$MercuryThreads11=new Set();this.$MercuryThreads12=new Set()};m.prototype.$MercuryThreads32=function(o){if(o.specific_to_list)return o.specific_to_list;var p=c("MercuryIDs").tokenize(o.thread_id),q=p.type,r=p.value;if(!r||q!=="user")return[this.$MercuryThreads4];return[c("MercuryIDs").getParticipantIDFromUserID(r),this.$MercuryThreads4]};var n=new(c("MercurySingletonProvider"))(m);f.exports=m}),null);
__d("MercuryMessageObject",["BanzaiODS","MercuryActionStatus","MercuryActionType","MercuryIDs","MercuryLocalIDs","MercuryMessageClientState","MercuryMessageSourceTags","MercurySingletonProvider","MercurySourceType","MercuryThreads","MercurySendMessageFields"],(function a(b,c,d,e,f,g){__p&&__p();h.getForFBID=function(l){"use strict";return k.getForFBID(l)};h.get=function(){"use strict";return k.get()};function h(l){"use strict";this.$MercuryMessageObject1=l;this.$MercuryMessageObject2=c("MercuryThreads").getForFBID(l)}h.prototype.constructUserGeneratedMessageObject=function(l,m,n,o,p){__p&&__p();var q=arguments.length<=5||arguments[5]===undefined?null:arguments[5];"use strict";var r=i(this.$MercuryMessageObject1,c("MercuryActionType").USER_GENERATED_MESSAGE,m,n);if(typeof l=="string")l=l.replace(/^\s+/,"").replace(/\s+$/,"");r.body=l;r.has_attachment=false;r.html_body=false;r.attachments=[];r.specific_to_list=o||[];r.creator_info=p;if(q&&q.length>0)r.tags=q;return r};h.prototype.constructStickerMessageObject=function(l,m,n){__p&&__p();var o=arguments.length<=3||arguments[3]===undefined?null:arguments[3];"use strict";var p=i(this.$MercuryMessageObject1,c("MercuryActionType").USER_GENERATED_MESSAGE,m,n);p.has_attachment=true;p.html_body=false;p.attachments=[];p.sticker_id=l;p.specific_to_list=[];if(o&&o.length>0)p.tags=o;return p};h.prototype.constructAttachmentMessageObject=function(l,m){"use strict";var n=i(this.$MercuryMessageObject1,c("MercuryActionType").USER_GENERATED_MESSAGE,l,m);n.attachments=[];n.specific_to_list=[];return n};h.prototype.constructLogMessageObject=function(l,m,n,o){"use strict";var p=i(this.$MercuryMessageObject1,c("MercuryActionType").LOG_MESSAGE,l,m);p.log_message_type=n;p.log_message_data=o;if(o&&o.untypedData&&o.untypedData.ttl)p.ephemeral_ttl_mode=o.untypedData.ttl;return p};h.prototype.constructCTAConfirmationMessageObject=function(l,m,n,o){__p&&__p();var p=arguments.length<=4||arguments[4]===undefined?null:arguments[4];"use strict";var q=this.constructUserGeneratedMessageObject(l,m,n,null,null),r={};if(o)r={quick_replies:o,ignore_for_webhook:false};else r={ignore_for_webhook:true};q.platform_xmd=JSON.stringify(r);if(p&&p.length>0)q.tags=p;return q};h.prototype.normalizeNewMessage=function(l){"use strict";__p&&__p();if(l.status===undefined)l.status=c("MercuryActionStatus").UNSENT;l.offline_threading_id=l.offline_threading_id||c("MercuryLocalIDs").generateOfflineThreadingID(l.timestamp);if(!l.offline_threading_id)c("BanzaiODS").bumpEntityKey("chat.web","invalid_otid_generated");l.message_id=l.message_id||l.offline_threading_id;var m=c("MercuryIDs").getParticipantIDFromUserID(this.$MercuryMessageObject1);l.specific_to_list=l.specific_to_list||[];if(l.specific_to_list.length&&l.specific_to_list.indexOf(m)===-1)l.specific_to_list.push(m);if(!l.thread_id)l.thread_id="root:"+l.offline_threading_id;else{var n=this.$MercuryMessageObject2.getThreadMetaNow(l.thread_id);if(n&&n.ephemeral_ttl_mode!==null&&l.ephemeral_ttl_mode===undefined)l.ephemeral_ttl_mode=n.ephemeral_ttl_mode}if(l.specific_to_list.length==1)l.thread_id="user:"+this.$MercuryMessageObject1;else if(l.specific_to_list.length==2){var o=l.specific_to_list[0]==m?l.specific_to_list[1]:l.specific_to_list[0];l.thread_id=c("MercuryIDs").getThreadIDFromParticipantID(o)}if(!l.specific_to_list.length){var p=c("MercuryIDs").tokenize(l.thread_id),q=p.type,r=p.value;if(q=="user")l.specific_to_list=["fbid:"+r,m]}if(!l[c("MercurySendMessageFields").MANUAL_RETRY_CNT])l[c("MercurySendMessageFields").MANUAL_RETRY_CNT]=0};h.prototype.normalizeResendMessage=function(l){"use strict";l.status=c("MercuryActionStatus").RESENDING;l.timestamp=Date.now();l[c("MercurySendMessageFields").MANUAL_RETRY_CNT]+=1};h.prototype.normalizeAddAttachmentPlaceholder=function(l,m,n){"use strict";if(n.preview_attachments.length>0){l.has_attachment=true;l.preview_attachments=n.preview_attachments}l.client_state=c("MercuryMessageClientState").DO_NOT_SEND_TO_SERVER;l.status=c("MercuryActionStatus").RESENDING;l.upload_id=m};function i(l,m,n,o){var p=j(n)?[c("MercuryMessageSourceTags").CHAT]:[],q=Date.now(),r={action_type:m,thread_id:o,author:c("MercuryIDs").getParticipantIDFromUserID(l),author_email:null,timestamp:q,is_unread:false,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,is_spoof_warning:false,source:n,source_tags:p};return r}function j(l){switch(l){case c("MercurySourceType").CHAT_WEB:case c("MercurySourceType").CHAT_JABBER:case c("MercurySourceType").CHAT_IPHONE:case c("MercurySourceType").CHAT_MEEBO:case c("MercurySourceType").CHAT_ORCA:case c("MercurySourceType").CHAT_TEST:case c("MercurySourceType").CHAT:return true;default:return false}}var k=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("MercuryMessageActions",["Bootloader","ChatConfig","MercuryActionType","MercuryDispatcher","MercuryMessageObject","MercuryPayloadSource","MercuryServerRequests","MercurySingletonMixin"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){this.$MercuryMessageActions1=i;this.$MercuryMessageActions2=c("MercuryMessageObject").getForFBID(this.$MercuryMessageActions1);this.__serverRequests=c("MercuryServerRequests").getForFBID(this.$MercuryMessageActions1);this.__dispatcher=c("MercuryDispatcher").getForFBID(this.$MercuryMessageActions1)}h.prototype.send=function(i,j,k){j=j||Function.prototype;this.$MercuryMessageActions2.normalizeNewMessage(i);this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload(babelHelpers["extends"]({},i),c("MercuryPayloadSource").CLIENT_SEND_MESSAGE));this.__serverRequests.sendNewMessage(i,k);j(i.thread_id);this.$MercuryMessageActions3()};h.prototype.resend=function(i,j){var k=babelHelpers["extends"]({},i);this.$MercuryMessageActions2.normalizeResendMessage(k);this.send(k,undefined,j)};h.prototype.addAttachmentPlaceholder=function(i,j,k){this.$MercuryMessageActions2.normalizeAddAttachmentPlaceholder(i,j,k);this.$MercuryMessageActions2.normalizeNewMessage(i);this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload(babelHelpers["extends"]({},i),c("MercuryPayloadSource").CLIENT_SEND_MESSAGE))};h.prototype.cancelAttachmentPlaceholder=function(i,j){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({upload_id:i,upload_data:j,action_type:c("MercuryActionType").CANCEL_ATTACHMENT_PLACEHOLDER},c("MercuryPayloadSource").CLIENT_SEND_MESSAGE))};h.prototype.confirmAttachmentPlaceholder=function(i,j){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({upload_id:i,upload_data:j,action_type:c("MercuryActionType").CONFIRM_ATTACHMENT_PLACEHOLDER},c("MercuryPayloadSource").CLIENT_SEND_MESSAGE))};h.prototype["delete"]=function(i,j,k){this.__dispatcher.handleUpdate(this.$MercuryMessageActions4(i,j,c("MercuryActionType").DELETE_MESSAGES,k||c("MercuryPayloadSource").CLIENT_DELETE_MESSAGES))};h.prototype.unwrap=function(i){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({thread_id:i.thread_id,unwrapped_message_id:i.message_id,action_type:c("MercuryActionType").UNWRAP_MESSAGE},c("MercuryPayloadSource").CLIENT_UNWRAP_MESSAGE))};h.prototype.__constructClientSingleMessagePayload=function(i,j){return{actions:[i],from_client:true,payload_source:j}};h.prototype.$MercuryMessageActions5=function(i,j){return{actions:[i],from_client:false,payload_source:j}};h.prototype.$MercuryMessageActions4=function(i,j,k,l){return{actions:[{action_type:k,thread_id:i,message_ids:j}],from_client:true,payload_source:l}};h.prototype.$MercuryMessageActions3=function(){if(c("ChatConfig").get("in_recents_experiment"))c("Bootloader").loadModules(["FunnelLogger"],function(i){i.appendAction("WWW_DIVEBAR_RECENTS_FUNNEL","send_message")},"MercuryMessageActions")};Object.assign(h,c("MercurySingletonMixin"));f.exports=h}),null);
__d("MercuryMessageError.react",["cx","CurrentUser","ImmutableObject","Link.react","MercuryErrorInfo","MercuryMessageActions","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.messageResend=function(r){r.preventDefault();var s=this.props.message,t=s.error_data;if(c("MercuryErrorInfo").isTransient(t))c("MercuryMessageActions").getForFBID(this.props.authorFBID).resend(this.props.message)}.bind(this),n}l.prototype.render=function(){var m=this.props.message,n=m.error_data;return c("React").createElement(c("Link.react"),babelHelpers["extends"]({},this.props,{href:"#",className:c("joinClasses")(this.props.className,this.$MercuryMessageError1(m)),tabIndex:c("MercuryErrorInfo").isTransient(n)?0:null,onClick:this.messageResend}),c("React").createElement("i",{className:"_2fs1"}),c("React").createElement("span",{className:"_61ag",dangerouslySetInnerHTML:{__html:this.$MercuryMessageError2(m)}}))};l.prototype.$MercuryMessageError1=function(m){if(c("MercuryErrorInfo").hasErrorStatus(m))return"_2fs2 _2fs3"+(c("MercuryErrorInfo").isTransient(m.error_data)?" _2fs4":"")+(c("MercuryErrorInfo").isPermanent(m.error_data)?" _2fs5":"");else return"_2fs6 _2fs2"};l.prototype.$MercuryMessageError2=function(m){var n="",o=m.error_data;if(c("MercuryErrorInfo").hasErrorStatus(m)){var p=c("MercuryErrorInfo").getMessage(o);if(p)n=p.toString()}if(typeof n==="object"&&n.__html)n=n.__html;return n};l.propTypes={authorFBID:k.string,message:k.instanceOf(c("ImmutableObject")).isRequired};l.defaultProps={authorFBID:c("CurrentUser").getID()};f.exports=l}),null);
__d("DockTabsViewportFantaTabUtils",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=269;function i(){return h+1}function j(m){return Math.floor(m/h)}function k(m){if(!m)return null;var n=m.fantaTabModelStateGetter;return n?n():null}function l(m){return m?m.size:0}f.exports={getTabCountToFitWidth:j,getMinRequiredWidthForFirstFantaTab:i,getFantaTabModelFromCallbacks:k,getNumFantaTabsFromModel:l}}),null);
__d("DockTabsViewportPinnedConversationTabUtils",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=496+9+2,i=210+9+2,j=52;function k(){return h}function l(){return i}function m(){return j}function n(r){return r.getIsRaised()?k():l()}function o(){return k()+j}function p(r){var s=r||{},t=s.pinnedConvoTabStateGetter;return t?t():null}function q(r){return r?r.getTotalTabCount():0}f.exports={getRaisedPinnedConvoTabWidth:k,getLoweredPinnedConvoTabWidth:l,getPinnedConvoSelectorWidth:m,getPinnedConvoTabWidth:n,getMinRequiredWidthForFirstConvoTab:o,getPinnedConvoTabsStateFromCallbacks:p,getNumPinnedConvoTabsFromModel:q}}),null);
__d("DockTabsViewportCalculator",["csx","Arbiter","DataStore","Dock","DockTabsViewportFantaTabUtils","DockTabsViewportPinnedConversationTabUtils","DOM","Event","FullScreen","SubscriptionsHandler","Vector","ViewportBounds","ge","getViewportDimensions","setImmediate"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=50,j=35,k=j,l="dock-tab-viewport-inst",m=c("DockTabsViewportFantaTabUtils").getMinRequiredWidthForFirstFantaTab,n=c("DockTabsViewportFantaTabUtils").getFantaTabModelFromCallbacks,o=c("DockTabsViewportFantaTabUtils").getNumFantaTabsFromModel,p=c("DockTabsViewportPinnedConversationTabUtils").getMinRequiredWidthForFirstConvoTab,q=c("DockTabsViewportPinnedConversationTabUtils").getNumPinnedConvoTabsFromModel,r=c("DockTabsViewportPinnedConversationTabUtils").getPinnedConvoTabsStateFromCallbacks;function s(u){return u?c("Vector").getElementDimensions(u).x:0}function t(u){__p&&__p();this.$DockTabsViewportCalculatorImpl1=u;this.$DockTabsViewportCalculatorImpl3=0;this.$DockTabsViewportCalculatorImpl4=0;this.$DockTabsViewportCalculatorImpl5=null;this.$DockTabsViewportCalculatorImpl6=null;this.$DockTabsViewportCalculatorImpl7=false;this.$DockTabsViewportCalculatorImpl8=false;this.$DockTabsViewportCalculatorImpl9=false;this.$DockTabsViewportCalculatorImpl2=new(c("SubscriptionsHandler"))();this.$DockTabsViewportCalculatorImpl10();this.$DockTabsViewportCalculatorImpl11()}t.prototype.$DockTabsViewportCalculatorImpl10=function(){__p&&__p();var u=this.$DockTabsViewportCalculatorImpl12.bind(this);this.$DockTabsViewportCalculatorImpl2.addSubscriptions(c("Event").listen(window,"resize",u),c("Dock").subscribe("resize",u),c("Arbiter").subscribeOnce("sidebar/initialized",u,c("Arbiter").SUBSCRIBE_NEW),c("FullScreen").subscribe("changed",function(){__p&&__p();if(c("FullScreen").isFullScreen()){this.$DockTabsViewportCalculatorImpl7=true;this.$DockTabsViewportCalculatorImpl8=false}else{this.$DockTabsViewportCalculatorImpl7=false;if(this.$DockTabsViewportCalculatorImpl8){c("setImmediate")(function(){u()});this.$DockTabsViewportCalculatorImpl8=false}}}.bind(this)))};t.prototype.registerFantaTabCallbacks=function(u){this.$DockTabsViewportCalculatorImpl5=u};t.prototype.registerPinnedConvoTabCallbacks=function(u){this.$DockTabsViewportCalculatorImpl6=u};t.prototype.forceRecalculateFBDockWidth=function(){this.$DockTabsViewportCalculatorImpl11();this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:false,pinnedConvoUpdateData:null})};t.prototype.forceRecalculateChatTabs=function(){this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:true,pinnedConvoUpdateData:null})};t.prototype.forceRecalculatePinnedConvoTabs=function(u){this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:true,pinnedConvoUpdateData:u})};t.prototype.$DockTabsViewportCalculatorImpl12=function(){if(c("FullScreen").isFullScreen()||this.$DockTabsViewportCalculatorImpl7){this.$DockTabsViewportCalculatorImpl8=true;return}this.forceRecalculateFBDockWidth()};t.prototype.$DockTabsViewportCalculatorImpl13=function(u){var v=u.forceRecalculateChatTabs,w=u.pinnedConvoUpdateData,x=this.$DockTabsViewportCalculatorImpl14(),y=x.chatTabAvailableWidth,z=x.pinnedConvoTabAvailableWidth;this.$DockTabsViewportCalculatorImpl15(y,!!v);this.$DockTabsViewportCalculatorImpl16(z,w)};t.prototype.$DockTabsViewportCalculatorImpl16=function(u,v){var w=this.$DockTabsViewportCalculatorImpl6||{},x=w.onAvailableWidthChanged;x&&x(u,v)};t.prototype.$DockTabsViewportCalculatorImpl15=function(u,v){var w=this.$DockTabsViewportCalculatorImpl5||{},x=w.onAvailableWidthChanged;x&&x(u)};t.prototype.$DockTabsViewportCalculatorImpl17=function(){var u=n(this.$DockTabsViewportCalculatorImpl5);return o(u)};t.prototype.$DockTabsViewportCalculatorImpl18=function(){return m()};t.prototype.$DockTabsViewportCalculatorImpl14=function(){__p&&__p();var u=this.$DockTabsViewportCalculatorImpl3,v={chatTabAvailableWidth:u,pinnedConvoTabAvailableWidth:0},w={chatTabAvailableWidth:0,pinnedConvoTabAvailableWidth:u},x=this.$DockTabsViewportCalculatorImpl17(),y=r(this.$DockTabsViewportCalculatorImpl6),z=q(y);if(!y||z===0)return v;else if(x===0)return w;var A=this.$DockTabsViewportCalculatorImpl18();if(u<=A)return v;var B=p(),C=u-A,D=0;if(C<B)return v;else D=B;var E=D,F=Math.max(A,u-D);return{chatTabAvailableWidth:F,pinnedConvoTabAvailableWidth:E}};t.prototype.$DockTabsViewportCalculatorImpl11=function(){this.$DockTabsViewportCalculatorImpl3=this.$DockTabsViewportCalculatorImpl19();this.$DockTabsViewportCalculatorImpl20("DockTabsViewportCalculator/recalcTotalDock_FOR_TEST_ONLY")};t.prototype.$DockTabsViewportCalculatorImpl21=function(){var u=this.$DockTabsViewportCalculatorImpl1;if(!u)return{buddyListNubWidth:0,employeeNubsWidth:0};var v=s(u),w=s(c("DOM").find(u,"._56ox")),x=s(c("DOM").scry(u,"._56oy")[0]),y=s(c("DOM").scry(u,"._ph1")[0]),z=Math.max(v-w-x-y,0);return{buddyListNubWidth:w,employeeNubsWidth:z}};t.prototype.$DockTabsViewportCalculatorImpl19=function(){var u=c("getViewportDimensions").withoutScrollbars().width;u-=c("ViewportBounds").getLeft()+c("ViewportBounds").getRight();u-=i;var v=this.$DockTabsViewportCalculatorImpl21(),w=v.buddyListNubWidth,x=v.employeeNubsWidth;u-=w;this.$DockTabsViewportCalculatorImpl4=Math.max(this.$DockTabsViewportCalculatorImpl4,x);u-=this.$DockTabsViewportCalculatorImpl4;u-=k;return Math.max(u,0)};t.prototype.enableTestInforms_FOR_TEST_ONLY=function(){this.$DockTabsViewportCalculatorImpl9=true};t.prototype.$DockTabsViewportCalculatorImpl20=function(u){if(this.$DockTabsViewportCalculatorImpl9)c("Arbiter").inform(u)};t.prototype.getChatTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl14().chatTabAvailableWidth};t.prototype.getPinnedConvoTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl14().pinnedConvoTabAvailableWidth};t.prototype.getAvailableTotalWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl3};f.exports={getInstance:function u(v){__p&&__p();var w=c("ge")("pagelet_dock");if(!w||!c("DOM").contains(w,v))return null;var x=c("DataStore").get(w,l);if(x instanceof t)return x;var y=c("DOM").scry(w,".fbDockWrapperRight .fbDock")[0];x=new t(y);c("DataStore").set(w,l,x);return x}}}),null);
__d("DragDropFileUpload",[],(function a(b,c,d,e,f,g){g.isSupported=function(){return typeof FileList!=="undefined"}}),null);
__d("DocumentDragDrop",["Arbiter","CSS","DOMQuery","DragDropFileUpload","Event","emptyFunction","getObjectValues","getOrCreateDOMID"],(function a(b,c,d,e,f,g){__p&&__p();var h={},i=0;function j(){i=0;c("getObjectValues")(h).forEach(function(o){c("CSS").removeClass(o.element,o.className);c("Arbiter").inform("dragleave",{element:o.element})})}var k=null;function l(){k&&clearTimeout(k);k=setTimeout(function(){j()},500)}var m=function o(){__p&&__p();if(!c("DragDropFileUpload").isSupported())return;c("Event").listen(document,"dragenter",function(p){if(i===0)c("getObjectValues")(h).forEach(function(q){c("CSS").addClass(q.element,q.className);c("Arbiter").inform("dragenter",{element:q.element,event:p})});i++;l()});c("Event").listen(document,"dragleave",function(p){i--;if(i===0)j();l()});c("Event").listen(document,"drop",function(p){j();var q=p.getTarget();if(c("DOMQuery").isNodeOfType(p.getTarget(),"input"))if(q.type==="file")return;p.prevent()});c("Event").listen(document,"dragover",c("Event").prevent);document.addEventListener("dragover",l,true);m=c("emptyFunction")},n={init:function o(){m()},registerStatusElement:function o(p,q){m();h[c("getOrCreateDOMID")(p)]={element:p,className:q};if(i>0)c("CSS").addClass(p,q)},removeStatusElement:function o(p){var q=c("getOrCreateDOMID")(p),r=h[q];if(r){c("CSS").removeClass(r.element,r.className);delete h[q]}}};f.exports=n}),null);
__d("PhotosMimeType",[],(function a(b,c,d,e,f,g){var h={isImage:function j(k){return i(k)[0]==="image"},isJpeg:function j(k){var l=i(k);return h.isImage(k)&&(l[1]==="jpeg"||l[1]==="pjpeg")}};function i(j){return j.split("/")}f.exports=h}),null);
__d("DataTransfer",["PhotosMimeType","createArrayFromMixed","emptyFunction"],(function a(b,c,d,e,f,g){__p&&__p();var h=new RegExp("\r\n","g"),i="\n",j={"text/rtf":1,"text/html":1};function k(m){if(m.kind=="file")return m.getAsFile()}function l(m){"use strict";this.data=m;this.types=m.types?c("createArrayFromMixed")(m.types):[]}l.prototype.isRichText=function(){"use strict";if(this.getHTML()&&this.getText())return true;if(this.isImage())return false;return this.types.some(function(m){return j[m]})};l.prototype.getText=function(){"use strict";var m;if(this.data.getData)if(!this.types.length)m=this.data.getData("Text");else if(this.types.indexOf("text/plain")!=-1)m=this.data.getData("text/plain");return m?m.replace(h,i):null};l.prototype.getHTML=function(){"use strict";if(this.data.getData)if(!this.types.length)return this.data.getData("Text");else if(this.types.indexOf("text/html")!=-1)return this.data.getData("text/html")};l.prototype.isLink=function(){"use strict";return this.types.some(function(m){return m.indexOf("Url")!=-1||m.indexOf("text/uri-list")!=-1||m.indexOf("text/x-moz-url")!=-1})};l.prototype.getLink=function(){"use strict";if(this.data.getData){if(this.types.indexOf("text/x-moz-url")!=-1){var m=this.data.getData("text/x-moz-url").split("\n");return m[0]}return this.types.indexOf("text/uri-list")!=-1?this.data.getData("text/uri-list"):this.data.getData("url")}return null};l.prototype.isImage=function(){"use strict";__p&&__p();var m=this.types.some(function(p){return p.indexOf("application/x-moz-file")!=-1});if(m)return true;var n=this.getFiles();for(var o=0;o<n.length;o++){var p=n[o].type;if(!c("PhotosMimeType").isImage(p))return false}return true};l.prototype.getCount=function(){"use strict";if(Object.prototype.hasOwnProperty.call(this.data,"items"))return this.data.items.length;else if(Object.prototype.hasOwnProperty.call(this.data,"mozItemCount"))return this.data.mozItemCount;else if(this.data.files)return this.data.files.length;return null};l.prototype.getFiles=function(){"use strict";if(this.data.items)return Array.prototype.slice.call(this.data.items).map(k).filter(c("emptyFunction").thatReturnsArgument);else if(this.data.files)return Array.prototype.slice.call(this.data.files);else return[]};l.prototype.hasFiles=function(){"use strict";return this.getFiles().length>0};f.exports=l}),null);
__d("DragDropTarget",["Arbiter","Event","SubscriptionsHandler","CSS","DataTransfer","DocumentDragDrop","DragDropFileUpload","emptyFunction"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){this._element=i;this._listeners=new(c("SubscriptionsHandler"))();this._statusElem=i;this._dragEnterCount=0;this._enabled=false}Object.assign(h.prototype,{_onFilesDropCallback:c("emptyFunction"),_onURLDropCallback:c("emptyFunction"),_onPlainTextDropCallback:c("emptyFunction"),_onDropCallback:c("emptyFunction"),_fileFilterFn:c("emptyFunction").thatReturnsArgument,setOnDocumentDragEnterCallback:function i(j){this._onDocumentDragEnterCallback=j;return this},setOnDocumentDragLeaveCallback:function i(j){this._onDocumentDragLeaveCallback=j;return this},setOnDragEnterCallback:function i(j){this._onDragEnterCallback=j;return this},setOnDragLeaveCallback:function i(j){this._onDragLeaveCallback=j;return this},setOnFilesDropCallback:function i(j){this._onFilesDropCallback=j;return this},setOnURLDropCallback:function i(j){this._onURLDropCallback=j;return this},setOnPlainTextDropCallback:function i(j){this._onPlainTextDropCallback=j;return this},setOnDropCallback:function i(j){this._onDropCallback=j;return this},enable:function i(){__p&&__p();if(!c("DragDropFileUpload").isSupported())return this;this._listeners.engage();c("DocumentDragDrop").registerStatusElement(this._statusElem,"fbWantsDragDrop");this._listeners.addSubscriptions(c("Event").listen(this._element,"dragenter",this._onDragEnter.bind(this)),c("Event").listen(this._element,"dragleave",this._onDragLeave.bind(this)),c("Event").listen(this._element,"dragover",this._onDragOver.bind(this)),c("Event").listen(this._element,"drop",function(j){__p&&__p();this._dragEnterCount=0;c("CSS").removeClass(this._statusElem,"fbDropReady");c("CSS").removeClass(this._statusElem,"fbDropReadyPhoto");c("CSS").removeClass(this._statusElem,"fbDropReadyPhotos");c("CSS").removeClass(this._statusElem,"fbDropReadyLink");var k=new(c("DataTransfer"))(j.dataTransfer),l={},m=false,n=this._fileFilterFn(j.dataTransfer.files);if(n.length){this._onFilesDropCallback(n,j);l.files=n;m=true}var o=k.getLink();if(o){this._onURLDropCallback(o,j);l.url=o;m=true}var p=k.getText();if(p){this._onPlainTextDropCallback(p,j);l.plainText=p;m=true}if(m)this._onDropCallback(l,j);j.kill()}.bind(this)));this._listeners.addSubscriptions(c("Arbiter").subscribe("dragenter",this._onDocumentDragEnter.bind(this)),c("Arbiter").subscribe("dragleave",this._onDocumentDragLeave.bind(this)));this._enabled=true;return this},disable:function i(){__p&&__p();if(!this._enabled)return this;c("DocumentDragDrop").removeStatusElement(this._statusElem,"fbWantsDragDrop");c("CSS").removeClass(this._statusElem,"fbDropReady");c("CSS").removeClass(this._statusElem,"fbDropReadyPhoto");c("CSS").removeClass(this._statusElem,"fbDropReadyPhotos");c("CSS").removeClass(this._statusElem,"fbDropReadyLink");this._listeners.release();this._enabled=false;return this},setFileFilter:function i(j){this._fileFilterFn=j;return this},setStatusElement:function i(j){this._statusElem=j;return this},_onDragEnter:function i(j){__p&&__p();if(this._dragEnterCount===0){var k=new(c("DataTransfer"))(j.dataTransfer);c("CSS").addClass(this._statusElem,"fbDropReady");if(k.isLink()||!k.isImage())c("CSS").addClass(this._statusElem,"fbDropReadyLink");else if(k.getCount()>1)c("CSS").addClass(this._statusElem,"fbDropReadyPhotos");else c("CSS").addClass(this._statusElem,"fbDropReadyPhoto");this._onDragEnterCallback&&this._onDragEnterCallback()}this._dragEnterCount++;j.preventDefault()},_onDragLeave:function i(j){this._dragEnterCount=Math.max(this._dragEnterCount-1,0);if(this._dragEnterCount===0){c("CSS").removeClass(this._statusElem,"fbDropReady");c("CSS").removeClass(this._statusElem,"fbDropReadyPhoto");c("CSS").removeClass(this._statusElem,"fbDropReadyPhotos");c("CSS").removeClass(this._statusElem,"fbDropReadyLink");this._onDragLeaveCallback&&this._onDragLeaveCallback()}},_onDragOver:function i(j){if(!j.dataTransfer){c("Event").kill(j);return}try{var k=j.dataTransfer.effectAllowed;j.dataTransfer.dropEffect=k=="move"||k=="linkMove"?"move":"copy"}catch(l){}c("Event").kill(j)},_onDocumentDragEnter:function i(event,j){if(this._onDocumentDragEnterCallback&&j.element==this._element)this._onDocumentDragEnterCallback()},_onDocumentDragLeave:function i(event,j){this._dragEnterCount=0;this._onDragLeave(event);if(this._onDocumentDragLeaveCallback&&j.element==this._element)this._onDocumentDragLeaveCallback()}});f.exports=h}),null);
__d("XEventReminderController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/eventreminder/",{event_reminder_id:{type:"Int",required:true}})}),null);
__d("EventReminderRequestHelper",["AsyncRequest","EventReminderActions","XEventReminderController"],(function a(b,c,d,e,f,g){"use strict";var h={fetchEventReminder:function i(j,k,l){var m=c("XEventReminderController").getURIBuilder().setInt("event_reminder_id",k);new(c("AsyncRequest"))(m.getURI()).setHandler(function(n){if(n.payload){c("EventReminderActions").updateEventReminder(j,n.payload);l()}}).send()}};f.exports=h}),null);
__d("DraftJsEventsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$DraftJsEventsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$DraftJsEventsTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$DraftJsEventsTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$DraftJsEventsTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$DraftJsEventsTypedLogger1)};h.prototype.updateData=function(j){this.$DraftJsEventsTypedLogger1=babelHelpers["extends"]({},this.$DraftJsEventsTypedLogger1,j);return this};h.prototype.setAnonymizedDom=function(j){this.$DraftJsEventsTypedLogger1.anonymized_dom=j;return this};h.prototype.setEvent=function(j){this.$DraftJsEventsTypedLogger1.event=j;return this};h.prototype.setExtraParams=function(j){this.$DraftJsEventsTypedLogger1.extra_params=j;return this};h.prototype.setScriptPath=function(j){this.$DraftJsEventsTypedLogger1.script_path=j;return this};h.prototype.setSelectionState=function(j){this.$DraftJsEventsTypedLogger1.selection_state=j;return this};h.prototype.setVC=function(j){this.$DraftJsEventsTypedLogger1.vc=j;return this};var i={anonymized_dom:true,event:true,extra_params:true,script_path:true,selection_state:true,vc:true};f.exports=h}),null);
__d("IgnoreMessagesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$IgnoreMessagesTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$IgnoreMessagesTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$IgnoreMessagesTypedLogger1={};return this};h.prototype.updateData=function(j){this.$IgnoreMessagesTypedLogger1=babelHelpers["extends"]({},this.$IgnoreMessagesTypedLogger1,j);return this};h.prototype.setEvent=function(j){this.$IgnoreMessagesTypedLogger1.event=j;return this};h.prototype.setPlatform=function(j){this.$IgnoreMessagesTypedLogger1.platform=j;return this};h.prototype.setThreadID=function(j){this.$IgnoreMessagesTypedLogger1.thread_id=j;return this};h.prototype.setVC=function(j){this.$IgnoreMessagesTypedLogger1.vc=j;return this};var i={event:true,platform:true,thread_id:true,vc:true};f.exports=h}),null);
__d("MercurySyncHolesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$MercurySyncHolesTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$MercurySyncHolesTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MercurySyncHolesTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MercurySyncHolesTypedLogger1=babelHelpers["extends"]({},this.$MercurySyncHolesTypedLogger1,j);return this};h.prototype.setDifference=function(j){this.$MercurySyncHolesTypedLogger1.difference=j;return this};h.prototype.setSeqID=function(j){this.$MercurySyncHolesTypedLogger1.seq_id=j;return this};h.prototype.setTopicType=function(j){this.$MercurySyncHolesTypedLogger1.topic_type=j;return this};h.prototype.setVC=function(j){this.$MercurySyncHolesTypedLogger1.vc=j;return this};var i={difference:true,seq_id:true,topic_type:true,vc:true};f.exports=h}),null);
__d("MessengerMessageActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$MessengerMessageActionsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$MessengerMessageActionsTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MessengerMessageActionsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MessengerMessageActionsTypedLogger1=babelHelpers["extends"]({},this.$MessengerMessageActionsTypedLogger1,j);return this};h.prototype.setAction=function(j){this.$MessengerMessageActionsTypedLogger1.action=j;return this};h.prototype.setAppID=function(j){this.$MessengerMessageActionsTypedLogger1.appid=j;return this};h.prototype.setAppversion=function(j){this.$MessengerMessageActionsTypedLogger1.appversion=j;return this};h.prototype.setClienttime=function(j){this.$MessengerMessageActionsTypedLogger1.clienttime=j;return this};h.prototype.setContainermodule=function(j){this.$MessengerMessageActionsTypedLogger1.containermodule=j;return this};h.prototype.setCountry=function(j){this.$MessengerMessageActionsTypedLogger1.country=j;return this};h.prototype.setEntryPoint=function(j){this.$MessengerMessageActionsTypedLogger1.entry_point=j;return this};h.prototype.setErrorText=function(j){this.$MessengerMessageActionsTypedLogger1.error_text=j;return this};h.prototype.setGroupSize=function(j){this.$MessengerMessageActionsTypedLogger1.group_size=j;return this};h.prototype.setMessageType=function(j){this.$MessengerMessageActionsTypedLogger1.message_type=j;return this};h.prototype.setMid=function(j){this.$MessengerMessageActionsTypedLogger1.mid=j;return this};h.prototype.setName=function(j){this.$MessengerMessageActionsTypedLogger1.name=j;return this};h.prototype.setOfflineThreadid=function(j){this.$MessengerMessageActionsTypedLogger1.offline_threadid=j;return this};h.prototype.setPreviousReaction=function(j){this.$MessengerMessageActionsTypedLogger1.previous_reaction=j;return this};h.prototype.setReaction=function(j){this.$MessengerMessageActionsTypedLogger1.reaction=j;return this};h.prototype.setRecipientID=function(j){this.$MessengerMessageActionsTypedLogger1.recipient_id=j;return this};h.prototype.setThreadType=function(j){this.$MessengerMessageActionsTypedLogger1.thread_type=j;return this};h.prototype.setThreadid=function(j){this.$MessengerMessageActionsTypedLogger1.threadid=j;return this};h.prototype.setVC=function(j){this.$MessengerMessageActionsTypedLogger1.vc=j;return this};h.prototype.updateExtraData=function(j){j=c("nullthrows")(c("GeneratedLoggerUtils").serializeMap(j));c("GeneratedLoggerUtils").checkExtraDataFieldNames(j,i);this.$MessengerMessageActionsTypedLogger1=babelHelpers["extends"]({},this.$MessengerMessageActionsTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={action:true,appid:true,appversion:true,clienttime:true,containermodule:true,country:true,entry_point:true,error_text:true,group_size:true,message_type:true,mid:true,name:true,offline_threadid:true,previous_reaction:true,reaction:true,recipient_id:true,thread_type:true,threadid:true,vc:true};f.exports=h}),null);
__d("MessengerWebViewReactionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$MessengerWebViewReactionsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$MessengerWebViewReactionsTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MessengerWebViewReactionsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MessengerWebViewReactionsTypedLogger1=babelHelpers["extends"]({},this.$MessengerWebViewReactionsTypedLogger1,j);return this};h.prototype.setEmojiGroup=function(j){this.$MessengerWebViewReactionsTypedLogger1.emoji_group=j;return this};h.prototype.setEmojiGroupCount=function(j){this.$MessengerWebViewReactionsTypedLogger1.emoji_group_count=j;return this};h.prototype.setEvent=function(j){this.$MessengerWebViewReactionsTypedLogger1.event=j;return this};h.prototype.setMid=function(j){this.$MessengerWebViewReactionsTypedLogger1.mid=j;return this};h.prototype.setSenderID=function(j){this.$MessengerWebViewReactionsTypedLogger1.sender_id=j;return this};h.prototype.setVC=function(j){this.$MessengerWebViewReactionsTypedLogger1.vc=j;return this};var i={emoji_group:true,emoji_group_count:true,event:true,mid:true,sender_id:true,vc:true};f.exports=h}),null);
__d("MercuryTypeaheadConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({COMPOSER_FRIENDS_MAX:4,COMPOSER_FB4C_MAX:8,COMPOSER_NON_FRIENDS_MAX:2,COMPOSER_MESSENGER_ONLY_CONTACT_MAX:4,COMPOSER_SHOW_MORE_LIMIT:2,COMPOSER_THREADS_INITIAL_LIMIT:2,COMPOSER_CHATTAB_MAX:5,COMPOSER_PAGES_MAX:5,COMPOSER_WM_MAX:23,USER_TYPE:"user",PAGE_TYPE:"page",THREAD_TYPE:"thread",HEADER_TYPE:"header",SEARCH_TYPE:"search",FRIEND_TYPE:"friend",NON_FRIEND_TYPE:"non_friend",FB4C_TYPE:"fb4c",MEETING_ROOM_PAGE_TYPE:"meeting_room_page",COMMERCE_PAGE_TYPE:"commerce_page",INTERNAL_BOT_PAGE_TYPE:"internal_bot_page",GAME_TYPE:"game",WORKPLACE_BOT_CATEGORY_TYPE:"WORKPLACE_BOT",VALID_EMAIL:"^([A-Z0-9._%+-]+@((?!facebook\\.com))[A-Z0-9.-]+\\.[A-Z]{2,4}|(([A-Z._%+-]+[A-Z0-9._%+-]*)|([A-Z0-9._%+-]+[A-Z._%+-]+[A-Z0-9._%+-]*))@(?:facebook\\.com))$"})}),null);
__d("MercuryFilters",["MessagingTag"],(function a(b,c,d,e,f,g){var h=[c("MessagingTag").UNREAD],i={ALL:"all",UNREAD:c("MessagingTag").UNREAD,getSupportedFilters:function j(){return h.concat()},isSupportedFilter:function j(k){return h.includes(k)}};f.exports=i}),null);
__d("MessengerStateProcessor",["MercuryAPIArgsSource","MercuryIDs","MercuryParticipantTypes","MercuryParticipants","MercuryThreadIDMap","MercuryThreads","MercuryVanityIDMap.bs","MessengerURIConstants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={preprocess:function j(k){__p&&__p();var l=k.activeThreadID;if(l){var m=c("MercuryIDs").getUserIDFromThreadID(l),n=m&&c("MercuryParticipants").getNow(c("MercuryIDs").getParticipantIDFromUserID(m));if(n&&n.type!==c("MercuryParticipantTypes").EVENT)k.threadKey=n.vanity||m;else if(m&&!n){var o=c("MercuryIDs").getParticipantIDFromUserID(m);k.threadKey=c("MercuryVanityIDMap.bs").hasID(o)?c("MercuryVanityIDMap.bs").getVanity(o):m}else{var p=c("MercuryThreadIDMap").get(),q=p.getServerIDFromClientIDNow(l);k.threadKey=q||c("MercuryIDs").tokenize(l).value}}delete k.activeThreadID;return k},postprocess:function j(k){__p&&__p();var l=c("MercuryThreadIDMap").get(),m=c("MercuryThreads").get(),n=i(k.threadKey),o=void 0;o=c("MercuryIDs").isValid(n)?n:l.getClientIDFromServerIDNow(n);if(!o){var p=c("MercuryParticipants").getIDFromVanityOrFBID(n),q=p&&m.getCanonicalThreadToParticipant(p,null,c("MercuryAPIArgsSource").MESSENGER);if(q)o=q.thread_id}if(o){k.activeThreadID=o;k.serverThreadID=l.getServerIDFromClientIDNow(o)}delete k.threadKey;return k},supportInboxPostprocess:function j(k){if(k.threadKey)k.activeThreadID=c("MercuryIDs").getThreadIDFromSupportInboxItemID(k.threadKey);delete k.threadKey;return k}};function i(j){if(!j)return null;return j.startsWith(c("MessengerURIConstants").GROUP_PREFIX)?j.substr(c("MessengerURIConstants").GROUP_PREFIX.length):j}f.exports=h}),null);
__d("MessengerURISerializer",["CurrentEnvironment","MercuryFilters","MessagingTag","MessengerStateProcessor","MessengerURIConstants","MessengerView","URI","WWWBase","MercuryIDs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="/?$",i=function i(m,n){m.setPath(c("CurrentEnvironment").facebookdotcom?c("MessengerURIConstants").FACEBOOK_PREFIX+n:n)},j=function j(m,n){var o=m.getPath();if(c("CurrentEnvironment").facebookdotcom&&!o.startsWith(c("MessengerURIConstants").FACEBOOK_PREFIX))n=c("MessengerURIConstants").FACEBOOK_PREFIX+n;m.setPath(m.getPath()+n)},k={serialize:function m(n){__p&&__p();var o=new(c("URI"))(c("WWWBase").uri);n=c("MessengerStateProcessor").preprocess(n);switch(n.masterView){case c("MessengerView").MASTER.PAYMENT:i(o,c("MessengerURIConstants").PAYMENT_PATH);break;case c("MessengerView").MASTER.PEOPLE:i(o,c("MessengerURIConstants").PEOPLE_PATH);break;case c("MessengerView").MASTER.SUPPORT:i(o,c("MessengerURIConstants").SUPPORT_PATH);break}switch(n.folder){case c("MessagingTag").OTHER:i(o,c("MessengerURIConstants").FILTERED_REQUESTS_PATH);break;case c("MessagingTag").ACTION_ARCHIVED:i(o,c("MessengerURIConstants").ARCHIVED_PATH);break;case c("MessagingTag").PENDING:i(o,c("MessengerURIConstants").MESSAGE_REQUESTS_PATH);break}if(n.detailView===c("MessengerView").DETAIL.PAYTHREAD){j(o,c("MessengerURIConstants").PAYMENT_PAY_PATH);if(n.threadKey)o.addQueryData("id",n.threadKey)}else if(n.detailView===c("MessengerView").DETAIL.PAYFRIENDPICKER)j(o,c("MessengerURIConstants").PAYMENT_PAY_PATH);else if(n.detailView===c("MessengerView").DETAIL.COMPOSE)j(o,c("MessengerURIConstants").COMPOSE_SUBPATH);else if(n.threadKey)if(n.masterView===c("MessengerView").MASTER.PAYMENT){i(o,c("MessengerURIConstants").THREAD_PREFIX+n.threadKey);delete n.extraQueryParams.id;delete n.extraQueryParams.a;delete n.extraQueryParams.m}else j(o,c("MessengerURIConstants").THREAD_PREFIX+n.threadKey);else if(n.masterView===c("MessengerView").MASTER.PAYMENT){i(o,"");delete n.extraQueryParams.id;delete n.extraQueryParams.a;delete n.extraQueryParams.m}else j(o,"");if(n.extraQueryParams)o.addQueryData(n.extraQueryParams);if(c("MercuryFilters").isSupportedFilter(n.filter))o.addQueryData({filter:n.filter});if(n.query!=null){var p;o.addQueryData((p={},p[n.masterView===c("MessengerView").MASTER.SEARCH?"qa":"q"]=n.query,p))}if(n.threadIDs)o.addQueryData({threadIDs:JSON.stringify(n.threadIDs)});if(n.mid)o.addQueryData({mid:n.mid});return o},deserialize:function m(n){__p&&__p();var o={},p=n.getPath();if(c("CurrentEnvironment").facebookdotcom&&!p.startsWith(c("MessengerURIConstants").FACEBOOK_PREFIX))o.notMessenger=true;var q=p.replace(c("MessengerURIConstants").FACEBOOK_PREFIX,""),r=void 0,s=n.getQueryData(),t=s.filter,u=s.mid,v=s.q,w=s.qa,x=s.threadIDs,y=babelHelpers.objectWithoutProperties(s,["filter","mid","q","qa","threadIDs"]);if(x)try{r=JSON.parse(x)}catch(z){}if(r)o.threadIDs=r.filter(function(B){return c("MercuryIDs").isValidThreadID(B)});else o.threadIDs=null;if(q.match("^"+c("MessengerURIConstants").PEOPLE_PATH))o.masterView=c("MessengerView").MASTER.PEOPLE;else if(q.match("^"+c("MessengerURIConstants").SUPPORT_PATH))o.masterView=c("MessengerView").MASTER.SUPPORT;else if(q.match("^"+c("MessengerURIConstants").PAYMENT_PATH))o.masterView=c("MessengerView").MASTER.PAYMENT;else if(w)o.masterView=c("MessengerView").MASTER.SEARCH;else o.masterView=c("MessengerView").MASTER.RECENT;if(q.match("^"+c("MessengerURIConstants").FILTERED_REQUESTS_PATH))o.folder=c("MessagingTag").OTHER;else if(q.match("^"+c("MessengerURIConstants").ARCHIVED_PATH))o.folder=c("MessagingTag").ACTION_ARCHIVED;else if(q.match("^"+c("MessengerURIConstants").MESSAGE_REQUESTS_PATH))o.folder=c("MessagingTag").PENDING;else o.folder=c("MessagingTag").INBOX;if(q.match(c("MessengerURIConstants").COMPOSE_SUBPATH+h))o.detailView=c("MessengerView").DETAIL.COMPOSE;else if(q.match("^"+c("MessengerURIConstants").PAYMENT_PATH+c("MessengerURIConstants").PAYMENT_PAY_PATH))if(y&&y.id){o.threadKey=y.id;o.detailView=c("MessengerView").DETAIL.PAYTHREAD}else o.detailView=c("MessengerView").DETAIL.PAYFRIENDPICKER;else{var A=l(q);if(A){o.threadKey=A;o.detailView=c("MessengerView").DETAIL.THREAD}}if(c("MercuryFilters").isSupportedFilter(t))o.filter=t;else o.filter=c("MercuryFilters").ALL;o.mid=u;o.query=w||v;o.extraQueryParams=y;if(o.masterView===c("MessengerView").MASTER.SUPPORT)return c("MessengerStateProcessor").supportInboxPostprocess(o);return c("MessengerStateProcessor").postprocess(o)}};function l(m){var n=m.match(c("MessengerURIConstants").THREAD_PREFIX+"([^/]+)"+h);return n&&decodeURIComponent(n[1])}f.exports=k}),null);
__d("MessengerActions",["invariant","Bootloader","EventProfiler","LogHistory","MercuryIDs","MercuryTypeaheadConstants","MessengerDispatcher","MessengerURISerializer","MessengerView","URI","goURI","keyMirror"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("keyMirror")({CANCEL_FILE_UPLOAD:null,EMPTY_FILES:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,REMOVE_SHARE_PREVIEW:null,PREPARE_FILES_FOR_SEND:null,REPLACE_STATE:null,SELECT_THREAD:null,UPDATE_MDOT_ME:null,UPDATE_THREAD_TAG:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null}),j=c("LogHistory").getInstance("messenger_actions"),k={Types:i,changeDetailView:function n(o){m(function(p){if(p.detailView!==o)return{detailView:o};return null})},changeMasterView:function n(o){__p&&__p();m(function(p){__p&&__p();if(p.masterView!==o){var q={masterView:o};if(p.masterView===c("MessengerView").MASTER.SEARCH){q.query=undefined;c("Bootloader").loadModules(["MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],function(r,s){r&&r.endFunnel(s.FUNNEL_LOGGER_TAGS.END_WITH_BACK_BUTTON)},"MessengerActions")}return q}return null})},selectAggregation:function n(o){m(function(p){return{detailView:c("MessengerView").MASTER.RECENT,threadIDs:o,mid:null}})},selectThread:function n(o,p){__p&&__p();if(p===c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE){!!o||h(0);var q=c("MercuryIDs").getUserIDFromThreadID(o);!!q||h(0);var r=new(c("URI"))(),s=r.getQualifiedURI().getSubdomain();r.setDomain("facebook.com").setSubdomain(s).setPath("/"+q).setProtocol("https");window.open(r,"_blank");return}c("EventProfiler").tagCurrentActiveInteractionsAs("MessengerThreadSwitch");c("MessengerDispatcher").dispatch({type:i.SELECT_THREAD,threadID:o});m(function(t){if(t.activeThreadID!==o)return{activeThreadID:o,detailView:c("MessengerView").DETAIL.THREAD,mid:null};return null})},changeState:function n(o){c("MessengerDispatcher").dispatch({type:i.REPLACE_STATE,nextState:o})},changeMDotMeReferral:function n(){var o=arguments.length<=0||arguments[0]===undefined?null:arguments[0],p=arguments.length<=1||arguments[1]===undefined?null:arguments[1];c("MessengerDispatcher").dispatch({type:k.Types.UPDATE_MDOT_ME,refCode:o,refThreadID:p})},changeThreadTag:function n(){var o=arguments.length<=0||arguments[0]===undefined?null:arguments[0],p=arguments.length<=1||arguments[1]===undefined?null:arguments[1];c("MessengerDispatcher").dispatch({type:k.Types.UPDATE_THREAD_TAG,messagingTags:o,threadID:p})},changeFolder:function n(o){m(function(p){if(p.folder!==o)return{folder:o};return null})},changeFilter:function n(o){m(function(p){if(p.filter!==o)return{filter:o};return null})},changeQuery:function n(o){m(function(p){if(p.query!==o)return{query:o};return null})},changeQueryAll:function n(o){m(function(p){if(p.queryAll!==o)return{query:o,masterView:c("MessengerView").MASTER.SEARCH};return null})},changeMid:function n(o){m(function(p){if(p.mid!==o)return{mid:o};return null})},changeID:function n(o){m(function(p){if(p.extraQueryParams.id!==o)return{extraQueryParams:babelHelpers["extends"]({},p.extraQueryParams,{id:o})};return null})},prepareFilesForSend:function n(o,p){if(!o)return;c("MessengerDispatcher").dispatch({type:k.Types.PREPARE_FILES_FOR_SEND,threadID:o,files:p})},uploadedFile:function n(o,p,q){if(!o)return;c("MessengerDispatcher").dispatch({type:k.Types.UPLOADED_FILE,threadID:o,uploadID:p,payload:q})},cancelFileUpload:function n(o,p){if(!o)return;c("MessengerDispatcher").dispatch({type:k.Types.CANCEL_FILE_UPLOAD,threadID:o,uploadID:p})},uploadFileFailed:function n(o,p){if(!o)return;c("MessengerDispatcher").dispatch({type:k.Types.UPLOAD_FILE_FAILED,threadID:o,uploadID:p})},cleanFiles:function n(o){j.debug("clean files",o);if(!o)return;c("MessengerDispatcher").dispatch({type:k.Types.EMPTY_FILES,threadID:o})},loadingPreview:function n(o,p){c("MessengerDispatcher").dispatch({type:k.Types.LINK_PREVIEW,threadID:o,match:p})},loadingShareData:function n(o){c("MessengerDispatcher").dispatch({type:k.Types.LOADING_SHARE_DATA,threadID:o})},loadedShareData:function n(o,p){c("MessengerDispatcher").dispatch({type:k.Types.LOADED_SHARE_DATA,threadID:o,attachmentData:p})},removeSharePreview:function n(o){c("MessengerDispatcher").dispatch({type:k.Types.REMOVE_SHARE_PREVIEW,threadID:o})}};function l(n,o){return n.detailView==null}function m(n){var o=c("MessengerURISerializer").deserialize(new(c("URI"))(window.location.href)),p=n(o),q=l(o,p);if(p)c("goURI")(c("MessengerURISerializer").serialize(Object.assign(o,p)),false,q)}f.exports=k}),null);
__d("XChatRemoveParticipantAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/chat/remove_participants/",{elem_id:{type:"String"},uid:{type:"Int"},tid:{type:"String"}})}),null);
__d("XGroupsJoinChatController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/groups/join_chat/",{link_hash:{type:"String"}})}),null);
__d("XMercuryThreadLikeIconController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/mercury/like_icon/",{emoji:{type:"String",defaultValue:""}})}),null);
__d("XMessagingBlockMessagesController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/block_messages/",{})}),null);
__d("XMessagingGroupJoinThroughHashController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/join_through_hash/",{link_hash:{type:"String"}})}),null);
__d("XMessagingGroupJoinThroughPrivateLinkController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/join_through_invite/",{link_hash:{type:"String"}})}),null);
__d("XMessagingGroupJoinableAcceptController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/joinable_accept/",{thread_fbid:{type:"String"},user_id:{type:"Int"}})}),null);
__d("XMessagingGroupJoinableInviteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/joinable_invite/",{thread_fbid:{type:"String"},user_ids:{type:"IntSet"}})}),null);
__d("XMessagingGroupJoinableRejectController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/joinable_reject/",{thread_fbid:{type:"String"},user_id:{type:"Int"}})}),null);
__d("XMessagingGroupSetApprovalController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/set_approval_mode/",{set_mode:{type:"Enum",enumType:0},thread_fbid:{type:"String"}})}),null);
__d("XMessagingSaveAdminsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/save_admins/",{elem_id:{type:"String"},parent_elem_id:{type:"String"},thread_fbid:{type:"String"},admin_ids:{type:"FBIDSet"},add:{type:"Bool",defaultValue:false}})}),null);
__d("XMessagingSaveNicknameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/save_thread_nickname/",{source:{type:"Enum",required:true,enumType:1}})}),null);
__d("XMessagingSaveThreadColorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/save_thread_color/",{source:{type:"Enum",required:true,enumType:1}})}),null);
__d("XMessagingSaveThreadEmojiController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/save_thread_emoji/",{source:{type:"Enum",required:true,enumType:1}})}),null);
__d("XMessagingUnblockMessagesController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/unblock_messages/",{})}),null);
__d("XNFXIgnoreMessagesActionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/nfx/ignore_messages/",{thread_fbid:{type:"Int",required:true},location:{type:"Enum",required:true,enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("XNFXMessengerBlockActionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/nfx/block_messages/",{thread_fbid:{type:"Int",required:true},location:{type:"Enum",required:true,enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("MercuryThreadActions",["cssVar","AsyncDialog","AsyncRequest","EmojiLikeConstants","IgnoreMessagesTypedLogger","MercuryActionType","MercuryAPIArgsSource","MercuryConfig","MercuryDispatcher","MercuryIDs","MercuryLogMessageType","MercuryMessengerBlockingUtils","MercuryPayloadSource","MercuryParticipants","MercuryServerPayloadPreprocessor","MercuryServerRequests","MercurySingletonMixin","MercurySourceType","MercuryThreadIDMap","MercuryThreads","MercuryViewer","MercuryMessageActions","MessengerActions","MercuryMessageObject","MessagingTag","PageCommItemStatus","ReloadPage","URI","XChatRemoveParticipantAsyncController","XGroupsJoinChatController","XMercuryThreadLikeIconController","XMessagingGroupJoinableAcceptController","XMessagingGroupJoinableInviteController","XMessagingGroupJoinableRejectController","XMessagingGroupJoinThroughHashController","XMessagingGroupJoinThroughPrivateLinkController","XMessagingGroupSetApprovalController","XMessagingSaveAdminsController","XMessagingSaveNicknameController","XMessagingSaveThreadColorController","XMessagingSaveThreadEmojiController","XNFXMessengerBlockActionController","XMessagingBlockMessagesController","XMessagingUnblockMessagesController","XNFXIgnoreMessagesActionController","ex"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("MercuryThreadIDMap").get(),j=c("MercuryThreads").get(),k=c("MercuryMessageActions").get(),l=c("MercuryMessageObject").get();function m(n){this.$MercuryThreadActions1=n;this.__serverRequests=c("MercuryServerRequests").getForFBID(this.$MercuryThreadActions1);this.__dispatcher=c("MercuryDispatcher").getForFBID(this.$MercuryThreadActions1);this.__payloadPreprocessor=c("MercuryServerPayloadPreprocessor").getForFBID(this.$MercuryThreadActions1)}m.prototype.markRead=function(n,o){this.batchMarkRead([n],o)};m.prototype.batchMarkRead=function(n,o){this.__dispatcher.handleUpdate(this.$MercuryThreadActions2(n,true,o))};m.prototype.markUnread=function(n,o){this.batchMarkUnread([n],o)};m.prototype.batchMarkUnread=function(n,o){this.__dispatcher.handleUpdate(this.$MercuryThreadActions2(n,false,o))};m.prototype.markSeen=function(n,o){this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c("MercuryActionType").MARK_THREAD_SEEN,c("MercuryPayloadSource").CLIENT_MARK_THREAD_SEEN,{persistent:o}))};m.prototype.archive=function(n,o){this.batchArchive([n],o)};m.prototype.batchArchive=function(n,o){n.forEach(function(p){this.__serverRequests.changeThreadArchivedStatus(p,true,o)}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(n,true))};m.prototype.unarchive=function(n,o){this.batchUnarchive([n],o)};m.prototype.batchUnarchive=function(n,o){n.forEach(function(p){this.__serverRequests.changeThreadArchivedStatus(p,false,o)}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(n,false))};m.prototype.markPageFollowUp=function(n,o){this.batchMarkPageFollowUp([n],o)};m.prototype.batchMarkPageFollowUp=function(n,o){n.forEach(function(p){this.__serverRequests.changeThreadPageFollowUpStatus(p,true,o)}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(n,true))};m.prototype.unmarkPageFollowUp=function(n,o){this.batchUnmarkPageFollowUp([n],o)};m.prototype.batchUnmarkPageFollowUp=function(n,o){n.forEach(function(p){this.__serverRequests.changeThreadPageFollowUpStatus(p,false,o)}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(n,false))};m.prototype.markSpam=function(n,o){this.batchMarkSpam([n],o)};m.prototype.batchMarkSpam=function(n,o){n.forEach(function(p){this.__serverRequests.markThreadSpam(p,o)}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions5(n,c("MessagingTag").SPAM))};m.prototype.unmarkSpam=function(n,o){this.batchUnmarkSpam([n],o)};m.prototype.batchUnmarkSpam=function(n,o){n.forEach(function(p){this.__serverRequests.unmarkThreadSpam(p,o)}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions5(n,c("MessagingTag").INBOX))};m.prototype.changeFolder=function(n,o){this.batchChangeFolder([n],o)};m.prototype.batchChangeFolder=function(n,o){n.forEach(function(p){this.__serverRequests.changeThreadFolder(p,o)}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions5(n,o))};m.prototype["delete"]=function(n,o){this.batchDelete([n],o)};m.prototype.batchDelete=function(n,o){this.__serverRequests.deleteThreads(n,o);this.__dispatcher.handleUpdate(this.__constructClientPayload(n,c("MercuryActionType").DELETE_THREAD,c("MercuryPayloadSource").CLIENT_DELETE_THREAD))};m.prototype.unmute=function(n){this.updateMuteSetting(n,0)};m.prototype.updateMuteSetting=function(n,o){this.__serverRequests.changeMutingOnThread(n,o);this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c("MercuryActionType").CHANGE_MUTE_SETTINGS,c("MercuryPayloadSource").CLIENT_CHANGE_MUTE_SETTINGS,{mute_until:o}))};m.prototype.updateMentionsMuteSetting=function(n,o){var p=o?1:0;this.__serverRequests.changeMentionsMutingOnThread(n,p);this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c("MercuryActionType").CHANGE_MUTE_SETTINGS,c("MercuryPayloadSource").CLIENT_CHANGE_MUTE_SETTINGS,{mentions_mute_mode:p}))};m.prototype.updateReactionsMuteSetting=function(n,o){var p=o?1:0;this.__serverRequests.changeReactionsMutingOnThread(n,p);this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c("MercuryActionType").CHANGE_MUTE_SETTINGS,c("MercuryPayloadSource").CLIENT_CHANGE_MUTE_SETTINGS,{reactions_mute_mode:p}))};m.prototype.blockMessages=function(n,o){__p&&__p();var p="";if(c("MercuryConfig").WMBF)j.getThreadMeta(n,function(r){var s=c("MercuryParticipants").getNow(c("MercuryIDs").getParticipantIDFromUserID(r.other_user_fbid));p=s&&s.short_name});var q=c("XNFXMessengerBlockActionController").getURIBuilder().setInt("thread_fbid",c("MercuryIDs").getUserIDFromThreadID(n)).setEnum("location","www_chat_head").getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(q),function(r){r.subscribe("confirm",function(){r.hide();o&&o(p);if(c("MercuryConfig").WMBF)this.changeFolder(n,c("MessagingTag").OTHER)}.bind(this))}.bind(this))};m.prototype.unblockMessages=function(n){var o=c("MercuryIDs").getUserIDFromThreadID(n);if(o===null)throw new Error(c("ex")("Expected user ID to unblock messages for, got null"));var p=JSON.stringify({reportable_ent_token:o,initial_action_name:c("MercuryMessengerBlockingUtils").block_messages});new(c("AsyncRequest"))(new(c("URI"))("/ajax/nfx/messenger_undo_block").addQueryData({story_location:"messenger",context:p})).send();if(c("MercuryConfig").WMBF)this.changeFolder(n,c("MessagingTag").INBOX)};m.prototype.ignoreMessages=function(n,o){var p=c("XNFXIgnoreMessagesActionController").getURIBuilder().setInt("thread_fbid",n).setEnum("location","www_chat_head").getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(p))};m.prototype.blockOnMessengerDotCom=function(n){var o=c("XMessagingBlockMessagesController").getURIBuilder().getURI();new(c("IgnoreMessagesTypedLogger"))().setEvent("block_confirmed").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(n)).setPlatform("messengerdotcom").log();new(c("AsyncRequest"))(o).setMethod("POST").setData({fbid:c("MercuryIDs").getUserIDFromThreadID(n)}).send()};m.prototype.blockIgnoreOnMessengerDotCom=function(n,o,p){n&&c("MessengerActions").selectThread(null);this.changeFolder(o,c("MessagingTag").OTHER);this.blockOnMessengerDotCom(o);p&&p()};m.prototype.unblockOnMessengerDotCom=function(n){var o=c("XMessagingUnblockMessagesController").getURIBuilder().getURI();new(c("AsyncRequest"))(o).setMethod("POST").setData({fbid:c("MercuryIDs").getUserIDFromThreadID(n)}).send();if(c("MercuryConfig").WMBF)this.changeFolder(n,c("MessagingTag").INBOX)};m.prototype.leaveGroup=function(n){if(!j.isEmptyLocalThread(n))k.send(l.constructLogMessageObject(c("MercurySourceType").TITAN_WEB,n,c("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[c("MercuryViewer").getID()]}),null,c("MercuryAPIArgsSource").WEBMESSENGER)};m.prototype.removeFromGroup=function(n,o){if(!j.isEmptyLocalThread(n)){var p=c("XChatRemoveParticipantAsyncController").getURIBuilder().getURI(),q={tid:n,uid:o};new(c("AsyncRequest"))(p).setMethod("POST").setData(q).send()}};m.prototype.changeThreadColor=function(n,o,p){if(j.isEmptyLocalThread(n))return;i.getServerIDFromClientID(n,function(q){var r={};if(o!="#0084ff")r.color_choice=o;r.thread_or_other_fbid=q;var s=c("XMessagingSaveThreadColorController").getURIBuilder().setEnum("source",p).getURI();new(c("AsyncRequest"))(s).setMethod("POST").setData(r).send()})};m.prototype.changeThreadEmoji=function(n,o,p){if(j.isEmptyLocalThread(n))return;i.getServerIDFromClientID(n,function(q){var r={},s=String.fromCodePoint.apply(String,o);if(s!==String.fromCodePoint(c("EmojiLikeConstants").FB_THUMBS_UP_EMOJI)&&s!==String.fromCodePoint(c("EmojiLikeConstants").THUMBS_UP_EMOJI_CODES))r.emoji_choice=s;r.thread_or_other_fbid=q;var t=c("XMessagingSaveThreadEmojiController").getURIBuilder().setEnum("source",p).getURI();new(c("AsyncRequest"))(t).setMethod("POST").setData(r).send()})};m.prototype.changeThreadNicknames=function(n,o,p,q){if(j.isEmptyLocalThread(n))return;i.getServerIDFromClientID(n,function(r){var s={thread_or_other_fbid:r,participant_id:o,nickname:p},t=c("XMessagingSaveNicknameController").getURIBuilder().setEnum("source",q).getURI();new(c("AsyncRequest"))(t).setMethod("POST").setData(s).send()})};m.prototype.setApprovalMode=function(n,o){var p=c("XMessagingGroupSetApprovalController").getURIBuilder().getURI();new(c("AsyncRequest"))(p).setMethod("POST").setData({set_mode:n,thread_fbid:o.thread_fbid}).send()};m.prototype.changeGroupAdmins=function(n,o,p){var q={thread_fbid:n,admin_ids:o,add:p},r=c("XMessagingSaveAdminsController").getURIBuilder().getURI();new(c("AsyncRequest"))(r).setMethod("POST").setData(q).send()};m.prototype.joinThroughHash=function(n){var o={link_hash:n},p=c("XMessagingGroupJoinThroughHashController").getURIBuilder().getURI();new(c("AsyncRequest"))(p).setMethod("POST").setData(o).send()};m.prototype.joinThroughPrivateLink=function(n){var o={link_hash:n},p=c("XMessagingGroupJoinThroughPrivateLinkController").getURIBuilder().getURI();new(c("AsyncRequest"))(p).setMethod("POST").setData(o).send()};m.prototype.chatJoinThroughHash=function(n){var o={link_hash:n},p=c("XGroupsJoinChatController").getURIBuilder().getURI();new(c("AsyncRequest"))(p).setMethod("POST").setData(o).setHandler(function(q){return c("ReloadPage").now()}).send()};m.prototype.inviteToJoinableGroup=function(n,o){var p={thread_fbid:n,user_ids:o},q=c("XMessagingGroupJoinableInviteController").getURIBuilder().getURI();new(c("AsyncRequest"))(q).setMethod("POST").setData(p).send()};m.prototype.acceptToJoinableGroup=function(n,o){var p={thread_fbid:n,user_id:o},q=c("XMessagingGroupJoinableAcceptController").getURIBuilder().getURI();new(c("AsyncRequest"))(q).setMethod("POST").setData(p).send()};m.prototype.rejectToJoinableGroup=function(n,o){var p={thread_fbid:n,user_id:o},q=c("XMessagingGroupJoinableRejectController").getURIBuilder().getURI();new(c("AsyncRequest"))(q).setMethod("POST").setData(p).send()};m.prototype.addParticipants=function(n,o){this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c("MercuryActionType").ADD_PARTICIPANTS,c("MercuryPayloadSource").CLIENT_ADD_PARTICIPANTS,{participants:o}))};m.prototype.updateCustomLike=function(n,o){var p=c("XMercuryThreadLikeIconController").getURIBuilder().setString("emoji",o).getURI();new(c("AsyncRequest"))().setURI(p).setHandler(function(q){this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c("MercuryActionType").UPDATE_CUSTOM_LIKE,c("MercuryPayloadSource").CLIENT_CHANGE_CUSTOM_LIKE,{custom_like:q.getPayload()}))}.bind(this)).send()};m.prototype.movePendingToInbox=function(n){this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c("MercuryActionType").MOVE_PENDING_TO_INBOX,c("MercuryPayloadSource").CLIENT_MOVE_PENDING_TO_INBOX))};m.prototype.updateSnippet=function(n,o){this.__dispatcher.handleUpdate(this.__constructClientPayload([n],c("MercuryActionType").UPDATE_SNIPPET,c("MercuryPayloadSource").CLIENT_UPDATE_SNIPPET,{deleted_ids:o}))};m.prototype.updateCommStatus=function(n,o){this.__dispatcher.handleUpdate(this.$MercuryThreadActions6(n,o));var p=o===c("PageCommItemStatus").DONE;this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(n,p))};m.prototype.updateCommItemOwner=function(n,o,p,q){this.__dispatcher.handleUpdate(this.$MercuryThreadActions7(n,o,p,q))};m.prototype.$MercuryThreadActions2=function(n,o,p){return this.__constructClientPayload(n,c("MercuryActionType").CHANGE_READ_STATUS,c("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS,{mark_as_read:o,source:p})};m.prototype.$MercuryThreadActions7=function(n,o,p,q){return this.__constructClientPayload(n,c("MercuryActionType").UPDATE_COMM_ITEM_OWNER,c("MercuryPayloadSource").UPDATE_COMM_ITEM_OWNER,{id:p,name:o,profile_pic_uri:q})};m.prototype.$MercuryThreadActions3=function(n,o){return this.__constructClientPayload(n,c("MercuryActionType").CHANGE_ARCHIVED_STATUS,c("MercuryPayloadSource").CLIENT_CHANGE_ARCHIVED_STATUS,{archived:o})};m.prototype.$MercuryThreadActions4=function(n,o){return this.__constructClientPayload(n,c("MercuryActionType").CHANGE_PAGE_FOLLOW_UP_STATUS,c("MercuryPayloadSource").CLIENT_CHANGE_PAGE_FOLLOW_UP_STATUS,{is_page_follow_up:o})};m.prototype.$MercuryThreadActions6=function(n,o){return this.__constructClientPayload(n,c("MercuryActionType").UPDATE_COMM_STATUS,c("MercuryPayloadSource").CLIENT_UPDATE_COMM_STATUS,{comm_status:o})};m.prototype.$MercuryThreadActions5=function(n,o){return this.__constructClientPayload(n,c("MercuryActionType").CHANGE_FOLDER,c("MercuryPayloadSource").CLIENT_CHANGE_FOLDER,{new_folder:o})};m.prototype.__constructClientPayload=function(n,o,p,q){return{actions:n.map(function(r){return babelHelpers["extends"]({action_type:o,thread_id:r},q)}),from_client:true,payload_source:p}};Object.assign(m,c("MercurySingletonMixin"));f.exports=m}),null);
__d("MessagesViewerSetID",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"})}),null);
__d("PhotoStoreCore",[],(function a(b,c,d,e,f,g){__p&&__p();var h={actions:{UPDATE:"update"},_photoCache:{},_postCreateCallbacks:{},getPhotoCache:function i(j){if(!this._photoCache[j])throw new Error("Photo cache requested for unknown set ID");return this._photoCache[j]},hasBeenCreated:function i(j){return!!this._photoCache[j]},clearSetCache:function i(j){delete this._photoCache[j];delete this._postCreateCallbacks[j]},getByIndex:function i(j,k,l){this.getPhotoCache(j).getItemAtIndex(k,l)},getByIndexImmediate:function i(j,k){if(this._photoCache[j])return this._photoCache[j].getItemAtIndexImmediate(k);return undefined},getItemsInAvailableRange:function i(j){var k=this.getAvailableRange(j),l=[];for(var m=k.offset;m<k.length;m++)l.push(this.getByIndexImmediate(j,m));return l},getItemsAfterIndex:function i(j,k,l,m){var n=this.getCursorByIndexImmediate(j,k);this.fetchForward(j,n,l,m)},getAllByIDImmediate:function i(j){var k=Object.keys(this._photoCache);return k.map(function(l){return this.getByIndexImmediate(l,this.getIndexForID(l,j))}.bind(this)).filter(function(l){return!!l})},getIndexForID:function i(j,k){if(this._photoCache[j])return this._photoCache[j].getIndexForID(k);return undefined},getEndIndex:function i(j){var k=this.getAvailableRange(j);return k.offset+k.length-1},getCursorByIndexImmediate:function i(j,k){var l=this.getByIndexImmediate(j,k);if(l)return this._photoCache[j].getCursorForID(l.id);return undefined},hasNextPage:function i(j){var k=this.getCursorByIndexImmediate(j,this.getEndIndex(j));return this.getPhotoCache(j).hasNextPage(k)},getAvailableRange:function i(j){return this.getPhotoCache(j).getAvailableRange()},hasLooped:function i(j){return this.getPhotoCache(j).hasLooped()},fetchForward:function i(j,k,l,m){this.getPhotoCache(j).getItemsAfterCursor(k,l,m)},fetchBackward:function i(j,k,l,m){this.getPhotoCache(j).getItemsBeforeCursor(k,l,m)},executePostCreate:function i(j,k){if(this._photoCache[j])k&&k();else this._postCreateCallbacks[j]=k},runPostCreateCallback:function i(j){var k=this._postCreateCallbacks[j];if(k){k();delete this._postCreateCallbacks[j]}},setPreFetchCallback:function i(j,k){this.getPhotoCache(j).setPreFetchCallback(k)},updateData:function i(j){var k=j.set_id;if(!this._photoCache[k]){this._photoCache[k]=new j.cache_class(j);this.runPostCreateCallback(k)}else if(j.query_metadata.action==h.actions.UPDATE)this._photoCache[k].updateData(j);else this._photoCache[k].addData(j)},updateFeedbackData:function i(j){var k=Object.keys(j);k.forEach(function(l){return h.getAllByIDImmediate(l).forEach(function(m){m.feedback=j[l].feedback})})},reset:function i(){Object.keys(this._photoCache).forEach(function(j){return this.clearSetCache(j)}.bind(this))}};f.exports=h}),null);
__d("PhotoStore",["Arbiter","PhotoStoreCore"],(function a(b,c,d,e,f,g){c("Arbiter").subscribe("update-photos",function(h,i){c("PhotoStoreCore").updateData(i)});f.exports=c("PhotoStoreCore")}),null);
__d("MessagesViewer",["AsyncRequest","DOM","MessagesViewerSetID","PhotoStore","React","ReactDOM","emptyFunction","ge"],(function a(b,c,d,e,f,g){__p&&__p();var h={renderSpotlight:function j(k,l,m,n){__p&&__p();var o=k.setID;if(!o)o=c("MessagesViewerSetID").MESSAGES;i(c("React").createElement(m,{actorid:k.actorid,dimensions:[k.dimensions],disablepaging:k.disablePaging,disableForward:k.disableForward,forwardDialogComponent:n,open:true,photoid:k.fbid,reverse:false,rootClassName:k.rootClassName,setid:o,snapToPhoto:k.snapToPhoto,thumbsrc:k.src}));if(!c("PhotoStore").hasBeenCreated(o)&&k.endpoint){var p=new(c("AsyncRequest"))(k.endpoint);if(l)p.setRelativeTo(l);p.send()}},renderVideo:function j(k){i(k)}};function i(j){var k=c("ge")("messages_viewer");if(!k){k=c("DOM").create("div",{id:"messages_viewer"});document.body.appendChild(k)}c("ReactDOM").render(j,k,function(){this.subscribeOnce("close",function(){c("ReactDOM").unmountComponentAtNode(k)})})}f.exports=h}),null);
__d("MercuryAttachmentViewer",["Bootloader","MessagesViewer","React","Run","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";var h={renderVideo:function i(j){c("Bootloader").loadModules(["MessagingVideoViewer.react","MessagingForwardAttachmentDialog.react"],function(k,l){c("MessagesViewer").renderVideo(c("React").createElement(k,babelHelpers["extends"]({},j,{forwardDialogComponent:l})))},"MercuryAttachmentViewer")},bootstrapWithConfig:function i(j,k){c("Bootloader").loadModules(["SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],function(l,m){c("MessagesViewer").renderSpotlight(j,k,l,m)},"MercuryAttachmentViewer")},preload:function i(){c("Run").onAfterLoad(function(){c("Bootloader").loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessagingForwardAttachmentDialog.react"],c("emptyFunction"),"MercuryAttachmentViewer")})}};f.exports=h}),null);
__d("ChatActivity",["Arbiter","Event","JSLogger","MercuryConfig","PresenceState","UserActivity"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("MercuryConfig").activity_limit||6e4,i=c("MercuryConfig").idle_limit||18e5,j=c("MercuryConfig").idle_poll_interval||3e5,k=c("JSLogger").create("chat_activity"),l=Date.now(),m=true;function n(){var r=Date.now();return!!(m&&r-l<h)}var o=Object.assign(new(c("Arbiter"))(),{isActive:n});function p(){var r=l;l=Date.now();if(l-r>i){k.debug("idle_to_active",r);c("PresenceState").doSync()}o.inform("activity")}c("Event").listen(window,"focus",function(){m=true;p()});c("Event").listen(window,"blur",function(){m=false});c("UserActivity").subscribe(function(){p()});function q(r){var s=r&&r.at&&c("PresenceState").verifyNumber(r.at);if(typeof s!=="number")s=null;return s||0}setInterval(function(){var r=Date.now(),s=q(c("PresenceState").get()),t=Math.max(l,s);if(r-t>i){k.debug("idle",{cookie:s,local:l});o.inform("idle",r-t)}},j);c("PresenceState").registerStateStorer(function(r){var s=q(r);if(s<l)r.at=l;return r});c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(r,s){s.chat_activity={activity_limit:h,idle_limit:i,idle_poll_interval:j,last_active_time:l}});f.exports=o}),null);
__d("MessengerFluxReduceDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=new j({strict:false})}),null);
__d("MessengerSharedMediaActions",["MessengerFluxReduceDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({CURRENT_LOADED:null,DELETE_PHOTOS:null,LATEST_LOADED:null,LOAD_CURRENT:null,LOAD_MORE_LATEST:null,LOAD_MORE_PREVIOUS:null,PREVIOUS_LOADED:null}),i="MessengerSharedMedia",j={Types:h,Namespace:i,currentLoaded:function k(l){c("MessengerFluxReduceDispatcher").dispatch({type:h.CURRENT_LOADED,namespace:i,data:l})},deletePhotos:function k(l,m){c("MessengerFluxReduceDispatcher").dispatch({type:h.DELETE_PHOTOS,namespace:i,threadFBID:l,photoFBIDs:m})},loadCurrent:function k(l,m){c("MessengerFluxReduceDispatcher").dispatch({type:h.LOAD_CURRENT,namespace:i,threadFBID:l,photoID:m})},loadMorePrevious:function k(l,m,n){c("MessengerFluxReduceDispatcher").dispatch({type:h.LOAD_MORE_PREVIOUS,namespace:i,threadFBID:l,afterCursor:m,first:n})},loadMoreLatest:function k(l,m,n){c("MessengerFluxReduceDispatcher").dispatch({type:h.LOAD_MORE_LATEST,namespace:i,threadFBID:l,beforeCursor:m,last:n})},previousLoaded:function k(l){c("MessengerFluxReduceDispatcher").dispatch({type:h.PREVIOUS_LOADED,namespace:i,data:l})},latestLoaded:function k(l){c("MessengerFluxReduceDispatcher").dispatch({type:h.LATEST_LOADED,namespace:i,data:l})}};f.exports=j}),null);
__d("MercuryMessages",["invariant","BanzaiODS","ChatReliabilityInstrumentation","EventEmitter","FBJSON","ImmutableObject","LogHistory","MercuryActionStatus","MercuryActionType","MercuryAssert","MercuryAttachment","MercuryDispatcher","MercuryIDs","MercuryLogMessageType","MercuryMessageClientState","MercuryPayloadSource","MercurySingletonProvider","MercuryMessageActions","MercuryMessageIDs.bs","MessagingGiftWrapConstants","MessengerSharedMediaActions","RangedCallbackManager","MercurySendMessageFields","MercuryServerRequests","MercuryThreadActions","MercuryThreadInformer","MercuryThreads","URI","gkx","isMessengerDotComURI","setImmediate"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=new(c("EventEmitter"))(),j=c("LogHistory").getInstance("mercury_messages");function k(p){switch(p){case c("MercuryPayloadSource").UNKNOWN:case c("MercuryPayloadSource").SERVER_INITIAL_DATA:case c("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO:case c("MercuryPayloadSource").SERVER_THREAD_SYNC:return true}return false}l.getForFBID=function(p){return o.getForFBID(p)};l.get=function(){return o.get()};function l(p){__p&&__p();this.$MercuryMessages1=p;this.$MercuryMessages2=c("MercuryMessageActions").getForFBID(this.$MercuryMessages1);this.$MercuryMessages3=c("MercuryServerRequests").getForFBID(this.$MercuryMessages1);this.$MercuryMessages4=c("MercuryThreadInformer").getForFBID(this.$MercuryMessages1);this.$MercuryMessages5=c("MercuryThreads").getForFBID(this.$MercuryMessages1);this.$MercuryMessages6=c("MercuryThreadActions").getForFBID(this.$MercuryMessages1);this.$MercuryMessages7=c("MercuryDispatcher").getForFBID(this.$MercuryMessages1);this.$MercuryMessages8=false;this.$MercuryMessages9={};this.$MercuryMessages10={};this.$MercuryMessages11={};this.$MercuryMessages12=new Map();this.$MercuryMessages13={};this.$MercuryMessages14={};this.$MercuryMessages7.subscribe("update-messages",function(q,r){__p&&__p();var s=(r.actions||[]).filter(function(u){var v=u.action_type,w=u.thread_id&&(v==c("MercuryActionType").LOG_MESSAGE||v==c("MercuryActionType").USER_GENERATED_MESSAGE||v==c("MercuryActionType").SEND_MESSAGE||v==c("MercuryActionType").DELETE_THREAD||v==c("MercuryActionType").DELETE_MESSAGES),x=u.upload_id&&u.upload_data&&(v==c("MercuryActionType").CANCEL_ATTACHMENT_PLACEHOLDER||v==c("MercuryActionType").CONFIRM_ATTACHMENT_PLACEHOLDER),y=v==c("MercuryActionType").REACTION_UPDATE,z=v==c("MercuryActionType").MONTAGE_DIRECT_EXPIRE,A=v==c("MercuryActionType").LIVE_LOCATION_UPDATE,B=u.replaced_message_id&&v==c("MercuryActionType").REPLACE_MESSAGE,C=u.unwrapped_message_id&&v==c("MercuryActionType").UNWRAP_MESSAGE;return w||x||y||A||B||C||z}),t=k(r.payload_source);this.handleUpdates(s,t,r.payload_source,r.from_client);if(r.end_of_history)this.$MercuryMessages15(r.end_of_history,r.payload_source);if(this.$MercuryMessages8){this.$MercuryMessages8=false;i.emit("change")}}.bind(this));this.$MercuryMessages7.subscribe("invalidate-thread-state",function(q,r){this.$MercuryMessages16(r)}.bind(this));this.$MercuryMessages7.subscribe("invalidate-global-state",function(){return this.invalidateGlobalState()}.bind(this));j.debug("constructed",JSON.stringify({fbid:this.$MercuryMessages1}))}l.prototype.getMessagesFromIDs=function(p){return(p||[]).map(function(q){return this.$MercuryMessages17(q)}.bind(this)).filter(function(q){return q})};l.prototype.getServerMessageID=function(p){var q=p;if(this.$MercuryMessages13[p])q=this.$MercuryMessages13[p];return q};l.prototype.hasLoadedNMessages=function(p,q){var r=this.$MercuryMessages18(p);return r.hasReachedEndOfArray()||r.getCurrentArraySize()>=q};l.prototype.hasLoadedExactlyNMessages=function(p,q){var r=this.$MercuryMessages18(p);return r.getCurrentArraySize()==q};l.prototype.invalidateGlobalState=function(){var p=Object.keys(this.$MercuryMessages10);this.$MercuryMessages9={};this.$MercuryMessages10={};this.$MercuryMessages11={};this.$MercuryMessages12=new Map();this.$MercuryMessages13={};p.map(function(q){return this.$MercuryMessages4.invalidatedThread(q)}.bind(this))};l.prototype.getThreadMessagesRange=function(p,q,r,s,t,u){var v=this.$MercuryMessages18(p),w=function(G){s(this.$MercuryMessages19(G))}.bind(this),x=v.executeOrEnqueue(q,r,w),y=v.getUnavailableResources(x),z=this.$MercuryMessages9[p];if(y.length&&!z){var A=v.getCurrentArraySize(),B=this.$MercuryMessages11[p]||0,C=A-B,D=y.length+B,E=this.getCurrentlyLoadedMessages(p),F=E.length?E[0].timestamp:null;this.$MercuryMessages3.fetchThreadMessages(p,C,D,F,t,u)}else this.$MercuryMessages9[p]=false;return x};l.prototype.getThreadMessagesRangeNow=function(p,q,r){var s=this.$MercuryMessages18(p),t=[];for(var u=q;u<q+r;u++){var v=s.getResourceAtIndex(u),w=v&&this.$MercuryMessages17(v);w&&t.push(w)}return t};l.prototype.getThreadMessagesSinceTimestamp=function(p,q){var r=this.$MercuryMessages18(p),s=r.getElementsUntil(q);return this.$MercuryMessages19(s)};l.prototype.hasLoadedAllMessages=function(p){return this.$MercuryMessages18(p).hasReachedEndOfArray()};l.prototype.getCurrentlyLoadedMessages=function(p){var q=this.$MercuryMessages18(p).getAllResources();return this.$MercuryMessages19(q)};l.prototype.unsubscribe=function(p,q){c("MercuryAssert").isThreadID(q);var r=this.$MercuryMessages18(q);r.unsubscribe(p)};l.prototype.$MercuryMessages20=function(p,q){n(q);this.$MercuryMessages12.set(p,new(c("ImmutableObject"))(q))};l.prototype.$MercuryMessages21=function(p,q){__p&&__p();var r=this.$MercuryMessages12.get(p);if(r){var s=r.page_admin_notes?r.page_admin_notes.slice():[],t=false,u=true;for(var v=0;v<s.length;++v)if(s[v].id===q.id){t=true;u=false;break}else if((s[v].id===null||s[v].id===undefined)&&s[v].body===q.body){t=true;s[v]=q}if(!t)s.push(q);if(u){var w={};w.page_admin_notes=s;this.$MercuryMessages22(p,r,w)}}};l.prototype.$MercuryMessages22=function(p,q,r){var s=c("ImmutableObject").set(q,r);this.$MercuryMessages12.set(p,s);return s};l.prototype.$MercuryMessages23=function(p,q,r){__p&&__p();if(p==c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE){var s=this.getThreadMessagesSinceTimestamp(q,r);if(s.length>0){c("BanzaiODS").bumpEntityKey("chat.web","channel.messages_reordered");return true}}else if(p===c("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE||p===c("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)return true;return false};l.prototype.$MercuryMessages24=function(p,q){__p&&__p();var r=p.action_type;if(q==c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE&&r==c("MercuryActionType").USER_GENERATED_MESSAGE&&p.offline_threading_id&&this.$MercuryMessages13[p.offline_threading_id]===p.offline_threading_id){p.client_message_id=p.offline_threading_id;p.status=c("MercuryActionStatus").SUCCESS;p.action_type=c("MercuryActionType").SEND_MESSAGE;r=p.action_type}if(q===c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE&&r==c("MercuryActionType").USER_GENERATED_MESSAGE){var s=this.$MercuryMessages5.getThreadMetaNow(p.thread_id);if(s&&s.folder)p.folder=s.folder;c("ChatReliabilityInstrumentation").logMESSAGE_RECEIVED(c("FBJSON").stringify({otid:p.offline_threading_id,message_id:p.message_id,other_user_fbid:p.other_user_fbid,viewer_page_fbid:!s||!s.page_thread_info?null:s.page_thread_info.pageID}))}return p};l.prototype.handleUpdates=function(p,q,r,s){__p&&__p();var t=void 0,u={};for(var v=0;v<p.length;v++){var w=this.$MercuryMessages24(p[v],r),x=w.action_type,y=w.message_id?this.$MercuryMessages17(w.message_id):null;if(x==c("MercuryActionType").LOG_MESSAGE)if(this.isLocalMessage(w))continue;if(r==c("MercuryPayloadSource").SERVER_SEARCH){if(!this.$MercuryMessages12.has(w.message_id))this.$MercuryMessages20(w.message_id,w);continue}else if(w.client_state===c("MercuryMessageClientState").SEND_TO_SERVER){this.$MercuryMessages20(w.message_id,w);continue}else if(x==c("MercuryActionType").SEND_MESSAGE){var z=w.client_message_id,A=this.$MercuryMessages17(z);if(z&&A&&w.status){var B=A.status;if(A.status==c("MercuryActionStatus").SUCCESS)continue;if(!u[w.thread_id])u[w.thread_id]=[];this.$MercuryMessages25(w);if(typeof B!==undefined||w.status==c("MercuryActionStatus").FAILED_UNKNOWN_REASON||w.status==c("MercuryActionStatus").UNABLE_TO_CONFIRM||w.status==c("MercuryActionStatus").SUCCESS||w.status==c("MercuryActionStatus").ERROR){var C=this.$MercuryMessages17(z);if(C)this.$MercuryMessages26(w.thread_id,C.message_id,r)}}continue}else if(x==c("MercuryActionType").DELETE_THREAD){this.$MercuryMessages18(w.thread_id).removeAllResources();continue}else if(x==c("MercuryActionType").DELETE_MESSAGES){this.$MercuryMessages27(w.thread_id,w.message_ids,r);c("setImmediate")(function(){this.$MercuryMessages6.updateSnippet(w.thread_id,w.message_ids)}.bind(this));continue}else if(x===c("MercuryActionType").REACTION_UPDATE){if(this.$MercuryMessages28(w))this.$MercuryMessages29(u,w,r);continue}else if(x===c("MercuryActionType").MONTAGE_DIRECT_EXPIRE){if(this.$MercuryMessages30(w))this.$MercuryMessages29(u,w,r);continue}else if(x===c("MercuryActionType").LIVE_LOCATION_UPDATE){if(this.$MercuryMessages31(w))this.$MercuryMessages29(u,w,r);continue}else if(x==c("MercuryActionType").REPLACE_MESSAGE){if(this.$MercuryMessages32(w)){this.$MercuryMessages29(u,w,r);q=true}continue}else if(w.offline_threading_id&&this.$MercuryMessages13[w.offline_threading_id]&&(r!=c("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO||this.$MercuryMessages13[w.offline_threading_id]===w.message_id)||y){if(y&&w.ranges&&w.ranges.length>0){var D=y.message_id;this.$MercuryMessages22(this.$MercuryMessages13[D]||D,y,{ranges:w.ranges});this.$MercuryMessages26(y.thread_id,y.message_id,"link_shim")}continue}else if(x===c("MercuryActionType").CONFIRM_ATTACHMENT_PLACEHOLDER){this.$MercuryMessages33(w.upload_id,w.upload_data);continue}else if(x===c("MercuryActionType").CANCEL_ATTACHMENT_PLACEHOLDER){this.$MercuryMessages34(w.upload_id,w.upload_data);continue}else if(x==c("MercuryActionType").UNWRAP_MESSAGE){if(this.$MercuryMessages35(w))this.$MercuryMessages26(w.thread_id,w.unwrapped_message_id,r)}else{if(r===c("MercuryPayloadSource").CLIENT_SEND_MESSAGE){this.$MercuryMessages13[w.message_id]=w.message_id;if(w.thread_id=="root:"+w.offline_threading_id)this.$MercuryMessages18(w.thread_id).setReachedEndOfArray()}if(x==c("MercuryActionType").LOG_MESSAGE&&w.log_message_type==c("MercuryLogMessageType").SERVER_ERROR)this.$MercuryMessages9[w.thread_id]=true;if(w.client_state===c("MercuryMessageClientState").DO_NOT_SEND_TO_SERVER&&w.upload_id)this.$MercuryMessages14[w.upload_id]=w;if(!u[w.thread_id])u[w.thread_id]=[];u[w.thread_id].push(w.message_id);this.$MercuryMessages20(w.message_id,w);if(w.offline_threading_id&&w.offline_threading_id!=w.message_id){this.$MercuryMessages13[w.offline_threading_id]=w.message_id;c("MercuryMessageIDs.bs").addServerID(w.offline_threading_id,w.message_id);if(w.threading_id)c("MercuryMessageIDs.bs").addServerID(w.threading_id,w.message_id)}if(w[c("MercurySendMessageFields").MANUAL_RETRY_CNT]>0){t=this.$MercuryMessages18(w.thread_id);t.resortResources([w.message_id]);this.$MercuryMessages36(w.thread_id,c("MercuryPayloadSource").CLIENT_SEND_MESSAGE)}q=q||this.$MercuryMessages23(r,w.thread_id,w.timestamp);if(!q){var E=this.$MercuryMessages17(w.message_id);if(E)this.$MercuryMessages37(E)}continue}}for(var F in u){t=this.$MercuryMessages18(F);var G=t.getAllResources(),H=G.filter(function(D){var I=this.$MercuryMessages12.get(D);if(!I)return true;return I.action_type==c("MercuryActionType").LOG_MESSAGE&&I.log_message_type==c("MercuryLogMessageType").SERVER_ERROR}.bind(this));t.removeResources(H);if(s)this.$MercuryMessages38(F,u[F]);if(q){t.addResources(u[F]);this.$MercuryMessages36(F,r)}else t.addResourcesWithoutSorting(u[F].reverse(),0);this.$MercuryMessages4.updatedThread(F)}};l.prototype.$MercuryMessages29=function(p,q,r){var s=q.message_id||q.messageId;if(!p[q.thread_id])p[q.thread_id]=[];this.$MercuryMessages18(q.thread_id).removeResources([q.replaced_message_id,q.offline_threading_id]);if(q.action_type!==c("MercuryActionType").REACTION_UPDATE&&q.action_type!==c("MercuryActionType").LIVE_LOCATION_UPDATE&&q.action_type!==c("MercuryActionType").MONTAGE_DIRECT_EXPIRE)p[q.thread_id].push(s);if(q.replaced_message_id)this.$MercuryMessages26(q.thread_id,q.replaced_message_id,r);this.$MercuryMessages26(q.thread_id,s,r)};l.prototype.isFirstMessage=function(p){var q=this.$MercuryMessages18(p.thread_id);if(q.getCurrentArraySize()===0)return false;var r=q.getResourceAtIndex(q.getCurrentArraySize()-1),s=this.$MercuryMessages17(r),t=s&&s.message_id,u=this.$MercuryMessages17(p.message_id),v=u&&u.message_id;if(!t||!v)return false;return q.hasReachedEndOfArray()&&t==v};l.prototype.isLocalMessage=function(p){if(p.offline_threading_id!==null&&p.offline_threading_id===p.message_id)return true;return false};l.prototype.$MercuryMessages27=function(p,q,r){__p&&__p();if(!q.length)return;this.$MercuryMessages39(p,q,r);if(r!==c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)this.$MercuryMessages3.deleteMessages(p,q);var s=this.$MercuryMessages19(q);for(var t=0;t<s.length;t++){var u=s[t];if(u&&u.has_attachment){var v=u.attachments.map(function(w){if(c("MercuryAttachment").isPhotoAttachment(w)||c("MercuryAttachment").isVideoAttachment(w))return w.metadata.fbid;return null}).filter(function(w){return w!==null});c("MessengerSharedMediaActions").deletePhotos(c("MercuryIDs").getThreadFBIDFromThreadID(u.thread_id),v)}}};l.prototype.$MercuryMessages39=function(p,q,r){var s=q.map(function(u){var v=this.$MercuryMessages17(u);return v&&v.message_id}.bind(this)).filter(function(u){return!!u}),t=this.$MercuryMessages18(p);t.removeResources(s);this.$MercuryMessages36(p,r)};l.prototype.$MercuryMessages25=function(p){__p&&__p();var q=p.client_message_id;if(!q)return false;var r=this.$MercuryMessages17(q);if(!r)return false;var s={};s.status=p.status;if(p.status===c("MercuryActionStatus").SUCCESS||p.error_data)s.error_data=p.error_data;var t=p.message_id;if(this.$MercuryMessages12.has(t)){if(r)this.$MercuryMessages22(t,r,s);return false}if(p.threading_id)s.threading_id=p.threading_id;if(p.timestamp)s.timestamp=p.timestamp;if(p.log_message_data)s.log_message_data=p.log_message_data;if(p.ranges&&p.ranges.length){n(p);s.ranges=p.ranges}if(p.attachments&&p.attachments.length){s.raw_attachments=null;s.attachments=p.attachments}this.$MercuryMessages13[q]=t;c("MercuryMessageIDs.bs").addServerID(q,t);if(r){var u=this.$MercuryMessages22(t,r,s);this.$MercuryMessages12.set(q,new(c("ImmutableObject"))());if(m(u))this.$MercuryMessages11[u.thread_id]--}return true};l.prototype.$MercuryMessages28=function(p){var q,r=p.messageId,s=p.reaction,t=p.userId,u=this.$MercuryMessages17(r);if(!u)return false;var v=babelHelpers["extends"]({},u.reactions,(q={},q[t]=s,q));if(!s)delete v[t];this.$MercuryMessages22(r,u,{reactions:v});return true};l.prototype.$MercuryMessages30=function(p){__p&&__p();if(!c("gkx")("AT5MAotH6BG7mXo4DyZnW3seA7_jf32c8tGX1llmkbXJ5ui_oKs0jpz-iYum9Gkv1o7pv5ZMvW9WlaNx_vA1ZSmAhi0Rjb62jJA5vu2Oz81AxQ"))return false;var q=p.messageId,r=this.$MercuryMessages17(q);if(!r||!r.attachments||r.attachments.length!==1)return false;var s=r.attachments[0];if(!s||!s.share)return false;var t=s.share.media;if(!t)return false;var u=s.share.target;if(!u||!u.message_state)return false;var v=babelHelpers["extends"]({},s,{share:babelHelpers["extends"]({},s.share,{media:babelHelpers["extends"]({},t,{image:null,source:null}),target:babelHelpers["extends"]({},u,{message_state:"EXPIRED",blob_media:null,image:null})})});this.$MercuryMessages22(q,r,{attachments:[v]});return true};l.prototype.$MercuryMessages31=function(p){__p&&__p();var q=p.messageId,r=p.liveLocation,s=this.$MercuryMessages17(q);if(!s||!s.attachments||s.attachments.length!==1)return false;var t=s.attachments[0];if(!t||!t.share)return false;var u=t.share.target;if(!u||!u.live_location_id)return false;var v=babelHelpers["extends"]({},t,{share:babelHelpers["extends"]({},t.share,{target:babelHelpers["extends"]({},r,{live_location_id:u.live_location_id})})});this.$MercuryMessages22(q,s,{attachments:[v]});return true};l.prototype.$MercuryMessages32=function(p){__p&&__p();var q=p.replaced_message_id;if(!q)return false;var r=this.$MercuryMessages17(q);if(!r)return false;var s=p.message_id,t={};if(p.status)t.status=p.status;if(p.timestamp&&s!==q)t.timestamp=p.timestamp;if(p.log_message_data)t.log_message_data=p.log_message_data;if(p.ranges&&p.ranges.length){n(p);t.ranges=p.ranges}if(p.meta_ranges)t.meta_ranges=p.meta_ranges;if(p.attachments&&p.attachments.length){t.raw_attachments=null;t.attachments=p.attachments}if(p.body&&p.body!==r.body)t.body=p.body;if(p.platform_xmd&&p.platform_xmd!==r.platform_xmd)t.platform_xmd=p.platform_xmd;if(p.profile_ranges&&p.profile_ranges!==r.profile_ranges)t.profile_ranges=p.profile_ranges;if(Object.keys(t).length===0)return false;c("MercuryMessageIDs.bs").addServerID(s,s);this.$MercuryMessages22(s,r,t);if(q!==s){this.$MercuryMessages12["delete"](q);if(r.message_id&&this.$MercuryMessages12.has(r.message_id))this.$MercuryMessages12["delete"](r.message_id)}return true};l.prototype.$MercuryMessages35=function(p){var q=this.$MercuryMessages17(p.unwrapped_message_id);if(!q||!q.tags)return false;var r=q.tags.slice(0);r.push(c("MessagingGiftWrapConstants").UNWRAPPED_TAG);var s={tags:r};this.$MercuryMessages22(p.unwrapped_message_id,q,s);return true};l.prototype.getNumberLocalMessages=function(p){return this.$MercuryMessages11[p]||0};l.prototype.$MercuryMessages33=function(p,q){var r=this.$MercuryMessages40(p,q);delete r.preview_attachments;this.$MercuryMessages3.sendNewMessage(r)};l.prototype.$MercuryMessages34=function(p,q){var r=this.$MercuryMessages40(p,q);this.$MercuryMessages39(r.thread_id,[r.message_id]);if(this.$MercuryMessages11[r.thread_id])this.$MercuryMessages11[r.thread_id]--};l.prototype.$MercuryMessages40=function(p,q){__p&&__p();var r=this.$MercuryMessages14[p];r||h(0);r.image_ids=q.image_ids;r.file_ids=q.file_ids;r.audio_ids=q.audio_ids;r.gif_ids=q.gif_ids;r.video_ids=q.video_ids;r.client_state=c("MercuryMessageClientState").SEND_TO_SERVER;delete this.$MercuryMessages14[p];return r};l.prototype.$MercuryMessages26=function(p,q,r){this.$MercuryMessages8=true;this.$MercuryMessages4.updatedMessage(p,q,r)};l.prototype.$MercuryMessages37=function(p){this.$MercuryMessages8=true;this.$MercuryMessages4.receivedMessage(p)};l.prototype.$MercuryMessages36=function(p,q){this.$MercuryMessages8=true;this.$MercuryMessages4.reorderedMessages(p,q)};l.prototype.$MercuryMessages16=function(p){__p&&__p();if(!this.$MercuryMessages10[p])return;var q=this.$MercuryMessages10[p].getAllResources();q.forEach(function(r){__p&&__p();var s=this.$MercuryMessages17(r),t=undefined;if(s)t=s.offline_threading_id;this.$MercuryMessages12["delete"](r);if(t){var u=this.$MercuryMessages13[t];if(u)this.$MercuryMessages12["delete"](u);delete this.$MercuryMessages13[t]}delete this.$MercuryMessages13[r]}.bind(this));delete this.$MercuryMessages10[p]};l.addListener=function(p,q){return i.addListener(p,q)};l.prototype.$MercuryMessages17=function(p){var q=p;if(this.$MercuryMessages13[p])q=this.$MercuryMessages13[p];return this.$MercuryMessages12.get(q)};l.prototype.$MercuryMessages18=function(p){if(!this.$MercuryMessages10[p])this.$MercuryMessages10[p]=new(c("RangedCallbackManager"))(function(q){var r=this.$MercuryMessages17(q);return r&&r.timestamp}.bind(this),function(q,r){return r-q});return this.$MercuryMessages10[p]};l.prototype.$MercuryMessages15=function(p,q){p.forEach(function(r){var s=this.$MercuryMessages18(r);s.setReachedEndOfArray();this.$MercuryMessages36(r,q)}.bind(this))};l.prototype.$MercuryMessages19=function(p){var q=p.reduce(function(r,s){var t=this.$MercuryMessages17(s);if(t)r.push(t);return r}.bind(this),[]);return q.reverse()};l.prototype.$MercuryMessages38=function(p,q){var r=q.filter(function(s){return m(this.$MercuryMessages17(s))}.bind(this));if(!this.$MercuryMessages11[p])this.$MercuryMessages11[p]=0;this.$MercuryMessages11[p]+=r.length};function m(p){var q=p.action_type;if(q==c("MercuryActionType").USER_GENERATED_MESSAGE)return true;switch(p.log_message_type){case c("MercuryLogMessageType").SUBSCRIBE:case c("MercuryLogMessageType").UNSUBSCRIBE:case c("MercuryLogMessageType").SERVER_ERROR:case c("MercuryLogMessageType").LIVE_LISTEN:return false;default:return true}}function n(p){__p&&__p();if(!p.ranges)return;p.ranges.forEach(function(q){if(!q.entity||q.entity.external||!q.entity.url)return;var r=new(c("URI"))(q.entity.url);if(c("isMessengerDotComURI")(c("URI").getRequestURI())&&!r.getDomain()){r.setProtocol("https").setDomain("www.facebook.com");q.entity.url=r.toString()}})}var o=new(c("MercurySingletonProvider"))(l);f.exports=l}),null);
__d("MercuryNotificationRenderer",["fbt","MercuryAssert","MercuryIDs","MercuryMessages","MercuryParticipants","MercuryThreads","MercuryViewer","MessagingGenericAdminTextType"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("MercuryMessages").get(),j=c("MercuryThreads").get(),k="source:messenger_growth:event_upcoming_bump";function l(m,n){__p&&__p();c("MercuryAssert").isThreadID(m);j.getThreadMeta(m,function(o){__p&&__p();i.getThreadMessagesRange(m,0,1,function(p){__p&&__p();var q=p.length&&p[p.length-1],r=[];if(q.tags!==undefined)r=r.concat(q.tags);if(q.log_message_data&&(q.log_message_data.message_type==c("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST||q.log_message_data.message_type==c("MessagingGenericAdminTextType").WORK_INVITE_CLAIMED))n(h._("New contact added"));else if(r.indexOf(k)!==-1)n(h._("You have an upcoming event."));else if(q&&q.author!=c("MercuryViewer").getID())c("MercuryParticipants").get(q.author,function(s){__p&&__p();var t=s.short_name,u=o.custom_nickname;if(u){var v=c("MercuryIDs").getUserIDFromParticipantID(s.id);if(u[v])t=u[v]}if(o.name)n(h._("{senderName} messaged {groupName}",[h._param("senderName",t),h._param("groupName",o.name)]));else if(c("MercuryIDs").isGroupChat(m))n(h._("{name} messaged your group",[h._param("name",t)]));else n(h._("{name} messaged you",[h._param("name",t)]))});else n(h._("New message!"))})})}f.exports={renderDocumentTitle:l}}),null);
__d("MercuryTimestampTracker",["MercuryActionType","MercuryDispatcher","MercuryPayloadSource","MercurySingletonProvider"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};function h(j){this.$MercuryTimestampTracker1=j;this.$MercuryTimestampTracker3=0;this.$MercuryTimestampTracker2=c("MercuryDispatcher").getForFBID(this.$MercuryTimestampTracker1);this.$MercuryTimestampTracker2.subscribe("update-messages",this.$MercuryTimestampTracker4.bind(this))}h.prototype.$MercuryTimestampTracker4=function(j,k){if(!k.actions||!k.actions.length)return;if(k.payload_source===c("MercuryPayloadSource").CLIENT_SEND_MESSAGE||k.payload_source===c("MercuryPayloadSource").UNKNOWN)return;for(var l=0;l<k.actions.length;l++){var m=k.actions[l],n=m.action_type;if(n==c("MercuryActionType").USER_GENERATED_MESSAGE&&m.thread_id&&m.timestamp>this.$MercuryTimestampTracker3)this.$MercuryTimestampTracker3=m.timestamp}};h.prototype.getLastUserMessageTimestamp=function(){return this.$MercuryTimestampTracker3};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("ChatTitleBarBlinker",["ChatActivity","DocumentTitle","JSLogger","MercuryThreadInformer","MercuryNotificationRenderer","PresenceState","MercuryTimestampTracker"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryThreadInformer").get(),i=c("MercuryTimestampTracker").get(),j=c("JSLogger").create("chat_title"),k=null,l=0,m=false;function n(){if(k){k.stop();k=null;return true}return false}function o(u){var v=u||i.getLastUserMessageTimestamp();if(l<=v){l=v;if(n()||m)c("PresenceState").doSync()}}var p={blink:function u(v,w){if(!k&&l<w)c("MercuryNotificationRenderer").renderDocumentTitle(v,function(x){if(!k)k=c("DocumentTitle").blink(x)})},stopBlinking:function u(){o()},blinkingElsewhere:function u(){m=true}};function q(u){var v=c("PresenceState").verifyNumber(u.sb2);if(!v||v<=l)return null;return v}function r(u){var v=u&&q(u);if(v){l=v;j.debug("load",l);n();m=false}}function s(u){var v=q(u);if(!v){j.debug("store",l);u.sb2=l;m=false}return u}c("PresenceState").registerStateStorer(s);c("PresenceState").registerStateLoader(r);h.subscribe("thread-read-changed",function(u,v){var w=i.getLastUserMessageTimestamp(),x=0;for(var y in v)if(v[y].mark_as_read&&v[y].timestamp>=w&&v[y].timestamp>x)x=v[y].timestamp;x&&o(x)});c("ChatActivity").subscribe("activity",function(){return o()});var t=c("PresenceState").getInitial();if(t)l=q(t)||0;f.exports=p}),null);
__d("MercuryIgnoredBlockedParticipants.bs",["bs_caml_obj","bs_js_boolean","MercuryIDs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(l,m,n){var o=n.participants.filter(function(p){return+(p!==c("MercuryIDs").getParticipantIDFromUserID(l))});return o.filter(function(p){return+(+m.has(p)!==0)})}function i(l,m,n){return c("bs_js_boolean").to_js_boolean(1-+n.is_canonical&&+(h(l,m,n).length>0))}function j(l,m,n){if(n.is_canonical)return[];else return h(l,m,n)}function k(l,m,n){var o=+n.is_canonical;if(o!==0){var p=n.participants.filter(function(q){return c("bs_caml_obj").caml_notequal(q,c("MercuryIDs").getParticipantIDFromUserID(l))});return c("bs_js_boolean").to_js_boolean(1-+p.every(function(q){return 1-+m.has(q)}))}else return false}g.findIntersection=h;g.isPresentInGroupThread=i;g.participantsInGroupThread=j;g.qualifiesAs=k}),null);
__d("MercurySingletonProvider.bs",["bs_curry","CurrentUser"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j={},k=function k(m){var n=j[m];if(n!==undefined)return n;else{var o=c("bs_curry")._1(i[0],m);j[m]=o;return o}},l=function l(){return k(c("CurrentUser").getID())};return[k,l]}g.Provider=h}),null);
__d("MercuryBlockedParticipants.bs",["Utils.bs","MercuryIDs","bs_js_primitive","MercuryDispatcher","MercurySingletonProvider.bs","MercuryIgnoredBlockedParticipants.bs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(m,n){__p&&__p();var o=n.message_blocked_ids;if(o==null)return 0;else{o.forEach(function(p){if(m.has(p)){+m["delete"](p);return 0}else{m.add(p);return 0}});return 0}}function i(m){__p&&__p();var n=new Set(),o=c("MercuryDispatcher").getForFBID(m);o.subscribe("update-blocked-users",function(p,q){__p&&__p();var r=q.actions;if(!(r==null))r.forEach(function(t){return h(n,t)});h(n,q);var s=c("Utils.bs").$pipe$unknown(c("bs_js_primitive").null_undefined_to_opt(q.participants),[]);s.forEach(function(t){__p&&__p();var r=c("Utils.bs").nullUndefinedBooleanToOptionBool(t.is_messenger_blocked),u=t.fbid;if(r)if(r[0]!==0)if(u==null)return 0;else{n.add(c("MercuryIDs").getParticipantIDFromUserID(u));return 0}else if(u==null)return 0;else{+n["delete"](c("MercuryIDs").getParticipantIDFromUserID(u));return 0}else return 0});return 0});return{findIntersection:function p(q){return c("MercuryIgnoredBlockedParticipants.bs").findIntersection(m,n,q)},isPresentInGroupThread:function p(q){return c("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(m,n,q)},blockedParticipantsInGroupThread:function p(q){return c("MercuryIgnoredBlockedParticipants.bs").participantsInGroupThread(m,n,q)},isMessageBlocked:function p(q){return c("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(m,n,q)},__fbid:m}}var j=c("MercurySingletonProvider.bs").Provider([i]),k=j[0],l=j[1];g.getForFBID=k;g.get=l}),null);
__d("SoundPlayer",["URI","createArrayFromMixed"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new Map();function i(l){var m=new(c("URI"))(l);return m.getDomain()?l:new(c("URI"))(window.location.href).setPath(m.getPath()).toString()}function j(l){var m=new(c("URI"))(l).getPath();if(/\.mp3$/.test(m))return"audio/mpeg";if(/\.og[ga]$/.test(m))return"audio/ogg";return""}var k={preload:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q;if(h.has(r))return;var s=document.createElement("audio");if(!s||!s.canPlayType||!s.canPlayType(j(r)))continue;s.preload="auto";s.src=i(r);document.body&&document.body.appendChild(s);h.set(r,s);return}},play:function l(m){__p&&__p();var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];for(var o=c("createArrayFromMixed")(m),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r;if(!h.has(s))k.preload(s);var t=h.get(s);if(!t)continue;if(n.loop)t.setAttribute("loop","");if(n.volume)t.volume=n.volume;t.play();return}},pause:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=h.get(r);if(s){s.pause();return}}},stop:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=h.get(r);if(s){s.pause();s.removeAttribute("src");s.src=i(r);return}}}};f.exports=k}),null);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],(function a(b,c,d,e,f,g){__p&&__p();var h="fb_sounds_playing3";function i(){__p&&__p();var m=c("WebStorage").getLocalStorage();if(m)try{var n=m[h];if(n){n=JSON.parse(n);if(Array.isArray(n))return n}}catch(o){}return[]}function j(m){var n=c("WebStorage").getLocalStorage();if(n){var o=i();o.push(m);while(o.length>5)o.shift();try{n[h]=JSON.stringify(o)}catch(p){}}}function k(m){return i().some(function(n){return n===m})}var l={play:function m(n,o,p){n=c("createArrayFromMixed")(n);o=o||n[0]+Math.floor(Date.now()/1e3);if(k(o))return;c("SoundPlayer").play(n,{loop:!!p});j(o)},isSupported:function m(){return!!c("WebStorage").getLocalStorage()}};f.exports=l}),null);
__d("SoundRPC",["Event","FBJSON","SoundSynchronizer"],(function a(b,c,d,e,f,g){__p&&__p();function h(j,k,l){c("SoundSynchronizer").play(j,k,l)}var i={playLocal:h,playRemote:function j(k,l,m,n){var o={name:"SoundRPC",data:{paths:l,sync:m,loop:n}};k.postMessage(c("FBJSON").stringify(o),"*")},supportsRPC:function j(){return!!window.postMessage},_listen:function j(){c("Event").listen(window,"message",function(k){if(!/\.facebook.com$/.test(k.origin))return;var l={};try{l=c("FBJSON").parse(k.data)}catch(m){}if(l.name==="SoundRPC")h(l.data.paths,l.data.sync,l.data.loop)})}};f.exports=i}),null);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","Visibility","isFacebookURI"],(function a(b,c,d,e,f,g){__p&&__p();var h=null,i=false,j={init:function n(o){},play:function n(o,p,q){if(h)c("SoundRPC").playRemote(h.contentWindow,o,p,false);else c("SoundRPC").playLocal(o,p,q);i=true},hasPlayedSoundBefore:function n(){return i},playOnlyIfImmediate:function n(o,p,q){if(!i&&c("Visibility").isHidden())return;this.play(o,p,q)},stop:function n(o){if(!h)c("SoundPlayer").stop(o)}},k=new(c("URI"))(location.href);if(k.getSubdomain()&&k.getSubdomain()!=="www")k.setSubdomain("www");var l=k.getDomain();function m(){if(c("UserAgent_DEPRECATED").ie()<9)return false;if(c("SoundInitialData").RPC_DISABLED)return false;return c("SoundSynchronizer").isSupported()&&c("SoundRPC").supportsRPC()}if(c("isFacebookURI")(k)&&location.host!==l&&m()){h=document.createElement("iframe");h.setAttribute("src","//"+l+"/sound_iframe.php");h.style.display="none";document.body.appendChild(h)}f.exports=j}),null);
__d("MercuryBrowserAlerts",["ArbiterMixin","ChatActivity","ChatConfig","ChatOptions","ChatTitleBarBlinker","Event","MercuryBlockedParticipants.bs","MercuryIDs","MercuryThreadInfo","MercuryThreads","MercuryViewer","MessagingTag","Sound","UserActivity"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryBlockedParticipants.bs").get(),i=c("MercuryThreads").get(),j=3,k=6e5,l=new Map(),m=null;function n(){return!c("UserActivity").isOnTab()&&!c("UserActivity").hasBeenInactive()}function o(){l=new Map()}function p(r){if(c("ChatOptions").getSetting("sound")&&!n())c("Sound").play([c("ChatConfig").get("sound.notif_ogg_url"),c("ChatConfig").get("sound.notif_mp3_url")],r,false)}var q=Object.assign({init:function r(){c("Event").listen(window,"focus",function(){o();clearInterval(m)});c("Event").listen(window,"blur",function(){m=setInterval(o,k)})},messageReceived:function r(s){__p&&__p();if(s.author&&c("MercuryViewer").isViewer(s.author)||!s.is_unread||s.folder!=c("MessagingTag").INBOX&&s.folder!=c("MessagingTag").ARCHIVED)return;var t=s.thread_id,u=c("ChatActivity").isActive();if(u){var v=false;q.inform("before-alert",{threadID:t,cancelAlert:function w(){v=true}})}i.getThreadMeta(t,function(w){__p&&__p();var x=c("MercuryThreadInfo").isMuted(w),y=c("MercuryIDs").getUserIDFromParticipantID(c("MercuryViewer").getID());if(x)if(!c("MercuryThreadInfo").areMentionsMuted(w)){if(!s.profile_ranges||!s.profile_ranges.some||!s.profile_ranges.some(function(B){return B.id===y}))return}else return;if(h.isPresentInGroupThread(w))return;var z=s.timestamp;if(u)!v&&p(z);else{c("ChatTitleBarBlinker").blink(t,z);var A=l.get(t)||0;if(A<j){l.set(t,A+1);p(z)}}c("ChatTitleBarBlinker").blinkingElsewhere()})}},c("ArbiterMixin"));f.exports=q}),null);
__d("ChatAppActionTypes",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("keyMirror")({INITIAL_DISPLAY_DONE:null,HIDE:null,LOAD:null,TTI:null,UNHIDE:null})}),null);
__d("ChatAppActions",["ChatDispatcher","ChatAppActionTypes"],(function a(b,c,d,e,f,g){"use strict";var h={tti:function i(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").TTI})},hide:function i(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").HIDE})},unhide:function i(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").UNHIDE})},setInitialDisplayDone:function i(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").INITIAL_DISPLAY_DONE})},load:function i(){c("ChatDispatcher").dispatch({type:c("ChatAppActionTypes").LOAD})}};f.exports=h}),null);
__d("ChatAppStore",["ChatAppActionTypes","ChatDispatcher","FluxStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("ChatDispatcher"));this.__moduleID=f.id;this.$ChatAppStore2={initialDisplayDone:false,isHidden:false,isInitialized:false,isLoaded:false};this.$ChatAppStore1=babelHelpers["extends"]({},this.$ChatAppStore2)}j.prototype.__onDispatch=function(k){__p&&__p();var l=k.type;this.$ChatAppStore1=babelHelpers["extends"]({},this.$ChatAppStore2);switch(l){case c("ChatAppActionTypes").INITIAL_DISPLAY_DONE:this.$ChatAppStore2.initialDisplayDone=true;this.__emitChange();break;case c("ChatAppActionTypes").HIDE:this.$ChatAppStore2.isHidden=true;this.__emitChange();break;case c("ChatAppActionTypes").UNHIDE:this.$ChatAppStore2.isHidden=false;this.__emitChange();break;case c("ChatAppActionTypes").TTI:this.$ChatAppStore2.isInitialized=this.$ChatAppStore2.isLoaded=true;this.__emitChange();break;case c("ChatAppActionTypes").LOAD:this.$ChatAppStore2.isLoaded=true;this.__emitChange();break}};j.prototype.getPreviousState=function(){return this.$ChatAppStore1};j.prototype.getState=function(){return this.$ChatAppStore2};f.exports=new j()}),null);
__d("ChatNotificationConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NORMAL:0,NO_USER_MESSAGE_NOTIFICATION:1})}),null);
__d("ChatBehavior",["Arbiter","AvailableList","AvailableListConstants","ChatNotificationConstants"],(function a(b,c,d,e,f,g){__p&&__p();var h=false,i=c("AvailableList").getWebChatNotification&&c("AvailableList").getWebChatNotification(),j=h,k=true,l=Object.assign(new(c("Arbiter"))(),{ON_CHANGED:"changed",notifiesUserMessages:function n(){return i!==c("ChatNotificationConstants").NO_USER_MESSAGE_NOTIFICATION},ignoresRemoteTabRaise:function n(){return j},showsTabUnreadUI:function n(){return k}});function m(){l.inform(l.ON_CHANGED)}c("AvailableList").subscribe&&c("AvailableList").subscribe(c("AvailableListConstants").ON_CHAT_NOTIFICATION_CHANGED,function(){var n=i,o=c("AvailableList").getWebChatNotification();i=o;if(n!=o)m()});c("Arbiter").subscribe("chat/set_does_page_occlude_tabs",function(n,o){j=!!o;m()});c("Arbiter").subscribe("chat/set_show_tab_unread_ui",function(n,o){k=!!o;m()});f.exports=l}),null);
__d("ChatPrivacyActionController",["ChatVisibility","JSLogger","PresencePrivacy"],(function a(b,c,d,e,f,g){__p&&__p();var h=function h(i,j){__p&&__p();this._userID=i;this._logger=c("JSLogger").create("blackbird");this._getState=function(){if(c("ChatVisibility").isOnline())return c("PresencePrivacy").allows(this._userID)?h.NORMAL:h.BLOCKED;return h.OFFLINE};this._togglePrivacy=function(){__p&&__p();var l=this._getState();switch(this._getState()){case h.OFFLINE:if(c("ChatVisibility").isOnline()){this._logger.error("tabs_already_online");break}this._logger.log("tabs_go_online",{tab_id:this._userID});c("ChatVisibility").goOnline(function(){if(!c("PresencePrivacy").allows(this._userID)){if(this._getState()!==h.BLOCKED)this._logger.error("privacy_action_controller_blocked_inconsistency");this._togglePrivacy()}}.bind(this));break;case h.BLOCKED:c("PresencePrivacy").allow(this._userID);this._logger.log("tabs_unblock",{tab_id:this._userID});break;case h.NORMAL:c("PresencePrivacy").disallow(this._userID);this._logger.log("tabs_block",{tab_id:this._userID});break}};var k=function(){j&&j(this._getState())}.bind(this);k();this._subscribeToken=c("PresencePrivacy").subscribe("privacy-changed",k)};h.OFFLINE="offline";h.BLOCKED="blocked";h.NORMAL="normal";Object.assign(h.prototype,{togglePrivacy:function i(){this._logger.log("gear_menu_toggle_privacy",{tab_id:this._userID});this._togglePrivacy()},destroy:function i(){this._subscribeToken&&c("PresencePrivacy").unsubscribe(this._subscribeToken)}});f.exports=h}),null);
__d("AutoFocusableLink.react",["Link.react","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("Link.react"));i=h&&h.prototype;j.prototype.componentDidMount=function(){if(this.props.autoFocus)c("ReactDOM").findDOMNode(this).focus()};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("ChatComposerFlyoutButtonBootLoader.react",["MercuryBootloadOnInteraction.react","JSResource","LazyComponent.react","AutoFocusableLink.react","React"],(function a(b,c,d,e,f,g){"use strict";var h=function h(i){var j=c("React").createElement(c("MercuryBootloadOnInteraction.react"),{component:c("React").createElement(c("LazyComponent.react"),babelHelpers["extends"]({},i,{className:i.iconClassName})),loader:c("JSResource")("MessengerComposerFlyoutButton.react").__setRef("ChatComposerFlyoutButtonBootLoader.react"),placeholder:c("React").createElement(c("AutoFocusableLink.react"),{label:"flyout button",className:i.iconClassName})});return i.excludeTag?j:c("React").createElement("li",{className:i.interactionClassName}," ",j," ")};f.exports=h}),null);
__d("ChatFlyoutPlaceholder.react",["React","XUISpinner.react"],(function a(b,c,d,e,f,g){"use strict";var h={padding:"30px",textAlign:"center"},i=function i(){return c("React").createElement("div",{style:h},c("React").createElement(c("XUISpinner.react"),{size:"large"}))};f.exports=i}),null);
__d("DefaultDraftBlockRenderMap",["cx","immutable","React"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("immutable").Map,j=c("React").createElement("ul",{className:"_1bv0"}),k=c("React").createElement("ol",{className:"_1bv1"}),l=c("React").createElement("pre",{className:"_1bv2"}),m=i({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},"unordered-list-item":{element:"li",wrapper:j},"ordered-list-item":{element:"li",wrapper:k},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:l},unstyled:{element:"div",aliasedElements:["p"]}});f.exports=m}),null);
__d("DefaultDraftInlineStyle",[],(function a(b,c,d,e,f,g){"use strict";f.exports={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}}}),null);
__d("CharacterMetadata",["immutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Map,k=c("immutable").OrderedSet,l=c("immutable").Record,m=k(),n={style:m,entity:null},o=l(n);h=babelHelpers.inherits(p,o);i=h&&h.prototype;p.prototype.getStyle=function(){return this.get("style")};p.prototype.getEntity=function(){return this.get("entity")};p.prototype.hasStyle=function(s){return this.getStyle().includes(s)};p.applyStyle=function(s,t){var u=s.set("style",s.getStyle().add(t));return p.create(u)};p.removeStyle=function(s,t){var u=s.set("style",s.getStyle().remove(t));return p.create(u)};p.applyEntity=function(s,t){var u=s.getEntity()===t?s:s.set("entity",t);return p.create(u)};p.create=function(s){if(!s)return q;var t={style:m,entity:null},u=j(t).merge(s),v=r.get(u);if(v)return v;var w=new p(u);r=r.set(u,w);return w};function p(){h.apply(this,arguments)}var q=new p(),r=j([[j(n),q]]);p.EMPTY=q;f.exports=p}),null);
__d("ContentStateInlineStyle",["CharacterMetadata","immutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("immutable").Map,i={add:function k(l,m,n){return j(l,m,n,true)},remove:function k(l,m,n){return j(l,m,n,false)}};function j(k,l,m,n){__p&&__p();var o=k.getBlockMap(),p=l.getStartKey(),q=l.getStartOffset(),r=l.getEndKey(),s=l.getEndOffset(),t=o.skipUntil(function(u,v){return v===p}).takeUntil(function(u,v){return v===r}).concat(h([[r,o.get(r)]])).map(function(u,v){__p&&__p();var w,x;if(p===r){w=q;x=s}else{w=v===p?q:0;x=v===r?s:u.getLength()}var y=u.getCharacterList(),z;while(w<x){z=y.get(w);y=y.set(w,n?c("CharacterMetadata").applyStyle(z,m):c("CharacterMetadata").removeStyle(z,m));w++}return u.set("characterList",y)});return k.merge({blockMap:o.merge(t),selectionBefore:l,selectionAfter:l})}f.exports=i}),null);
__d("applyEntityToContentBlock",["CharacterMetadata"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){var m=i.getCharacterList();while(j<k){m=m.set(j,c("CharacterMetadata").applyEntity(m.get(j),l));j++}return i.set("characterList",m)}f.exports=h}),null);
__d("applyEntityToContentState",["immutable","applyEntityToContentBlock"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){var l=i.getBlockMap(),m=j.getStartKey(),n=j.getStartOffset(),o=j.getEndKey(),p=j.getEndOffset(),q=l.skipUntil(function(r,s){return s===m}).takeUntil(function(r,s){return s===o}).toOrderedMap().merge(c("immutable").OrderedMap([[o,l.get(o)]])).map(function(r,s){var t=s===m?n:0,u=s===o?p:r.getLength();return c("applyEntityToContentBlock")(r,t,u,k)});return i.merge({blockMap:l.merge(q),selectionBefore:j,selectionAfter:j})}f.exports=h}),null);
__d("DraftEntitySegments",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={getRemovalRange:function i(j,k,l,m,n){__p&&__p();var o=l.split(" ");o=o.map(function(r,y){if(n==="forward"){if(y>0)return" "+r}else if(y<o.length-1)return r+" ";return r});var p=m,q,r,s=null,t=null;for(var u=0;u<o.length;u++){r=o[u];q=p+r.length;if(j<q&&p<k)if(s!==null)t=q;else{s=p;t=q}else if(s!==null)break;p=q}var v=m+l.length,w=s===m,x=t===v;if(!w&&x||w&&!x)if(n==="forward"){if(t!==v)t++}else if(s!==m)s--;return{start:s,end:t}}};f.exports=h}),null);
__d("getRangesForDraftEntity",["invariant"],(function a(b,c,d,e,f,g,h){"use strict";function i(j,k){var l=[];j.findEntityRanges(function(m){return m.getEntity()===k},function(m,n){l.push({start:m,end:n})});!!l.length||h(0);return l}f.exports=i}),null);
__d("getCharacterRemovalRange",["invariant","DraftEntitySegments","getRangesForDraftEntity"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(k,l,m,n,o){__p&&__p();var p=n.getStartOffset(),q=n.getEndOffset(),r=l.getEntityAt(p),s=m.getEntityAt(q-1);if(!r&&!s)return n;var t=n;if(r&&r===s)t=j(k,l,t,o,r,true,true);else if(r&&s){var u=j(k,l,t,o,r,false,true),v=j(k,m,t,o,s,false,false);t=t.merge({anchorOffset:u.getAnchorOffset(),focusOffset:v.getFocusOffset(),isBackward:false})}else if(r){var w=j(k,l,t,o,r,false,true);t=t.merge({anchorOffset:w.getStartOffset(),isBackward:false})}else if(s){var x=j(k,m,t,o,s,false,false);t=t.merge({focusOffset:x.getEndOffset(),isBackward:false})}return t}function j(k,l,m,n,o,p,q){__p&&__p();var r=m.getStartOffset(),s=m.getEndOffset(),t=k.__get(o),u=t.getMutability(),v=q?r:s;if(u==="MUTABLE")return m;var w=c("getRangesForDraftEntity")(l,o).filter(function(z){return v<=z.end&&v>=z.start});w.length==1||h(0);var x=w[0];if(u==="IMMUTABLE")return m.merge({anchorOffset:x.start,focusOffset:x.end,isBackward:false});if(!p)if(q)s=x.end;else r=x.start;var y=c("DraftEntitySegments").getRemovalRange(r,s,l.getText().slice(x.start,x.end),x.start,n);return m.merge({anchorOffset:y.start,focusOffset:y.end,isBackward:false})}f.exports=i}),null);
__d("findRangesImmutable",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k,l){__p&&__p();if(!i.size)return;var m=0;i.reduce(function(n,o,p){if(!j(n,o)){if(k(n))l(m,p);m=p}return o});k(i.last())&&l(m,i.count())}f.exports=h}),null);
__d("ContentBlockNode",["CharacterMetadata","immutable","findRangesImmutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").List,k=c("immutable").Map,l=c("immutable").OrderedSet,m=c("immutable").Record,n=c("immutable").Repeat,o=l(),p={parent:null,characterList:j(),data:k(),depth:0,key:"",text:"",type:"unstyled",children:j(),prevSibling:null,nextSibling:null},q=function q(u,v){return u.getStyle()===v.getStyle()},r=function r(u,v){return u.getEntity()===v.getEntity()},s=function s(u){if(!u)return u;var v=u.characterList,w=u.text;if(w&&!v)u.characterList=j(n(c("CharacterMetadata").EMPTY,w.length));return u};h=babelHelpers.inherits(t,m(p));i=h&&h.prototype;function t(){var u=arguments.length<=0||arguments[0]===undefined?p:arguments[0];i.constructor.call(this,s(u))}t.prototype.getKey=function(){return this.get("key")};t.prototype.getType=function(){return this.get("type")};t.prototype.getText=function(){return this.get("text")};t.prototype.getCharacterList=function(){return this.get("characterList")};t.prototype.getLength=function(){return this.getText().length};t.prototype.getDepth=function(){return this.get("depth")};t.prototype.getData=function(){return this.get("data")};t.prototype.getInlineStyleAt=function(u){var v=this.getCharacterList().get(u);return v?v.getStyle():o};t.prototype.getEntityAt=function(u){var v=this.getCharacterList().get(u);return v?v.getEntity():null};t.prototype.getChildKeys=function(){return this.get("children")};t.prototype.getParentKey=function(){return this.get("parent")};t.prototype.getPrevSiblingKey=function(){return this.get("prevSibling")};t.prototype.getNextSiblingKey=function(){return this.get("nextSibling")};t.prototype.findStyleRanges=function(u,v){c("findRangesImmutable")(this.getCharacterList(),q,u,v)};t.prototype.findEntityRanges=function(u,v){c("findRangesImmutable")(this.getCharacterList(),r,u,v)};f.exports=t}),null);
__d("generateRandomKey",[],(function a(b,c,d,e,f,g){"use strict";var h={},i=Math.pow(2,24);function j(){var k=void 0;while(k===undefined||Object.prototype.hasOwnProperty.call(h,k)||!isNaN(+k))k=Math.floor(Math.random()*i).toString(32);h[k]=true;return k}f.exports=j}),null);
__d("randomizeBlockMapKeys",["ContentBlockNode","immutable","generateRandomKey"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("immutable").OrderedMap,i=function i(l){__p&&__p();var m={},n=void 0;return h(l.withMutations(function(o){__p&&__p();o.forEach(function(p,q){__p&&__p();var r=p.getKey(),s=p.getNextSiblingKey(),t=p.getPrevSiblingKey(),u=p.getChildKeys(),v=p.getParentKey(),w=c("generateRandomKey")();m[r]=w;if(s){var x=o.get(s);if(x)o.setIn([s,"prevSibling"],w);else o.setIn([r,"nextSibling"],null)}if(t){var y=o.get(t);if(y)o.setIn([t,"nextSibling"],w);else o.setIn([r,"prevSibling"],null)}if(v&&o.get(v)){var z=o.get(v),A=z.getChildKeys();o.setIn([v,"children"],A.set(A.indexOf(p.getKey()),w))}else{o.setIn([r,"parent"],null);if(n){o.setIn([n.getKey(),"nextSibling"],w);o.setIn([r,"prevSibling"],m[n.getKey()])}n=o.get(r)}u.forEach(function(B){var C=o.get(B);if(C)o.setIn([B,"parent"],w);else o.setIn([r,"children"],p.getChildKeys().filter(function(D){return D!==B}))})})}).toArray().map(function(o){return[m[o.getKey()],o.set("key",m[o.getKey()])]}))},j=function j(l){return h(l.toArray().map(function(m){var n=c("generateRandomKey")();return[n,m.set("key",n)]}))},k=function k(l){var m=l.first()instanceof c("ContentBlockNode");if(!m)return j(l);return i(l)};f.exports=k}),null);
__d("removeEntitiesAtEdges",["invariant","CharacterMetadata","findRangesImmutable"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(l,m){__p&&__p();var n=l.getBlockMap(),o=l.getEntityMap(),p={},q=m.getStartKey(),r=m.getStartOffset(),s=n.get(q),t=k(o,s,r);if(t!==s)p[q]=t;var u=m.getEndKey(),v=m.getEndOffset(),w=n.get(u);if(q===u)w=t;var x=k(o,w,v);if(x!==w)p[u]=x;if(!Object.keys(p).length)return l.set("selectionAfter",m);return l.merge({blockMap:n.merge(p),selectionAfter:m})}function j(l,m,n){var o;c("findRangesImmutable")(l,function(p,q){return p.getEntity()===q.getEntity()},function(p){return p.getEntity()===m},function(p,q){if(p<=n&&q>=n)o={start:p,end:q}});typeof o==="object"||h(0);return o}function k(l,m,n){__p&&__p();var o=m.getCharacterList(),p=n>0?o.get(n-1):undefined,q=n<o.count()?o.get(n):undefined,r=p?p.getEntity():undefined,s=q?q.getEntity():undefined;if(s&&s===r){var t=l.__get(s);if(t.getMutability()!=="MUTABLE"){var u=j(o,s,n),v=u.start,w=u.end,x;while(v<w){x=o.get(v);o=o.set(v,c("CharacterMetadata").applyEntity(x,null));v++}return m.set("characterList",o)}}return m}f.exports=i}),null);
__d("getContentStateFragment",["randomizeBlockMapKeys","removeEntitiesAtEdges"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(i,j){__p&&__p();var k=j.getStartKey(),l=j.getStartOffset(),m=j.getEndKey(),n=j.getEndOffset(),o=c("removeEntitiesAtEdges")(i,j),p=o.getBlockMap(),q=p.keySeq(),r=q.indexOf(k),s=q.indexOf(m)+1;return c("randomizeBlockMapKeys")(p.slice(r,s).map(function(t,u){var v=t.getText(),w=t.getCharacterList();if(k===m)return t.merge({text:v.slice(l,n),characterList:w.slice(l,n)});if(u===k)return t.merge({text:v.slice(l),characterList:w.slice(l)});if(u===m)return t.merge({text:v.slice(0,n),characterList:w.slice(0,n)});return t}))};f.exports=h}),null);
__d("BlockMapBuilder",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h=c("immutable").OrderedMap,i={createFromArray:function j(k){return h(k.map(function(l){return[l.getKey(),l]}))}};f.exports=i}),null);
__d("insertIntoList",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k){__p&&__p();if(k===i.count())j.forEach(function(n){i=i.push(n)});else if(k===0)j.reverse().forEach(function(n){i=i.unshift(n)});else{var l=i.slice(0,k),m=i.slice(k);i=l.concat(j,m).toList()}return i}f.exports=h}),null);
__d("insertFragmentIntoContentState",["invariant","BlockMapBuilder","ContentBlockNode","immutable","insertIntoList","randomizeBlockMapKeys"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("immutable").List,j=function j(q,r,s,t,u,v){var w=s.get(u),x=w.getText(),y=w.getCharacterList(),z=u,A=v+t.getText().length,B=w.merge({text:x.slice(0,v)+t.getText()+x.slice(v),characterList:c("insertIntoList")(y,t.getCharacterList(),v),data:t.getData()});return q.merge({blockMap:s.set(u,B),selectionBefore:r,selectionAfter:r.merge({anchorKey:z,anchorOffset:A,focusKey:z,focusOffset:A,isBackward:false})})},k=function k(q,r,s){var t=q.getText(),u=q.getCharacterList(),v=t.slice(0,r),w=u.slice(0,r),x=s.first();return q.merge({text:v+x.getText(),characterList:w.concat(x.getCharacterList()),type:v?q.getType():x.getType(),data:x.getData()})},l=function l(q,r,s){var t=q.getText(),u=q.getCharacterList(),v=t.length,w=t.slice(r,v),x=u.slice(r,v),y=s.last();return y.merge({text:y.getText()+w,characterList:y.getCharacterList().concat(x),data:y.getData()})},m=function m(q,r){__p&&__p();var s=q.getKey(),t=q,u=[];if(r.get(s))u.push(s);while(t&&t.getNextSiblingKey()){var v=t.getNextSiblingKey();if(!v)break;u.push(v);t=r.get(v)}return u},n=function n(q,r,s,t){__p&&__p();return q.withMutations(function(u){__p&&__p();var v=s.getKey(),w=t.getKey(),x=s.getNextSiblingKey(),y=s.getParentKey(),z=m(t,q),A=z[z.length-1];if(u.get(w)){u.setIn([v,"nextSibling"],w);u.setIn([w,"prevSibling"],v)}else{u.setIn([v,"nextSibling"],t.getNextSiblingKey());u.setIn([t.getNextSiblingKey(),"prevSibling"],v)}u.setIn([A,"nextSibling"],x);if(x)u.setIn([x,"prevSibling"],A);z.forEach(function(G){return u.setIn([G,"parent"],y)});if(y){var B=q.get(y),C=B.getChildKeys(),D=C.indexOf(v),E=D+1,F=C.toArray();F.splice.apply(F,[E,0].concat(z));u.setIn([y,"children"],i(F))}})},o=function o(q,r,s,t,u,v){__p&&__p();var w=s.first()instanceof c("ContentBlockNode"),x=[],y=t.size,z=s.get(u),A=t.first(),B=t.last(),C=B.getLength(),D=B.getKey(),E=w&&(!z.getChildKeys().isEmpty()||!A.getChildKeys().isEmpty());s.forEach(function(G,H){__p&&__p();if(H!==u){x.push(G);return}if(E)x.push(G);else x.push(k(G,v,t));t.slice(E?0:1,y-1).forEach(function(I){return x.push(I)});x.push(l(G,v,t))});var F=c("BlockMapBuilder").createFromArray(x);if(w)F=n(F,s,z,A);return q.merge({blockMap:F,selectionBefore:r,selectionAfter:r.merge({anchorKey:D,anchorOffset:C,focusKey:D,focusOffset:C,isBackward:false})})},p=function p(q,r,s){r.isCollapsed()||h(0);var t=q.getBlockMap(),u=c("randomizeBlockMapKeys")(s),v=r.getStartKey(),w=r.getStartOffset(),x=t.get(v);if(x instanceof c("ContentBlockNode"))x.getChildKeys().isEmpty()||h(0);if(u.size===1)return j(q,r,t,u.first(),v,w);return o(q,r,t,u,v,w)};f.exports=p}),null);
__d("insertTextIntoContentState",["invariant","immutable","insertIntoList"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("immutable").Repeat;function j(k,l,m,n){l.isCollapsed()||h(0);var o=m.length;if(!o)return k;var p=k.getBlockMap(),q=l.getStartKey(),r=l.getStartOffset(),s=p.get(q),t=s.getText(),u=s.merge({text:t.slice(0,r)+m+t.slice(r,s.getLength()),characterList:c("insertIntoList")(s.getCharacterList(),i(n,o).toList(),r)}),v=r+o;return k.merge({blockMap:p.set(q,u),selectionAfter:l.merge({anchorOffset:v,focusOffset:v})})}f.exports=j}),null);
__d("modifyBlockForContentState",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h=c("immutable").Map;function i(j,k,l){var m=k.getStartKey(),n=k.getEndKey(),o=j.getBlockMap(),p=o.toSeq().skipUntil(function(q,r){return r===m}).takeUntil(function(q,r){return r===n}).concat(h([[n,o.get(n)]])).map(l);return j.merge({blockMap:o.merge(p),selectionBefore:k,selectionAfter:k})}f.exports=i}),null);
__d("getNextDelimiterBlockKey",["ContentBlockNode"],(function a(b,c,d,e,f,g){__p&&__p();var h=function h(i,j){__p&&__p();var k=i instanceof c("ContentBlockNode");if(!k)return null;var l=i.getNextSiblingKey();if(l)return l;var m=i.getParentKey();if(!m)return null;var n=j.get(m);while(n&&!n.getNextSiblingKey()){var o=n.getParentKey();n=o?j.get(o):null}if(!n)return null;return n.getNextSiblingKey()};f.exports=h}),null);
__d("removeRangeFromContentState",["ContentBlockNode","immutable","getNextDelimiterBlockKey"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("immutable").List,i=c("immutable").Map,j=function j(r,s,t){if(!r)return;var u=s.get(r);if(!u)return;s.set(r,t(u))},k=function k(r,s){__p&&__p();var t=[];if(!r)return t;var u=s.get(r);while(u&&u.getParentKey()){var v=u.getParentKey();if(v)t.push(v);u=v?s.get(v):null}return t},l=function l(r,s){__p&&__p();var t=[];if(!r)return t;var u=c("getNextDelimiterBlockKey")(r,s);while(u&&s.get(u)){var v=s.get(u);t.push(u);u=v.getParentKey()?c("getNextDelimiterBlockKey")(v,s):null}return t},m=function m(r,s,t){if(!r)return null;var u=t.get(r.getKey()).getNextSiblingKey();while(u&&!s.get(u))u=t.get(u).getNextSiblingKey()||null;return u},n=function n(r,s,t){if(!r)return null;var u=t.get(r.getKey()).getPrevSiblingKey();while(u&&!s.get(u))u=t.get(u).getPrevSiblingKey()||null;return u},o=function o(r,s,t,u){__p&&__p();return r.withMutations(function(v){__p&&__p();j(s.getKey(),v,function(w){return w.merge({nextSibling:m(s,v,u),prevSibling:n(s,v,u)})});j(t.getKey(),v,function(w){return w.merge({nextSibling:m(t,v,u),prevSibling:n(t,v,u)})});k(s.getKey(),u).forEach(function(w){return j(w,v,function(x){return x.merge({children:x.getChildKeys().filter(function(y){return v.get(y)}),nextSibling:m(x,v,u),prevSibling:n(x,v,u)})})});j(s.getNextSiblingKey(),v,function(w){return w.merge({prevSibling:s.getPrevSiblingKey()})});j(s.getPrevSiblingKey(),v,function(w){return w.merge({nextSibling:m(s,v,u)})});j(t.getNextSiblingKey(),v,function(w){return w.merge({prevSibling:n(t,v,u)})});j(t.getPrevSiblingKey(),v,function(w){return w.merge({nextSibling:t.getNextSiblingKey()})});k(t.getKey(),u).forEach(function(w){j(w,v,function(x){return x.merge({children:x.getChildKeys().filter(function(y){return v.get(y)}),nextSibling:m(x,v,u),prevSibling:n(x,v,u)})})});l(t,u).forEach(function(w){return j(w,v,function(x){return x.merge({nextSibling:m(x,v,u),prevSibling:n(x,v,u)})})})})},p=function p(r,s){__p&&__p();if(s.isCollapsed())return r;var t=r.getBlockMap(),u=s.getStartKey(),v=s.getStartOffset(),w=s.getEndKey(),x=s.getEndOffset(),y=t.get(u),z=t.get(w),A=y instanceof c("ContentBlockNode"),B=[];if(A){var C=z.getChildKeys(),D=k(w,t);if(z.getNextSiblingKey())B=B.concat(D);if(!C.isEmpty())B=B.concat(D.concat([w]));B=B.concat(k(c("getNextDelimiterBlockKey")(z,t),t))}var E=void 0;if(y===z)E=q(y.getCharacterList(),v,x);else E=y.getCharacterList().slice(0,v).concat(z.getCharacterList().slice(x));var F=y.merge({text:y.getText().slice(0,v)+z.getText().slice(x),characterList:E}),G=t.toSeq().skipUntil(function(I,J){return J===u}).takeUntil(function(I,J){return J===w}).filter(function(I,J){return B.indexOf(J)===-1}).concat(i([[w,null]])).map(function(I,J){return J===u?F:null}),H=t.merge(G).filter(function(I){return!!I});if(A)H=o(H,y,z,t);return r.merge({blockMap:H,selectionBefore:s,selectionAfter:s.merge({anchorKey:u,anchorOffset:v,focusKey:u,focusOffset:v,isBackward:false})})},q=function q(r,s,t){__p&&__p();if(s===0)while(s<t){r=r.shift();s++}else if(t===r.count())while(t>s){r=r.pop();t--}else{var u=r.slice(0,s),v=r.slice(t);r=u.concat(v).toList()}return r};f.exports=p}),null);
__d("splitBlockInContentState",["invariant","ContentBlockNode","immutable","generateRandomKey"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("immutable").List,j=c("immutable").Map,k=function k(n,o,p){if(!n)return;var q=o.get(n);if(!q)return;o.set(n,p(q))},l=function l(n,o,p){__p&&__p();return n.withMutations(function(q){__p&&__p();var r=o.getKey(),s=p.getKey();k(o.getParentKey(),q,function(t){var u=t.getChildKeys(),v=u.indexOf(r)+1,w=u.toArray();w.splice(v,0,s);return t.merge({children:i(w)})});k(o.getNextSiblingKey(),q,function(t){return t.merge({prevSibling:s})});k(r,q,function(t){return t.merge({nextSibling:s})});k(s,q,function(t){return t.merge({prevSibling:r})})})},m=function m(n,o){o.isCollapsed()||h(0);var p=o.getAnchorKey(),q=o.getAnchorOffset(),r=n.getBlockMap(),s=r.get(p),t=s.getText(),u=s.getCharacterList(),v=c("generateRandomKey")(),w=s instanceof c("ContentBlockNode"),x=s.merge({text:t.slice(0,q),characterList:u.slice(0,q)}),y=x.merge({key:v,text:t.slice(q),characterList:u.slice(q),data:j()}),z=r.toSeq().takeUntil(function(C){return C===s}),A=r.toSeq().skipUntil(function(C){return C===s}).rest(),B=z.concat([[p,x],[v,y]],A).toOrderedMap();if(w){s.getChildKeys().isEmpty()||h(0);B=l(B,x,y)}return n.merge({blockMap:B,selectionBefore:o,selectionAfter:o.merge({anchorKey:v,anchorOffset:0,focusKey:v,focusOffset:0,isBackward:false})})};f.exports=m}),null);
__d("DraftModifier",["invariant","CharacterMetadata","ContentStateInlineStyle","immutable","applyEntityToContentState","getCharacterRemovalRange","getContentStateFragment","gkx","insertFragmentIntoContentState","insertTextIntoContentState","modifyBlockForContentState","removeEntitiesAtEdges","removeRangeFromContentState","splitBlockInContentState"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("immutable").OrderedSet,j={replaceText:function k(l,m,n,o,p){var q=c("removeEntitiesAtEdges")(l,m),r=c("removeRangeFromContentState")(q,m),s=c("CharacterMetadata").create({style:o||i(),entity:p||null});return c("insertTextIntoContentState")(r,r.getSelectionAfter(),n,s)},insertText:function k(l,m,n,o,p){m.isCollapsed()||h(0);return j.replaceText(l,m,n,o,p)},moveText:function k(l,m,n){var o=c("getContentStateFragment")(l,m),p=j.removeRange(l,m,"backward");return j.replaceWithFragment(p,n,o)},replaceWithFragment:function k(l,m,n){var o=c("removeEntitiesAtEdges")(l,m),p=c("removeRangeFromContentState")(o,m);return c("insertFragmentIntoContentState")(p,p.getSelectionAfter(),n)},removeRange:function k(l,m,n){__p&&__p();var o=void 0,p=void 0,q=void 0,r=void 0;if(m.getIsBackward())m=m.merge({anchorKey:m.getFocusKey(),anchorOffset:m.getFocusOffset(),focusKey:m.getAnchorKey(),focusOffset:m.getAnchorOffset(),isBackward:false});o=m.getAnchorKey();p=m.getFocusKey();q=l.getBlockForKey(o);r=l.getBlockForKey(p);var s=m.getStartOffset(),t=m.getEndOffset(),u=q.getEntityAt(s),v=r.getEntityAt(t-1);if(o===p)if(u&&u===v){var w=c("getCharacterRemovalRange")(l.getEntityMap(),q,r,m,n);return c("removeRangeFromContentState")(l,w)}var x=m;if(c("gkx")("AT4OHQOtsQXrOADgyVq6K5UIDe9T9eDsSwdY2t65CYKcEvQqwy-mi67Du6upmMMIJ9MJGXqczfRABuu9cZxiVQ31ZCO7_57Q5Y5XG2T5gJJ6NQ"))x=c("getCharacterRemovalRange")(l.getEntityMap(),q,r,m,n);var y=c("removeEntitiesAtEdges")(l,x);return c("removeRangeFromContentState")(y,x)},splitBlock:function k(l,m){var n=c("removeEntitiesAtEdges")(l,m),o=c("removeRangeFromContentState")(n,m);return c("splitBlockInContentState")(o,o.getSelectionAfter())},applyInlineStyle:function k(l,m,n){return c("ContentStateInlineStyle").add(l,m,n)},removeInlineStyle:function k(l,m,n){return c("ContentStateInlineStyle").remove(l,m,n)},setBlockType:function k(l,m,n){return c("modifyBlockForContentState")(l,m,function(o){return o.merge({type:n,depth:0})})},setBlockData:function k(l,m,n){return c("modifyBlockForContentState")(l,m,function(o){return o.merge({data:n})})},mergeBlockData:function k(l,m,n){return c("modifyBlockForContentState")(l,m,function(o){return o.merge({data:o.getData().merge(n)})})},applyEntity:function k(l,m,n){var o=c("removeEntitiesAtEdges")(l,m);return c("applyEntityToContentState")(o,m,n)}};f.exports=j}),null);
__d("BlockTree",["immutable","emptyFunction","findRangesImmutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("immutable").List,i=c("immutable").Repeat,j=c("immutable").Record,k=c("emptyFunction").thatReturnsTrue,l="-",m={start:null,end:null},n=j(m),o={start:null,end:null,decoratorKey:null,leaves:null},p=j(o),q={generate:function t(u,v,w){var x=v.getLength();if(!x)return h.of(new p({start:0,end:0,decoratorKey:null,leaves:h.of(new n({start:0,end:0}))}));var y=[],z=w?w.getDecorations(v,u):h(i(null,x)),A=v.getCharacterList();c("findRangesImmutable")(z,s,k,function(B,C){y.push(new p({start:B,end:C,decoratorKey:z.get(B),leaves:r(A.slice(B,C).toList(),B)}))});return h(y)},getFingerprint:function t(u){return u.map(function(v){var w=v.get("decoratorKey"),x=w!==null?w+"."+(v.get("end")-v.get("start")):"";return""+x+"."+v.get("leaves").size}).join(l)}};function r(t,u){var v=[],w=t.map(function(x){return x.getStyle()}).toList();c("findRangesImmutable")(w,s,k,function(x,y){v.push(new n({start:x+u,end:y+u}))});return h(v)}function s(t,u){return t===u}f.exports=q}),null);
__d("ContentBlock",["CharacterMetadata","immutable","findRangesImmutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").List,k=c("immutable").Map,l=c("immutable").OrderedSet,m=c("immutable").Record,n=c("immutable").Repeat,o=l(),p={key:"",type:"unstyled",text:"",characterList:j(),depth:0,data:k()},q=m(p),r=function r(v){if(!v)return v;var w=v.characterList,x=v.text;if(x&&!w)v.characterList=j(n(c("CharacterMetadata").EMPTY,x.length));return v};h=babelHelpers.inherits(s,q);i=h&&h.prototype;function s(v){i.constructor.call(this,r(v))}s.prototype.getKey=function(){return this.get("key")};s.prototype.getType=function(){return this.get("type")};s.prototype.getText=function(){return this.get("text")};s.prototype.getCharacterList=function(){return this.get("characterList")};s.prototype.getLength=function(){return this.getText().length};s.prototype.getDepth=function(){return this.get("depth")};s.prototype.getData=function(){return this.get("data")};s.prototype.getInlineStyleAt=function(v){var w=this.getCharacterList().get(v);return w?w.getStyle():o};s.prototype.getEntityAt=function(v){var w=this.getCharacterList().get(v);return w?w.getEntity():null};s.prototype.findStyleRanges=function(v,w){c("findRangesImmutable")(this.getCharacterList(),t,v,w)};s.prototype.findEntityRanges=function(v,w){c("findRangesImmutable")(this.getCharacterList(),u,v,w)};function t(v,w){return v.getStyle()===w.getStyle()}function u(v,w){return v.getEntity()===w.getEntity()}f.exports=s}),null);
__d("DraftEntityInstance",["immutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Record,k=j({type:"TOKEN",mutability:"IMMUTABLE",data:Object});h=babelHelpers.inherits(l,k);i=h&&h.prototype;l.prototype.getType=function(){return this.get("type")};l.prototype.getMutability=function(){return this.get("mutability")};l.prototype.getData=function(){return this.get("data")};function l(){h.apply(this,arguments)}f.exports=l}),null);
__d("DraftEntity",["invariant","DraftEntityInstance","immutable"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("immutable").Map,j=i(),k=0;function l(n,o){}var m={getLastCreatedEntityKey:function n(){l("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey");return m.__getLastCreatedEntityKey()},create:function n(o,p,q){l("DraftEntity.create","contentState.createEntity");return m.__create(o,p,q)},add:function n(o){l("DraftEntity.add","contentState.addEntity");return m.__add(o)},get:function n(o){l("DraftEntity.get","contentState.getEntity");return m.__get(o)},mergeData:function n(o,p){l("DraftEntity.mergeData","contentState.mergeEntityData");return m.__mergeData(o,p)},replaceData:function n(o,p){l("DraftEntity.replaceData","contentState.replaceEntityData");return m.__replaceData(o,p)},__getLastCreatedEntityKey:function n(){return""+k},__create:function n(o,p,q){return m.__add(new(c("DraftEntityInstance"))({type:o,mutability:p,data:q||{}}))},__add:function n(o){var p=""+ ++k;j=j.set(p,o);return p},__get:function n(o){var p=j.get(o);!!p||h(0);return p},__mergeData:function n(o,p){var q=m.__get(o),r=babelHelpers["extends"]({},q.getData(),p),s=q.set("data",r);j=j.set(o,s);return s},__replaceData:function n(o,p){var q=m.__get(o),r=q.set("data",p);j=j.set(o,r);return r}};f.exports=m}),null);
__d("SelectionState",["immutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Record,k={anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:false,hasFocus:false},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.prototype.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())};m.prototype.getAnchorKey=function(){return this.get("anchorKey")};m.prototype.getAnchorOffset=function(){return this.get("anchorOffset")};m.prototype.getFocusKey=function(){return this.get("focusKey")};m.prototype.getFocusOffset=function(){return this.get("focusOffset")};m.prototype.getIsBackward=function(){return this.get("isBackward")};m.prototype.getHasFocus=function(){return this.get("hasFocus")};m.prototype.hasEdgeWithin=function(n,o,p){var q=this.getAnchorKey(),r=this.getFocusKey();if(q===r&&q===n){var s=this.getStartOffset(),t=this.getEndOffset();return o<=t&&s<=p}if(n!==q&&n!==r)return false;var u=n===q?this.getAnchorOffset():this.getFocusOffset();return o<=u&&p>=u};m.prototype.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()};m.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()};m.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()};m.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()};m.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()};m.createEmpty=function(n){return new m({anchorKey:n,anchorOffset:0,focusKey:n,focusOffset:0,isBackward:false,hasFocus:false})};function m(){h.apply(this,arguments)}f.exports=m}),null);
__d("sanitizeDraftText",[],(function a(b,c,d,e,f,g){"use strict";var h=new RegExp("\r","g");function i(j){return j.replace(h,"")}f.exports=i}),null);
__d("ContentState",["BlockMapBuilder","CharacterMetadata","ContentBlock","ContentBlockNode","DraftEntity","immutable","SelectionState","generateRandomKey","gkx","sanitizeDraftText"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").List,k=c("immutable").Record,l=c("immutable").Repeat,m=c("gkx")("AT7I-kBaiZBk-5ySRgJaDBW6tSXkDwvlqxCLLVy7xjKFQh4OpQOjZpy_bJOblZZDQOjyMyX8JeUF5aALSjx2ACRN"),n={entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null},o=m?c("ContentBlockNode"):c("ContentBlock"),p=k(n);h=babelHelpers.inherits(q,p);i=h&&h.prototype;q.prototype.getEntityMap=function(){return c("DraftEntity")};q.prototype.getBlockMap=function(){return this.get("blockMap")};q.prototype.getSelectionBefore=function(){return this.get("selectionBefore")};q.prototype.getSelectionAfter=function(){return this.get("selectionAfter")};q.prototype.getBlockForKey=function(r){var s=this.getBlockMap().get(r);return s};q.prototype.getKeyBefore=function(r){return this.getBlockMap().reverse().keySeq().skipUntil(function(s){return s===r}).skip(1).first()};q.prototype.getKeyAfter=function(r){return this.getBlockMap().keySeq().skipUntil(function(s){return s===r}).skip(1).first()};q.prototype.getBlockAfter=function(r){return this.getBlockMap().skipUntil(function(s,t){return t===r}).skip(1).first()};q.prototype.getBlockBefore=function(r){return this.getBlockMap().reverse().skipUntil(function(s,t){return t===r}).skip(1).first()};q.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray()};q.prototype.getFirstBlock=function(){return this.getBlockMap().first()};q.prototype.getLastBlock=function(){return this.getBlockMap().last()};q.prototype.getPlainText=function(r){return this.getBlockMap().map(function(s){return s?s.getText():""}).join(r||"\n")};q.prototype.getLastCreatedEntityKey=function(){return c("DraftEntity").__getLastCreatedEntityKey()};q.prototype.hasText=function(){var r=this.getBlockMap();return r.size>1||r.first().getLength()>0};q.prototype.createEntity=function(r,s,t){c("DraftEntity").__create(r,s,t);return this};q.prototype.mergeEntityData=function(r,s){c("DraftEntity").__mergeData(r,s);return this};q.prototype.replaceEntityData=function(r,s){c("DraftEntity").__replaceData(r,s);return this};q.prototype.addEntity=function(r){c("DraftEntity").__add(r);return this};q.prototype.getEntity=function(r){return c("DraftEntity").__get(r)};q.createFromBlockArray=function(r,s){var t=Array.isArray(r)?r:r.contentBlocks,u=c("BlockMapBuilder").createFromArray(t),v=u.isEmpty()?new(c("SelectionState"))():c("SelectionState").createEmpty(u.first().getKey());return new q({blockMap:u,entityMap:s||c("DraftEntity"),selectionBefore:v,selectionAfter:v})};q.createFromText=function(r){var s=arguments.length<=1||arguments[1]===undefined?/\r\n?|\n/g:arguments[1],t=r.split(s),u=t.map(function(v){v=c("sanitizeDraftText")(v);return new o({key:c("generateRandomKey")(),text:v,type:"unstyled",characterList:j(l(c("CharacterMetadata").EMPTY,v.length))})});return q.createFromBlockArray(u)};function q(){h.apply(this,arguments)}f.exports=q}),null);
__d("UnicodeBidiService",["invariant","UnicodeBidi","UnicodeBidiDirection","UnicodeBidiGlobalDirection"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(j){if(!j)j=c("UnicodeBidiGlobalDirection").getDir();else c("UnicodeBidiDirection").isStrong(j)||h(0);this.$UnicodeBidiService1=j;this.reset()}i.prototype.reset=function(){this.$UnicodeBidiService2=this.$UnicodeBidiService1};i.prototype.getDirection=function(j){this.$UnicodeBidiService2=c("UnicodeBidi").getDirection(j,this.$UnicodeBidiService2);return this.$UnicodeBidiService2};f.exports=i}),null);
__d("EditorBidiService",["immutable","UnicodeBidiService","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("immutable").OrderedMap,i,j={getDirectionMap:function k(l,m){if(!i)i=new(c("UnicodeBidiService"))();else i.reset();var n=l.getBlockMap(),o=n.valueSeq().map(function(q){return c("nullthrows")(i).getDirection(q.getText())}),p=h(n.keySeq().zip(o));if(m!=null&&c("immutable").is(m,p))return m;return p}};f.exports=j}),null);
__d("EditorState",["BlockTree","ContentState","EditorBidiService","immutable","SelectionState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("immutable").OrderedSet,i=c("immutable").Record,j=c("immutable").Stack,k={allowUndo:true,currentContent:null,decorator:null,directionMap:null,forceSelection:false,inCompositionMode:false,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:j(),selection:null,treeMap:null,undoStack:j()},l=i(k);m.createEmpty=function(v){return m.createWithContent(c("ContentState").createFromText(""),v)};m.createWithContent=function(v,w){var x=v.getBlockMap().first().getKey();return m.create({currentContent:v,undoStack:j(),redoStack:j(),decorator:w||null,selection:c("SelectionState").createEmpty(x)})};m.create=function(v){var w=v.currentContent,x=v.decorator,y=babelHelpers["extends"]({},v,{treeMap:o(w,x),directionMap:c("EditorBidiService").getDirectionMap(w)});return new m(new l(y))};m.set=function(v,w){__p&&__p();var x=v.getImmutable().withMutations(function(y){__p&&__p();var z=y.get("decorator"),A=z;if(w.decorator===null)A=null;else if(w.decorator)A=w.decorator;var B=w.currentContent||v.getCurrentContent();if(A!==z){var C=y.get("treeMap"),D;if(A&&z)D=q(B,B.getBlockMap(),C,A,z);else D=o(B,A);y.merge({decorator:A,treeMap:D,nativelyRenderedContent:null});return}var E=v.getCurrentContent();if(B!==E)y.set("treeMap",p(v,B.getBlockMap(),B.getEntityMap(),A));y.merge(w)});return new m(x)};m.prototype.toJS=function(){return this.getImmutable().toJS()};m.prototype.getAllowUndo=function(){return this.getImmutable().get("allowUndo")};m.prototype.getCurrentContent=function(){return this.getImmutable().get("currentContent")};m.prototype.getUndoStack=function(){return this.getImmutable().get("undoStack")};m.prototype.getRedoStack=function(){return this.getImmutable().get("redoStack")};m.prototype.getSelection=function(){return this.getImmutable().get("selection")};m.prototype.getDecorator=function(){return this.getImmutable().get("decorator")};m.prototype.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")};m.prototype.mustForceSelection=function(){return this.getImmutable().get("forceSelection")};m.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")};m.prototype.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")};m.prototype.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")};m.setInlineStyleOverride=function(v,w){return m.set(v,{inlineStyleOverride:w})};m.prototype.getCurrentInlineStyle=function(){var v=this.getInlineStyleOverride();if(v!=null)return v;var w=this.getCurrentContent(),x=this.getSelection();if(x.isCollapsed())return s(w,x);return t(w,x)};m.prototype.getBlockTree=function(v){return this.getImmutable().getIn(["treeMap",v])};m.prototype.isSelectionAtStartOfContent=function(){var v=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(v,0,0)};m.prototype.isSelectionAtEndOfContent=function(){var v=this.getCurrentContent(),w=v.getBlockMap(),x=w.last(),y=x.getLength();return this.getSelection().hasEdgeWithin(x.getKey(),y,y)};m.prototype.getDirectionMap=function(){return this.getImmutable().get("directionMap")};m.acceptSelection=function(v,w){return n(v,w,false)};m.forceSelection=function(v,w){if(!w.getHasFocus())w=w.set("hasFocus",true);return n(v,w,true)};m.moveSelectionToEnd=function(v){var w=v.getCurrentContent(),x=w.getLastBlock(),y=x.getKey(),z=x.getLength();return m.acceptSelection(v,new(c("SelectionState"))({anchorKey:y,anchorOffset:z,focusKey:y,focusOffset:z,isBackward:false}))};m.moveFocusToEnd=function(v){var w=m.moveSelectionToEnd(v);return m.forceSelection(w,w.getSelection())};m.push=function(v,w,x){__p&&__p();if(v.getCurrentContent()===w)return v;var y=x!=="insert-characters",z=c("EditorBidiService").getDirectionMap(w,v.getDirectionMap());if(!v.getAllowUndo())return m.set(v,{currentContent:w,directionMap:z,lastChangeType:x,selection:w.getSelectionAfter(),forceSelection:y,inlineStyleOverride:null});var A=v.getSelection(),B=v.getCurrentContent(),C=v.getUndoStack(),D=w;if(A!==B.getSelectionAfter()||r(v,x)){C=C.push(B);D=D.set("selectionBefore",A)}else if(x==="insert-characters"||x==="backspace-character"||x==="delete-character")D=D.set("selectionBefore",B.getSelectionBefore());var E=v.getInlineStyleOverride(),F=["adjust-depth","change-block-type","split-block"];if(F.indexOf(x)===-1)E=null;var G={currentContent:D,directionMap:z,undoStack:C,redoStack:j(),lastChangeType:x,selection:w.getSelectionAfter(),forceSelection:y,inlineStyleOverride:E};return m.set(v,G)};m.undo=function(v){if(!v.getAllowUndo())return v;var w=v.getUndoStack(),x=w.peek();if(!x)return v;var y=v.getCurrentContent(),z=c("EditorBidiService").getDirectionMap(x,v.getDirectionMap());return m.set(v,{currentContent:x,directionMap:z,undoStack:w.shift(),redoStack:v.getRedoStack().push(y),forceSelection:true,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:y.getSelectionBefore()})};m.redo=function(v){if(!v.getAllowUndo())return v;var w=v.getRedoStack(),x=w.peek();if(!x)return v;var y=v.getCurrentContent(),z=c("EditorBidiService").getDirectionMap(x,v.getDirectionMap());return m.set(v,{currentContent:x,directionMap:z,undoStack:v.getUndoStack().push(y),redoStack:w.shift(),forceSelection:true,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:x.getSelectionAfter()})};function m(v){this.$EditorState1=v}m.prototype.getImmutable=function(){return this.$EditorState1};function n(v,w,x){return m.set(v,{selection:w,forceSelection:x,nativelyRenderedContent:null,inlineStyleOverride:null})}function o(v,w){return v.getBlockMap().map(function(x){return c("BlockTree").generate(v,x,w)}).toOrderedMap()}function p(v,w,x,y){var z=v.getCurrentContent().set("entityMap",x),A=z.getBlockMap(),B=v.getImmutable().get("treeMap");return B.merge(w.toSeq().filter(function(C,D){return C!==A.get(D)}).map(function(C){return c("BlockTree").generate(z,C,y)}))}function q(v,w,x,y,z){return x.merge(w.toSeq().filter(function(A){return y.getDecorations(A,v)!==z.getDecorations(A,v)}).map(function(A){return c("BlockTree").generate(v,A,y)}))}function r(v,w){var x=v.getLastChangeType();return w!==x||w!=="insert-characters"&&w!=="backspace-character"&&w!=="delete-character"}function s(v,w){var x=w.getStartKey(),y=w.getStartOffset(),z=v.getBlockForKey(x);if(y>0)return z.getInlineStyleAt(y-1);if(z.getLength())return z.getInlineStyleAt(0);return u(v,x)}function t(v,w){var x=w.getStartKey(),y=w.getStartOffset(),z=v.getBlockForKey(x);if(y<z.getLength())return z.getInlineStyleAt(y);if(y>0)return z.getInlineStyleAt(y-1);return u(v,x)}function u(v,w){var x=v.getBlockMap().reverse().skipUntil(function(y,z){return z===w}).skip(1).skipUntil(function(y,z){return y.getLength()}).first();if(x)return x.getInlineStyleAt(x.getLength()-1);return h()}f.exports=m}),null);
__d("getEntityKeyForSelection",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j,k){__p&&__p();var l;if(k.isCollapsed()){var m=k.getAnchorKey(),n=k.getAnchorOffset();if(n>0){l=j.getBlockForKey(m).getEntityAt(n-1);if(l!==j.getBlockForKey(m).getEntityAt(n))return null;return i(j.getEntityMap(),l)}return null}var o=k.getStartKey(),p=k.getStartOffset(),q=j.getBlockForKey(o);l=p===q.getLength()?null:q.getEntityAt(p);return i(j.getEntityMap(),l)}function i(j,k){if(k){var l=j.__get(k);return l.getMutability()==="MUTABLE"?k:null}return null}f.exports=h}),null);
__d("isEventHandled",[],(function a(b,c,d,e,f,g){"use strict";function h(i){return i==="handled"||i===true}f.exports=h}),null);
__d("isSelectionAtLeafStart",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=i.getSelection(),k=j.getAnchorKey(),l=i.getBlockTree(k),m=j.getStartOffset(),n=false;l.some(function(o){__p&&__p();if(m===o.get("start")){n=true;return true}if(m<o.get("end"))return o.get("leaves").some(function(p){var q=p.get("start");if(m===q){n=true;return true}return false});return false});return n}f.exports=h}),null);
__d("DraftEditorCompositionHandler",["DraftModifier","EditorState","Keys","getEntityKeyForSelection","gkx","isEventHandled","isSelectionAtLeafStart"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=20,i=false,j=false,k="",l={onBeforeInput:function m(n,o){k=(k||"")+o.data},onCompositionStart:function m(n){j=true},onCompositionEnd:function m(n){i=false;j=false;setTimeout(function(){if(!i)l.resolveComposition(n)},h)},onKeyDown:function m(n,o){if(!j){l.resolveComposition(n);n._onKeyDown(o);return}if(o.which===c("Keys").RIGHT||o.which===c("Keys").LEFT)o.preventDefault()},onKeyPress:function m(n,o){if(o.which===c("Keys").RETURN)o.preventDefault()},resolveComposition:function m(n){__p&&__p();if(j)return;i=true;var o=k;k="";var p=c("EditorState").set(n._latestEditorState,{inCompositionMode:false}),q=p.getCurrentInlineStyle(),r=c("getEntityKeyForSelection")(p.getCurrentContent(),p.getSelection()),s=!o||c("isSelectionAtLeafStart")(p)||q.size>0||r!==null;if(s)n.restoreEditorDOM();n.exitCurrentMode();if(o){if(c("gkx")("AT4jBaTBzRYWAA8oybsDztxwiWb9Je6Ni1Zs7j6Be7i903PJcYxWjBm6VmCRmSERiUtQwjG1NtMNd-IjzhQ-KM-ZjR33VQC_LUaQqKcsVkKJAw")&&n.props.handleBeforeInput&&c("isEventHandled")(n.props.handleBeforeInput(o,p)))return;var t=c("DraftModifier").replaceText(p.getCurrentContent(),p.getSelection(),o,q,r);n.update(c("EditorState").push(p,t,"insert-characters"));return}if(s)n.update(c("EditorState").set(p,{nativelyRenderedContent:null,forceSelection:true}))}};f.exports=l}),null);
__d("DraftEditorTextNode.react",["invariant","React","ReactDOM","UserAgent"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("UserAgent").isBrowser("IE <= 11");function l(p){return k?p.textContent==="\n":p.tagName==="BR"}var m=k?c("React").createElement("span",{key:"A","data-text":"true"},"\n"):c("React").createElement("br",{key:"A","data-text":"true"}),n=k?c("React").createElement("span",{key:"B","data-text":"true"},"\n"):c("React").createElement("br",{key:"B","data-text":"true"});i=babelHelpers.inherits(o,c("React").Component);j=i&&i.prototype;function o(p){j.constructor.call(this,p);this.$DraftEditorTextNode1=false}o.prototype.shouldComponentUpdate=function(p){var q=c("ReactDOM").findDOMNode(this),r=p.children==="";q instanceof Element||h(0);if(r)return!l(q);return q.textContent!==p.children};o.prototype.componentDidMount=function(){this.$DraftEditorTextNode1=!this.$DraftEditorTextNode1};o.prototype.componentDidUpdate=function(){this.$DraftEditorTextNode1=!this.$DraftEditorTextNode1};o.prototype.render=function(){if(this.props.children==="")return this.$DraftEditorTextNode1?m:n;return c("React").createElement("span",{key:this.$DraftEditorTextNode1?"A":"B","data-text":"true"},this.props.children)};f.exports=o}),null);
__d("DraftJsDebugLogging",["CurrentUser","DraftJsEventsTypedLogger","ScriptPath"],(function a(b,c,d,e,f,g){"use strict";f.exports={logBlockedSelectionEvent:function h(i){var j=i.anonymizedDom,k=i.extraParams,l=i.selectionState;new(c("DraftJsEventsTypedLogger"))().setEvent("blocked_selection_event").setAnonymizedDom(j).setExtraParams(k).setScriptPath(c("ScriptPath").getScriptPath()).setSelectionState(l).log()},logSelectionStateFailure:function h(i){var j=i.anonymizedDom,k=i.extraParams,l=i.selectionState;if(c("CurrentUser").isEmployee())new(c("DraftJsEventsTypedLogger"))().setEvent("selection_state_failure").setAnonymizedDom(j).setExtraParams(k).setScriptPath(c("ScriptPath").getScriptPath()).setSelectionState(l).log()}}}),null);
__d("setDraftEditorSelection",["invariant","DraftJsDebugLogging","containsNode","getActiveElement"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(p,q){if(!p)return"[empty]";var r=j(p,q);if(r.nodeType===Node.TEXT_NODE)return r.textContent;r instanceof Element||h(0);return r.outerHTML}function j(p,q){__p&&__p();var r=q!==undefined?q(p):[];if(p.nodeType===Node.TEXT_NODE){var s=p.textContent.length;return document.createTextNode("[text "+s+(r.length?" | "+r.join(", "):"")+"]")}var t=p.cloneNode();if(t.nodeType===1&&r.length)t.setAttribute("data-labels",r.join(", "));var u=p.childNodes;for(var v=0;v<u.length;v++)t.appendChild(j(u[v],q));return t}function k(p,q){var r=p;while(r)if(r instanceof Element&&r.hasAttribute("contenteditable"))return i(r,q);else r=r.parentNode;return"Could not find contentEditable parent of node"}function l(p){return p.nodeValue===null?p.childNodes.length:p.nodeValue.length}function m(p,q,r,s,t){__p&&__p();if(!c("containsNode")(document.documentElement,q))return;var u=b.getSelection(),v=p.getAnchorKey(),w=p.getAnchorOffset(),x=p.getFocusKey(),y=p.getFocusOffset(),z=p.getIsBackward();if(!u.extend&&z){var A=v,B=w;v=x;w=y;x=A;y=B;z=false}var C=v===r&&s<=w&&t>=w,D=x===r&&s<=y&&t>=y;if(C&&D){u.removeAllRanges();o(u,q,w-s,p);n(u,q,y-s,p);return}if(!z){if(C){u.removeAllRanges();o(u,q,w-s,p)}if(D)n(u,q,y-s,p)}else{if(D){u.removeAllRanges();o(u,q,y-s,p)}if(C){var E=u.focusNode,F=u.focusOffset;u.removeAllRanges();o(u,q,w-s,p);n(u,E,F,p)}}}function n(p,q,r,s){__p&&__p();var t=c("getActiveElement")();if(p.extend&&c("containsNode")(t,q)){if(r>l(q))c("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:k(q),extraParams:JSON.stringify({offset:r}),selectionState:JSON.stringify(s.toJS())});var u=q===p.focusNode;try{p.extend(q,r)}catch(v){c("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:k(q,function(x){var y=[];if(x===t)y.push("active element");if(x===p.anchorNode)y.push("selection anchor node");if(x===p.focusNode)y.push("selection focus node");return y}),extraParams:JSON.stringify({activeElementName:t?t.nodeName:null,nodeIsFocus:q===p.focusNode,nodeWasFocus:u,selectionRangeCount:p.rangeCount,selectionAnchorNodeName:p.anchorNode?p.anchorNode.nodeName:null,selectionAnchorOffset:p.anchorOffset,selectionFocusNodeName:p.focusNode?p.focusNode.nodeName:null,selectionFocusOffset:p.focusOffset,message:v?""+v:null,offset:r},null,2),selectionState:JSON.stringify(s.toJS(),null,2)});throw v}}else{var w=p.getRangeAt(0);w.setEnd(q,r);p.addRange(w.cloneRange())}}function o(p,q,r,s){var t=document.createRange();if(r>l(q))c("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:k(q),extraParams:JSON.stringify({offset:r}),selectionState:JSON.stringify(s.toJS())});t.setStart(q,r);p.addRange(t)}f.exports=m}),null);
__d("DraftEditorLeaf.react",["invariant","DraftEditorTextNode.react","React","ReactDOM","setDraftEditorSelection"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.$DraftEditorLeaf1=function(){__p&&__p();var l=this.props.selection;if(l==null||!l.getHasFocus())return;var m=this.props,n=m.block,o=m.start,p=m.text,q=n.getKey(),r=o+p.length;if(!l.hasEdgeWithin(q,o,r))return;var s=c("ReactDOM").findDOMNode(this);s||h(0);var t=s.firstChild;t||h(0);var u=void 0;if(t.nodeType===Node.TEXT_NODE)u=t;else if(t.tagName==="BR")u=s;else{u=t.firstChild;u||h(0)}c("setDraftEditorSelection")(l,u,q,o,r)};k.prototype.shouldComponentUpdate=function(l){var m=c("ReactDOM").findDOMNode(this.leaf);m||h(0);var n=m.textContent!==l.text||l.styleSet!==this.props.styleSet||l.forceSelection;return n};k.prototype.componentDidUpdate=function(){this.$DraftEditorLeaf1()};k.prototype.componentDidMount=function(){this.$DraftEditorLeaf1()};k.prototype.render=function(){__p&&__p();var l=this.props.block,m=this.props.text;if(m.endsWith("\n")&&this.props.isLast)m+="\n";var n=this.props,o=n.customStyleMap,p=n.customStyleFn,q=n.offsetKey,r=n.styleSet,s=r.reduce(function(u,v){var w={},x=o[v];if(x!==undefined&&u.textDecoration!==x.textDecoration)w.textDecoration=[u.textDecoration,x.textDecoration].join(" ").trim();return Object.assign(u,x,w)},{});if(p){var t=p(r,l);s=Object.assign(s,t)}return c("React").createElement("span",{"data-offset-key":q,ref:function(u){return this.leaf=u}.bind(this),style:s},c("React").createElement(c("DraftEditorTextNode.react"),null,m))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("DraftOffsetKey",[],(function a(b,c,d,e,f,g){"use strict";var h="-",i={encode:function j(k,l,m){return k+h+l+h+m},decode:function j(k){var l=k.split(h),m=l[0],n=l[1],o=l[2];return{blockKey:m,decoratorKey:parseInt(n,10),leafKey:parseInt(o,10)}}};f.exports=i}),null);
__d("DraftEditorBlock.react",["cx","invariant","DraftEditorLeaf.react","DraftOffsetKey","React","ReactDOM","Scroll","Style","UnicodeBidi","UnicodeBidiDirection","getElementPosition","getScrollPosition","getViewportDimensions","nullthrows"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=10,m=function m(o,p){return o.getAnchorKey()===p||o.getFocusKey()===p};j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;n.prototype.shouldComponentUpdate=function(o){return this.props.block!==o.block||this.props.tree!==o.tree||this.props.direction!==o.direction||m(o.selection,o.block.getKey())&&o.forceSelection};n.prototype.componentDidMount=function(){__p&&__p();var o=this.props.selection,p=o.getEndKey();if(!o.getHasFocus()||p!==this.props.block.getKey())return;var q=c("ReactDOM").findDOMNode(this),r=c("Style").getScrollParent(q),s=c("getScrollPosition")(r),t=void 0;if(r===window){var u=c("getElementPosition")(q),v=u.y+u.height,w=c("getViewportDimensions")().height;t=v-w;if(t>0)window.scrollTo(s.x,s.y+t+l)}else{q instanceof HTMLElement||i(0);var x=q.offsetHeight+q.offsetTop,y=r.offsetHeight+s.y;t=x-y;if(t>0)c("Scroll").setTop(r,c("Scroll").getTop(r)+t+l)}};n.prototype.$DraftEditorBlock1=function(){__p&&__p();var o=this.props.block,p=o.getKey(),q=o.getText(),r=this.props.tree.size-1,s=m(this.props.selection,p);return this.props.tree.map(function(t,u){__p&&__p();var v=t.get("leaves"),w=v.size-1,x=v.map(function(H,I){var J=c("DraftOffsetKey").encode(p,u,I),D=H.get("start"),E=H.get("end");return c("React").createElement(c("DraftEditorLeaf.react"),{key:J,offsetKey:J,block:o,start:D,selection:s?this.props.selection:null,forceSelection:this.props.forceSelection,text:q.slice(D,E),styleSet:o.getInlineStyleAt(D),customStyleMap:this.props.customStyleMap,customStyleFn:this.props.customStyleFn,isLast:u===r&&I===w})}.bind(this)).toArray(),y=t.get("decoratorKey");if(y==null)return x;if(!this.props.decorator)return x;var z=c("nullthrows")(this.props.decorator),A=z.getComponentForKey(y);if(!A)return x;var B=z.getPropsForKey(y),C=c("DraftOffsetKey").encode(p,u,0),D=v.first().get("start"),E=v.last().get("end"),F=q.slice(D,E),G=c("UnicodeBidiDirection").getHTMLDirIfDifferent(c("UnicodeBidi").getDirection(F),this.props.direction);return c("React").createElement(A,babelHelpers["extends"]({},B,{contentState:this.props.contentState,decoratedText:F,dir:G,key:C,start:D,end:E,blockKey:p,entityKey:o.getEntityAt(t.get("start")),offsetKey:C}),x)}.bind(this)).toArray()};n.prototype.render=function(){var o=this.props,p=o.direction,q=o.offsetKey,r="_1mf"+(p==="LTR"?" _1mj":"")+(p==="RTL"?" _1mk":"");return c("React").createElement("div",{"data-offset-key":q,className:r},this.$DraftEditorBlock1())};function n(){j.apply(this,arguments)}f.exports=n}),null);
__d("DraftEditorContents-core.react",["cx","DraftEditorBlock.react","DraftOffsetKey","EditorState","React","joinClasses","nullthrows"],(function a(b,c,d,e,f,aa,ba){"use strict";__p&&__p();var g,h,i=function i(k,l,m,n){return(k==="unordered-list-item"?"_3kpz":"")+(k==="ordered-list-item"?" _3kp_":"")+(m?" _3kq0":"")+(l===0?" _3kq1":"")+(l===1?" _3kq2":"")+(l===2?" _3kq3":"")+(l===3?" _3kq4":"")+(l===4?" _3kq5":"")+(n==="LTR"?" _3kq6":"")+(n==="RTL"?" _3kq7":"")};g=babelHelpers.inherits(j,c("React").Component);h=g&&g.prototype;j.prototype.shouldComponentUpdate=function(k){__p&&__p();var l=this.props.editorState,m=k.editorState,n=l.getDirectionMap(),o=m.getDirectionMap();if(n!==o)return true;var p=l.getSelection().getHasFocus(),q=m.getSelection().getHasFocus();if(p!==q)return true;var r=m.getNativelyRenderedContent(),s=l.isInCompositionMode(),t=m.isInCompositionMode();if(l===m||r!==null&&m.getCurrentContent()===r||s&&t)return false;var u=l.getCurrentContent(),v=m.getCurrentContent(),w=l.getDecorator(),x=m.getDecorator();return s!==t||u!==v||w!==x||m.mustForceSelection()};j.prototype.render=function(){__p&&__p();var k=this.props,l=k.blockRenderMap,m=k.blockRendererFn,n=k.blockStyleFn,o=k.customStyleMap,p=k.customStyleFn,q=k.editorState,r=k.editorKey,s=k.textDirectionality,t=q.getCurrentContent(),u=q.getSelection(),v=q.mustForceSelection(),w=q.getDecorator(),x=c("nullthrows")(q.getDirectionMap()),y=t.getBlocksAsArray(),z=[],A=null,B=null;for(var C=0;C<y.length;C++){var D=y[C],E=D.getKey(),F=D.getType(),G=m(D),H=void 0,I=void 0,J=void 0;if(G){H=G.component;I=G.props;J=G.editable}var K=s?s:x.get(E),L=c("DraftOffsetKey").encode(E,0,0),M={contentState:t,block:D,blockProps:I,blockStyleFn:n,customStyleMap:o,customStyleFn:p,decorator:w,direction:K,forceSelection:v,key:E,offsetKey:L,selection:u,tree:q.getBlockTree(E)},N=l.get(F)||l.get("unstyled"),O=N.wrapper,P=N.element||l.get("unstyled").element,Q=D.getDepth(),R="";if(n)R=n(D);if(P==="li"){var S=B!==O||A===null||Q>A;R=c("joinClasses")(R,i(F,Q,S,K))}var T=H||c("DraftEditorBlock.react"),U={className:R,"data-block":true,"data-editor":r,"data-offset-key":L,key:E};if(J!==undefined)U=babelHelpers["extends"]({},U,{contentEditable:J,suppressContentEditableWarning:true});var V=c("React").createElement(P,U,c("React").createElement(T,M));z.push({block:V,wrapperTemplate:O,key:E,offsetKey:L});if(O)A=D.getDepth();else A=null;B=O}var W=[];for(var X=0;X<z.length;){var Y=z[X];if(Y.wrapperTemplate){var Z=[];do{Z.push(z[X].block);X++}while(X<z.length&&z[X].wrapperTemplate===Y.wrapperTemplate);var $=c("React").cloneElement(Y.wrapperTemplate,{key:Y.key+"-wrap","data-offset-key":Y.offsetKey},Z);W.push($)}else{W.push(Y.block);X++}}return c("React").createElement("div",{"data-contents":"true"},W)};function j(){g.apply(this,arguments)}f.exports=j}),null);
__d("DraftEditorDecoratedLeaves.react",["DraftOffsetKey","React","UnicodeBidi","UnicodeBidiDirection"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.render=function(){var k=this.props,l=k.block,m=k.children,n=k.contentState,o=k.decorator,p=k.decoratorKey,q=k.direction,r=k.leafSet,s=k.text,t=l.getKey(),u=r.get("leaves"),v=o.getComponentForKey(p),w=o.getPropsForKey(p),x=c("DraftOffsetKey").encode(t,parseInt(p,10),0),y=s.slice(u.first().get("start"),u.last().get("end")),z=c("UnicodeBidiDirection").getHTMLDirIfDifferent(c("UnicodeBidi").getDirection(y),q);return c("React").createElement(v,babelHelpers["extends"]({},w,{contentState:n,decoratedText:y,dir:z,key:x,entityKey:l.getEntityAt(r.get("start")),offsetKey:x}),m)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("DraftEditorNode.react",["cx","DraftEditorDecoratedLeaves.react","DraftEditorLeaf.react","DraftOffsetKey","immutable","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("immutable").List;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.block,o=m.contentState,p=m.customStyleFn,q=m.customStyleMap,r=m.decorator,s=m.direction,t=m.forceSelection,u=m.hasSelection,v=m.selection,w=m.tree,x=n.getKey(),y=n.getText(),z=w.size-1,A=this.props.children||w.map(function(B,C){var D=B.get("decoratorKey"),E=B.get("leaves"),F=E.size-1,G=E.map(function(H,I){var J=c("DraftOffsetKey").encode(x,C,I),K=H.get("start"),L=H.get("end");return c("React").createElement(c("DraftEditorLeaf.react"),{key:J,offsetKey:J,block:n,start:K,selection:u?v:null,forceSelection:t,text:y.slice(K,L),styleSet:n.getInlineStyleAt(K),customStyleMap:q,customStyleFn:p,isLast:D===z&&I===F})}).toArray();if(!D||!r)return G;return c("React").createElement(c("DraftEditorDecoratedLeaves.react"),{block:n,children:G,contentState:o,decorator:r,decoratorKey:D,direction:s,leafSet:B,text:y,key:C})}).toArray();return c("React").createElement("div",{"data-offset-key":c("DraftOffsetKey").encode(x,0,0),className:"_1mf"+(s==="LTR"?" _1mj":"")+(s==="RTL"?" _1mk":"")},A)};function l(){i.apply(this,arguments)}f.exports=l}),null);
__d("DraftEditorBlockNode.react",["invariant","DraftEditorNode.react","DraftOffsetKey","EditorState","immutable","React","ReactDOM","Scroll","Style","getElementPosition","getScrollPosition","getViewportDimensions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=10,l=c("immutable").List,m=function m(t,u){return t.getAnchorKey()===u||t.getFocusKey()===u},n=function n(t,u){var v=t.getNextSiblingKey();return v?u.getBlockForKey(v).getType()===t.getType():false},o=function o(t,u,v){__p&&__p();var w=[];for(var x=v.reverse(),y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var A;if(y){if(z>=x.length)break;A=x[z++]}else{z=x.next();if(z.done)break;A=z.value}var B=A;if(B.type!==u)break;w.push(B)}v.splice(v.indexOf(w[0]),w.length+1);var C=w.reverse(),D=C[0].key;v.push(c("React").cloneElement(t,{key:D+"-wrap","data-offset-key":c("DraftOffsetKey").encode(D,0,0)},C));return v},p=function p(t,u){var v=u.get(t.getType())||u.get("unstyled"),w=v.wrapper,x=v.element||u.get("unstyled").element;return{Element:x,wrapperTemplate:w}},q=function q(t,u){var v=u(t);if(!v)return{};var w=v.component,x=v.props,y=v.editable;return{CustomComponent:w,customProps:x,customEditable:y}},r=function r(t,u,v,w,x){var y={"data-block":true,"data-editor":u,"data-offset-key":v,key:t.getKey()},z=w(t);if(z)y.className=z;if(x.customEditable!==undefined)y=babelHelpers["extends"]({},y,{contentEditable:x.customEditable,suppressContentEditableWarning:true});return y};i=babelHelpers.inherits(s,c("React").Component);j=i&&i.prototype;s.prototype.shouldComponentUpdate=function(t){var u=this.props,v=u.block,w=u.direction,x=u.tree,y=!v.getChildKeys().isEmpty(),z=v!==t.block||x!==t.tree||w!==t.direction||m(t.selection,t.block.getKey())&&t.forceSelection;return y||z};s.prototype.componentDidMount=function(){__p&&__p();var t=this.props.selection,u=t.getEndKey();if(!t.getHasFocus()||u!==this.props.block.getKey())return;var v=c("ReactDOM").findDOMNode(this),w=c("Style").getScrollParent(v),x=c("getScrollPosition")(w),y=void 0;if(w===window){var z=c("getElementPosition")(v),A=z.y+z.height,B=c("getViewportDimensions")().height;y=A-B;if(y>0)window.scrollTo(x.x,x.y+y+k)}else{v instanceof HTMLElement||h(0);var C=v.offsetHeight+v.offsetTop,D=w.offsetHeight+x.y;y=C-D;if(y>0)c("Scroll").setTop(w,c("Scroll").getTop(w)+y+k)}};s.prototype.render=function(){__p&&__p();var t=this.props,u=t.block,v=t.blockRenderMap,w=t.blockRendererFn,x=t.blockStyleFn,y=t.contentState,z=t.decorator,A=t.editorKey,B=t.editorState,C=t.customStyleFn,D=t.customStyleMap,E=t.direction,F=t.forceSelection,G=t.selection,H=t.tree,I=null;if(u.children.size)I=u.children.reduce(function(P,Q){var K=c("DraftOffsetKey").encode(Q,0,0),R=y.getBlockForKey(Q),S=q(R,w),T=S.CustomComponent||s,U=p(R,v),N=U.Element,V=U.wrapperTemplate,O=r(R,A,K,x,S),W=babelHelpers["extends"]({},this.props,{tree:B.getBlockTree(Q),blockProps:S.customProps,offsetKey:K,block:R});P.push(c("React").createElement(N,O,c("React").createElement(T,W)));if(!V||n(R,y))return P;o(V,N,P);return P}.bind(this),[]);var J=u.getKey(),K=c("DraftOffsetKey").encode(J,0,0),L=c("React").createElement(c("DraftEditorNode.react"),{block:u,children:I,contentState:y,customStyleFn:C,customStyleMap:D,decorator:z,direction:E,forceSelection:F,hasSelection:m(G,J),selection:G,tree:H});if(u.getParentKey())return L;var M=p(u,v),N=M.Element,O=r(u,A,K,x,q(u,w));return c("React").createElement(N,O,L)};function s(){i.apply(this,arguments)}f.exports=s}),null);
__d("DraftEditorContentsExperimental.react",["DraftEditorBlockNode.react","DraftOffsetKey","EditorState","React","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.shouldComponentUpdate=function(k){__p&&__p();var l=this.props.editorState,m=k.editorState,n=l.getDirectionMap(),o=m.getDirectionMap();if(n!==o)return true;var p=l.getSelection().getHasFocus(),q=m.getSelection().getHasFocus();if(p!==q)return true;var r=m.getNativelyRenderedContent(),s=l.isInCompositionMode(),t=m.isInCompositionMode();if(l===m||r!==null&&m.getCurrentContent()===r||s&&t)return false;var u=l.getCurrentContent(),v=m.getCurrentContent(),w=l.getDecorator(),x=m.getDecorator();return s!==t||u!==v||w!==x||m.mustForceSelection()};j.prototype.render=function(){__p&&__p();var k=this.props,l=k.blockRenderMap,m=k.blockRendererFn,n=k.blockStyleFn,o=k.customStyleMap,p=k.customStyleFn,q=k.editorState,r=k.editorKey,s=k.textDirectionality,t=q.getCurrentContent(),u=q.getSelection(),v=q.mustForceSelection(),w=q.getDecorator(),x=c("nullthrows")(q.getDirectionMap()),y=t.getBlocksAsArray(),z=y[0],A=[],B=z;while(B){var C=B.getKey(),D={blockRenderMap:l,blockRendererFn:m,blockStyleFn:n,contentState:t,customStyleFn:p,customStyleMap:o,decorator:w,editorKey:r,editorState:q,forceSelection:v,selection:u,block:B,direction:s?s:x.get(C),tree:q.getBlockTree(C)},E=l.get(B.getType())||l.get("unstyled"),F=E.wrapper;A.push({block:c("React").createElement(c("DraftEditorBlockNode.react"),babelHelpers["extends"]({key:C},D)),wrapperTemplate:F,key:C,offsetKey:c("DraftOffsetKey").encode(C,0,0)});var G=B.getNextSiblingKey();B=G?t.getBlockForKey(G):null}var H=[];for(var I=0;I<A.length;){var J=A[I];if(J.wrapperTemplate){var K=[];do{K.push(A[I].block);I++}while(I<A.length&&A[I].wrapperTemplate===J.wrapperTemplate);var L=c("React").cloneElement(J.wrapperTemplate,{key:J.key+"-wrap","data-offset-key":J.offsetKey},K);H.push(L)}else{H.push(J.block);I++}}return c("React").createElement("div",{"data-contents":"true"},H)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("DraftEditorContents.react",["gkx","DraftEditorContentsExperimental.react","DraftEditorContents-core.react"],(function a(b,c,d,e,f,g){"use strict";var h=c("gkx")("AT7I-kBaiZBk-5ySRgJaDBW6tSXkDwvlqxCLLVy7xjKFQh4OpQOjZpy_bJOblZZDQOjyMyX8JeUF5aALSjx2ACRN");f.exports=h?c("DraftEditorContentsExperimental.react"):c("DraftEditorContents-core.react")}),null);
__d("getSelectionOffsetKeyForNode",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();if(i instanceof Element){var j=i.getAttribute("data-offset-key");if(j)return j;for(var k=0;k<i.childNodes.length;k++){var l=h(i.childNodes[k]);if(l)return l}}return null}f.exports=h}),null);
__d("findAncestorOffsetKey",["getSelectionOffsetKeyForNode"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){var j=i;while(j&&j!==document.documentElement){var k=c("getSelectionOffsetKeyForNode")(j);if(k!=null)return k;j=j.parentNode}return null}f.exports=h}),null);
__d("getTextContentFromFiles",["invariant"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=/\.textClipping$/,j={"text/plain":true,"text/html":true,"text/rtf":true},k=5e3;function l(n,o){var p=0,q=[];n.forEach(function(r){m(r,function(s){p++;s&&q.push(s.slice(0,k));if(p==n.length)o(q.join("\r"))})})}function m(n,o){__p&&__p();if(!b.FileReader||n.type&&!(n.type in j)){o("");return}if(n.type===""){var p="";if(i.test(n.name))p=n.name.replace(i,"");o(p);return}var q=new FileReader();q.onload=function(){var r=q.result;typeof r==="string"||h(0);o(r)};q.onerror=function(){o("")};q.readAsText(n)}f.exports=l}),null);
__d("getUpdatedSelectionState",["DraftOffsetKey","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k,l,m){__p&&__p();var n=c("nullthrows")(i.getSelection()),o=c("DraftOffsetKey").decode(j),p=o.blockKey,q=i.getBlockTree(p).getIn([o.decoratorKey,"leaves",o.leafKey]),r=c("DraftOffsetKey").decode(l),s=r.blockKey,t=i.getBlockTree(s).getIn([r.decoratorKey,"leaves",r.leafKey]),u=q.get("start"),v=t.get("start"),w=q?u+k:null,x=t?v+m:null,y=n.getAnchorKey()===p&&n.getAnchorOffset()===w&&n.getFocusKey()===s&&n.getFocusOffset()===x;if(y)return n;var z=false;if(p===s){var A=q.get("end"),B=t.get("end");if(v===u&&B===A)z=m<k;else z=v<u}else{var C=i.getCurrentContent().getBlockMap().keySeq().skipUntil(function(D){return D===p||D===s}).first();z=C===s}return n.merge({anchorKey:p,anchorOffset:w,focusKey:s,focusOffset:x,isBackward:z})}f.exports=h}),null);
__d("DraftEditorDragHandler",["DataTransfer","DraftModifier","EditorState","findAncestorOffsetKey","getTextContentFromFiles","getUpdatedSelectionState","isEventHandled","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(event,l){__p&&__p();var m=null,n=null;if(typeof document.caretRangeFromPoint==="function"){var o=document.caretRangeFromPoint(event.x,event.y);m=o.startContainer;n=o.startOffset}else if(event.rangeParent){m=event.rangeParent;n=event.rangeOffset}else return null;m=c("nullthrows")(m);n=c("nullthrows")(n);var p=c("nullthrows")(c("findAncestorOffsetKey")(m));return c("getUpdatedSelectionState")(l,p,n,p,n)}var i={onDragEnd:function l(m){m.exitCurrentMode()},onDrop:function l(m,n){__p&&__p();var o=new(c("DataTransfer"))(n.nativeEvent.dataTransfer),p=m._latestEditorState,q=h(n.nativeEvent,p);n.preventDefault();m.exitCurrentMode();if(q==null)return;var r=o.getFiles();if(r.length>0){if(m.props.handleDroppedFiles&&c("isEventHandled")(m.props.handleDroppedFiles(q,r)))return;c("getTextContentFromFiles")(r,function(t){t&&m.update(k(p,q,t))});return}var s=m._internalDrag?"internal":"external";if(m.props.handleDrop&&c("isEventHandled")(m.props.handleDrop(q,o,s)))return;if(m._internalDrag){m.update(j(p,q));return}m.update(k(p,q,o.getText()))}};function j(l,m){var n=c("DraftModifier").moveText(l.getCurrentContent(),l.getSelection(),m);return c("EditorState").push(l,n,"insert-fragment")}function k(l,m,n){var o=c("DraftModifier").insertText(l.getCurrentContent(),m,n,l.getCurrentInlineStyle());return c("EditorState").push(l,o,"insert-fragment")}f.exports=i}),null);
__d("editOnBeforeInput",["BlockTree","DraftModifier","EditorState","UserAgent","getEntityKeyForSelection","isEventHandled","isSelectionAtLeafStart","nullthrows","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="'",i="/",j=c("UserAgent").isBrowser("Firefox");function k(n){return j&&(n==h||n==i)}function l(n,o,p,q){var r=c("DraftModifier").replaceText(n.getCurrentContent(),n.getSelection(),o,p,q);return c("EditorState").push(n,r,"insert-characters")}function m(n,o){__p&&__p();if(n._pendingStateFromBeforeInput!==undefined){n.update(n._pendingStateFromBeforeInput);n._pendingStateFromBeforeInput=undefined}var p=n._latestEditorState,q=o.data;if(!q)return;if(n.props.handleBeforeInput&&c("isEventHandled")(n.props.handleBeforeInput(q,p))){o.preventDefault();return}var r=p.getSelection(),s=r.getStartOffset(),t=r.getEndOffset(),u=r.getAnchorKey();if(!r.isCollapsed()){o.preventDefault();var v=p.getCurrentContent().getPlainText().slice(s,t);if(q===v)n.update(c("EditorState").forceSelection(p,r.merge({anchorOffset:t,focusOffset:t})));else n.update(l(p,q,p.getCurrentInlineStyle(),c("getEntityKeyForSelection")(p.getCurrentContent(),p.getSelection())));return}var w=l(p,q,p.getCurrentInlineStyle(),c("getEntityKeyForSelection")(p.getCurrentContent(),p.getSelection())),x=false;if(!x)x=c("isSelectionAtLeafStart")(n._latestCommittedEditorState);if(!x){var y=b.getSelection();if(y.anchorNode&&y.anchorNode.nodeType===Node.TEXT_NODE){var z=y.anchorNode.parentNode;x=z.nodeName==="SPAN"&&z.firstChild.nodeType===Node.TEXT_NODE&&z.firstChild.nodeValue.indexOf("\t")!==-1}}if(!x){var A=c("BlockTree").getFingerprint(p.getBlockTree(u)),B=c("BlockTree").getFingerprint(w.getBlockTree(u));x=A!==B}if(!x)x=k(q);if(!x)x=c("nullthrows")(w.getDirectionMap()).get(u)!==c("nullthrows")(p.getDirectionMap()).get(u);if(x){o.preventDefault();n.update(w);return}w=c("EditorState").set(w,{nativelyRenderedContent:w.getCurrentContent()});n._pendingStateFromBeforeInput=w;c("setImmediate")(function(){if(n._pendingStateFromBeforeInput!==undefined){n.update(n._pendingStateFromBeforeInput);n._pendingStateFromBeforeInput=undefined}})}f.exports=m}),null);
__d("editOnBlur",["EditorState","containsNode","getActiveElement"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){__p&&__p();if(c("getActiveElement")()===document.body){var k=b.getSelection(),l=i.editor;if(k.rangeCount===1&&c("containsNode")(l,k.anchorNode)&&c("containsNode")(l,k.focusNode))k.removeAllRanges()}var m=i._latestEditorState,n=m.getSelection();if(!n.getHasFocus())return;var o=n.set("hasFocus",false);i.props.onBlur&&i.props.onBlur(j);i.update(c("EditorState").acceptSelection(m,o))}f.exports=h}),null);
__d("editOnCompositionStart",["EditorState"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){i.setMode("composite");i.update(c("EditorState").set(i._latestEditorState,{inCompositionMode:true}));i._onCompositionStart(j)}f.exports=h}),null);
__d("getFragmentFromSelection",["getContentStateFragment"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=i.getSelection();if(j.isCollapsed())return null;return c("getContentStateFragment")(i.getCurrentContent(),j)}f.exports=h}),null);
__d("editOnCopy",["getFragmentFromSelection"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=i._latestEditorState,l=k.getSelection();if(l.isCollapsed()){j.preventDefault();return}i.setClipboard(c("getFragmentFromSelection")(i._latestEditorState))}f.exports=h}),null);
__d("editOnCut",["DraftModifier","EditorState","Style","getFragmentFromSelection","getScrollPosition"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j,k){__p&&__p();var l=j._latestEditorState,m=l.getSelection(),n=k.target,o=void 0;if(m.isCollapsed()){k.preventDefault();return}if(n instanceof Node)o=c("getScrollPosition")(c("Style").getScrollParent(n));var p=c("getFragmentFromSelection")(l);j.setClipboard(p);j.setMode("cut");setTimeout(function(){j.restoreEditorDOM(o);j.exitCurrentMode();j.update(i(l))},0)}function i(j){var k=c("DraftModifier").removeRange(j.getCurrentContent(),j.getSelection(),"forward");return c("EditorState").push(j,k,"remove-range")}f.exports=h}),null);
__d("editOnDragOver",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){i._internalDrag=false;i.setMode("drag");j.preventDefault()}f.exports=h}),null);
__d("editOnDragStart",[],(function a(b,c,d,e,f,g){"use strict";function h(i){i._internalDrag=true;i.setMode("drag")}f.exports=h}),null);
__d("editOnFocus",["EditorState","UserAgent"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=i._latestEditorState,l=k.getSelection();if(l.getHasFocus())return;var m=l.set("hasFocus",true);i.props.onFocus&&i.props.onFocus(j);if(c("UserAgent").isBrowser("Chrome < 60.0.3081.0"))i.update(c("EditorState").forceSelection(k,m));else i.update(c("EditorState").acceptSelection(k,m))}f.exports=h}),null);
__d("editOnInput",["DraftModifier","DraftOffsetKey","EditorState","UserAgent","findAncestorOffsetKey","gkx","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("UserAgent").isEngine("Gecko"),i="\n\n";function j(k){__p&&__p();if(k._pendingStateFromBeforeInput!==undefined){k.update(k._pendingStateFromBeforeInput);k._pendingStateFromBeforeInput=undefined}var l=b.getSelection(),m=l.anchorNode,n=l.isCollapsed,o=m.nodeType!==Node.TEXT_NODE,p=m.nodeType!==Node.TEXT_NODE&&m.nodeType!==Node.ELEMENT_NODE;if(c("gkx")("AT5-KQB0Xj_CDLWUIMILzoGYzlpu0hwpg4CPaxfzm51RfcOYLYkvJCug0it-P2OAOdRH1lNv4lP4oODRvdq9nXftShx8XbKClVLq-dwF7Ip31Q")){if(o)return}else if(p)return;if(m.nodeType===Node.TEXT_NODE&&(m.previousSibling!==null||m.nextSibling!==null)){var q=m.parentNode;m.nodeValue=q.textContent;for(var r=q.firstChild;r!==null;r=r.nextSibling)if(r!==m)q.removeChild(r)}var s=m.textContent,t=k._latestEditorState,u=c("nullthrows")(c("findAncestorOffsetKey")(m)),v=c("DraftOffsetKey").decode(u),w=v.blockKey,x=v.decoratorKey,y=v.leafKey,z=t.getBlockTree(w).getIn([x,"leaves",y]),A=z.start,B=z.end,C=t.getCurrentContent(),D=C.getBlockForKey(w),E=D.getText().slice(A,B);if(s.endsWith(i))s=s.slice(0,-1);if(s===E)return;var F=t.getSelection(),G=F.merge({anchorOffset:A,focusOffset:B,isBackward:false}),H=D.getEntityAt(A),I=H&&C.getEntity(H),J=I&&I.getMutability(),K=J==="MUTABLE",L=K?"spellcheck-change":"apply-entity",M=c("DraftModifier").replaceText(C,G,s,D.getInlineStyleAt(A),K?D.getEntityAt(A):null),N,O,P,Q;if(h){N=l.anchorOffset;O=l.focusOffset;P=A+Math.min(N,O);Q=P+Math.abs(N-O);N=P;O=Q}else{var R=s.length-E.length;P=F.getStartOffset();Q=F.getEndOffset();N=n?Q+R:P;O=Q+R}var S=M.merge({selectionBefore:C.getSelectionAfter(),selectionAfter:F.merge({anchorOffset:N,focusOffset:O})});k.update(c("EditorState").push(t,S,L))}f.exports=j}),null);
__d("KeyBindingUtil",["UserAgent"],(function a(b,c,d,e,f,g){"use strict";var h=c("UserAgent").isPlatform("Mac OS X"),i={isCtrlKeyCommand:function j(k){return!!k.ctrlKey&&!k.altKey},isOptionKeyCommand:function j(k){return h&&k.altKey},hasCommandModifier:function j(k){return h?!!k.metaKey&&!k.altKey:i.isCtrlKeyCommand(k)}};f.exports=i}),null);
__d("SecondaryClipboard",["DraftModifier","EditorState","getContentStateFragment","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=null,i={cut:function j(k){__p&&__p();var l=k.getCurrentContent(),m=k.getSelection(),n=null;if(m.isCollapsed()){var o=m.getAnchorKey(),p=l.getBlockForKey(o).getLength();if(p===m.getAnchorOffset())return k;n=m.set("focusOffset",p)}else n=m;n=c("nullthrows")(n);h=c("getContentStateFragment")(l,n);var q=c("DraftModifier").removeRange(l,n,"forward");if(q===l)return k;return c("EditorState").push(k,q,"remove-range")},paste:function j(k){if(!h)return k;var l=c("DraftModifier").replaceWithFragment(k.getCurrentContent(),k.getSelection(),h);return c("EditorState").push(k,l,"insert-fragment")}};f.exports=i}),null);
__d("getRangeClientRects",["invariant","UserAgent"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("UserAgent").isBrowser("Chrome");function j(l){__p&&__p();var m=l.cloneRange(),n=[];for(var o=l.endContainer;o!=null;o=o.parentNode){var p=o===l.commonAncestorContainer;if(p)m.setStart(l.startContainer,l.startOffset);else m.setStart(m.endContainer,0);var q=Array.from(m.getClientRects());n.push(q);if(p){var r;n.reverse();return(r=[]).concat.apply(r,n)}m.setEndBefore(o)}h(0)}var k=i?j:function(l){return Array.from(l.getClientRects())};f.exports=k}),null);
__d("expandRangeToStartOfLine",["invariant","UnicodeUtils","getRangeClientRects"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(m){__p&&__p();var n=getComputedStyle(m),o=document.createElement("div");o.style.fontFamily=n.fontFamily;o.style.fontSize=n.fontSize;o.style.fontStyle=n.fontStyle;o.style.fontWeight=n.fontWeight;o.style.lineHeight=n.lineHeight;o.style.position="absolute";o.textContent="M";var p=document.body;p||h(0);p.appendChild(o);var q=o.getBoundingClientRect();p.removeChild(o);return q.height}function j(m,n){__p&&__p();var o=Infinity,p=Infinity,q=-Infinity,r=-Infinity;for(var s=0;s<m.length;s++){var t=m[s];if(t.width===0||t.width===1)continue;o=Math.min(o,t.top);p=Math.min(p,t.bottom);q=Math.max(q,t.top);r=Math.max(r,t.bottom)}return q<=p&&q-o<n&&r-p<n}function k(m){switch(m.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return m.length;default:return m.childNodes.length}}function l(m){__p&&__p();m.collapsed||h(0);m=m.cloneRange();var n=m.startContainer;if(n.nodeType!==1)n=n.parentNode;var o=i(n),p=m.endContainer,q=m.endOffset;m.setStart(m.startContainer,0);while(j(c("getRangeClientRects")(m),o)){p=m.startContainer;q=m.startOffset;p.parentNode||h(0);m.setStartBefore(p);if(p.nodeType===1&&getComputedStyle(p).display!=="inline")break}var r=p,s=q-1;do{var t=r.nodeValue;for(var u=s;u>=0;u--){if(t!=null&&u>0&&c("UnicodeUtils").isSurrogatePair(t,u-1))continue;m.setStart(r,u);if(j(c("getRangeClientRects")(m),o)){p=r;q=u}else break}if(u===-1||r.childNodes.length===0)break;r=r.childNodes[u];s=k(r)}while(true);m.setStart(p,q);return m}f.exports=l}),null);
__d("getDraftEditorSelectionWithNodes",["invariant","findAncestorOffsetKey","getSelectionOffsetKeyForNode","getUpdatedSelectionState","nullthrows"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(n,o,p,q,r,s){__p&&__p();var t=p.nodeType===Node.TEXT_NODE,u=r.nodeType===Node.TEXT_NODE;if(t&&u)return{selectionState:c("getUpdatedSelectionState")(n,c("nullthrows")(c("findAncestorOffsetKey")(p)),q,c("nullthrows")(c("findAncestorOffsetKey")(r)),s),needsRecovery:false};var v=null,w=null,x=true;if(t){v={key:c("nullthrows")(c("findAncestorOffsetKey")(p)),offset:q};w=l(o,r,s)}else if(u){w={key:c("nullthrows")(c("findAncestorOffsetKey")(r)),offset:s};v=l(o,p,q)}else{v=l(o,p,q);w=l(o,r,s);if(p===r&&q===s)x=!!p.firstChild&&p.firstChild.nodeName!=="BR"}return{selectionState:c("getUpdatedSelectionState")(n,v.key,v.offset,w.key,w.offset),needsRecovery:x}}function j(n){while(n.firstChild&&(n.firstChild instanceof Element&&n.firstChild.getAttribute("data-blocks")==="true"||c("getSelectionOffsetKeyForNode")(n.firstChild)))n=n.firstChild;return n}function k(n){while(n.lastChild&&(n.lastChild instanceof Element&&n.lastChild.getAttribute("data-blocks")==="true"||c("getSelectionOffsetKeyForNode")(n.lastChild)))n=n.lastChild;return n}function l(n,o,p){__p&&__p();var q=o,r=c("findAncestorOffsetKey")(q);r!=null||n&&(n===q||n.firstChild===q)||h(0);if(n===q){q=q.firstChild;q instanceof Element&&q.getAttribute("data-contents")==="true"||h(0);if(p>0)p=q.childNodes.length}if(p===0){var s=null;if(r!=null)s=r;else{var t=j(q);s=c("nullthrows")(c("getSelectionOffsetKeyForNode")(t))}return{key:s,offset:0}}var u=q.childNodes[p-1],v=null,w=null;if(!c("getSelectionOffsetKeyForNode")(u)){v=c("nullthrows")(r);w=m(u)}else{var x=k(u);v=c("nullthrows")(c("getSelectionOffsetKeyForNode")(x));w=m(x)}return{key:v,offset:w}}function m(n){var o=n.textContent;return o==="\n"?0:o.length}f.exports=i}),null);
__d("moveSelectionBackward",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){__p&&__p();var k=i.getSelection(),l=i.getCurrentContent(),m=k.getStartKey(),n=k.getStartOffset(),o=m,p=0;if(j>n){var q=l.getKeyBefore(m);if(q==null)o=m;else{o=q;var r=l.getBlockForKey(q);p=r.getText().length}}else p=n-j;return k.merge({focusKey:o,focusOffset:p,isBackward:true})}f.exports=h}),null);
__d("removeTextWithStrategy",["DraftModifier"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k){__p&&__p();var l=i.getSelection(),m=i.getCurrentContent(),n=l;if(l.isCollapsed()){if(k==="forward"){if(i.isSelectionAtEndOfContent())return m}else if(i.isSelectionAtStartOfContent())return m;n=j(i);if(n===l)return m}return c("DraftModifier").removeRange(m,n,k)}f.exports=h}),null);
__d("keyCommandBackspaceToStartOfLine",["EditorState","expandRangeToStartOfLine","getDraftEditorSelectionWithNodes","moveSelectionBackward","removeTextWithStrategy"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=c("removeTextWithStrategy")(i,function(k){var l=k.getSelection();if(l.isCollapsed()&&l.getAnchorOffset()===0)return c("moveSelectionBackward")(k,1);var m=b.getSelection(),n=m.getRangeAt(0);n=c("expandRangeToStartOfLine")(n);return c("getDraftEditorSelectionWithNodes")(k,null,n.endContainer,n.endOffset,n.startContainer,n.startOffset).selectionState},"backward");if(j===i.getCurrentContent())return i;return c("EditorState").push(i,j,"remove-range")}f.exports=h}),null);
__d("DraftRemovableWord",["TokenizeUtil"],(function a(b,c,d,e,f,g){"use strict";var h=c("TokenizeUtil").getPunctuation(),i="['\u2018\u2019]",j="\\s|(?![_])"+h,k="^(?:"+j+")*(?:"+i+"|(?!"+j+").)*(?:(?!"+j+").)",l=new RegExp(k),m="(?:(?!"+j+").)(?:"+i+"|(?!"+j+").)*(?:"+j+")*$",n=new RegExp(m);function o(q,r){var s=r?n.exec(q):l.exec(q);return s?s[0]:q}var p={getBackward:function q(r){return o(r,true)},getForward:function q(r){return o(r,false)}};f.exports=p}),null);
__d("keyCommandBackspaceWord",["DraftRemovableWord","EditorState","moveSelectionBackward","removeTextWithStrategy"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){var j=c("removeTextWithStrategy")(i,function(k){var l=k.getSelection(),m=l.getStartOffset();if(m===0)return c("moveSelectionBackward")(k,1);var n=l.getStartKey(),o=k.getCurrentContent(),p=o.getBlockForKey(n).getText().slice(0,m),q=c("DraftRemovableWord").getBackward(p);return c("moveSelectionBackward")(k,q.length||1)},"backward");if(j===i.getCurrentContent())return i;return c("EditorState").push(i,j,"remove-range")}f.exports=h}),null);
__d("moveSelectionForward",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=i.getSelection(),l=k.getStartKey(),m=k.getStartOffset(),n=i.getCurrentContent(),o=l,p,q=n.getBlockForKey(l);if(j>q.getText().length-m){o=n.getKeyAfter(l);p=0}else p=m+j;return k.merge({focusKey:o,focusOffset:p})}f.exports=h}),null);
__d("keyCommandDeleteWord",["DraftRemovableWord","EditorState","moveSelectionForward","removeTextWithStrategy"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=c("removeTextWithStrategy")(i,function(k){var l=k.getSelection(),m=l.getStartOffset(),n=l.getStartKey(),o=k.getCurrentContent(),p=o.getBlockForKey(n).getText().slice(m),q=c("DraftRemovableWord").getForward(p);return c("moveSelectionForward")(k,q.length||1)},"forward");if(j===i.getCurrentContent())return i;return c("EditorState").push(i,j,"remove-range")}f.exports=h}),null);
__d("keyCommandInsertNewline",["DraftModifier","EditorState"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=c("DraftModifier").splitBlock(i.getCurrentContent(),i.getSelection());return c("EditorState").push(i,j,"split-block")}f.exports=h}),null);
__d("keyCommandMoveSelectionToEndOfBlock",["EditorState"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=i.getSelection(),k=j.getEndKey(),l=i.getCurrentContent(),m=l.getBlockForKey(k).getLength();return c("EditorState").set(i,{selection:j.merge({anchorKey:k,anchorOffset:m,focusKey:k,focusOffset:m,isBackward:false}),forceSelection:true})}f.exports=h}),null);
__d("keyCommandMoveSelectionToStartOfBlock",["EditorState"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=i.getSelection(),k=j.getStartKey();return c("EditorState").set(i,{selection:j.merge({anchorKey:k,anchorOffset:0,focusKey:k,focusOffset:0,isBackward:false}),forceSelection:true})}f.exports=h}),null);
__d("keyCommandPlainBackspace",["EditorState","UnicodeUtils","moveSelectionBackward","removeTextWithStrategy"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){var j=c("removeTextWithStrategy")(i,function(l){var k=l.getSelection(),m=l.getCurrentContent(),n=k.getAnchorKey(),o=k.getAnchorOffset(),p=m.getBlockForKey(n).getText()[o-1];return c("moveSelectionBackward")(l,p?c("UnicodeUtils").getUTF16Length(p,0):1)},"backward");if(j===i.getCurrentContent())return i;var k=i.getSelection();return c("EditorState").push(i,j.set("selectionBefore",k),k.isCollapsed()?"backspace-character":"remove-range")}f.exports=h}),null);
__d("keyCommandPlainDelete",["EditorState","UnicodeUtils","moveSelectionForward","removeTextWithStrategy"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){var j=c("removeTextWithStrategy")(i,function(l){var k=l.getSelection(),m=l.getCurrentContent(),n=k.getAnchorKey(),o=k.getAnchorOffset(),p=m.getBlockForKey(n).getText()[o];return c("moveSelectionForward")(l,p?c("UnicodeUtils").getUTF16Length(p,0):1)},"forward");if(j===i.getCurrentContent())return i;var k=i.getSelection();return c("EditorState").push(i,j.set("selectionBefore",k),k.isCollapsed()?"delete-character":"remove-range")}f.exports=h}),null);
__d("keyCommandTransposeCharacters",["DraftModifier","EditorState","getContentStateFragment"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=i.getSelection();if(!j.isCollapsed())return i;var k=j.getAnchorOffset();if(k===0)return i;var l=j.getAnchorKey(),m=i.getCurrentContent(),n=m.getBlockForKey(l),o=n.getLength();if(o<=1)return i;var p,q;if(k===o){p=j.set("anchorOffset",k-1);q=j}else{p=j.set("focusOffset",k+1);q=p.set("anchorOffset",k+1)}var r=c("getContentStateFragment")(m,p),s=c("DraftModifier").removeRange(m,p,"backward"),t=s.getSelectionAfter(),u=t.getAnchorOffset()-1,v=t.merge({anchorOffset:u,focusOffset:u}),w=c("DraftModifier").replaceWithFragment(s,v,r),x=c("EditorState").push(i,w,"insert-fragment");return c("EditorState").acceptSelection(x,q)}f.exports=h}),null);
__d("keyCommandUndo",["EditorState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k){__p&&__p();var l=c("EditorState").undo(j);if(j.getLastChangeType()==="spellcheck-change"){var m=l.getCurrentContent();k(c("EditorState").set(l,{nativelyRenderedContent:m}));return}i.preventDefault();if(!j.getNativelyRenderedContent()){k(l);return}k(c("EditorState").set(j,{nativelyRenderedContent:null}));setTimeout(function(){k(l)},0)}f.exports=h}),null);
__d("editOnKeyDown",["DraftModifier","EditorState","KeyBindingUtil","Keys","SecondaryClipboard","UserAgent","isEventHandled","keyCommandBackspaceToStartOfLine","keyCommandBackspaceWord","keyCommandDeleteWord","keyCommandInsertNewline","keyCommandMoveSelectionToEndOfBlock","keyCommandMoveSelectionToStartOfBlock","keyCommandPlainBackspace","keyCommandPlainDelete","keyCommandTransposeCharacters","keyCommandUndo"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("KeyBindingUtil").isOptionKeyCommand,i=c("UserAgent").isBrowser("Chrome");function j(l,m){__p&&__p();switch(l){case"redo":return c("EditorState").redo(m);case"delete":return c("keyCommandPlainDelete")(m);case"delete-word":return c("keyCommandDeleteWord")(m);case"backspace":return c("keyCommandPlainBackspace")(m);case"backspace-word":return c("keyCommandBackspaceWord")(m);case"backspace-to-start-of-line":return c("keyCommandBackspaceToStartOfLine")(m);case"split-block":return c("keyCommandInsertNewline")(m);case"transpose-characters":return c("keyCommandTransposeCharacters")(m);case"move-selection-to-start-of-block":return c("keyCommandMoveSelectionToStartOfBlock")(m);case"move-selection-to-end-of-block":return c("keyCommandMoveSelectionToEndOfBlock")(m);case"secondary-cut":return c("SecondaryClipboard").cut(m);case"secondary-paste":return c("SecondaryClipboard").paste(m);default:return m}}function k(l,m){__p&&__p();var n=m.which,o=l._latestEditorState;function p(t){var u=l.props[t];if(u){u(m);return true}else return false}switch(n){case c("Keys").RETURN:m.preventDefault();if(l.props.handleReturn&&c("isEventHandled")(l.props.handleReturn(m,o)))return;break;case c("Keys").ESC:m.preventDefault();if(p("onEscape"))return;break;case c("Keys").TAB:if(p("onTab"))return;break;case c("Keys").UP:if(p("onUpArrow"))return;break;case c("Keys").RIGHT:if(p("onRightArrow"))return;break;case c("Keys").DOWN:if(p("onDownArrow"))return;break;case c("Keys").LEFT:if(p("onLeftArrow"))return;break;case c("Keys").SPACE:if(i&&h(m)){m.preventDefault();var q=c("DraftModifier").replaceText(o.getCurrentContent(),o.getSelection(),"\xa0");l.update(c("EditorState").push(o,q,"insert-characters"));return}}var r=l.props.keyBindingFn(m);if(!r)return;if(r==="undo"){c("keyCommandUndo")(m,o,l.update);return}m.preventDefault();if(l.props.handleKeyCommand&&c("isEventHandled")(l.props.handleKeyCommand(r,o)))return;var s=j(r,o);if(s!==o)l.update(s)}f.exports=k}),null);
__d("getSafeBodyFromHTML",["invariant","UserAgent"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("UserAgent").isBrowser("IE <= 9");function j(k){var l,m=null;if(!i&&document.implementation&&document.implementation.createHTMLDocument){l=document.implementation.createHTMLDocument("foo");l.documentElement||h(0);l.documentElement.innerHTML=k;m=l.getElementsByTagName("body")[0]}return m}f.exports=j}),null);
__d("convertFromHTMLToContentBlocks",["cx","invariant","CharacterMetadata","ContentBlock","ContentBlockNode","DefaultDraftBlockRenderMap","DraftEntity","immutable","URI","generateRandomKey","getSafeBodyFromHTML","gkx","sanitizeDraftText"],(function aa(ba,a,ca,da,ea,fa,ga,ha){"use strict";__p&&__p();var b,ia=a("immutable").Set,c=a("gkx")("AT7I-kBaiZBk-5ySRgJaDBW6tSXkDwvlqxCLLVy7xjKFQh4OpQOjZpy_bJOblZZDQOjyMyX8JeUF5aALSjx2ACRN"),d=a("immutable").List,e=a("immutable").OrderedSet,ja="&nbsp;",f=" ",ka=4,la=new RegExp("\r","g"),ma=new RegExp("\n","g"),na=new RegExp(ja,"g"),oa=new RegExp("&#13;?","g"),pa=new RegExp("&#8203;?","g"),qa=["bold","bolder","500","600","700","800","900"],ra=["light","lighter","100","200","300","400"],sa={b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"},g=(b={},b._3kq1=0,b._3kq2=1,b._3kq3=2,b._3kq4=3,b._3kq5=4,b),ta=["className","href","rel","target","title"],ua=["alt","className","height","src","width"],h=void 0,i={text:"",inlines:[],entities:[],blocks:[]},va={children:d(),depth:0,key:"",type:""},j=function j(u,v){if(u==="li")return v==="ol"?"ordered-list-item":"unordered-list-item";return null},k=function k(u){var v=u.get("unstyled").element,w=ia([]);u.forEach(function(x){if(x.aliasedElements)x.aliasedElements.forEach(function(y){w=w.add(y)});w=w.add(x.element)});return w.filter(function(x){return x&&x!==v}).toArray().sort()},l=function l(u,v,w){for(var x=0;x<w.length;x++){var y=w[x](u,v);if(y)return y}return null},m=function m(u,v,w){var x=w.filter(function(y){return y.element===u||y.wrapper===u||y.aliasedElements&&y.aliasedElements.some(function(z){return z===u})}).keySeq().toSet().toArray().sort();switch(x.length){case 0:return"unstyled";case 1:return x[0];default:return l(u,v,[j])||"unstyled"}},n=function n(u,v,w){__p&&__p();var x,y=sa[u];if(y)w=w.add(y).toOrderedSet();else if(v instanceof HTMLElement)(function(){__p&&__p();var z=v;w=w.withMutations(function(A){__p&&__p();var B=z.style.fontWeight,C=z.style.fontStyle,D=z.style.textDecoration;if(qa.indexOf(B)>=0)A.add("BOLD");else if(ra.indexOf(B)>=0)A.remove("BOLD");if(C==="italic")A.add("ITALIC");else if(C==="normal")A.remove("ITALIC");if(D==="underline")A.add("UNDERLINE");if(D==="line-through")A.add("STRIKETHROUGH");if(D==="none"){A.remove("UNDERLINE");A.remove("STRIKETHROUGH")}}).toOrderedSet()})();return w},o=function o(u,v,w){__p&&__p();var x=u.text.slice(-1),y=v.text.slice(0,1);if(x==="\r"&&y==="\r"&&!w){u.text=u.text.slice(0,-1);u.inlines.pop();u.entities.pop();u.blocks.pop()}if(x==="\r")if(v.text===f||v.text==="\n")return u;else if(y===f||y==="\n"){v.text=v.text.slice(1);v.inlines.shift();v.entities.shift()}return{text:u.text+v.text,inlines:u.inlines.concat(v.inlines),entities:u.entities.concat(v.entities),blocks:u.blocks.concat(v.blocks)}},p=function p(u,v){return v.some(function(w){return u.indexOf("<"+w)!==-1})},q=function q(u){u instanceof HTMLAnchorElement||ha(0);var v=u.protocol;return v==="http:"||v==="https:"||v==="mailto:"},wa=function wa(u){var v=new Array(1);if(u)v[0]=u;return babelHelpers["extends"]({},i,{text:f,inlines:[e()],entities:v})},r=function r(){return babelHelpers["extends"]({},i,{text:"\n",inlines:[e()],entities:new Array(1)})},xa=function xa(){var u=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return babelHelpers["extends"]({},va,u)},s=function s(u,v){var w=arguments.length<=2||arguments[2]===undefined?null:arguments[2];return{text:"\r",inlines:[e()],entities:new Array(1),blocks:[xa({parent:w,key:a("generateRandomKey")(),type:u,depth:Math.max(0,Math.min(ka,v))})]}},ya=function ya(u){var v=arguments.length<=1||arguments[1]===undefined?0:arguments[1];Object.keys(g).some(function(w){if(u.classList.contains(w))v=g[w]});return v},t=function t(u,v,w,x,y,z,A,B,C,D){__p&&__p();var Ca,E,F=h,G=v.nodeName.toLowerCase(),H=u,I="unstyled",J=false,K=y&&m(y,x,B),L=babelHelpers["extends"]({},i),M=null,N=void 0;if(G==="#text"){var O=v.textContent,P=O.trim();if(x&&P===""&&v.parentElement){var Q=v.parentElement.nodeName.toLowerCase();if(Q==="ol"||Q==="ul")return{chunk:babelHelpers["extends"]({},i),entityMap:u}}if(P===""&&y!=="pre")return{chunk:wa(C),entityMap:u};if(y!=="pre")O=O.replace(ma,f);h=G;return{chunk:{text:O,inlines:Array(O.length).fill(w),entities:Array(O.length).fill(C),blocks:[]},entityMap:u}}h=G;if(G==="br"){if(F==="br"&&(!y||K==="unstyled"))return{chunk:s("unstyled",A,D),entityMap:u};return{chunk:r(),entityMap:u}}if(G==="img"&&v instanceof HTMLImageElement&&v.attributes.getNamedItem("src")&&v.attributes.getNamedItem("src").value)(function(){var X=v,Y={};ua.forEach(function(Z){var $=X.getAttribute(Z);if($)Y[Z]=$});v.textContent="\ud83d\udcf7";C=a("DraftEntity").__create("IMAGE","MUTABLE",Y||{})})();w=n(G,v,w);if(G==="ul"||G==="ol"){if(x)A+=1;x=G}if(!c&&G==="li"&&v instanceof HTMLElement)A=ya(v,A);var R=m(G,x,B),S=x&&y==="li"&&G==="li",T=(!y||c)&&z.indexOf(G)!==-1;if(S||T){L=s(R,A,D);N=L.blocks[0].key;y=G;J=!c}if(S)I=x==="ul"?"unordered-list-item":"ordered-list-item";var U=v.firstChild;if(U!=null)G=U.nodeName.toLowerCase();var V=null;while(U){if(U instanceof HTMLAnchorElement&&U.href&&q(U))(function(){var X=U,Y={};ta.forEach(function(Z){var $=X.getAttribute(Z);if($)Y[Z]=$});Y.url=new(a("URI"))(X.href).toString();V=a("DraftEntity").__create("LINK","MUTABLE",Y||{})})();else V=undefined;var Da=t(H,U,w,x,y,z,A,B,V||C,c?N:null),Ea=Da.chunk,Fa=Da.entityMap;M=Ea;H=Fa;L=o(L,M,c);var W=U.nextSibling;if(!D&&W&&z.indexOf(G)>=0&&y)L=o(L,r());if(W)G=W.nodeName.toLowerCase();U=W}if(J)L=o(L,s(I,A,D));return{chunk:L,entityMap:H}},za=function za(u,v,w,x){__p&&__p();u=u.trim().replace(la,"").replace(na,f).replace(oa,"").replace(pa,"");var y=k(w),z=v(u);if(!z)return null;h=null;var A=p(u,y)?y:["div"],B=t(x,z,e(),"ul",null,A,-1,w),C=B.chunk,D=B.entityMap;if(C.text.indexOf("\r")===0)C={text:C.text.slice(1),inlines:C.inlines.slice(1),entities:C.entities.slice(1),blocks:C.blocks};if(C.text.slice(-1)==="\r"){C.text=C.text.slice(0,-1);C.inlines=C.inlines.slice(0,-1);C.entities=C.entities.slice(0,-1);C.blocks.pop()}if(C.blocks.length===0)C.blocks.push(babelHelpers["extends"]({},i,{type:"unstyled",depth:0}));if(C.text.split("\r").length===C.blocks.length+1)C.blocks.unshift({type:"unstyled",depth:0});return{chunk:C,entityMap:D}},Aa=function Aa(u){__p&&__p();if(!u||!u.text||!Array.isArray(u.blocks))return null;var v={cacheRef:{},contentBlocks:[]},w=0,x=u.blocks,y=u.inlines,z=u.entities,A=c?a("ContentBlockNode"):a("ContentBlock");return u.text.split("\r").reduce(function(B,C,D){__p&&__p();var Ca;C=a("sanitizeDraftText")(C);var E=x[D],F=w+C.length,G=y.slice(w,F),H=z.slice(w,F),I=d(G.map(function(P,D){var Q={style:P,entity:null};if(H[D])Q.entity=H[D];return a("CharacterMetadata").create(Q)}));w=F+1;var J=E.depth,K=E.type,L=E.parent,M=E.key||a("generateRandomKey")(),N=null;if(L)(function(){__p&&__p();var P,Q=B.cacheRef[L],R=B.contentBlocks[Q];if(R.getChildKeys().isEmpty()&&R.getText())(function(){var S=R.getCharacterList(),T=R.getText();N=a("generateRandomKey")();var U=new(a("ContentBlockNode"))({key:N,text:T,characterList:S,parent:L,nextSibling:M});B.contentBlocks.push(U);R=R.withMutations(function(E){E.set("characterList",d()).set("text","").set("children",R.children.push(U.getKey()))})})();B.contentBlocks[Q]=R.set("children",R.children.push(M))})();var O=new A({key:M,parent:L,type:K,depth:J,text:C,characterList:I,prevSibling:N||(D===0||x[D-1].parent!==L?null:x[D-1].key),nextSibling:D===x.length-1||x[D+1].parent!==L?null:x[D+1].key});B.contentBlocks.push(O);B.cacheRef[O.key]=D;return B},v).contentBlocks},Ba=function Ba(u){var v=arguments.length<=1||arguments[1]===undefined?a("getSafeBodyFromHTML"):arguments[1],w=arguments.length<=2||arguments[2]===undefined?a("DefaultDraftBlockRenderMap"):arguments[2],x=za(u,v,w,a("DraftEntity"));if(x==null)return null;var y=x.chunk,z=x.entityMap,A=Aa(y);return{contentBlocks:A,entityMap:z}};ea.exports=Ba}),null);
__d("convertFromHTMLToContentBlocks2",["cx","CharacterMetadata","ContentBlock","ContentBlockNode","DraftEntity","DefaultDraftBlockRenderMap","generateRandomKey","getSafeBodyFromHTML","gkx","immutable","URI"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=c("immutable").List,k=c("immutable").Map,l=c("immutable").OrderedSet,m=c("gkx")("AT7I-kBaiZBk-5ySRgJaDBW6tSXkDwvlqxCLLVy7xjKFQh4OpQOjZpy_bJOblZZDQOjyMyX8JeUF5aALSjx2ACRN"),n="&nbsp;",o=" ",p=new RegExp("\r","g"),q=new RegExp("\n","g"),r=new RegExp(n,"g"),s=new RegExp("&#13;?","g"),t=new RegExp("&#8203;?","g"),u=["bold","bolder","500","600","700","800","900"],v=["light","lighter","100","200","300","400"],w=["className","href","rel","target","title"],x=["alt","className","height","src","width"],y=(i={},i._3kq1=0,i._3kq2=1,i._3kq3=2,i._3kq4=3,i._3kq5=4,i),z=k({b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"}),A=function A(G){__p&&__p();var H={};G.mapKeys(function(I,J){var K=[J.element];if(J.aliasedElements!==undefined)K.push.apply(K,J.aliasedElements);K.forEach(function(L){if(H[L]===undefined)H[L]=I;else if(typeof H[L]==="string")H[L]=[H[L],I];else H[L].push(I)})});return k(H)},B=function B(G){var H=arguments.length<=1||arguments[1]===undefined?0:arguments[1];Object.keys(y).some(function(I){if(G.classList.contains(I))H=y[I]});return H},C=function C(G){return!!(G instanceof HTMLAnchorElement&&G.href&&(G.protocol==="http:"||G.protocol==="https:"||G.protocol==="mailto:"))},D=function D(G){return!!(G instanceof HTMLImageElement&&G.attributes.getNamedItem("src")&&G.attributes.getNamedItem("src").value)};function E(G,H){this.clear();this.blockTypeMap=G;this.disambiguate=H}E.prototype.clear=function(){__p&&__p();this.characterList=j();this.blockConfigs=[];this.currentBlockType="unstyled";this.currentDepth=0;this.currentEntity=null;this.currentStyle=l();this.currentText="";this.entityMap=c("DraftEntity");this.wrapper="ul";this.contentBlocks=[]};E.prototype.addDOMNode=function(G){var H;this.contentBlocks=[];(H=this.blockConfigs).push.apply(H,this.$ContentBlocksBuilder1([G]));this.$ContentBlocksBuilder2();if(this.currentText!=="")this.blockConfigs.push(this.$ContentBlocksBuilder3());return this};E.prototype.getContentBlocks=function(){if(this.contentBlocks.length===0)if(m)this.$ContentBlocksBuilder4(this.blockConfigs);else this.$ContentBlocksBuilder5(this.blockConfigs);return{contentBlocks:this.contentBlocks,entityMap:this.entityMap}};E.prototype.addStyle=function(G){this.currentStyle=this.currentStyle.add(G)};E.prototype.removeStyle=function(G){this.currentStyle=this.currentStyle.remove(G)};E.prototype.$ContentBlocksBuilder3=function(){var G=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],H=G.key||c("generateRandomKey")(),I=babelHelpers["extends"]({key:H,type:this.currentBlockType,text:this.currentText,characterList:this.characterList,depth:this.currentDepth,parent:null,children:j(),prevSibling:null,nextSibling:null,childConfigs:[]},G);this.characterList=j();this.currentBlockType="unstyled";this.currentDepth=0;this.currentText="";return I};E.prototype.$ContentBlocksBuilder1=function(G){__p&&__p();var H=[];for(var I=0;I<G.length;I++){var J=G[I],K=J.nodeName.toLowerCase();if(K==="body"||K==="ol"||K==="ul"){this.$ContentBlocksBuilder2();if(this.currentText!=="")H.push(this.$ContentBlocksBuilder3());var L=this.wrapper;if(K==="ol"||K==="ul")this.wrapper=K;H.push.apply(H,this.$ContentBlocksBuilder1(Array.from(J.childNodes)));this.wrapper=L;continue}var M=this.blockTypeMap.get(K);if(M!==undefined){this.$ContentBlocksBuilder2();if(this.currentText!=="")H.push(this.$ContentBlocksBuilder3());var N=this.currentDepth,O=this.wrapper;this.wrapper=K==="pre"?"pre":this.wrapper;if(typeof M!=="string")M=this.disambiguate(K,this.wrapper)||M[0]||"unstyled";if(m&&J instanceof HTMLElement&&(M==="unordered-list-item"||M==="ordered-list-item"))this.currentDepth=B(J);var P=c("generateRandomKey")(),Q=this.$ContentBlocksBuilder1(Array.from(J.childNodes));this.$ContentBlocksBuilder2();H.push(this.$ContentBlocksBuilder3({key:P,childConfigs:Q,type:M}));this.currentDepth=N;this.wrapper=O;continue}if(K==="#text"){this.$ContentBlocksBuilder6(J);continue}if(D(J)){this.$ContentBlocksBuilder7(J);continue}if(C(J)){this.$ContentBlocksBuilder8(J,H);continue}var R=z.get(K);if(R!==undefined)this.addStyle(R);H.push.apply(H,this.$ContentBlocksBuilder1(Array.from(J.childNodes)));if(R!==undefined)this.removeStyle(R);this.$ContentBlocksBuilder9(J)}return H};E.prototype.$ContentBlocksBuilder10=function(G){var H;this.currentText+=G;var I=c("CharacterMetadata").create({style:this.currentStyle,entity:this.currentEntity});this.characterList=(H=this.characterList).push.apply(H,Array(G.length).fill(I))};E.prototype.$ContentBlocksBuilder2=function(){__p&&__p();var G=this.currentText.length,H=G-this.currentText.trimLeft().length,I=this.currentText.trimRight().length,J=this.characterList.findEntry(function(K){return K.getEntity()!==null});H=J!==undefined?Math.min(H,J[0]):H;J=this.characterList.reverse().findEntry(function(K){return K.getEntity()!==null});I=J!==undefined?Math.max(I,G-J[0]):I;if(H>I){this.currentText="";this.characterList=j()}else{this.currentText=this.currentText.slice(H,I);this.characterList=this.characterList.slice(H,I)}};E.prototype.$ContentBlocksBuilder6=function(G){var H=G.textContent,I=H.trim();if(I===""&&this.wrapper!=="pre")H=" ";if(this.wrapper!=="pre")H=H.replace(q,o);this.$ContentBlocksBuilder10(H)};E.prototype.$ContentBlocksBuilder7=function(G){__p&&__p();if(!(G instanceof HTMLImageElement))return;var H=G,I={};x.forEach(function(J){var K=H.getAttribute(J);if(K)I[J]=K});this.currentEntity=this.entityMap.__create("IMAGE","MUTABLE",I);this.$ContentBlocksBuilder10("\ud83d\udcf7");this.currentEntity=null};E.prototype.$ContentBlocksBuilder8=function(G,H){__p&&__p();if(!(G instanceof HTMLAnchorElement))return;var I=G,J={};w.forEach(function(K){var L=I.getAttribute(K);if(L)J[K]=L});J.url=new(c("URI"))(I.href).toString();this.currentEntity=this.entityMap.__create("LINK","MUTABLE",J||{});H.push.apply(H,this.$ContentBlocksBuilder1(Array.from(G.childNodes)));this.currentEntity=null};E.prototype.$ContentBlocksBuilder9=function(G){__p&&__p();if(!(G instanceof HTMLElement))return;var H=G,I=H.style.fontWeight,J=H.style.fontStyle,K=H.style.textDecoration;if(u.indexOf(I)>=0)this.addStyle("BOLD");else if(v.indexOf(I)>=0)this.removeStyle("BOLD");if(J==="italic")this.addStyle("ITALIC");else if(J==="normal")this.removeStyle("ITALIC");if(K==="underline")this.addStyle("UNDERLINE");if(K==="line-through")this.addStyle("STRIKETHROUGH");if(K==="none"){this.removeStyle("UNDERLINE");this.removeStyle("STRIKETHROUGH")}};E.prototype.$ContentBlocksBuilder4=function(G){__p&&__p();var H=arguments.length<=1||arguments[1]===undefined?null:arguments[1],I=G.length-1;for(var J=0;J<=I;J++){var K=G[J];K.parent=H;K.prevSibling=J>0?G[J-1].key:null;K.nextSibling=J<I?G[J+1].key:null;K.children=j(K.childConfigs.map(function(L){return L.key}));this.contentBlocks.push(new(c("ContentBlockNode"))(babelHelpers["extends"]({},K)));this.$ContentBlocksBuilder4(K.childConfigs,K.key)}};E.prototype.$ContentBlocksBuilder5=function(G){var H=G.length-1;for(var I=0;I<=H;I++){var J=G[I],K=this.$ContentBlocksBuilder11(J.childConfigs),L=K.text,M=K.characterList;this.contentBlocks.push(new(c("ContentBlock"))(babelHelpers["extends"]({},J,{text:J.text+L,characterList:J.characterList.concat(M)})))}};E.prototype.$ContentBlocksBuilder11=function(G){__p&&__p();var H=G.length-1,I="",J=j();for(var K=0;K<=H;K++){var L=G[K];I+=L.text;J=J.concat(L.characterList);if(I!==""&&L.blockType!=="unstyled"){I+="\n";J=J.push(J.last())}var M=this.$ContentBlocksBuilder11(L.childConfigs);I+=M.text;J=J.concat(M.characterList)}return{text:I,characterList:J}};var F=function F(G){__p&&__p();var H=arguments.length<=1||arguments[1]===undefined?c("getSafeBodyFromHTML"):arguments[1],I=arguments.length<=2||arguments[2]===undefined?c("DefaultDraftBlockRenderMap"):arguments[2];G=G.trim().replace(p,"").replace(r,o).replace(s,"").replace(t,"");var J=H(G);if(!J)return null;var K=A(I),L=function L(M,N){if(M==="li")return N==="ol"?"ordered-list-item":"unordered-list-item";return null};return new E(K,L).addDOMNode(J).getContentBlocks()};f.exports=F}),null);
__d("DraftPasteProcessor",["CharacterMetadata","ContentBlock","ContentBlockNode","immutable","convertFromHTMLToContentBlocks","convertFromHTMLToContentBlocks2","generateRandomKey","getSafeBodyFromHTML","gkx","sanitizeDraftText"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("immutable").List,i=c("immutable").Repeat,j=c("gkx")("AT7I-kBaiZBk-5ySRgJaDBW6tSXkDwvlqxCLLVy7xjKFQh4OpQOjZpy_bJOblZZDQOjyMyX8JeUF5aALSjx2ACRN"),k=j?c("ContentBlockNode"):c("ContentBlock"),l=c("gkx")("AT4Vn9c4nyCQi9FbI92idfipi4-xPrBGYoLyHdxBecidhoaDzIDMum5YRhGk1tg7g1I2N6GxZjMLsBIZPzEDVO4l"),m=l?c("convertFromHTMLToContentBlocks2"):c("convertFromHTMLToContentBlocks"),n={processHTML:function o(p,q){return m(p,c("getSafeBodyFromHTML"),q)},processText:function o(p,q,r){return p.reduce(function(s,t,u){t=c("sanitizeDraftText")(t);var v=c("generateRandomKey")(),w={key:v,type:r,text:t,characterList:h(i(q,t.length))};if(j&&u!==0){var x=u-1,y=s[x]=s[x].merge({nextSibling:v});w=babelHelpers["extends"]({},w,{prevSibling:y.getKey()})}s.push(new k(w));return s},[])}};f.exports=n}),null);
__d("adjustBlockDepthForContentState",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k,l){var m=j.getStartKey(),n=j.getEndKey(),o=i.getBlockMap(),p=o.toSeq().skipUntil(function(q,r){return r===m}).takeUntil(function(q,r){return r===n}).concat([[n,o.get(n)]]).map(function(q){var r=q.getDepth()+k;r=Math.max(0,Math.min(r,l));return q.set("depth",r)});o=o.merge(p);return i.merge({blockMap:o,selectionBefore:j,selectionAfter:j})}f.exports=h}),null);
__d("RichTextEditorUtil",["DraftModifier","EditorState","SelectionState","adjustBlockDepthForContentState","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={currentBlockContainsLink:function i(j){var k=j.getSelection(),l=j.getCurrentContent(),m=l.getEntityMap();return l.getBlockForKey(k.getAnchorKey()).getCharacterList().slice(k.getStartOffset(),k.getEndOffset()).some(function(n){var o=n.getEntity();return!!o&&m.__get(o).getType()==="LINK"})},getCurrentBlockType:function i(j){var k=j.getSelection();return j.getCurrentContent().getBlockForKey(k.getStartKey()).getType()},getDataObjectForLinkURL:function i(j){return{url:j.toString()}},handleKeyCommand:function i(j,k){switch(k){case"bold":return h.toggleInlineStyle(j,"BOLD");case"italic":return h.toggleInlineStyle(j,"ITALIC");case"underline":return h.toggleInlineStyle(j,"UNDERLINE");case"code":return h.toggleCode(j);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return h.onBackspace(j);case"delete":case"delete-word":case"delete-to-end-of-block":return h.onDelete(j);default:return null}},insertSoftNewline:function i(j){var k=c("DraftModifier").insertText(j.getCurrentContent(),j.getSelection(),"\n",j.getCurrentInlineStyle(),null),l=c("EditorState").push(j,k,"insert-characters");return c("EditorState").forceSelection(l,k.getSelectionAfter())},onBackspace:function i(j){__p&&__p();var k=j.getSelection();if(!k.isCollapsed()||k.getAnchorOffset()||k.getFocusOffset())return null;var l=j.getCurrentContent(),m=k.getStartKey(),n=l.getBlockBefore(m);if(n&&n.getType()==="atomic"){var o=l.getBlockMap()["delete"](n.getKey()),p=l.merge({blockMap:o,selectionAfter:k});if(p!==l)return c("EditorState").push(j,p,"remove-range")}var q=h.tryToRemoveBlockStyle(j);if(q)return c("EditorState").push(j,q,"change-block-type");return null},onDelete:function i(j){__p&&__p();var k=j.getSelection();if(!k.isCollapsed())return null;var l=j.getCurrentContent(),m=k.getStartKey(),n=l.getBlockForKey(m),o=n.getLength();if(k.getStartOffset()<o)return null;var p=l.getBlockAfter(m);if(!p||p.getType()!=="atomic")return null;var q=k.merge({focusKey:p.getKey(),focusOffset:p.getLength()}),r=c("DraftModifier").removeRange(l,q,"forward");if(r!==l)return c("EditorState").push(j,r,"remove-range");return null},onTab:function i(event,j,k){__p&&__p();var l=j.getSelection(),m=l.getAnchorKey();if(m!==l.getFocusKey())return j;var n=j.getCurrentContent(),o=n.getBlockForKey(m),p=o.getType();if(p!=="unordered-list-item"&&p!=="ordered-list-item")return j;event.preventDefault();var q=o.getDepth();if(!event.shiftKey&&q===k)return j;var r=c("adjustBlockDepthForContentState")(n,l,event.shiftKey?-1:1,k);return c("EditorState").push(j,r,"adjust-depth")},toggleBlockType:function i(j,k){__p&&__p();var l=j.getSelection(),m=l.getStartKey(),n=l.getEndKey(),o=j.getCurrentContent(),p=l;if(m!==n&&l.getEndOffset()===0){var q=c("nullthrows")(o.getBlockBefore(n));n=q.getKey();p=p.merge({anchorKey:m,anchorOffset:l.getStartOffset(),focusKey:n,focusOffset:q.getLength(),isBackward:false})}var r=o.getBlockMap().skipWhile(function(t,u){return u!==m}).reverse().skipWhile(function(t,u){return u!==n}).some(function(t){return t.getType()==="atomic"});if(r)return j;var s=o.getBlockForKey(m).getType()===k?"unstyled":k;return c("EditorState").push(j,c("DraftModifier").setBlockType(o,p,s),"change-block-type")},toggleCode:function i(j){var k=j.getSelection(),l=k.getAnchorKey(),m=k.getFocusKey();if(k.isCollapsed()||l!==m)return h.toggleBlockType(j,"code-block");return h.toggleInlineStyle(j,"CODE")},toggleInlineStyle:function i(j,k){var l=j.getSelection(),m=j.getCurrentInlineStyle();if(l.isCollapsed())return c("EditorState").setInlineStyleOverride(j,m.has(k)?m.remove(k):m.add(k));var n=j.getCurrentContent(),o;if(m.has(k))o=c("DraftModifier").removeInlineStyle(n,l,k);else o=c("DraftModifier").applyInlineStyle(n,l,k);return c("EditorState").push(j,o,"change-inline-style")},toggleLink:function i(j,k,l){var m=c("DraftModifier").applyEntity(j.getCurrentContent(),k,l);return c("EditorState").push(j,m,"apply-entity")},tryToRemoveBlockStyle:function i(j){var k=j.getSelection(),l=k.getAnchorOffset();if(k.isCollapsed()&&l===0){var m=k.getAnchorKey(),n=j.getCurrentContent(),o=n.getBlockForKey(m),p=o.getType(),q=n.getBlockBefore(m);if(p==="code-block"&&q&&q.getType()==="code-block"&&q.getLength()!==0)return null;if(p!=="unstyled")return c("DraftModifier").setBlockType(n,k,"unstyled")}return null}};f.exports=h}),null);
__d("splitTextIntoTextBlocks",[],(function a(b,c,d,e,f,g){"use strict";var h=/\r\n?|\n/g;function i(j){return j.split(h)}f.exports=i}),null);
__d("editOnPaste",["BlockMapBuilder","CharacterMetadata","DataTransfer","DraftModifier","DraftPasteProcessor","EditorState","RichTextEditorUtil","getEntityKeyForSelection","getTextContentFromFiles","isEventHandled","splitTextIntoTextBlocks"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k,l){__p&&__p();l.preventDefault();var m=new(c("DataTransfer"))(l.clipboardData);if(!m.isRichText()){var n=m.getFiles(),o=m.getText();if(n.length>0){if(k.props.handlePastedFiles&&c("isEventHandled")(k.props.handlePastedFiles(n)))return;c("getTextContentFromFiles")(n,function(C){C=C||o;if(!C)return;var s=k._latestEditorState,D=c("splitTextIntoTextBlocks")(C),y=c("CharacterMetadata").create({style:s.getCurrentInlineStyle(),entity:c("getEntityKeyForSelection")(s.getCurrentContent(),s.getSelection())}),z=c("RichTextEditorUtil").getCurrentBlockType(s),q=c("DraftPasteProcessor").processText(D,y,z),E=c("BlockMapBuilder").createFromArray(q),F=c("DraftModifier").replaceWithFragment(s.getCurrentContent(),s.getSelection(),E);k.update(c("EditorState").push(s,F,"insert-fragment"))});return}}var p=[],q=m.getText(),r=m.getHTML(),s=k._latestEditorState;if(k.props.handlePastedText&&c("isEventHandled")(k.props.handlePastedText(q,r,s)))return;if(q)p=c("splitTextIntoTextBlocks")(q);if(!k.props.stripPastedStyles){var t=k.getClipboard();if(m.isRichText()&&t){if(r.indexOf(k.getEditorKey())!==-1||p.length===1&&t.size===1&&t.first().getText()===q){k.update(i(k._latestEditorState,t));return}}else if(t&&m.types.includes("com.apple.webarchive")&&!m.types.includes("text/html")&&j(p,t)){k.update(i(k._latestEditorState,t));return}if(r){var u=c("DraftPasteProcessor").processHTML(r,k.props.blockRenderMap);if(u){var v=u.contentBlocks,w=u.entityMap;if(v){var x=c("BlockMapBuilder").createFromArray(v);k.update(i(k._latestEditorState,x,w));return}}}k.setClipboard(null)}if(p.length){var y=c("CharacterMetadata").create({style:s.getCurrentInlineStyle(),entity:c("getEntityKeyForSelection")(s.getCurrentContent(),s.getSelection())}),z=c("RichTextEditorUtil").getCurrentBlockType(s),A=c("DraftPasteProcessor").processText(p,y,z),B=c("BlockMapBuilder").createFromArray(A);k.update(i(k._latestEditorState,B))}}function i(k,l,m){var n=c("DraftModifier").replaceWithFragment(k.getCurrentContent(),k.getSelection(),l);return c("EditorState").push(k,n.set("entityMap",m),"insert-fragment")}function j(k,l){return k.length===l.size&&l.valueSeq().every(function(m,n){return m.getText()===k[n]})}f.exports=h}),null);
__d("getDraftEditorSelection",["getDraftEditorSelectionWithNodes"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=b.getSelection();if(k.rangeCount===0)return{selectionState:i.getSelection().set("hasFocus",false),needsRecovery:false};return c("getDraftEditorSelectionWithNodes")(i,j,k.anchorNode,k.anchorOffset,k.focusNode,k.focusOffset)}f.exports=h}),null);
__d("editOnSelect",["invariant","DraftJsDebugLogging","EditorState","ReactDOM","getDraftEditorSelection"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(j){__p&&__p();if(j._blockSelectEvents||j._latestEditorState!==j.props.editorState){if(j._blockSelectEvents){var k=j.props.editorState,l=k.getSelection();c("DraftJsDebugLogging").logBlockedSelectionEvent({anonymizedDom:"N/A",extraParams:JSON.stringify({stacktrace:new Error().stack}),selectionState:JSON.stringify(l.toJS())})}return}var m=j.props.editorState,n=c("ReactDOM").findDOMNode(j.editorContainer);n||h(0);n.firstChild instanceof HTMLElement||h(0);var o=c("getDraftEditorSelection")(m,n.firstChild),p=o.selectionState;if(p!==m.getSelection()){if(o.needsRecovery)m=c("EditorState").forceSelection(m,p);else m=c("EditorState").acceptSelection(m,p);j.update(m)}}f.exports=i}),null);
__d("DraftEditorEditHandler",["editOnBeforeInput","editOnBlur","editOnCompositionStart","editOnCopy","editOnCut","editOnDragOver","editOnDragStart","editOnFocus","editOnInput","editOnKeyDown","editOnPaste","editOnSelect"],(function a(b,c,d,e,f,g){"use strict";var h={onBeforeInput:c("editOnBeforeInput"),onBlur:c("editOnBlur"),onCompositionStart:c("editOnCompositionStart"),onCopy:c("editOnCopy"),onCut:c("editOnCut"),onDragOver:c("editOnDragOver"),onDragStart:c("editOnDragStart"),onFocus:c("editOnFocus"),onInput:c("editOnInput"),onKeyDown:c("editOnKeyDown"),onPaste:c("editOnPaste"),onSelect:c("editOnSelect")};f.exports=h}),null);
__d("DraftEditorPlaceholder.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.shouldComponentUpdate=function(l){return this.props.text!==l.text||this.props.editorState.getSelection().getHasFocus()!==l.editorState.getSelection().getHasFocus()};k.prototype.render=function(){var l=this.props.editorState.getSelection().getHasFocus(),m="_1p1t"+(l?" _1p1u":""),n={whiteSpace:"pre-wrap"};return c("React").createElement("div",{className:m},c("React").createElement("div",{className:"_1p1v",id:this.props.accessibilityID,style:n},this.props.text))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("DraftODS",["cx","BanzaiODS","CurrentUser","fbjs/lib/CSSCore"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("CurrentUser").isEmployee()?".employee":"",j={init:function k(){document.addEventListener("input",function(l){if(l.target.nodeType===1&&c("fbjs/lib/CSSCore").hasClass(l.target,"_5rpu"))c("BanzaiODS").bumpEntityKey("draft_js","input_events"+i)})}};f.exports=j}),null);
__d("getDefaultKeyBinding",["KeyBindingUtil","Keys","UserAgent"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("UserAgent").isPlatform("Mac OS X"),i=h&&c("UserAgent").isBrowser("Firefox < 29"),j=c("KeyBindingUtil").hasCommandModifier,k=c("KeyBindingUtil").isCtrlKeyCommand;function l(q){return h&&q.altKey||k(q)}function m(q){if(!j(q))return null;return q.shiftKey?"redo":"undo"}function n(q){if(!h&&q.shiftKey)return null;return l(q)?"delete-word":"delete"}function o(q){if(j(q)&&h)return"backspace-to-start-of-line";return l(q)?"backspace-word":"backspace"}function p(q){__p&&__p();switch(q.keyCode){case 66:return j(q)?"bold":null;case 68:return k(q)?"delete":null;case 72:return k(q)?"backspace":null;case 73:return j(q)?"italic":null;case 74:return j(q)?"code":null;case 75:return h&&k(q)?"secondary-cut":null;case 77:return k(q)?"split-block":null;case 79:return k(q)?"split-block":null;case 84:return h&&k(q)?"transpose-characters":null;case 85:return j(q)?"underline":null;case 87:return h&&k(q)?"backspace-word":null;case 89:if(k(q))return h?"secondary-paste":"redo";return null;case 90:return m(q)||null;case c("Keys").RETURN:return"split-block";case c("Keys").DELETE:return n(q);case c("Keys").BACKSPACE:return o(q);case c("Keys").LEFT:return i&&j(q)?"move-selection-to-start-of-block":null;case c("Keys").RIGHT:return i&&j(q)?"move-selection-to-end-of-block":null;default:return null}}f.exports=p}),null);
__d("DraftEditor.react",["cx","invariant","DefaultDraftBlockRenderMap","DefaultDraftInlineStyle","DraftEditorCompositionHandler","DraftEditorContents.react","DraftEditorDragHandler","DraftEditorEditHandler","DraftEditorPlaceholder.react","DraftODS","EditorState","React","ReactDOM","Scroll","Style","UserAgent","emptyFunction","generateRandomKey","getDefaultKeyBinding","getScrollPosition","gkx","nullthrows"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l,m,n=c("UserAgent").isBrowser("IE"),o=!n,p={edit:c("DraftEditorEditHandler"),composite:c("DraftEditorCompositionHandler"),drag:c("DraftEditorDragHandler"),cut:null,render:null},q=false;j=babelHelpers.inherits(r,c("React").Component);k=j&&j.prototype;r.prototype.render=function(){return null};r.prototype.componentDidMount=function(){this._update()};r.prototype.componentDidUpdate=function(){this._update()};r.prototype._update=function(){var t=this.props.editor;t._latestEditorState=this.props.editorState;t._blockSelectEvents=true};function r(){j.apply(this,arguments)}l=babelHelpers.inherits(s,c("React").Component);m=l&&l.prototype;function s(t){__p&&__p();m.constructor.call(this,t);this.focus=function(u){__p&&__p();var v=this.props.editorState,w=v.getSelection().getHasFocus(),x=c("ReactDOM").findDOMNode(this.editor);if(!x)return;var y=c("Style").getScrollParent(x),z=u||c("getScrollPosition")(y),A=z.x,B=z.y;x instanceof HTMLElement||i(0);x.focus();if(y===window)window.scrollTo(A,B);else c("Scroll").setTop(y,B);if(!w)this.update(c("EditorState").forceSelection(v,v.getSelection()))}.bind(this);this.blur=function(){var u=c("ReactDOM").findDOMNode(this.editor);u instanceof HTMLElement||i(0);u.blur()}.bind(this);this.setMode=function(u){this._handler=p[u]}.bind(this);this.exitCurrentMode=function(){this.setMode("edit")}.bind(this);this.restoreEditorDOM=function(u){this.setState({contentsKey:this.state.contentsKey+1},function(){this.focus(u)}.bind(this))}.bind(this);this.setClipboard=function(u){this._clipboard=u}.bind(this);this.getClipboard=function(){return this._clipboard}.bind(this);this.update=function(u){this._latestEditorState=u;this.props.onChange(u)}.bind(this);this.onDragEnter=function(){this._dragCount++}.bind(this);this.onDragLeave=function(){this._dragCount--;if(this._dragCount===0)this.exitCurrentMode()}.bind(this);this._blockSelectEvents=false;this._clipboard=null;this._handler=null;this._dragCount=0;this._editorKey=t.editorKey||c("generateRandomKey")();this._placeholderAccessibilityID="placeholder-"+this._editorKey;this._latestEditorState=t.editorState;this._latestCommittedEditorState=t.editorState;this._onBeforeInput=this._buildHandler("onBeforeInput");this._onBlur=this._buildHandler("onBlur");this._onCharacterData=this._buildHandler("onCharacterData");this._onCompositionEnd=this._buildHandler("onCompositionEnd");this._onCompositionStart=this._buildHandler("onCompositionStart");this._onCopy=this._buildHandler("onCopy");this._onCut=this._buildHandler("onCut");this._onDragEnd=this._buildHandler("onDragEnd");this._onDragOver=this._buildHandler("onDragOver");this._onDragStart=this._buildHandler("onDragStart");this._onDrop=this._buildHandler("onDrop");this._onInput=this._buildHandler("onInput");this._onFocus=this._buildHandler("onFocus");this._onKeyDown=this._buildHandler("onKeyDown");this._onKeyPress=this._buildHandler("onKeyPress");this._onKeyUp=this._buildHandler("onKeyUp");this._onMouseDown=this._buildHandler("onMouseDown");this._onMouseUp=this._buildHandler("onMouseUp");this._onPaste=this._buildHandler("onPaste");this._onSelect=this._buildHandler("onSelect");this.getEditorKey=function(){return this._editorKey}.bind(this);this.state={contentsKey:0}}s.prototype._buildHandler=function(t){__p&&__p();var u=c("ReactDOM").unstable_flushControlled;return function(v){var w,x=this;if(!this.props.readOnly)(function(){var y=x._handler&&x._handler[t];if(y)if(u)u(function(){return y(this,v)}.bind(x));else y(x,v)})()}.bind(this)};s.prototype._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()};s.prototype._renderPlaceholder=function(){if(this._showPlaceholder()){var t={text:c("nullthrows")(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return c("React").createElement(c("DraftEditorPlaceholder.react"),t)}return null};s.prototype.render=function(){var t=this.props,u=t.blockRenderMap,v=t.blockRendererFn,w=t.blockStyleFn,x=t.customStyleFn,y=t.customStyleMap,z=t.editorState,A=t.readOnly,B=t.textAlignment,C=t.textDirectionality,D="_5rp7"+(B==="left"?" _5rp8":"")+(B==="right"?" _5rp9":"")+(B==="center"?" _5rpa":""),E={outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},F=this.props.role||"textbox",G=F==="combobox"?!!this.props.ariaExpanded:null,H={blockRenderMap:u,blockRendererFn:v,blockStyleFn:w,customStyleMap:babelHelpers["extends"]({},c("DefaultDraftInlineStyle"),y),customStyleFn:x,editorKey:this._editorKey,editorState:z,key:"contents"+this.state.contentsKey,textDirectionality:C};return c("React").createElement("div",{className:D},this._renderPlaceholder(),c("React").createElement("div",{className:"_5rpb",ref:function(I){return this.editorContainer=I}.bind(this)},c("React").createElement("div",{"aria-activedescendant":A?null:this.props.ariaActiveDescendantID,"aria-autocomplete":A?null:this.props.ariaAutoComplete,"aria-controls":A?null:this.props.ariaControls,"aria-describedby":this.props.ariaDescribedBy||this._placeholderAccessibilityID,"aria-expanded":A?null:G,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:(!A?"notranslate":"")+" _5rpu",contentEditable:!A,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:function(I){return this.editor=I}.bind(this),role:A?null:F,spellCheck:o&&this.props.spellCheck,style:E,suppressContentEditableWarning:true,tabIndex:this.props.tabIndex},c("React").createElement(r,{editor:this,editorState:z}),c("React").createElement(c("DraftEditorContents.react"),H))))};s.prototype.componentDidMount=function(){if(!q&&c("gkx")("AT60Qhny9fC3BpbI8ZQSvDSWTGcUliA-72QFfXtmX6zOJHm8k3Eh1sQgzLifAxrJandLHat-LCVV6kN9-xliHn1Q")){q=true;c("DraftODS").init()}this.setMode("edit");if(n)document.execCommand("AutoUrlDetect",false,false)};s.prototype.componentDidUpdate=function(){this._blockSelectEvents=false;this._latestEditorState=this.props.editorState;this._latestCommittedEditorState=this.props.editorState};s.defaultProps={blockRenderMap:c("DefaultDraftBlockRenderMap"),blockRendererFn:c("emptyFunction").thatReturnsNull,blockStyleFn:c("emptyFunction").thatReturns(""),keyBindingFn:c("getDefaultKeyBinding"),readOnly:false,spellCheck:false,stripPastedStyles:false};f.exports=s}),null);
__d("GroupTypeaheadTypeEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({USER:"user",PAGE:"page",APP:"app",GROUP:"group",EVENT:"event",PLACE:"place",GROUP_RULE:"group_rule"})}),null);
__d("insertMentionIntoEditorState",["DraftModifier","EditorState","GroupTypeaheadTypeEnum","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="@\uff20\ufe68";function i(l,m,n,o){var p=m.getSelection(),q=m.getCurrentContent(),r=p.getAnchorKey(),s=p.getAnchorOffset(),t=q.getBlockMap().get(r),u=p.getStartOffset(),v=t.getText().substr(u-n,n),w=j(l,v),x=s-k(t.getText().substr(0,s),w,n);q=o(q,l);var y=q.getLastCreatedEntityKey(),z=c("DraftModifier").replaceText(q,p.set("anchorOffset",x),w,m.getCurrentInlineStyle(),y);return c("EditorState").push(m,z,"insert-fragment")}function j(l,m){__p&&__p();if(l.getType()===c("GroupTypeaheadTypeEnum").GROUP_RULE)return l.getSubtitle();if(!c("gkx")("AT4eVhAyXs5l-SdU2eMzGAtYZHW_8azbWQtRzBkQx-hxEYvZmrk9VzKrNwtfnQLv-dOZuBnZ683myig4JsVLktUm"))return l.getTitle();m=m.toLowerCase();if(h.includes(m.substring(0,1)))m=m.substring(1,m.length);if(l.getTitle().toLowerCase().startsWith(m))return l.getTitle();else if(l.getSubtitle().toLowerCase().startsWith(m))return"@"+l.getSubtitle();else if(l.getTitle().toLowerCase().includes(m))return l.getTitle();else if(l.getSubtitle().toLowerCase().includes(m))return"@"+l.getSubtitle();return l.getTitle()}function k(l,m,n){for(var o=n;o<=m.length;o++)if(l.substr(-o)==m.substr(0,o))n=o;return n}f.exports=i}),null);
__d("AbstractMentionsTextEditor.react",["DraftEditor.react","React","SearchableEntry","TypeaheadNavigation","clearImmediate","getOrCreateDOMID","insertMentionIntoEditorState","setImmediate","uniqueID"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("React").PropTypes,k=5,l="handled",m="not-handled";h=babelHelpers.inherits(n,c("React").Component);i=h&&h.prototype;function n(o,p){"use strict";__p&&__p();i.constructor.call(this,o,p);this.__onShowMentions=function(q,r){__p&&__p();if(!this.$AbstractMentionsTextEditor2)return;var s=r||0;if(!q||!q.length){this.setState({highlightedMentionable:null,activeDescendantID:null,mentionableEntries:null,characterOffset:0});return}var t=q.slice(0,this.props.maxResults),u=this.props.typeaheadViewProps;if(u&&u.mentionSortFn)t.sort(u.mentionSortFn);var v=null;if(this.props.autoHighlight||this.state.highlightedMentionable!==null)v=q[0];this.setState({highlightedMentionable:v,mentionableEntries:t,characterOffset:s});if(this.props.onShowMentions)this.props.onShowMentions(t,s)}.bind(this);this.$AbstractMentionsTextEditor8=function(q){this.setState(this.$AbstractMentionsTextEditor12());this.props.onBlur&&this.props.onBlur(q)}.bind(this);this.$AbstractMentionsTextEditor7=function(q){this.props.mentionsSource&&this.props.mentionsSource.bootstrap();this.props.onFocus&&this.props.onFocus(q)}.bind(this);this.$AbstractMentionsTextEditor13=function(q,r){if(this.state.highlightedMentionable){this.$AbstractMentionsTextEditor10(this.state.highlightedMentionable,q);return l}else if(this.props.handleContentReturn&&this.props.handleContentReturn(q,r))return l;return m}.bind(this);this.$AbstractMentionsTextEditor6=function(q){var r=this.state.highlightedMentionable;if(r){q.preventDefault();this.$AbstractMentionsTextEditor10(r,q)}else if(this.props.onTab)this.props.onTab(q)}.bind(this);this.$AbstractMentionsTextEditor5=function(q){if(this.props.onEscape)this.props.onEscape(q);if(this.state.mentionableEntries){q.stopPropagation();q.nativeEvent.isPropagationStopped=true;this.setState(this.$AbstractMentionsTextEditor12())}}.bind(this);this.$AbstractMentionsTextEditor11=function(q){var r=this.state.mentionableEntries;if(r){q.preventDefault();c("TypeaheadNavigation").moveUp(r,this.state.highlightedMentionable,this.$AbstractMentionsTextEditor9)}else this.props.onUpArrow&&this.props.onUpArrow(q)}.bind(this);this.$AbstractMentionsTextEditor4=function(q){var r=this.state.mentionableEntries;if(r){q.preventDefault();c("TypeaheadNavigation").moveDown(r,this.state.highlightedMentionable,this.$AbstractMentionsTextEditor9)}else this.props.onDownArrow&&this.props.onDownArrow(q)}.bind(this);this.$AbstractMentionsTextEditor9=function(q){this.setState({highlightedMentionable:q})}.bind(this);this.$AbstractMentionsTextEditor14=function(q){var r=c("getOrCreateDOMID")(q);this.setState({ariaActiveDescendantID:r})}.bind(this);this.$AbstractMentionsTextEditor10=function(q,r){var s=c("insertMentionIntoEditorState")(q,this.props.editorState,this.state.characterOffset,this.props.mentionCreationForContentStateFn);this.props.onChange(s);this.setState(this.$AbstractMentionsTextEditor12());var t=this.props.onAddMention,u=this.state.mentionableEntries;if(t&&u){var v=u.indexOf(q);t(q,v,r)}}.bind(this);this.__onShowMentions=this.__onShowMentions.bind(this);this.$AbstractMentionsTextEditor4=this.$AbstractMentionsTextEditor4.bind(this);this.$AbstractMentionsTextEditor5=this.$AbstractMentionsTextEditor5.bind(this);this.$AbstractMentionsTextEditor6=this.$AbstractMentionsTextEditor6.bind(this);this.$AbstractMentionsTextEditor7=this.$AbstractMentionsTextEditor7.bind(this);this.$AbstractMentionsTextEditor8=this.$AbstractMentionsTextEditor8.bind(this);this.$AbstractMentionsTextEditor9=this.$AbstractMentionsTextEditor9.bind(this);this.$AbstractMentionsTextEditor10=this.$AbstractMentionsTextEditor10.bind(this);this.$AbstractMentionsTextEditor11=this.$AbstractMentionsTextEditor11.bind(this);this.state=this.$AbstractMentionsTextEditor12()}n.prototype.UNSAFE_componentWillMount=function(){"use strict";this.$AbstractMentionsTextEditor2=true;this.$AbstractMentionsTextEditor1=c("uniqueID")();this.$AbstractMentionsTextEditor3=[]};n.prototype.componentWillUnmount=function(){"use strict";this.$AbstractMentionsTextEditor2=false;this.$AbstractMentionsTextEditor3.forEach(function(o){return c("clearImmediate")(o)});this.$AbstractMentionsTextEditor3=[]};n.prototype.$AbstractMentionsTextEditor12=function(){"use strict";return{highlightedMentionable:null,mentionableEntries:null,characterOffset:0}};n.prototype.shouldComponentUpdate=function(o,p){"use strict";return this.props.editorState!==o.editorState||this.props.placeholder!==o.placeholder||this.props.readOnly!==o.readOnly||this.props.className!==o.className||this.state.mentionableEntries!==p.mentionableEntries||this.state.highlightedMentionable!==p.highlightedMentionable||this.state.ariaActiveDescendantID!==p.ariaActiveDescendantID};n.prototype.componentDidUpdate=function(o){__p&&__p();var p,q=this;"use strict";var r=this.props.editorState;if(r===o.editorState)return;var s=r.getSelection();if(s.getHasFocus()&&s.isCollapsed()){var t;(function(){t=r.getCurrentContent();var u=q.props.mentionsSource;if(u)q.$AbstractMentionsTextEditor3.push(c("setImmediate")(function(){u.search(t,s,this.__onShowMentions)}.bind(q)))})()}};n.prototype.blur=function(){"use strict";this.refs.abstractTextEditor.blur()};n.prototype.focus=function(){"use strict";this.refs.abstractTextEditor.focus()};n.prototype.$AbstractMentionsTextEditor15=function(){"use strict";var o=this.state.mentionableEntries;if(!o||!o.length)return null;var p=this.props.mentionResultsComponent;return c("React").createElement(p,babelHelpers["extends"]({},this.props.mentionResultsProps,{viewID:this.$AbstractMentionsTextEditor1,selection:this.props.editorState.getSelection(),contextComponent:this,characterOffset:this.state.characterOffset,mentionableEntries:o||[],highlightedMentionable:this.state.highlightedMentionable,onMentionSelect:this.$AbstractMentionsTextEditor10,onMentionHighlight:this.$AbstractMentionsTextEditor9,onMentionRenderHighlight:this.$AbstractMentionsTextEditor14}))};n.prototype.exitCurrentMode=function(){"use strict";this.refs.abstractTextEditor&&this.refs.abstractTextEditor.exitCurrentMode()};n.prototype.render=function(){"use strict";var o=this.state.mentionableEntries,p=!!(o&&o.length),q=this.props.readOnly?null:"-1",r=this.props.role||"combobox",s=this.props.ariaAutoComplete||"list";return c("React").createElement("div",{ref:"container",className:this.props.className,tabIndex:q},c("React").createElement(c("DraftEditor.react"),babelHelpers["extends"]({},this.props,{ref:"abstractTextEditor",role:r,ariaActiveDescendantID:this.state.ariaActiveDescendantID,ariaAutoComplete:s,ariaControls:this.$AbstractMentionsTextEditor1,ariaExpanded:p,ariaHasPopup:p,editorState:this.props.editorState,onBlur:this.$AbstractMentionsTextEditor8,onChange:this.props.onChange,onFocus:this.$AbstractMentionsTextEditor7,onTab:this.$AbstractMentionsTextEditor6,onEscape:this.$AbstractMentionsTextEditor5,onDownArrow:this.$AbstractMentionsTextEditor4,onUpArrow:this.$AbstractMentionsTextEditor11,handleReturn:this.$AbstractMentionsTextEditor13})),this.$AbstractMentionsTextEditor15())};n.prototype.isShowingMentionables=function(){"use strict";return!!this.state.mentionableEntries};n.defaultProps=babelHelpers["extends"]({},c("DraftEditor.react").defaultProps,{autoHighlight:true,maxResults:k});n.propTypes={mentionsSource:j.object,mentionCreationForContentStateFn:j.func.isRequired,mentionResultsComponent:j.func.isRequired,mentionResultsProps:j.object,excludedEntries:j.object,handleContentReturn:j.func,onAddMention:j.func,onShowMentions:j.func,autoHighlight:j.bool,maxResults:j.number,webDriverTestID:j.string};f.exports=n}),null);
__d("CompositeDraftDecorator",["immutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("immutable").List,i=".";function j(m){this.$CompositeDraftDecorator1=m.slice()}j.prototype.getDecorations=function(m,n){var o=Array(m.getText().length).fill(null);this.$CompositeDraftDecorator1.forEach(function(p,q){var r=0,s=p.strategy,t=function t(u,v){if(k(o,u,v)){l(o,u,v,q+i+r);r++}};s(m,t,n)});return h(o)};j.prototype.getComponentForKey=function(m){var n=parseInt(m.split(i)[0],10);return this.$CompositeDraftDecorator1[n].component};j.prototype.getPropsForKey=function(m){var n=parseInt(m.split(i)[0],10);return this.$CompositeDraftDecorator1[n].props};function k(m,n,o){for(var p=n;p<o;p++)if(m[p]!=null)return false;return true}function l(m,n,o,p){for(var q=n;q<o;q++)m[q]=p}f.exports=j}),null);
__d("EmojiFormat",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(l){return l.split("_").map(function(m){return parseInt(m,16)})}function i(l){return l.map(function(m){return m.toString(16)}).join("_")}function j(l){var m="";for(var n=0;n<l.length;n++)m+=String.fromCodePoint(l[n]);return m}function k(l){var m=this.codeStringToCodeArray(l);return this.codeArrayToUnicode(m)}f.exports={codeArrayToCodeString:i,codeArrayToUnicode:j,codeStringToCodeArray:h,codeStringToUnicode:k}}),null);
__d("MessengerEmojiSpan.react",["cx","EmojiLikeConstants","MessengerSupportedEmojiUtils","React","cssURL"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.contentState.getEntity(this.props.entityKey),n=m.getData(),o=n.type,p=c("MessengerSupportedEmojiUtils").getUrl(o,c("EmojiLikeConstants").size.SMALL);p=p?p:"";return c("React").createElement("span",{className:"_21wj",style:{backgroundImage:c("cssURL")(p)},"data-offset-key":this.props.offsetKey},c("React").createElement("span",{className:"_21wk"},this.props.children))};function l(){i.apply(this,arguments)}l.propTypes={children:k.arrayOf(k.object),contentState:k.object.isRequired,entityKey:k.string.isRequired,offsetKey:k.string};f.exports=l}),null);
__d("MessengerEmoticonSpan.react",["cx","EmojiLikeConstants","MessengerSupportedEmojiUtils","EmoticonEmojiList","React","cssURL"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.contentState.getEntity(this.props.entityKey),n=m.getData(),o=n.type,p=c("EmoticonEmojiList").emote2emojis[o],q=c("MessengerSupportedEmojiUtils").getUrl(p,c("EmojiLikeConstants").size.XSMALL);q=q?q:"";return c("React").createElement("span",{className:"_21wj",style:{backgroundImage:c("cssURL")(q)},"data-offset-key":this.props.offsetKey},c("React").createElement("span",{className:"_21wk"},this.props.children))};function l(){i.apply(this,arguments)}l.propTypes={children:k.arrayOf(k.object),contentState:k.object.isRequired,entityKey:k.string.isRequired,offsetKey:k.string};f.exports=l}),null);
__d("MessengerMentionSource",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({REPLY:"reply",ATSIGN:"@",TYPEAHEAD:"typeahead"});f.exports=h}),null);
__d("MessengerMentionsEntityDecorator.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("span",{className:"_fy2"},this.props.children)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("FantaTypeFileUploader",["immutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=Object.freeze({ANIMATED_IMAGE:"animated_image",AUDIO:"audio",FILE:"file",GENERIC_ATTACHMENT:"generic_attachment",IMAGE:"image",VIDEO:"video"}),k={uploadedFiles:c("immutable").Map(),uploadingFiles:c("immutable").Map()};h=babelHelpers.inherits(l,c("immutable").Record(k));i=h&&h.prototype;l.prototype.getTypeIDs=function(m){return this.uploadedFiles.reduce(function(n,o){if(o.type===m&&o.uploadedID)n=n.concat(o.uploadedID);return n},[])};function l(){h.apply(this,arguments)}l.fileTypes=j;f.exports=l}),null);
__d("MessengerUploadFilesUtil.bs",["bs_array","bs_curry","FantaTypeFileUploader"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i=(h={},h[c("FantaTypeFileUploader").fileTypes.ANIMATED_IMAGE]="gif_ids",h[c("FantaTypeFileUploader").fileTypes.AUDIO]="audio_ids",h[c("FantaTypeFileUploader").fileTypes.FILE]="file_ids",h[c("FantaTypeFileUploader").fileTypes.GENERIC_ATTACHMENT]="generic_attachment_ids",h[c("FantaTypeFileUploader").fileTypes.IMAGE]="image_ids",h[c("FantaTypeFileUploader").fileTypes.VIDEO]="video_ids",h);function j(n,o){if(n==null)return null;else{var p=n.getTypeIDs(o);if(p.length)return p;else return null}}function k(n){__p&&__p();if(n==null)return 0;else{var o=n.get("uploadedFiles"),p=[],q=[],r=[];o.forEach(function(s,t,u){__p&&__p();var v=s.file;if(v.type.startsWith("image/")){p.push(v);return 0}else if(v.type.startsWith("video/")){q.push(v);return 0}else{r.push(v);return 0}});return[[p,q,r]]}}function l(n,o){if(o.length)return c("bs_curry")._1(n,o);else return 0}function m(n,o){__p&&__p();if(n==null)return 0;else if(o==null)return 0;else{var p=k(n);if(p){var q=p[0];c("bs_array").iter(function(r){return l(o,[r])},q[1]);l(o,q[0]);return l(o,q[2])}else return 0}}g.supportAttachments=i;g.getAttachmentIDs=j;g.getAttachments=k;g.sendAttchment=l;g.sendAttchments=m}),null);
__d("createMessengerMentionDraftEntity",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return i.createEntity("MENTION","SEGMENTED",{mid:j.getUniqueID()})}f.exports=h}),null);
__d("getEntityMatcher",["DraftEntity"],(function a(b,c,d,e,f,g){var h=c("DraftEntity").get;function i(j,k){var l=k||h;return function(m,n){m.findEntityRanges(function(o){var p=o.getEntity();return typeof p==="string"&&j(l(p))},n)}}f.exports=i}),null);
__d("getProfileRangesForContentState",["EmojiFormat","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("emptyFunction").thatReturnsTrue;function i(j,k){__p&&__p();var l=[],m=0;j.getBlockMap().forEach(function(n){__p&&__p();var o=0,p=n.getText();n.findEntityRanges(h,function(q,r){__p&&__p();var s=n.getEntityAt(q);if(s){var t=j.getEntity(s);if(t.getType()==="EMOTICON")o+=t.getData().originalEmoticon.length-1;else if(t.getType()==="EMOJI"){var u=t.getData().type,v=c("EmojiFormat").codeStringToCodeArray(u),w=String.fromCodePoint.apply(String,v);o+=w.length-1}else if(t.getType()==="MENTION"){var x=t.getData().mid,y=q+o+m,z=x===k;if(/^\d+$/.test(x)||z)l.push({id:x,offset:y,length:r-q,type:z?"t":"p"})}}});m+=p.length+o+1});return l}f.exports=i}),null);
__d("MessagingThreadType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ONE_TO_ONE:1,GROUP:2,ROOM:3,MONTAGE:4,MARKETPLACE:5})}),null);
__d("getThreadTypeNameFromThreadType",["MessagingThreadType"],(function a(b,c,d,e,f,g){"use strict";function h(i){for(var j in c("MessagingThreadType"))if(c("MessagingThreadType")[j]===i)return j;return""}f.exports=h}),null);
__d("getVisibleValueForContentStateWithMessengerEmoji",["EmojiFormat","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=i.getBlockMap().map(function(k){__p&&__p();var l=k.getText(),m="";k.findEntityRanges(c("emptyFunction").thatReturnsTrue,function(n,o){__p&&__p();var p=k.getEntityAt(n);if(!p)m+=l.slice(n,o);else{var q=i.getEntity(p);if(q.getType()==="EMOTICON")m+=q.getData().originalEmoticon;else if(q.getType()==="EMOJI"){var r=q.getData().type,s=c("EmojiFormat").codeStringToCodeArray(r);m+=String.fromCodePoint.apply(String,s)}else m+=l.slice(n,o)}});return m});return j.join("\n")}f.exports=h}),null);
__d("insertMessengerEmojiIntoContentState",["DraftModifier","EmojiFormat"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){var m=j.createEntity("EMOJI","IMMUTABLE",{type:i}),n=m.getLastCreatedEntityKey();return c("DraftModifier").insertText(j,k,c("EmojiFormat").codeStringToUnicode(i),l,n)}f.exports=h}),null);
__d("handleBeforeInputForMessengerEmoji",["EditorState","MessengerSupportedEmojiUtils","insertMessengerEmojiIntoContentState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=i.getSelection();if(!k.isCollapsed()||!j)return i;var l=c("MessengerSupportedEmojiUtils").getEmojiMatchObj(j);if(!l||!l.is_supported)return i;var m=c("insertMessengerEmojiIntoContentState")(l.emoji_key,i.getCurrentContent(),k,i.getCurrentInlineStyle());return c("EditorState").push(i,m,"insert-characters")}f.exports=h}),null);
__d("applyMessengerEmoticonToContentBlock",["CharacterMetadata","EmoticonEmojiList","immutable"],(function a(b,c,d,e,f,g){"use strict";var h=c("immutable").List,i="\u3000";function j(k,l,m,n){if(!c("EmoticonEmojiList").names[m])return l;var o=k.createEntity("EMOTICON","IMMUTABLE",{type:c("EmoticonEmojiList").names[m],originalEmoticon:m}),p=o.getLastCreatedEntityKey(),q=l.getText(),r=l.getCharacterList(),s=m.length,t=r.get(n);return l.merge({text:q.slice(0,n)+i+q.slice(n+s),characterList:r.slice(0,n).concat(h.of(c("CharacterMetadata").applyEntity(t,p)),r.slice(n+s))})}f.exports=j}),null);
__d("getTextAfterNearestEntity",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=j;while(k>0&&i.getEntityAt(k-1)===null)k--;return i.getText().slice(k,j)}f.exports=h}),null);
__d("applyMessengerEmoticonToContentState",["EmoticonEmojiList","applyMessengerEmoticonToContentBlock","getTextAfterNearestEntity"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=j.getAnchorKey(),l=j.getAnchorOffset(),m=i.getBlockForKey(k),n=c("getTextAfterNearestEntity")(m,l),o=c("EmoticonEmojiList").regexp.exec(n);if(!o)return i;var p=o[1];if(!p&&l!==n.length)return i;var q=o[2],r=l-n.length,s=r+o.index+o[1].length,t=i.getBlockMap().set(k,c("applyMessengerEmoticonToContentBlock")(i,m,q,s));l-=q.length-1;return i.merge({blockMap:t,selectionBefore:j,selectionAfter:j.merge({anchorOffset:l,focusOffset:l})})}f.exports=h}),null);
__d("handleBeforeInputForMessengerEmoticon",["DraftModifier","EditorState","applyMessengerEmoticonToContentState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new RegExp(/[\s\'\".,!?]/);function i(j,k){var l=j.getSelection();if(!l.isCollapsed()||!k||!h.test(k))return j;var m=j.getCurrentContent(),n=c("applyMessengerEmoticonToContentState")(m,l);if(n===m)return j;var o=c("DraftModifier").insertText(n,n.getSelectionAfter(),k);return c("EditorState").push(j,o,"insert-characters")}f.exports=i}),null);
__d("handleSoftNewlineForMessengerEmoticon",["DraftModifier","EditorState","applyMessengerEmoticonToContentState"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=i.getCurrentContent(),k=i.getSelection(),l=c("applyMessengerEmoticonToContentState")(j,k),m=c("DraftModifier").splitBlock(l,j===l?k:l.getSelectionAfter());return c("EditorState").push(i,m,"split-block")}f.exports=h}),null);
__d("applyEmoticonToContentBlock",["CharacterMetadata","DraftEntity","EmoticonsList","immutable"],(function a(b,c,d,e,f,g){"use strict";var h=c("immutable").List,i="\u3000";function j(k,l,m){if(!c("EmoticonsList").emotes[l])return k;var n=c("DraftEntity").create("EMOTICON","IMMUTABLE",{type:c("EmoticonsList").emotes[l],originalEmoticon:l}),o=k.getText(),p=k.getCharacterList(),q=l.length,r=p.get(m);return k.merge({text:o.slice(0,m)+i+o.slice(m+q),characterList:p.slice(0,m).concat(h.of(c("CharacterMetadata").applyEntity(r,n)),p.slice(m+q))})}f.exports=j}),null);
__d("insertEmoticonIntoContentState",["DraftModifier","applyEmoticonToContentBlock"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){var l=c("DraftModifier").replaceText(j,k,i),m=k.getAnchorKey(),n=k.getAnchorOffset(),o=l.getBlockForKey(m),p=l.getBlockMap().set(m,c("applyEmoticonToContentBlock")(o,i,n));n++;return j.merge({blockMap:p,selectionBefore:k,selectionAfter:k.merge({anchorOffset:n,focusOffset:n})})}f.exports=h}),null);
__d("insertEmoticonIntoEditorState",["DraftModifier","EditorState","insertEmoticonIntoContentState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=" ";function i(j,k){__p&&__p();var l=k.getSelection(),m=k.getCurrentContent(),n=l.getStartOffset(),o=l.getEndOffset(),p=m.getBlockForKey(l.getStartKey()).getText(),q=m.getBlockForKey(l.getEndKey()).getText(),r="";if(o<=q.length&&q[o]!==h)r=h;if(n>0&&p[n-1]!==h){m=c("DraftModifier").insertText(m,l,h);l=m.getSelectionAfter()}var s=c("insertEmoticonIntoContentState")(j,m,l);m=c("DraftModifier").insertText(s,s.getSelectionAfter(),r);return c("EditorState").push(k,m,"insert-characters")}f.exports=i}),null);
__d("isSoftNewlineEvent",["Keys"],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.which===c("Keys").RETURN&&(i.getModifierState("Shift")||i.getModifierState("Alt")||i.getModifierState("Control"))}f.exports=h}),null);
__d("ChatInput.react",["AbstractMentionsTextEditor.react","BootloadedComponent.react","Bootloader","CompositeDraftDecorator","ContentState","DraftModifier","EditorState","EmojiFormat","ifRequired","JSResource","MercuryThreads","MessengerEmojiSpan.react","MessengerEmoticonSpan.react","MessengerMentionsEntityDecorator.react","MessengerMentionSource","MessengerUploadFilesUtil.bs","React","ReactDOM","cancelAnimationFrame","clearImmediate","createMessengerMentionDraftEntity","createCancelableFunction","debounce","emptyFunction","getDefaultKeyBinding","getEntityMatcher","getProfileRangesForContentState","getThreadTypeNameFromThreadType","getVisibleValueForContentStateWithMessengerEmoji","handleBeforeInputForMessengerEmoji","handleBeforeInputForMessengerEmoticon","handleSoftNewlineForMessengerEmoticon","insertEmoticonIntoEditorState","insertMentionIntoEditorState","insertMessengerEmojiIntoContentState","isSoftNewlineEvent","setImmediate","requestAnimationFrame","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes,k=c("emptyFunction").thatReturnsNull,l=1,m="handled",n=8,o="not-handled";h=babelHelpers.inherits(p,c("React").Component);i=h&&h.prototype;function p(){__p&&__p();var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=i.constructor).call.apply(r,[this].concat(u)),this.$ChatInput4=c("createCancelableFunction")(function(w,x){var y=w.participants,z=w.viewer,A=w.thread;this.setState({mentionsSource:x(z,y,A,c("gkx")("AT49sw5n0nlIyoqYGYpRJXtOnRzCLqSpsmIoWA7hmyYTaoQcU5JHlDW_AWGZ_laa8hQ933FOWyuLNLlpGxYhTnOb"))})}.bind(this)),this.$ChatInput6=function(){var w=this.$ChatInput9(this.state.editorState.getCurrentContent());this.$ChatInput1=c("setImmediate")(function(){this.$ChatInput1=null;var x=c("EditorState").set(this.state.editorState,{decorator:w});this.setState({editorState:x})}.bind(this))}.bind(this),this.onChange=function(w){if(w!==this.state.editorState){this.setState({editorState:w});this.$ChatInput7(w,this.props.composer)}}.bind(this),this.onReturn=function(event,w){__p&&__p();if(c("isSoftNewlineEvent")(event)){var x=c("handleSoftNewlineForMessengerEmoticon");this.setState({editorState:x(w)});return m}event.persist();this.setState({},function(){if(c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw"))c("MessengerUploadFilesUtil.bs").sendAttchments(this.props.fileUploader,this.props.uploadPhotoFn);this.props.inputKeyDown(event,this.getValue())}.bind(this));return m}.bind(this),this.getValue=function(){return this.getValueFromEditorState(this.state.editorState)}.bind(this),this.$ChatInput10=function(w,x){this.props.onBeforeInput&&this.props.onBeforeInput();var y=this.$ChatInput11(w,x),z=this.$ChatInput12(w,x);return y||z?m:o}.bind(this),this.$ChatInput14=function(w){return this.$ChatInput13(w)}.bind(this),this.$ChatInput15=function(w,x){return this.$ChatInput13(x)}.bind(this),this.state={editorState:this.$ChatInput8(this.props.defaultText)},this.$ChatInput17=function(){var w=(this.state.addedMentionsCount||0)+1;this.setState({addedMentionsCount:w})}.bind(this),this.$ChatInput19=function(w,x){var y=(this.state.mentionsTriggeredCount||0)+1,z={mentionsTriggeredCount:y};if(!this.state.mentionsTriggerSource)z.mentionsTriggerSource=x===l?c("MessengerMentionSource").ATSIGN:c("MessengerMentionSource").TYPEAHEAD;this.setState(z)}.bind(this),this.$ChatInput18=function(w){if(!this.refs.input.isShowingMentionables())this.props.onEscape&&this.props.onEscape(w)}.bind(this),s}p.prototype.componentDidMount=function(){this.$ChatInput2=c("ReactDOM").findDOMNode(this).getBoundingClientRect().height;this.props.resizeFn(this.$ChatInput2);this.props.initializeThingsWithInputFn(c("ReactDOM").findDOMNode(this.refs.input),this.getValue);this.setState({triggeredWord:this.props.triggeredWord});this.$ChatInput3();c("Bootloader").loadModules(["createMentionsSearchSourceFromParticipants"],this.$ChatInput4.bind(this,this.props),"ChatInput.react");if(c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw"))c("Bootloader").loadModules(["FantaMessageActions"],c("emptyFunction"),"ChatInput.react")};p.prototype.componentWillUnmount=function(){if(this.$ChatInput1)c("clearImmediate")(this.$ChatInput1);if(this.$ChatInput5)c("cancelAnimationFrame")(this.$ChatInput5);this.$ChatInput4.cancel();this.$ChatInput5=null};p.prototype.UNSAFE_componentWillReceiveProps=function(r){if(this.state.triggeredWord!==r.triggeredWord)this.setState({triggeredWord:r.triggeredWord},this.$ChatInput6);if(!this.props.thread||!r.thread||q(r,this.props))c("Bootloader").loadModules(["createMentionsSearchSourceFromParticipants"],this.$ChatInput4.bind(this,r),"ChatInput.react");if(r.composer.version!==this.props.composer.version)this.resetState()};p.prototype.componentDidUpdate=function(){this.$ChatInput3();this.$ChatInput5=c("requestAnimationFrame")(function(){if(!this.$ChatInput5)return;this.$ChatInput5=null;var r=c("ReactDOM").findDOMNode(this).getBoundingClientRect(),s=r.height;if(this.$ChatInput2!==s)this.props.resizeFn(s);this.$ChatInput2=s}.bind(this))};p.prototype.$ChatInput3=function(){var r=this.props.composer,s=this.props.onTextChange;this.$ChatInput7=s?c("debounce")(function(t){s(this.getValueFromEditorState(t),r,200)}.bind(this),200):c("emptyFunction")};p.prototype.$ChatInput8=function(r){var s=c("ContentState").createFromText(r);return c("EditorState").createWithContent(s,this.$ChatInput9(s))};p.prototype.resetState=function(){if(this.state.typeaheadReporter){this.state.typeaheadReporter.sessionEnd();this.state.typeaheadReporter.sessionStart()}this.setState({editorState:c("EditorState").moveFocusToEnd(this.$ChatInput8("")),triggeredWord:null,addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null})};p.prototype.onSend=function(r){var s,t=this,u=this.getMentions();if(r&&(u&&u.length||this.state.addedMentionsCount||this.state.mentionsTriggeredCount||this.state.mentionsTriggerSource))(function(){var v=t.state,w=v.addedMentionsCount,x=v.mentionsTriggeredCount,y=v.mentionsTriggerSource,z=t.props,A=z.thread,B=z.participants;c("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(C,D){new C().setEvent(D.MENTION).setGroupSize(B&&B.length).setNumDelivered(u?u.length:0).setNumSelects(w).setNumTriggers(x).setThreadid(A&&A.thread_id).setThreadType(c("getThreadTypeNameFromThreadType")(A&&A.thread_type)).setOfflineThreadid(r.offline_threading_id).updateExtraData({source:y}).log()},"ChatInput.react")})()};p.prototype.$ChatInput9=function(r){var s=[{strategy:c("getEntityMatcher")(function(t){return t.getType()==="EMOTICON"},r.getEntity),component:c("MessengerEmoticonSpan.react")}];s.push({strategy:c("getEntityMatcher")(function(t){return t.getType()==="EMOJI"},r.getEntity),component:c("MessengerEmojiSpan.react")});s.push({strategy:c("getEntityMatcher")(function(t){return t.getType()==="MENTION"},r.getEntity),component:c("MessengerMentionsEntityDecorator.react")});return new(c("CompositeDraftDecorator"))(s)};p.prototype.getValueFromEditorState=function(r){var s=r.getCurrentContent();return c("getVisibleValueForContentStateWithMessengerEmoji")(s)};p.prototype.getMentions=function(){var r=this.props.thread;return c("getProfileRangesForContentState")(this.state.editorState.getCurrentContent(),r?r.thread_fbid:null)};p.prototype.focus=function(){this.refs.input&&this.refs.input.focus&&this.refs.input.focus()};p.prototype.$ChatInput11=function(r,s){var t=c("handleBeforeInputForMessengerEmoticon")(s,r);if(t===s)return false;this.setState({editorState:t});return true};p.prototype.$ChatInput12=function(r,s){var t=c("handleBeforeInputForMessengerEmoji")(s,r);if(t===s)return false;this.setState({editorState:t});return true};p.prototype.$ChatInput13=function(r){__p&&__p();var s,t=this,u=/^image\//,v=r.filter(function(x){return u.test(x.type)}),w=c("gkx")("AT44gcd7lpH2YiclJ-LHsuuoRRi7VIOizU9LdST-uko3uQzHBXGOu3PdlMr4PkOBovUmJRjA-IeSNbDkk89bQ4wq8b7BDIrax8JSG-E9Uz6KPQ")&&c("MercuryThreads").get().isEmptyLocalThread(this.props.threadID);if(v.length&&!w){var s=function(){var x=t.props.composer;if(c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw"))c("ifRequired")("FantaMessageActions",function(y){y.prepareFilesForSend(this.props.threadID,v,x)}.bind(t),function(){c("Bootloader").loadModules(["FantaMessageActions"],function(y){y.prepareFilesForSend(this.props.threadID,v,x)}.bind(this),"ChatInput.react")}.bind(t));else t.props.uploadPhotoFn(v[0]);return{v:true}}();if(typeof s==="object")return s.v}return false};p.prototype.insertEmoticon=function(r){var s=c("insertEmoticonIntoEditorState")(r,this.state.editorState);if(s!==this.state.editorState)this.setState({editorState:s})};p.prototype.insertEmoji=function(r){var s=this.state.editorState,t=c("insertMessengerEmojiIntoContentState")(c("EmojiFormat").codeArrayToCodeString(r),s.getCurrentContent(),s.getSelection(),s.getCurrentInlineStyle()),u=c("EditorState").push(s,t,"insert-characters");if(u!==this.state.editorState)this.setState({editorState:c("EditorState").forceSelection(u,t.getSelectionAfter())})};p.prototype.appendText=function(r){var s=this.state.editorState,t=s.getSelection(),u=s.getCurrentContent();u=c("DraftModifier").insertText(u,t,r);s=c("EditorState").push(s,u,"insert-characters");this.setState({editorState:s})};p.prototype.render=function(){var r=babelHelpers["extends"]({},this.props,this.$ChatInput16());return c("React").createElement(c("AbstractMentionsTextEditor.react"),babelHelpers["extends"]({ref:"input"},r,{editorState:this.state.editorState,onChange:this.onChange,handleBeforeInput:this.$ChatInput10,handlePastedFiles:this.$ChatInput14,handleDroppedFiles:this.$ChatInput15,handleReturn:this.onReturn,spellCheck:true,stripPastedStyles:true,textAlignment:"left"}))};p.prototype.$ChatInput16=function(){return{autoHighlight:true,handleContentReturn:this.onReturn,maxResults:n,mentionResultsProps:{typeaheadView:c("BootloadedComponent.react").create(c("JSResource")("ChatMentionsInputTypeaheadView.react").__setRef("ChatInput.react")),typeaheadViewProps:{},position:"above",autoflip:true},mentionResultsComponent:c("BootloadedComponent.react").create(c("JSResource")("MentionsLayer.react").__setRef("ChatInput.react")),mentionCreationForContentStateFn:c("createMessengerMentionDraftEntity"),mentionsSource:this.state.mentionsSource,onAddMention:this.$ChatInput17,onEscape:this.$ChatInput18,onShowMentions:this.$ChatInput19}};p.prototype.addMention=function(r){var s=c("insertMentionIntoEditorState")(r,this.state.editorState,0,c("createMessengerMentionDraftEntity"));if(!this.state.mentionsTriggerSource)this.setState({mentionsTriggerSource:c("MessengerMentionSource").REPLY});this.onChange(s);this.$ChatInput17()};p.propTypes={composer:j.object.isRequired,defaultText:j.string,blockStyleFn:j.func,fileUploader:j.object,initializeThingsWithInputFn:j.func,inputKeyDown:j.func,keyBindingFn:j.func,onBeforeInput:j.func,onBlur:j.func,onEscape:j.func,onFocus:j.func,onTab:j.func,resizeFn:j.func,thread:j.object,threadID:j.string,viewer:j.string};p.defaultProps={blockStyleFn:k,keyBindingFn:c("getDefaultKeyBinding")};function q(r,s){var t=r.participants,u=s.participants;if(!t||!u)return true;var v=t.filter(Boolean),w=u.filter(Boolean);return v.length!==w.length}f.exports=p}),null);
__d("FantaTypeSharePreview",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={isLoading:false,params:null,type:null,uri:null};h=babelHelpers.inherits(k,c("immutable").Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("FantaTypeComposer",["FantaTypeFileUploader","FantaTypeSharePreview","immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=0,k={fileUploader:new(c("FantaTypeFileUploader"))(),sharePreview:new(c("FantaTypeSharePreview"))(),text:"",version:j};h=babelHelpers.inherits(l,c("immutable").Record(k));i=h&&h.prototype;function l(){i.constructor.call(this,{version:++j})}f.exports=l}),null);
__d("ChatPhotoUploader.react",["cx","fbt","Promise","Bootloader","FantaTypeComposer","ifRequired","InlineBlock.react","Link.react","MercuryConfig","MessengerEnvironment","React","ReactDOM","SubscriptionsHandler","emptyFunction","gkx","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=c("React").createClass({displayName:"ChatPhotoUploader",_uploader:null,_uploaderPromiseIsResolving:false,_uploaderPromise:null,_subscriptions:null,propTypes:{actionURI:j.string,allowCrossPage:j.bool,composer:j.object,customUI:j.bool,disabled:j.bool,focusInput:j.func,imageClassName:j.string,imagesOnly:j.bool,inputClassname:j.string,linkClassName:j.string,onAllUploadsComplete:j.func,onLastUploadCancel:j.func,onLastUploadFail:j.func,onMount:j.func,onSubmit:j.func,onUploadError:j.func,threadID:j.string},getDefaultProps:function l(){return{actionURI:c("MercuryConfig").upload_url,allowCrossPage:true,costomUI:false,disabled:false,imageClassName:"_509w",imagesOnly:true,linkClassName:"",onSubmit:c("emptyFunction"),onAllUploadsComplete:c("emptyFunction"),onLastUploadFail:c("emptyFunction"),onLastUploadCancel:c("emptyFunction")}},shouldComponentUpdate:function l(m){return m.actionURI!=this.props.actionURI||m.disabled!==this.props.disabled},componentDidMount:function l(){if(this.props.onMount)this.props.onMount(this);c("MessengerEnvironment").messengerui?c("Bootloader").loadModules(["MessengerActions"],c("emptyFunction"),"ChatPhotoUploader.react"):c("Bootloader").loadModules(["FantaMessageActions"],c("emptyFunction"),"ChatPhotoUploader.react")},componentDidUpdate:function l(m){if(this._uploader)this._uploader.setAllowCrossPage(this.props.allowCrossPage)},componentWillUnmount:function l(){if(!this.isUploading()||!this.props.allowCrossPage)this._cleanup()},render:function l(){var m=this.props.imagesOnly?i._("Add Photos"):i._("Add Files"),n=c("joinClasses")("_4q61"+(!this.props.customUI?" _5f0v":"")+(!this.props.customUI?" _509v":""),this.props.linkClassName),o=c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw");return c("React").createElement("form",{action:this.props.actionURI,className:"_vzk",title:m,method:"post",onClick:function(p){p.stopPropagation();if(this.props.disabled)p.preventDefault()}.bind(this),ref:"form"},c("React").createElement("input",{type:"hidden",name:"attach_id",ref:"attachID"}),c("React").createElement("input",{type:"hidden",name:"images_only",value:this.props.imagesOnly}),c("React").createElement(c("InlineBlock.react"),{onClick:o?c("emptyFunction"):this._bootloadChatAutoSendPhotoUploader,className:c("joinClasses")(this.props.className,"_m _4q60 _3rzn")},c("React").createElement("input",{disabled:this.props.disabled,type:"file",className:c("joinClasses")(this.props.inputClassname,"_n _2__f _4e5e"),name:"attachment[]",multiple:"true",accept:this.props.imagesOnly?"image/*":"*",ref:"input",title:m,onChange:o?function(event){this._handleInputOnChange(event,this.props.threadID)}.bind(this):c("emptyFunction")}),c("React").createElement(c("Link.react"),{className:n,tabIndex:-1},c("React").createElement("i",{className:this.props.imageClassName,alt:i._("Camera")}))))},_handleInputOnChange:function l(event,m){__p&&__p();var n=event.target.files,o=function(){if(this.refs.input)this.refs.input.value=null}.bind(this);c("MessengerEnvironment").messengerui?c("ifRequired")("MessengerActions",function(p){p.prepareFilesForSend(m,n);o()},function(){c("Bootloader").loadModules(["MessengerActions"],function(p){p.prepareFilesForSend(m,n);o()},"ChatPhotoUploader.react")}):c("ifRequired")("FantaMessageActions",function(p){if(this.props.composer)p.prepareFilesForSend(m,n,this.props.composer,o)}.bind(this),function(){c("Bootloader").loadModules(["FantaMessageActions"],function(p){if(this.props.composer)p.prepareFilesForSend(m,n,this.props.composer,o)}.bind(this),"ChatPhotoUploader.react")}.bind(this));this.props.focusInput&&this.props.focusInput()},_handleSubmit:function l(m,n){this.props.onSubmit&&this.props.onSubmit(m,n)},_handleAllUploadsCompleted:function l(m,n){this.props.onAllUploadsComplete&&this.props.onAllUploadsComplete(m,n);if(!this.isMounted())this._cleanup()},_handleLastUploadFailed:function l(m,n){this.props.onLastUploadFail&&this.props.onLastUploadFail(m,n);if(!this.isMounted())this._cleanup()},_handleLastUploadCanceled:function l(m,n){this.props.onLastUploadCancel&&this.props.onLastUploadCancel(m,n);if(!this.isMounted())this._cleanup()},_handleUploadError:function l(m,n){this.props.onUploadError&&this.props.onUploadError(n);if(!this.isMounted())this._cleanup()},isUploading:function l(){return this._uploader&&this._uploader.isUploading()||this._uploaderPromiseIsResolving},_bootloadChatAutoSendPhotoUploader:function l(){__p&&__p();if(!this._uploaderPromise){this._uploaderPromiseIsResolving=true;this._uploaderPromise=new(c("Promise"))(function(m){c("Bootloader").loadModules(["ChatAutoSendPhotoUploader"],function(n){this._uploaderPromiseIsResolving=false;var o=new n(c("ReactDOM").findDOMNode(this.refs.form),c("ReactDOM").findDOMNode(this.refs.input),c("ReactDOM").findDOMNode(this.refs.attachID),c("MercuryConfig").msgr_region);o.setAllowCrossPage(this.props.allowCrossPage);var p=new(c("SubscriptionsHandler"))();p.addSubscriptions(o.subscribe("submit",this._handleSubmit),o.subscribe("all-uploads-completed",this._handleAllUploadsCompleted),o.subscribe("last-upload-failed",this._handleLastUploadFailed),o.subscribe("last-upload-canceled",this._handleLastUploadCanceled),o.subscribe("file-upload-error",this._handleUploadError));this._subscriptions=p;this._uploader=o;m(this._uploader)}.bind(this),"ChatPhotoUploader.react")}.bind(this))}return this._uploaderPromise},uploadFiles:function l(m){this._bootloadChatAutoSendPhotoUploader().then(function(n){n.uploadFiles(m)}).done()},uploadURL:function l(m){this._bootloadChatAutoSendPhotoUploader().then(function(n){n.uploadURL(m)}).done()},_cleanup:function l(){this._subscriptions&&this._subscriptions.release();this._uploader&&this._uploader.destroy()}});f.exports=k}),null);
__d("ChatEventPlanButton.react",["cx","fbt","Bootloader","BootloadOnRender.react","ChatFlyoutPlaceholder.react","EventsActionsLogger","JSResource","LazyComponent.react","Link.react","React","gkx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={showFlyout:false},this.$ChatEventPlanButton2=false,this.$ChatEventPlanButton3=function(){__p&&__p();c("Bootloader").loadModules(["EventReminderStateStore","EventReminderRequestHelper","EventReminderActionsLogger"],function(r,s,t){__p&&__p();t.logClickOnEntryPoint();var u=r.getEvent(this.props.threadID);if(!this.$ChatEventPlanButton2)return;if(u&&u.exists){this.$ChatEventPlanButton1=true;if(!this.state.showFlyout)s.fetchEventReminder(this.props.threadID,u.eventID,function(){if(!this.$ChatEventPlanButton2)return;this.setState({showFlyout:true})}.bind(this));else this.setState({showFlyout:false})}else{this.$ChatEventPlanButton1=false;this.setState({showFlyout:!this.state.showFlyout})}}.bind(this),"ChatEventPlanButton.react")}.bind(this),this.onToggle=function(r){if(r!==this.state.showFlyout)this.setState({showFlyout:r})}.bind(this),n}l.prototype.componentDidMount=function(){this.$ChatEventPlanButton2=true};l.prototype.componentWillUnmount=function(){this.$ChatEventPlanButton2=false};l.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement(c("Link.react"),{className:this.props.className,onClick:this.$ChatEventPlanButton3,ref:"event_plan",role:"button",title:i._("Start a plan")},this.$ChatEventPlanButton4()))};l.prototype.$ChatEventPlanButton4=function(){if(!this.state.showFlyout)return null;var m={alignment:"right",position:"above",contextRef:function(){return this.refs.event_plan}.bind(this),shown:this.state.showFlyout,onToggle:this.onToggle},n={action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.MESSENGER_COMPOSER}]},o=c("gkx")("AT74KMJ8RYhvB1tMU93uHQ5gZqTAUi_w-rBy6KswPeaIPbVgyCy23kvmxPapx5bD4puY3bmrQeh4Z7ALUGarUq4kATHuSQM2CsFm5KKmhgZoYA")?c("React").createElement("div",null):c("React").createElement(c("ChatFlyoutPlaceholder.react"),null);return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{actionContext:n,dialogProps:m,flyoutNoSheet:true,isEditing:this.$ChatEventPlanButton1,threadID:this.props.threadID}),loader:c("JSResource")("ChatEventReminderContainer.react").__setRef("ChatEventPlanButton.react"),placeholder:o})};l.defaultProps={className:"_6gb _3k_u"};f.exports=l}),null);
__d("CustomColorHighlighting.react",["cssVar","csx","cx","React","UserAgent","guid","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("React").PropTypes,n="._fy2",o="._43by",p="._mh6",q=c("UserAgent").isEngine("Gecko")?"._mh6 *::-moz-selection":"._mh6 ::selection",r=c("UserAgent").isEngine("Gecko")?"._43by *::-moz-selection":"._43by ::selection",s=n+n,t=o+o,u=p+q,v=p+p,w=o+r,x="rgba(255, 255, 255, 0.3)";k=babelHelpers.inherits(y,c("React").PureComponent);l=k&&k.prototype;function y(z){l.constructor.call(this,z);this.state={id:"cch_"+c("guid")()}}y.prototype.UNSAFE_componentWillMount=function(){this.$CustomColorHighlighting1()};y.prototype.componentWillUnmount=function(){this.$CustomColorHighlighting2();if(this.state.styleTag)document.head.removeChild(this.state.styleTag)};y.prototype.UNSAFE_componentWillReceiveProps=function(z){if(this.props.customColor&&!z.customColor)this.$CustomColorHighlighting2();else if(z.customColor!==this.props.customColor)this.$CustomColorHighlighting3(z.customColor)};y.prototype.render=function(){return c("React").createElement("span",{className:c("joinClasses")("_mh6",this.props.className),id:this.state.id},this.props.children)};y.prototype.$CustomColorHighlighting1=function(){var z=document.createElement("style");z.appendChild(document.createTextNode(""));document.head.appendChild(z);this.setState({styleSheet:z.sheet,styleTag:z},function(){return this.$CustomColorHighlighting3(this.props.customColor)}.bind(this))};y.prototype.$CustomColorHighlighting4=function(z,A,B){if(z.insertRule)z.insertRule(A+"{"+B+"}",0);else if(z.addRule)z.addRule(A,B,0)};y.prototype.$CustomColorHighlighting5=function(z){if("removeRule"in z)z.removeRule(0);else if("deleteRule"in z)z.deleteRule(0)};y.prototype.$CustomColorHighlighting2=function(){if(this.state.styleSheet){if(this.state.styleSheet.rules)while(this.state.styleSheet.rules.length)this.$CustomColorHighlighting5(this.state.styleSheet);if(this.state.styleSheet.cssRules)while(this.state.styleSheet.cssRules.length)this.$CustomColorHighlighting5(this.state.styleSheet)}};y.prototype.$CustomColorHighlighting6=function(z){var A=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(z),B=parseInt(A[1],16),C=parseInt(A[2],16),D=parseInt(A[3],16);return"rgba("+B+","+C+","+D+",0.2)"};y.prototype.$CustomColorHighlighting3=function(z){this.$CustomColorHighlighting2();var A=z||this.props.customColor;if(A){var B=this.$CustomColorHighlighting6(A),C="background: "+B;this.$CustomColorHighlighting4(this.state.styleSheet,"#"+this.state.id+u,C);this.$CustomColorHighlighting4(this.state.styleSheet,"#"+this.state.id+" "+s,"color: "+A);this.$CustomColorHighlighting4(this.state.styleSheet,"#"+this.state.id+" "+t,"background-color: "+A);this.$CustomColorHighlighting4(this.state.styleSheet,"#"+this.state.id+v+" "+w,"background-color: "+x)}};y.propTypes={className:m.string,customColor:m.string};f.exports=y}),null);
__d("FantaMessageActions",["Bootloader","FantaDispatcher","FantaTypeComposer","MercuryConfig","ifRequired","keyMirror","emptyFunction","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({CANCEL_FILE_UPLOAD:null,COMPOSER_TEXT_UPDATE:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,PREPARE_FILES_FOR_SEND:null,RECEIVED_NEW_MESSAGE:null,REMOVE_SHARE_PREVIEW:null,SEND_GROUP_MESSAGE:null,SEND_HOT_LIKE:null,SEND_MESSAGE:null,SEND_PHOTO:null,SEND_STICKER:null,UPDATE_GROUP_NAME:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null});function i(){var l=document.createElement("form");l.action=c("MercuryConfig").upload_url;l.method="post";return l}function j(l,m){var n=document.createElement("input");n.type="file";n.name="attachment[]";n.multiple=true;if(m)n.onchange=m;l.appendChild(n);return n}var k={Types:h,prepareFilesForSend:function l(m,n,o,p){this.dispatchOrBootloadUploader(function(){c("FantaDispatcher").dispatch({type:h.PREPARE_FILES_FOR_SEND,tabID:m,files:n,composer:o});p&&p()})},openUploadFilePicker:function l(m,n){var o=i(),p=j(o,function(){k.prepareFilesForSend(m,this.files,n)});p.click()},uploadedFile:function l(m,n,o){this.dispatchOrBootloadUploader(function(){c("FantaDispatcher").dispatch({type:h.UPLOADED_FILE,tabID:m,uploadID:n,payload:o})})},uploadFileFailed:function l(m,n){this.dispatchOrBootloadUploader(function(){c("FantaDispatcher").dispatch({type:h.UPLOAD_FILE_FAILED,tabID:m,uploadID:n})})},cancelFileUpload:function l(m,n){this.dispatchOrBootloadUploader(function(){c("FantaDispatcher").dispatch({type:h.CANCEL_FILE_UPLOAD,tabID:m,uploadID:n})})},linkPreview:function l(m,n){this.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:h.LINK_PREVIEW,tabID:m,uri:n})})},loadedShareData:function l(m,n,o){this.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:h.LOADED_SHARE_DATA,tabID:m,attachmentData:n,composer:o})})},loadingShareData:function l(m,n){this.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:h.LOADING_SHARE_DATA,composer:n,tabID:m})})},removeSharePreview:function l(m,n){this.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:h.REMOVE_SHARE_PREVIEW,tabID:m,composer:n})})},receivedNewMessage:function l(m,n){c("FantaDispatcher").dispatch({type:h.RECEIVED_NEW_MESSAGE,tabID:m,message:n})},updateGroupName:function l(m,n){this.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:h.UPDATE_GROUP_NAME,threadID:m,newName:n})})},sendGroupMessage:function l(m,n){this.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:h.SEND_GROUP_MESSAGE,threadID:m,onSendSuccess:n})})},sendMessage:function l(m,n,o,p){this.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:h.SEND_MESSAGE,threadID:m,message:n,composer:o,onSendSuccess:p})})},sendPhoto:function l(m,n,o){this.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:h.SEND_PHOTO,onSendSuccess:o,photoData:n,threadID:m})})},sendHotLike:function l(m,n,o,p,q){this.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:h.SEND_HOT_LIKE,emoji:n,onSendSuccess:q,size:o,source:p,threadID:m})})},sendSticker:function l(m,n,o){this.dispatchOrBootloadSendMessages(function(){c("FantaDispatcher").dispatch({type:h.SEND_STICKER,threadID:m,stickerID:n,onSendSuccess:o})})},composerTextUpdate:function l(m,n,o){if(n.length>0)c("ifRequired")("FantaReducersSendMessages",c("emptyFunction"),function(){return this.dispatchOrBootloadSendMessages(c("emptyFunction"))}.bind(this));this.dispatchOrBootloadSharePreview(function(){c("FantaDispatcher").dispatch({type:h.COMPOSER_TEXT_UPDATE,composer:o,message:n,threadID:m})})},dispatchOrBootloadSendMessages:function l(m){c("ifRequired")("FantaReducersSendMessages",function(){c("setImmediate")(m)},function(){c("Bootloader").loadModules(["FantaAppStore","FantaReducersSendMessages"],function(n,o){n.addReducers(o);c("setImmediate")(m)},"FantaMessageActions")})},dispatchOrBootloadUploader:function l(m){c("ifRequired")("FantaReducersFileUploader",function(){m()},function(){c("Bootloader").loadModules(["FantaAppStore","FantaReducersFileUploader"],function(n,o){n.addReducers(o);m()},"FantaMessageActions")})},dispatchOrBootloadSharePreview:function l(m){c("ifRequired")("FantaReducersSharePreview",function(){m()},function(){c("Bootloader").loadModules(["FantaAppStore","FantaReducersSharePreview"],function(n,o){n.addReducers(o);m()},"FantaMessageActions")})}};f.exports=k}),null);
__d("MercuryShareAttachmentRenderLocations",[],(function a(b,c,d,e,f,g){"use strict";var h={CHAT:"chat",CHAT_PREVIEW:"chat_preview",COMPOSER:"ufi_composer",MESSENGER:"messenger",PAGES_INBOX:"pages_inbox",getValues:function i(){return[h.CHAT,h.CHAT_PREVIEW,h.COMPOSER,h.MESSENGER,h.PAGES_INBOX]},isPreview:function i(j){return j===h.CHAT_PREVIEW}};f.exports=h}),null);
__d("MercuryTriodeSourceUtil",["MessengerEnvironment","MercurySourceType"],(function a(b,c,d,e,f,g){"use strict";var h={getMercuryTriodeSource:function i(){return c("MessengerEnvironment").messengerdotcom?c("MercurySourceType").MESSENGER_WEB:c("MercurySourceType").TITAN_WEB}};f.exports=h}),null);
__d("MessengerHotLikeOutlineSVG.react",["cssVar","fbt","CurrentUser","React","MercuryShareAttachmentRenderLocations","uniqueID"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="transparent",n=i._("Thumbs Up Sign");j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={titleId:c("uniqueID")()},q}o.prototype.render=function(){var p=this.props.color||(c("CurrentUser").isWorkUser()?"#373e4c":"#0084ff"),q={height:this.props.height||"85%"};if(this.props.location!==c("MercuryShareAttachmentRenderLocations").CHAT&&this.props.location!==c("MercuryShareAttachmentRenderLocations").PAGES_INBOX)q.width="66%";return c("React").createElement("svg",{"aria-labelledby":this.state.titleId,version:"1.1",viewBox:"0 0 40.16 42.24",preserveAspectRatio:"xMinYMax meet",style:q},c("React").createElement("title",{id:this.state.titleId},n),c("React").createElement("path",{d:"M935.36,1582.44a0,0,0,0,0,0,.06,3.59,3.59,0,0,1-.72,6.53,0,0,0,0,0,0,0,3.56,3.56,0,0,1,.71,2.13,3.6,3.6,0,0,1-3,3.54, 0,0,0,0,0,0,.05,3.56,3.56,0,0,1,.38,1.61,3.61,3.61,0,0,1-3.42,3.6H910v-19.6l5.27-7.9a4,4,0,0,0,.66-2.31l-0.1-4c-0.22-2.4-.09-2.06, 1.13-2.37,2-.51,7.16,1.59,5.13,12.17h11.06A3.59,3.59,0,0,1,935.36,1582.44ZM899,1581h7v22h-7v-22Z",transform:"translate(-898.5 -1563.26)",fill:m,fillRule:"evenodd",stroke:p,strokeLinecap:"round",strokeWidth:"5%"}))};o.propTypes={color:l.string,height:l.string,location:l.string};f.exports=o}),null);
__d("MessengerHotLikePreviewEvents",["mixInEventEmitter"],(function a(b,c,d,e,f,g){"use strict";var h={START:"start",STOP:"stop",STOP_EMOJI:"stop_emoji",POP:"pop",REMOVE:"remove",FINISH_ANIMATION:"finish_animation",FINISH_EMOJI_ANIMATION:"finish_emoji_animation"};c("mixInEventEmitter")(h,{start:true,stop:true,stop_emoji:true,pop:true,remove:"remove",finish_animation:"finish_animation",finish_emoji_animation:"finish_emoji_animation"});f.exports=h}),null);
__d("MessengerHotLikeUtils",["EmojiLikeConstants","StickerAssetType","StickerConstants","XStickerAssetController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={SizeTimes:{small:1e3,medium:2e3,large:3e3},getStickerIDForTime:function i(j){var k=c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;switch(true){case j<this.SizeTimes.small:k=c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;break;case j<this.SizeTimes.medium:k=c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID;break;case j<this.SizeTimes.large:k=c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID;break}return k},getEmojiSizeForTime:function i(j){var k=c("EmojiLikeConstants").size.SMALL;if(j<this.SizeTimes.small)k=c("EmojiLikeConstants").size.SMALL;else if(j<this.SizeTimes.medium)k=c("EmojiLikeConstants").size.MEDIUM;else if(j<this.SizeTimes.large)k=c("EmojiLikeConstants").size.LARGE;return k},getMetadataForHotLike:function i(j){__p&&__p();var k=void 0;switch(j){case c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID:k=120;break;case c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID:k=84;break;case c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID:k=35;break;case c("EmojiLikeConstants").size.LARGE:k=64;break;case c("EmojiLikeConstants").size.MEDIUM:k=64;break;case c("EmojiLikeConstants").size.SMALL:k=32;break}return k?{height:k,width:k}:undefined},getPreviewURI:function i(){return c("XStickerAssetController").getURIBuilder().setInt("sticker_id",c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID).setEnum("image_type",c("StickerAssetType").IMAGE).getURI().toString()},getURIWithID:function i(j){return c("XStickerAssetController").getURIBuilder().setInt("sticker_id",j).setEnum("image_type",c("StickerAssetType").IMAGE).getURI().toString()},getCustomEmojiFromThread:function i(j){return j&&j.custom_like_icon}};f.exports=h}),null);
__d("MessengerHotLikeButton.react",["cx","fbt","EmojiLikeConstants","Image.react","ImmutableObject","Keys","KeyStatus","Link.react","MercuryMessageObject","MercuryTriodeSourceUtil","MessengerEnvironment","MessengerHotLikePreviewEvents","MessengerHotLikeOutlineSVG.react","MessengerHotLikeUtils","MessengerSupportedEmojiUtils","React","StickerConstants","clearTimeout","ifRequired","joinClasses","setIntervalAcrossTransitions","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MercuryMessageObject").get(),m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerHotLikeButton1=null,this.$MessengerHotLikeButton2=null,this.$MessengerHotLikeButton3=null,this.$MessengerHotLikeButton4=null,this.$MessengerHotLikeButton6=function(t){__p&&__p();if(this.props.disabled||this.$MessengerHotLikeButton3){t.preventDefault();t.stopPropagation()}if(this.props.disabled||t.button!==0)return;this.props.onMouseDown&&this.props.onMouseDown();this.$MessengerHotLikeButton3=Date.now();this.$MessengerHotLikeButton9();this.$MessengerHotLikeButton10()}.bind(this),this.$MessengerHotLikeButton8=function(){if(!(this.props.threadID&&this.$MessengerHotLikeButton3))return;this.$MessengerHotLikeButton3=0;this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton12()}.bind(this),this.$MessengerHotLikeButton14=function(){if(!this.props.threadID)return;c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").POP,this.props.threadID)}.bind(this),this.$MessengerHotLikeButton7=function(){if(this.$MessengerHotLikeButton3){this.$MessengerHotLikeButton3=0;this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton14()}}.bind(this),this.$MessengerHotLikeButton5=function(t){t.stopPropagation();if(this.props.disabled)return;if(c("KeyStatus").getKeyDownCode()===c("Keys").RETURN||!this.props.threadID){var u=this.props.sendCustomLike;if(this.props.customLike&&u)u(this.props.customLike,c("MessengerHotLikeUtils").getEmojiSizeForTime(1));else this.props.sendSticker(c("MessengerHotLikeUtils").getStickerIDForTime(1))}}.bind(this),p}n.prototype.componentDidMount=function(){this.$MessengerHotLikeButton4=c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(o,p,q){if(o===this.props.threadID)if(q&&this.props.customLike&&this.props.sendCustomLike)this.props.sendCustomLike(this.props.customLike,q,c("EmojiLikeConstants").source.HOT_LIKE);else this.props.sendSticker(p)}.bind(this))};n.prototype.componentWillUnmount=function(){this.$MessengerHotLikeButton4&&this.$MessengerHotLikeButton4.remove()};n.prototype.render=function(){__p&&__p();var o=null,p={};if(this.props.customLike&&this.props.customLike.emoji){var q=this.props.customLike.emoji,r=c("MessengerSupportedEmojiUtils").getNewEmojiData(q,c("EmojiLikeConstants").size.SMALL),s=this.props.renderSize?this.props.renderSize:16;p.background="none";o=c("React").createElement(c("Image.react"),{src:r&&r.url,style:{padding:s==16?0:3,display:"block",height:s,width:s}})}else if(this.props.CustomRenderer){var t=this.props.CustomRenderer;o=c("React").createElement(t,{color:this.props.customColor,location:this.props.location,renderSize:this.props.renderSize})}else if(this.props.customColor)o=c("React").createElement(c("MessengerHotLikeOutlineSVG.react"),{color:this.props.customColor,location:this.props.location});var u=i._("Send a Like");return c("React").createElement(c("Link.react"),{"aria-label":u,className:c("joinClasses")(this.props.customColor||this.props.CustomRenderer?"_5j_u":"",this.props.className),disabled:this.props.disabled,href:"#",onClick:this.$MessengerHotLikeButton5,onDragStart:function v(w){return w.preventDefault()},onMouseDown:this.$MessengerHotLikeButton6,onMouseLeave:this.$MessengerHotLikeButton7,onMouseUp:this.$MessengerHotLikeButton8,role:"button",style:p,title:u},o)};n.prototype.$MessengerHotLikeButton9=function(){if(!this.props.threadID)return;c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").START,this.$MessengerHotLikeButton13(),this.props.threadID)};n.prototype.$MessengerHotLikeButton12=function(){__p&&__p();if(!this.props.threadID)return;if(!c("MessengerEnvironment").messengerui)c("ifRequired")("MessengerHotLikePreview.react",function(){c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").STOP,this.props.threadID)}.bind(this),function(){if(this.$MessengerHotLikeButton1!==null)return;this.$MessengerHotLikeButton1=c("setIntervalAcrossTransitions")(function(){c("ifRequired")("MessengerHotLikePreview.react",function(){if(this.$MessengerHotLikeButton1!==null){clearInterval(this.$MessengerHotLikeButton1);this.$MessengerHotLikeButton1=null}c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").STOP,this.props.threadID)}.bind(this))}.bind(this),100)}.bind(this));else c("MessengerHotLikePreviewEvents").emit(c("MessengerHotLikePreviewEvents").STOP,this.props.threadID)};n.prototype.$MessengerHotLikeButton13=function(){__p&&__p();var o=this.props.threadID;if(!o)return null;var p=l.constructStickerMessageObject(c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID,c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),o);l.normalizeNewMessage(p);p.is_like_preview=true;p.like_preview_since=this.$MessengerHotLikeButton3;p.customLike=this.props.customLike&&this.props.customLike.emoji?this.props.customLike:null;p.body="";return new(c("ImmutableObject"))(p)};n.prototype.$MessengerHotLikeButton10=function(){this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton2=c("setTimeoutAcrossTransitions")(this.$MessengerHotLikeButton14,c("MessengerHotLikeUtils").SizeTimes.large)};n.prototype.$MessengerHotLikeButton11=function(){c("clearTimeout")(this.$MessengerHotLikeButton2)};n.propTypes={CustomRenderer:m.func,onMouseDown:m.func,customLike:m.object,customColor:m.string,location:m.string,sendSticker:m.func.isRequired,sendCustomLike:m.func,threadID:m.string,disabled:m.bool,renderSize:m.number};f.exports=n}),null);
__d("MessengerHotLikeChatSVGIcon.react",["cssVar","fbt","CurrentUser","React","gkx","uniqueID"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("gkx")("AT5ZvVwuqKWcfrio0AdnNomF7UAfIh6xykST_qUQlvhzlEwa0D-O1yjSaPSHOODgL1U"),m=c("React").PropTypes,n="transparent",o=i._("Thumbs Up Sign");j=babelHelpers.inherits(p,c("React").Component);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={titleId:c("uniqueID")()},r}p.prototype.render=function(){var q=this.props.color||(c("CurrentUser").isWorkUser()?"#373e4c":"#0084ff"),r=this.props.renderSize,s=r?{height:r.toString(),width:r.toString()}:undefined,t=l?{fill:n,stroke:q,opacity:.2}:{fill:q,opacity:.2},u="bounds_"+this.state.titleId;return l?c("React").createElement("svg",babelHelpers["extends"]({width:"32px",height:"31px","aria-labelledby":this.state.titleId,preserveAspectRatio:"xMinYMax meet",version:"1.1",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},s),c("React").createElement("title",{id:this.state.titleId},o),c("React").createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},c("React").createElement("rect",{id:u,fill:n,width:"32",height:"32"}),c("React").createElement("g",{style:t},c("React").createElement("path",{d:"M670.93,460a0.08,0.08,0,0,0,0,.15,1.75,1.75,0,0,1,1.29,1.66c0,1.45-1.2,1.66-2,1.75a0.06,0.06,0,0,0,0,.12,1.54,1.54,0,0,1,.88,1.68C671,467,669.17,467,668,467H658a5.63,5.63,0,0,1-5-2.5V455l2.19-1.59a4.39,4.39,0,0,0,1.21-1.75l1.48-5.59v-0.43l-0.41-3.81a0.45,0.45,0,0,1,.16-0.41c1.34-1,3.07-.23,4,2.6a12.83,12.83,0,0,1,0,6.33,0.55,0.55,0,0,0,.54.66c1.77,0,6.77,0,6.77,0,2,0,3.31.62,3.54,2.5a2.39,2.39,0,0,1-1.23,2.4,0.08,0.08,0,0,0,0,.14,1.87,1.87,0,0,1,1.71,2A2,2,0,0,1,670.93,460Zm-20.13-7h-5.6a0.2,0.2,0,0,0-.2.2v15.6a0.2,0.2,0,0,0,.2.2h5.6a0.2,0.2,0,0,0,.2-0.2V453.2A0.2,0.2,0,0,0,650.8,453Z",transform:"translate(-643 -439)"})),c("React").createElement("g",{transform:"translate(1.000000, 0.000000)"},c("React").createElement("path",{d:"M7.195,29.2559 L0.804,29.2559 C0.362,29.2559 0,28.8939 0,28.4509 L0,13.0609 C0,12.6179 0.362,12.2559 0.804,12.2559 L7.195,12.2559 C7.637,12.2559 8,12.6179 8,13.0609 L8,28.4509 C8,28.8939 7.637,29.2559 7.195,29.2559 Z",id:"Stroke-172",stroke:q,strokeWidth:"2"}),c("React").createElement("path",{d:"M15.9694,0 L15.9694,0 C14.6414,0 13.5214,0.568 13.0414,1.097 L12.4654,1.732 L12.5184,2.63 L12.8154,6.635 C12.8204,6.692 12.8074,6.749 12.7804,6.8 L9.5534,12.791 L8.1544,13.443 L6.9994,13.982 L6.9994,15.256 L6.9994,25.256 L6.9994,27.256 L8.5914,27.256 C8.7024,27.35 8.8354,27.47 8.9364,27.562 C9.1404,27.747 9.3424,27.928 9.5324,28.078 C10.4784,28.825 11.8634,29.174 12.8444,29.25 L12.9214,29.256 L12.9994,29.256 L23.3374,29.256 C25.3594,29.256 26.7824,28.521 27.5704,27.072 C28.0124,26.258 28.1384,25.438 28.0904,24.695 C28.9084,24.168 29.5624,23.33 29.7984,22.148 C29.9184,21.549 29.8984,20.985 29.7854,20.474 C30.4514,19.814 30.9374,18.865 30.9374,17.581 C30.9374,16.549 30.6654,15.739 30.2574,15.123 C30.4314,14.637 30.5364,14.081 30.5364,13.459 C30.5364,10.906 28.4954,9.256 25.3374,9.256 L21.0124,9.256 C21.1474,8.379 21.2494,7.521 21.2494,6.931 C21.2494,4.646 20.4484,1.775 18.2014,0.569 C17.4974,0.191 16.7464,0 15.9694,0 M15.9694,2 C16.3574,2 16.7974,2.085 17.2564,2.332 C18.6054,3.056 19.2494,5.021 19.2494,6.931 C19.2494,7.863 18.8974,9.829 18.7254,10.731 C18.6784,10.978 18.8684,11.256 19.1184,11.256 L25.3374,11.256 C26.2704,11.256 28.5364,11.456 28.5364,13.459 C28.5364,14.979 27.5584,15.534 27.5584,15.534 C27.5584,15.534 28.9374,15.673 28.9374,17.581 C28.9374,19.489 27.0854,19.682 27.0854,19.682 C27.0854,19.682 28.0924,20.481 27.8374,21.756 C27.5284,23.3 26.0264,23.391 25.6764,23.391 C25.6294,23.391 25.6044,23.389 25.6044,23.389 C25.6044,23.389 26.5714,24.723 25.8124,26.118 C25.5674,26.57 25.0414,27.256 23.3374,27.256 L12.9994,27.256 C12.2824,27.2 11.3154,26.937 10.7734,26.51 C10.1994,26.056 9.5134,25.256 8.9994,25.256 L8.9994,15.256 L10.6304,14.494 C10.8704,14.383 11.0674,14.197 11.1934,13.965 L14.5404,7.748 C14.7494,7.362 14.8424,6.924 14.8104,6.486 L14.5124,2.482 C14.5114,2.465 14.5114,2.453 14.5234,2.44 C14.5964,2.359 15.1744,2 15.9694,2",id:"Fill-174",fill:q})))):c("React").createElement("svg",babelHelpers["extends"]({"aria-labelledby":this.state.titleId,preserveAspectRatio:"xMinYMax meet",version:"1.1",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},s),c("React").createElement("title",{id:this.state.titleId},o),c("React").createElement("g",null,c("React").createElement("rect",{id:u,fill:n,width:"32",height:"32"}),c("React").createElement("g",{style:t},c("React").createElement("path",{d:"M670.93,460a0.08,0.08,0,0,0,0,.15,1.75,1.75,0,0,1,1.29,1.66c0,1.45-1.2,1.66-2,1.75a0.06,0.06,0,0,0,0,.12,1.54,1.54,0,0,1,.88,1.68C671,467,669.17,467,668,467H658a5.63,5.63,0,0,1-5-2.5V455l2.19-1.59a4.39,4.39,0,0,0,1.21-1.75l1.48-5.59v-0.43l-0.41-3.81a0.45,0.45,0,0,1,.16-0.41c1.34-1,3.07-.23,4,2.6a12.83,12.83,0,0,1,0,6.33,0.55,0.55,0,0,0,.54.66c1.77,0,6.77,0,6.77,0,2,0,3.31.62,3.54,2.5a2.39,2.39,0,0,1-1.23,2.4,0.08,0.08,0,0,0,0,.14,1.87,1.87,0,0,1,1.71,2A2,2,0,0,1,670.93,460Zm-20.13-7h-5.6a0.2,0.2,0,0,0-.2.2v15.6a0.2,0.2,0,0,0,.2.2h5.6a0.2,0.2,0,0,0,.2-0.2V453.2A0.2,0.2,0,0,0,650.8,453Z",transform:"translate(-643 -439)"})),c("React").createElement("g",{style:t},c("React").createElement("rect",{x:"2",y:"14",width:"6",height:"16",rx:"0.2",ry:"0.2"})),c("React").createElement("path",{fill:q,d:"M650.8,453a0.2,0.2,0,0,1,.2.2v15.6a0.2,0.2,0,0,1-.2.2h-5.6a0.2,0.2,0,0,1-.2-0.2V453.2a0.2,0.2,0,0,1,.2-0.2h5.6m0-2h-5.6a2.2,2.2,0,0,0-2.2,2.2v15.6a2.2,2.2,0,0,0,2.2,2.2h5.6a2.2,2.2,0,0,0,2.2-2.2V453.2a2.2,2.2,0,0,0-2.2-2.2h0Z",transform:"translate(-643 -439)"}),c("React").createElement("path",{fill:q,"data-name":"stroke",d:"M658.83,441c1.06,0,2.16,1,2.83,3a12.83,12.83,0,0,1,0,6.33,0.55,0.55,0,0,0,.54.66h1.18l5.59,0c2,0,3.31.62,3.54,2.5a2.39,2.39,0,0,1-1.23,2.4,0.08,0.08,0,0,0,0,.14,1.87,1.87,0,0,1,1.71,2,2,2,0,0,1-2.07,1.91,0.08,0.08,0,0,0,0,.15,1.75,1.75,0,0,1,1.29,1.66c0,1.45-1.2,1.66-2,1.75a0.06,0.06,0,0,0,0,.12,1.54,1.54,0,0,1,.88,1.68C671,467,669.24,467,668.07,467H658a5.63,5.63,0,0,1-5-2.5V455l2.19-1.59a4.39,4.39,0,0,0,1.21-1.75l1.48-5.59v-0.43l-0.41-3.81a0.45,0.45,0,0,1,.16-0.41,2,2,0,0,1,1.17-.41m0-2h0a4,4,0,0,0-2.36.8,2.45,2.45,0,0,0-1,2.23l0.39,3.67h0v0.05l-1.41,5.32a3.64,3.64,0,0,1-.47.69l-2.19,1.59L651,454v11.15l0.36,0.52A7.58,7.58,0,0,0,658,469h10.07c3.25,0,4.95-1.21,5-3.59a4.54,4.54,0,0,0-.05-0.93,3.59,3.59,0,0,0,1.14-2.71,3.77,3.77,0,0,0-.18-1.15,3.85,3.85,0,0,0,1-2.57,4,4,0,0,0-.82-2.55,4.38,4.38,0,0,0,.31-2.25c-0.2-1.59-1.18-4.25-5.53-4.25l-5,0a12.65,12.65,0,0,0-.35-5.63c-0.91-2.75-2.67-4.38-4.73-4.38h0Z",transform:"translate(-643 -439)"})))};p.propTypes={color:m.string,location:m.string,renderSize:m.number};f.exports=p}),null);
__d("XMessagingQuickCamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/quick-cam/",{thread_id:{type:"String",required:true},__asyncDialog:{type:"Int"}})}),null);
__d("MessengerQuickCamButton.react",["fbt","AsyncRequest","BootloadOnRender.react","ChatConfig","JSResource","LazyComponent.react","Link.react","React","XMessagingQuickCamController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l="seen_cam_button_nux";i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={nuxOpen:false,nuxShown:!!c("ChatConfig").get(l)},this.$MessengerQuickCamButton2=function(){this.setState({nuxShown:true,nuxOpen:false},function(){return this.$MessengerQuickCamButton3()}.bind(this))}.bind(this),this.$MessengerQuickCamButton1=function(){if(!this.state.nuxShown)this.setState({nuxOpen:true});else this.$MessengerQuickCamButton3()}.bind(this),o}m.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement(c("Link.react"),{className:this.props.className,onClick:this.$MessengerQuickCamButton1,ref:"photoButton",role:"button",title:h._("Take a picture using quick cam")}),c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("MessagingShowNUX.react").__setRef("MessengerQuickCamButton.react"),component:c("React").createElement(c("LazyComponent.react"),{contextRef:function(){return this.refs.photoButton}.bind(this),settingName:l,shown:this.state.nuxOpen,onHidden:this.$MessengerQuickCamButton2,ref:"camNUX"},h._("Send photos from your computer's camera.")),placeholder:c("React").createElement("span",null)}))};m.prototype.$MessengerQuickCamButton3=function(){var n=c("XMessagingQuickCamController").getURIBuilder().setString("thread_id",this.props.threadID).getURI();new(c("AsyncRequest"))().setMethod("GET").setURI(n).setRelativeTo(this).setReadOnly(true).send()};m.propTypes={className:k.string.isRequired,threadID:k.string.isRequired};f.exports=m}),null);
__d("MessengerQuickCamOrigins",[],(function a(b,c,d,e,f,g){"use strict";var h={CHAT_TAB:"chat tab",MESSENGER:"messenger",getValues:function i(){return[h.CHAT_TAB,h.MESSENGER]}};f.exports=h}),null);
__d("P2PPaymentSupportedCurrency",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({USD:"USD",PHP:"PHP",EUR:"EUR",GBP:"GBP",THB:"THB",VND:"VND"})}),null);
__d("P2PAbstractSendMoneyButton.react",["cx","fbt","React","TooltipLink.react","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$P2PAbstractSendMoneyButton1=false,this.$P2PAbstractSendMoneyButton3=function(){this.props.onMouseDown&&this.props.onMouseDown();this.$P2PAbstractSendMoneyButton1=this.props.isActive}.bind(this),this.$P2PAbstractSendMoneyButton2=function(r){r.stopPropagation();if(this.$P2PAbstractSendMoneyButton1){this.$P2PAbstractSendMoneyButton1=false;return}this.props.onClick()}.bind(this),n}l.prototype.render=function(){return c("React").createElement(c("TooltipLink.react"),{alignH:"center",className:c("joinClasses")(this.props.className,(this.props.isActive?"open":"")+(this.props.isDisabled?" disabled":"")+(this.props.isActive?" _10gz":"")+(this.props.isDisabled?" _10g-":"")+(!this.props.isMessenger&&!this.props.className?" _5uqy":"")+(this.props.isMessenger?" _3ggc":"")),href:"#",onClick:this.$P2PAbstractSendMoneyButton2,onMouseDown:this.$P2PAbstractSendMoneyButton3,onMouseOver:this.props.onMouseOver,position:"above",role:"button",title:this.$P2PAbstractSendMoneyButton4()},this.getButton())};l.prototype.getButton=function(){if(this.props.button)return this.props.button;return c("React").createElement("i",{className:"_5s8l"})};l.prototype.$P2PAbstractSendMoneyButton4=function(){if(this.props.isDisabled)return null;return i._("Send Money")};f.exports=l}),null);
__d("P2PActionConstants",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({CREDIT_CARDS_UPDATED:"credit_cards_updated",CREDIT_CARDS_UPDATED_ERROR:"credit_cards_updated_error",CHANNEL_EVENTS_ALLOWED:"channel_events_allowed",CHANNEL_EVENTS_IGNORED:"channel_events_ignored",CREDIT_CARD_SAVING:"credit_card_saving",CREDIT_CARD_ADDED:"credit_card_added",CREDIT_CARD_ADDED_ERROR:"credit_card_added_error",CREDIT_CARD_ADDED_ERROR_CLEARED:"credit_card_added_error_cleared",CREDIT_CARD_DELETED:"credit_card_deleted",CREDIT_CARD_DELETED_ERROR:"credit_card_deleted_error",CREDIT_CARD_UPDATED:"credit_card_updated",CREDIT_CARD_UPDATED_ERROR:"credit_card_updated_error",PRESET_CREDIT_CARD_UPDATED:"preset_credit_card_updated",PRESET_CREDIT_CARD_UPDATED_ERROR:"preset_credit_card_updated_error",CREDIT_CARD_VERIFIED:"credit_card_verified",CREDIT_CARD_VERIFIED_ERROR:"credit_card_verified_error",PAYMENT_METHODS_UPDATED:"payment_methods_updated",PAYMENT_METHODS_UPDATED_ERROR:"payment_methods_updated_error",TRANSFERS_UPDATED:"transfers_updated",TRANSFERS_UPDATED_ERROR:"transfers_updated_error",NUX_TRANSFERS_UPDATED:"nux_transfers_updated",TRANSFER_ADDED:"transfer_added",TRANSFER_ADDED_ERROR:"transfer_added_error",TRANSFER_UPDATED:"transfer_updated",TRANSFER_UPDATED_ERROR:"transfer_updated_error",TRANSFER_ACCEPTED:"transfer_accepted",TRANSFER_DECLINED:"transfer_declined",CHAT_SEND_VIEW_OPENED:"chat_send_view_opened",CHAT_SEND_VIEW_CLOSED:"chat_send_view_closed",BIN_NUMBER_VALIDATED:"bin_number_validated",BIN_NUMBER_VALIDATED_ERROR:"bin_number_validated_error",USER_ELIGIBILITY_UDPATED:"user_eligibility_updated",FRIENDS_LIST_UPDATED:"friends_list_updated",DIALOG_SHOWN:"dialog_shown",DIALOG_CLOSED:"dialog_closed",BANNER_STATES_UPDATED:"banner_states_updated",BANNER_DISMISSED:"banner_dismissed",BANNER_VIEWED:"banner_viewed",BANNER_COMPLETED:"banner_completed",MONEYPENNY_TRANSFER_CREATED:"moneypenny_transfer_created",MONEYPENNY_TRANSFER_CREATED_ERROR:"moneypenny_transfer_created_error",PLATFORM_CONTEXT_ADDED:"platform_context_added",PLATFORM_CONTEXT_ADDED_ERROR:"platform_context_added_error",PLATFORM_CONTEXT_SAVE_ERRORS_CLEARED:"platform_context_save_errors_cleared",PLATFORM_CONTEXT_BANNER_DISMISSED:"platform_context_banner_dismissed",PLATFORM_CONTEXT_PRODUCT_ITEM_SOLD:"platform_context_product_item_sold",PLATFORM_CONTEXT_CHANGED:"platform_context_changed",EXTENSIVE_TRANSFER_DETAILS_UPDATED:"extensive_transfer_details_updated",ADDRESS_SAVING:"address_saving",ADDRESSES_UPDATED:"addresses_updated",ADDRESS_ADDED:"address_added",ADDRESS_ADDED_ERROR:"address_added_error",ADDRESS_ADDED_ERROR_CLEARED:"address_added_error_cleared",CHECKOUT_CART_INITIATED:"checkout_cart_initiated",CHECKOUT_CART_CREATED:"checkout_cart_created",CHECKOUT_SHIPPING_OPTION_SELECTED:"checkout_shipping_option_selected",CHECKOUT_ADDRESS_SELECTED:"checkout_address_selected",CHECKOUT_CREDIT_CARD_SELECTED:"checkout_credit_card_selected",CHECKOUT_ADDRESS_FORM_TOGGLED:"checkout_address_form_toggled",CHECKOUT_CREDIT_CARD_FORM_TOGGLED:"checkout_credit_card_form_toggled",CHECKOUT_ADDRESS_EDIT_OPTIONS_TOGGLED:"checkout_address_options_toggled",CHECKOUT_CREDIT_CARD_EDIT_OPTIONS_TOGGLED:"checkout_credit_card_edit_options_toggled",CHECKOUT_PAYMENT_METHOD_EDIT_OPTIONS_TOGGLED:"checkout_payment_edit_options_toggled",CHECKOUT_PAYMENT_METHOD_SELECTED:"checkout_payment_method_selected",CHECKOUT_PAYMENT_METHOD_CONFIGURED:"checkout_payment_method_configured",CHECKOUT_PAYMENT_METHOD_CONFIRMED:"checkout_payment_method_confirmed",CHECKOUT_ADDRESS_FORM_VALIDATED:"checkout_address_form_validated",CHECKOUT_CREDIT_CARD_FORM_VALIDATED:"checkout_credit_card_form_validated",CHECKOUT_EDIT_COMPLETED:"checkout_completed",CHECKOUT_PROCESSING:"checkout_processing",CHECKOUT_BUYER_PROFILE_UPDATED:"checkout_buyer_profile_updated",CHECKOUT_MANUAL_PAYMENT_RECEIPT_UPDATED:"checkout_manual_payment_receipt_updated",PAYMENT_REQUEST_INITIATED:"payment_request_initiated",PAYMENT_REQUEST_INITIATED_COMPLETE:"payment_request_initiated_completed",PAYMENT_REQUEST_CREATED:"payment_request_created",PAYMENT_REQUEST_CREATED_ERROR:"payment_request_created_error",PAYMENT_REQUEST_UPDATED:"payment_request_updated",PAYMENT_REQUEST_DECLINE_INITIATED:"payment_request_decline_initiated",PAYMENT_REQUEST_DECLINED:"payment_request_declined",PAYMENT_REQUEST_DECLINE_ERROR:"payment_request_decline_error",PAYMENT_REQUESTS_FETCHED:"payment_requests_fetched",PAYMENT_REQUEST_CANCEL_INITIATED:"payment_request_cancel_initiated",PAYMENT_REQUEST_CANCELED:"payment_request_canceled",PAYMENT_REQUEST_CANCEL_ERROR:"payment_request_cancel_error"});f.exports=h}),null);
__d("P2PDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:false})}),null);
__d("P2PActions",["ChatOpenTab","ChatOpenTabEventLogger","FantaTabActions","P2PActionConstants","P2PDispatcher","MercuryShareAttachmentRenderLocations","ifRequired"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={updateCreditCards:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CREDIT_CARDS_UPDATED,data:j})},updateCreditCardsError:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CREDIT_CARDS_UPDATED_ERROR})},updatePaymentMethods:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PAYMENT_METHODS_UPDATED,data:j})},updatePaymentMethodsError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PAYMENT_METHODS_UPDATED_ERROR,data:j})},ignoreCreditCardChannelEvents:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHANNEL_EVENTS_IGNORED})},allowCreditCardChannelEvents:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHANNEL_EVENTS_ALLOWED})},creditCardSaving:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CREDIT_CARD_SAVING})},addCreditCard:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CREDIT_CARD_ADDED,data:j})},addCreditCardError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CREDIT_CARD_ADDED_ERROR,data:j})},addCreditCardErrorCleared:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CREDIT_CARD_ADDED_ERROR_CLEARED})},updatePresetCreditCard:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PRESET_CREDIT_CARD_UPDATED,data:j})},updatePresetCreditCardError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PRESET_CREDIT_CARD_UPDATED_ERROR,data:j})},updateCreditCard:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CREDIT_CARD_UPDATED,data:j})},updateCreditCardError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CREDIT_CARD_UPDATED_ERROR,data:j})},deleteCreditCard:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CREDIT_CARD_DELETED,data:j})},deleteCreditCardError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CREDIT_CARD_DELETED_ERROR,data:j})},verifyCreditCard:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CREDIT_CARD_VERIFIED,data:j})},verifyCreditCardError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CREDIT_CARD_VERIFIED_ERROR,data:j})},updateTransfers:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").TRANSFERS_UPDATED,data:j})},updateTransfersError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").TRANSFERS_UPDATED_ERROR,data:j})},updateNUXTransfers:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").NUX_TRANSFERS_UPDATED,data:j})},transferAdded:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").TRANSFER_ADDED,data:j})},transferAddedError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").TRANSFER_ADDED_ERROR,data:j})},transferUpdated:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").TRANSFER_UPDATED,data:j})},transferUpdatedError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").TRANSFER_UPDATED_ERROR,data:j})},transferAccepted:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").TRANSFER_ACCEPTED})},transferDeclined:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").TRANSFER_DECLINED,data:j})},chatSendViewOpened:function i(j){__p&&__p();function k(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHAT_SEND_VIEW_OPENED,data:j})}if(c("ChatOpenTab").canOpenTab()&&!j.fromChatTab){if(!j.fromChatTab){c("FantaTabActions").openTab(j.threadID);c("ChatOpenTabEventLogger").logAutoOpen("p2pAction",j.threadID)}k()}else{c("ifRequired")("MessengerActions",function(l){return l.selectThread(j.threadID)});k()}},chatSendViewClosed:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHAT_SEND_VIEW_CLOSED,data:j})},binNumberValidated:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").BIN_NUMBER_VALIDATED,data:j})},binNumberValidatedError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").BIN_NUMBER_VALIDATED_ERROR,data:j})},friendsListUpdated:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").FRIENDS_LIST_UPDATED,data:j})},userEligibilityUpdated:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").USER_ELIGIBILITY_UDPATED,data:j})},showDialog:function i(j,k){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").DIALOG_SHOWN,data:{dialogClass:j,dialogProps:k}})},hideDialog:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").DIALOG_CLOSED})},bannerStatesUpdated:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").BANNER_STATES_UPDATED,data:j})},bannerDismissed:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").BANNER_DISMISSED,data:j})},bannerCompleted:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").BANNER_COMPLETED,data:j})},moneypennyTransferCreated:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").MONEYPENNY_TRANSFER_CREATED,data:j})},moneypennyTransferCreatedError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").MONEYPENNY_TRANSFER_CREATED_ERROR,data:j})},addPlatformContext:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PLATFORM_CONTEXT_ADDED,data:j})},addPlatformContextError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PLATFORM_CONTEXT_ADDED_ERROR,data:j})},clearPlatformContextSaveErrors:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PLATFORM_CONTEXT_SAVE_ERRORS_CLEARED,data:j})},platformContextBannerDismissed:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PLATFORM_CONTEXT_BANNER_DISMISSED,data:j})},platformContextProductItemSold:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PLATFORM_CONTEXT_PRODUCT_ITEM_SOLD,data:j})},platformContextChanged:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PLATFORM_CONTEXT_CHANGED,data:j})},extensiveTransferDetailsLoaded:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").EXTENSIVE_TRANSFER_DETAILS_UPDATED,data:j})},updateAddresses:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").ADDRESSES_UPDATED,data:j})},addressSaving:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").ADDRESS_SAVING})},addAddress:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").ADDRESS_ADDED,data:j})},addAddressError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").ADDRESS_ADDED_ERROR,data:j})},addAddressErrorCleared:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").ADDRESS_ADDED_ERROR_CLEARED})},checkoutCartInitiated:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_CART_INITIATED})},checkoutCartCreated:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_CART_CREATED,data:j})},checkoutShippingOptionSelected:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_SHIPPING_OPTION_SELECTED,data:j})},checkoutAddressSelected:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_ADDRESS_SELECTED,data:j})},checkoutCreditCardSelected:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_CREDIT_CARD_SELECTED,data:j})},checkoutAddressFormToggled:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_ADDRESS_FORM_TOGGLED,data:j})},checkoutCreditCardFormToggled:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_CREDIT_CARD_FORM_TOGGLED,data:j})},checkoutAddressEditOptionsToggled:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_ADDRESS_EDIT_OPTIONS_TOGGLED,data:j})},checkoutCreditCardEditOptionsToggled:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_CREDIT_CARD_EDIT_OPTIONS_TOGGLED,data:j})},checkoutPaymentMethodEditOptionsToggled:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_EDIT_OPTIONS_TOGGLED,data:j})},checkoutPaymentMethodSelected:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_SELECTED,data:j})},checkoutPaymentMethodConfigured:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_CONFIGURED,data:j})},checkoutPaymentMethodConfirmed:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_CONFIRMED,data:j})},checkoutCreditCardFormValidated:function i(j,k){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_CREDIT_CARD_FORM_VALIDATED,data:{isValid:j,formData:k}})},checkoutAddressFormValidated:function i(j,k){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_ADDRESS_FORM_VALIDATED,data:{isValid:j,formData:k}})},checkoutEditCompleted:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_EDIT_COMPLETED})},checkoutProcessing:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_PROCESSING,data:j})},checkoutBuyerProfileUpdated:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_BUYER_PROFILE_UPDATED,data:j})},checkoutManualPaymentReceiptUpdated:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").CHECKOUT_MANUAL_PAYMENT_RECEIPT_UPDATED,data:j})},paymentRequestInitiated:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PAYMENT_REQUEST_INITIATED})},paymentRequestInitiatedComplete:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PAYMENT_REQUEST_INITIATED_COMPLETE})},paymentRequestCreated:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PAYMENT_REQUEST_CREATED,data:j})},paymentRequestCreatedError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PAYMENT_REQUEST_CREATED_ERROR,data:j})},paymentRequestUpdated:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PAYMENT_REQUEST_UPDATED,data:j})},paymentRequestDeclineInitiated:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PAYMENT_REQUEST_DECLINE_INITIATED})},paymentRequestDeclined:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PAYMENT_REQUEST_DECLINED,data:j})},paymentRequestDeclineError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PAYMENT_REQUEST_DECLINE_ERROR,data:j})},paymentRequestCancelInitiated:function i(){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PAYMENT_REQUEST_CANCEL_INITIATED})},paymentRequestCanceled:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PAYMENT_REQUEST_CANCELED,data:j})},paymentRequestCancelError:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PAYMENT_REQUEST_CANCEL_ERROR,data:j})},paymentRequestsFetched:function i(j){c("P2PDispatcher").dispatch({type:c("P2PActionConstants").PAYMENT_REQUESTS_FETCHED,data:j})}};f.exports=h}),null);
__d("P2PLoadingMask.react",["cx","React","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){if(!this.props.visible)return null;return c("React").createElement("div",{className:"_3de"},c("React").createElement(c("XUISpinner.react"),{background:"dark",size:"large",className:"_3df"}),c("React").createElement("div",{className:"_3dg"}))};function l(){i.apply(this,arguments)}l.propTypes={visible:k.bool};l.defaultProps={visible:false};f.exports=l}),null);
__d("P2PLogger",["BanzaiLogger"],(function a(b,c,d,e,f,g){"use strict";var h="P2PPaymentLoggerConfig",i={log:function j(k,l){l=babelHelpers["extends"]({event:k},l);c("BanzaiLogger").log(h,l)}};f.exports=i}),null);
__d("P2PPaymentLoggerEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ACTN_ADD_CREDIT_CARD:"Actn_AddCreditCard",ACTN_UPDATE_CREDIT_CARD:"Actn_UpdateCreditCard",ACTN_REMOVE_CREDIT_CARD:"Actn_RemoveCreditCard",ACTN_UNLOCK_CREDIT_CARD:"Actn_UnlockCreditCard",ACTN_VALIDATE_CARD:"Actn_ValidateCard",ACTN_ADD_PAYPAL:"Actn_AddPayPal",ACTN_GET_TRANSFERS_ERROR:"Actn_GetTransfersError",ACTN_TRANSFER_MONEY:"Actn_TransferMoney",ACTN_TRANSFER_MONEY_WITH_CAMPAIGN:"Actn_TransferMoneyWithCampaign",ACTN_REQUEST_MONEY_WITH_CAMPAIGN_NOT_QUALIFIED:"Actn_RequestMoneyWithCampaignNotQualified",ACTN_TRANSFER_MONEY_WITH_CAMPAIGN_NOT_QUALIFIED:"Actn_TransferMoneyWithCampaignNotQualified",ACTN_TRANSFER_MONEY_WITH_CAMPAIGN_PARENT_CALL:"Actn_TransferMoneyWithCampaignParentCall",ACTN_TRANSFER_MONEY_WITH_CAMPAIGN_POST_SUCCESS:"Actn_TransferMoneyWithCampaignPostSuccess",ACTN_TRANSFER_MONEY_CHECK_NEEDS_REVERT:"Actn_TransferMoneyCheckNeedsRevert",ACTN_TRANSFER_MONEY_REVERT:"Actn_TransferMoneyRevert",ACTN_TRANSFER_MONEY_CREATE_CONTEXT:"Actn_TransferMoneyCreateContext",ACTN_TRANSFER_MONEY_CREATE_PLATFORM_ITEM:"Actn_TransferMoneyCreatePlatformItem",ACTN_ACCEPT_MONEY:"Actn_AcceptMoney",ACTN_DECLINE_MONEY:"Actn_DeclineMoney",ACTN_SET_PRIMARY:"Actn_SetPrimary",ACTN_WITHDRAW_MONEY:"Actn_WithdrawMoney",ACTN_CANCEL_TRANSFER:"Actn_CancelTransfer",ACTN_SET_PHYSICAL_ADDRESS:"Actn_SetPhysicalAddress",ACTN_CREATE_MSGR_COMMERCE_CART:"Actn_CreateMsgrCommerceCart",ACTN_PLACE_MSGR_COMMERCE_ORDER:"Actn_PlaceMsgrCommerceOrder",ACTN_PLATFORM_SET_SHIPPING_ADDRESS:"Actn_PlatformSetShippingAddress",ACTN_PLATFORM_BANNER_IMPRESSION:"Actn_PlatformBannerImpression",ACTN_PLATFORM_BANNER_DISMISSAL:"Actn_PlatformBannerDismissal",ACTN_PLATFORM_CARD_IMPRESSION:"Actn_PlatformCardImpression",ACTN_PLATFORM_CARD_DISMISSAL:"Actn_PlatformCardDismissal",ACTN_SEND_TRANSFER_MESSAGE:"Actn_SendTransferMessage",ACTN_POST_TRANSFER_STEPS:"Actn_PostTransferSteps",ACTN_SEND_SENDER_EMAIL:"Actn_SendSenderEmail",ACTN_SEND_EXPIRE_NOTIFICATIONS:"Actn_SendExpireNotifications",ACTN_SEND_PUSH_FAIL_NOTIFS:"Actn_SendPushFailNotis",ACTN_UNCATEGORIZED_EXCEPTION:"Actn_Uncategorized_Exception",ACTN_INCREASE_CAMPAIGN_COUNTER:"Actn_Increase_Campaign_Counter",ACTN_CREATE_PAYMENT_REQUEST:"Actn_CreatePaymentRequest",ACTN_CREATE_GROUP_PAYMENT_REQUEST:"Actn_CreateGroupPaymentRequest",ACTN_REMIND_PAYMENT_REQUEST:"Actn_RemindPaymentRequest",ACTN_PAY_PAYMENT_REQUEST:"Actn_PayPaymentRequest",ACTN_DECLINE_PAYMENT_REQUEST:"Actn_DeclinePaymentRequest",ACTN_CANCEL_PAYMENT_REQUEST:"Actn_CancelPaymentRequest",ACTN_EXPIRE_PAYMENT_REQUEST:"Actn_ExpirePaymentRequest",ACTN_SEND_PAYMENT_REQUEST_MESSAGE:"Actn_SendPaymentRequestMessage",ACTN_AUTH_FOR_SENDER_REVIEW:"Actn_AuthForSenderReview",ACTN_FINISH_HUMAN_REVIEW:"Actn_FinishHumanReview",ACTN_COMPLETE_SENDER_REVIEW:"Actn_CompleteSenderReview",ACTN_COMPLETE_RECEIVER_REVIEW:"Actn_CompleteReceiverReview",ACTN_SUBMIT_VERIFICATION_STEP:"Actn_SubmitVerificationStep",ACTN_COMPLETE_SENDER_VERIFICATION:"Actn_CompleteSenderVerification",ACTN_COMPLETE_RECEIVER_VERIFICATION:"Actn_CompleteReceiverVerification",ACTN_CANCEL_SENDER_VERIFICATION:"Actn_CancelSenderVerification",ACTN_CANCEL_RECEIVER_VERIFICATION:"Actn_CancelReceiverVerification",ACTN_CANCEL_SENDER_RISK:"Actn_CancelSenderRisk",ACTN_CANCEL_EXPIRE:"Actn_CancelExpire",ACTN_CANCEL_FOR_SAME_CARD:"Actn_CancelForSameCard",ACTN_CANCEL_BY_CUSTOMER_SERVICE:"Actn_CancelByCustomerService",ACTN_CANCEL_RECEIVER_REVIEW:"Actn_CancelReceiverReview",ACTN_CANCEL_SENDER_REVIEW:"Actn_CancelSenderReview",ACTN_CANCEL_ALL_PENDING_TRANSFERS:"Actn_CancelAllPendingTransfers",ACTN_FILTER_LOGMESSAGE:"Actn_FilterLogMessage",ACTN_FILTER_NOTIFICATION:"Actn_FilterNotification",ACTN_SEND_NOTIFICATION:"Actn_SendNotification",ACTN_ADD_PIN:"Actn_AddPIN",ACTN_UPDATE_PIN:"Actn_UpdatePIN",ACTN_REMOVE_PIN:"Actn_RemovePIN",ACTN_RESET_PIN:"Actn_ResetPIN",ACTN_VALIDATE_PIN:"Actn_ValidatePIN",ACTN_UPDATE_PASSWORD_SETTINGS:"Actn_UpdatePasswordSettings",ACTN_ENABLE_TOUCH_ID:"Actn_EnableTouchID",ACTN_VERIFY_TOUCH_ID:"Actn_VerifyTouchID",ACTN_DISABLE_TOUCH_ID:"Actn_DisableTouchID",ACTN_CHANNEL_NOTIF_CARD_EVENT:"Actn_ChannelNotifCardEvent",ACTN_CHANNEL_NOTIF_TRANSFER_STATUS_EVENT:"Actn_ChannelNotifTransferStatusEvent",ACTN_CHANNEL_NOTIF_PLATFORM_EVENT:"Actn_ChannelNotifPlatformEvent",ACTN_CHANNEL_NOTIF_PAYMENT_REQUEST_STATUS_EVENT:"Actn_ChannelNotifPaymentRequestStatusEvent",ACTN_PLATFORM_BANNER_DISMISSED:"Actn_PlatformBannerDismissed",ACTN_PLATFORM_BANNER_MARK_AS_SOLD:"Actn_PlatformBannerMarkAsSold",ACTN_ADD_ADDRESS:"Actn_AddAddress",ACTN_GET_ADDRESSES:"Actn_GetAddresses",ACTN_ADD_EMAIL:"Actn_AddEmail",ACTN_UPDATE_EMAIL:"Actn_UpdateEmail",ACTN_SET_PRIMARY_EMAIL:"Actn_SetPrimaryEmail",ACTN_REMOVE_EMAIL:"Actn_RemoveEmail",ACTN_ADD_PHONE:"Actn_AddPhone",ACTN_UPDATE_PHONE:"Actn_UpdatePhone",ACTN_SET_PRIMARY_PHONE:"Actn_SetPrimaryPhone",ACTN_REMOVE_PHONE:"Actn_RemovePhone",ACTN_GET_CURRENT_USER_PROFILE_DATA:"Actn_GetCurrentUserProfileData",ACTN_DO_FRAUD_CHECK:"Actn_DoFraudCheck",ACTN_PEOPLE_SEARCH_SEND_MONEY_BUTTON_CLICKED:"Actn_PeopleSearchSendMoneyButtonClicked",ACTN_CAMPAIGN_CHECK_USER_HAS_NEW_ACTIVITY:"Actn_CampaignCheckUserHasNewActivity",ACTN_CAMPAIGN_SAVE_PROMO_NOTIFICATION_TIME:"Actn_CampaignSavePromoNotificationTime",ACTN_CAMPAIGN_SEND_INCENTIVE_ADMIN_MESSAGE:"Actn_CampaignSendIncentiveAdminMessage",ACTN_FETCH_SEND_PHASE_STEPS:"Actn_FetchSendPhaseSteps",ACTN_FETCH_RECEIVE_NOTIFICATION_PHASE_STEPS:"Actn_FetchReceiveNotificationPhaseSteps",ACTN_FETCH_RECEIVE_BUBBLE_PHASE_STEPS:"Actn_FetchReceiveBubblePhaseSteps",ACTN_START_IDV_FLOW:"Actn_StartIDVFlow",ACTN_START_PROCESS_IDV_PHOTO:"Actn_StartProcessIDVPhoto",ACTN_GET_PHOTO_ID_VERIFICATION_RESP:"Actn_GetPhotoIDVerificationResp",ACTN_GET_PHOTO_ID_GBG_EXCEPTION:"Actn_GetPhotoIDGBGException",ERROR_NON_STANDARD_CHAR:"ErrorNonStandardChar",UI_ACTN_SEND_MONEY_BUTTON_CLICKED:"UI_Actn_Send_Money_Button_Clicked",UI_ACTN_SEND_MONEY_BUTTON_PLACEHOLDER_CLICKED:"UI_Actn_Send_Money_Button_Placeholder_Clicked",UI_ACTN_SEND_MONEY_OMNIM_SUGGESTION_CLICKED:"UI_Actn_Send_Money_OmniM_Suggestion_Clicked",UI_ACTN_INITIATE_SEND:"UI_Actn_Initiate_Send",UI_ACTN_P2P_SENDER_DISABLED_SHOWN:"UI_Actn_P2P_Sender_Disabled_Shown",UI_ACTN_P2P_RECIPIENT_INELIGIBLE_SHOWN:"UI_Actn_P2P_Recipient_Ineligible_Shown",UI_ACTN_CANCEL_SEND:"UI_Actn_Cancel_Send",UI_ACTN_INITIATE_ADD_CARD:"UI_Actn_Initiate_Add_Card",UI_ACTN_INITIATE_CHOOSE_CARD:"UI_Actn_Initiate_Choose_Card",UI_ACTN_CANCEL_ADD_CARD:"UI_Actn_Cancel_Add_Card",UI_ACTN_CONFIRM_CARD_DETAILS:"UI_Actn_Confirm_Card_Details",UI_ACTN_ACCEPT_MONEY_CANCEL:"UI_Actn_Accept_Money_Cancel",UI_ACTN_ACCEPT_WITH_CARD:"UI_Actn_Accept_With_Card",UI_ACTN_ADD_CARD_SUCCESS:"UI_Actn_Add_Card_Success",UI_ACTN_ADD_CARD_FAIL:"UI_Actn_Add_Card_Fail",UI_ACTN_CONFIRM_SEND:"UI_Actn_Confirm_Send",UI_ACTN_SEND_SUCCESS:"UI_Actn_Send_Success",UI_ACTN_SEND_MONEY_CANCELLED:"UI_Actn_Send_Money_Cancelled",UI_ACTN_SEND_FAIL:"UI_Actn_Send_Fail",UI_ACTN_INITIATE_EDIT_CARD:"UI_Actn_Initiate_Edit_Card",UI_ACTN_CANCEL_EDIT_CARD:"UI_Actn_Cancel_Edit_Card",UI_ACTN_CONFIRM_EDIT_CARD_DETAILS:"UI_Actn_Confirm_Edit_Card_Details",UI_ACTN_EDIT_CARD_SUCCESS:"UI_Actn_Edit_Card_Success",UI_ACTN_EDIT_CARD_FAIL:"UI_Actn_Edit_Card_Fail",UI_ACTN_INITIATE_REMOVE_CARD:"UI_Actn_Initiate_Remove_Card",UI_ACTN_CONFIRM_REMOVE_CARD:"UI_Actn_Confirm_Remove_Card",UI_ACTN_REMOVE_CARD_SUCCESS:"UI_Actn_Remove_Card_Success",UI_ACTN_REMOVE_CARD_FAIL:"UI_Actn_Remove_Card_Fail",UI_ACTN_INITIATE_PASSWORD_PROTECTION_NUX:"UI_Actn_Initiate_Password_Protection_NUX",UI_ACTN_OPT_IN_PASSWORD_PROTECTION_NUX:"UI_Actn_Opt_In_Password_Protection_NUX",UI_ACTN_OPT_OUT_PASSWORD_PROTECTION_NUX:"UI_Actn_Opt_Out_Password_Protection_NUX",UI_ACTN_ENABLED_PASSWORD_PROTECTION_SETTING:"UI_Actn_Enabled_Password_Protection_Setting",UI_ACTN_DISABLED_PASSWORD_PROTECTION_SETTING:"UI_Actn_Disabled_Password_Protection_Setting",UI_ACTN_SEND_CLICKED:"UI_Actn_Send_Clicked",UI_ACTN_VERIFY_CSC:"UI_Actn_Verify_CSC",UI_ACTN_CONFIRM_AMOUNT:"UI_Actn_Confirm_Amount",UI_ACTN_EDIT_CARD:"UI_Actn_Edit_Card",UI_ACTN_CHANGE_CARD:"UI_Actn_Change_Card",UI_ACTN_INITIATE_SEND_TRIGGER:"UI_Actn_Initiate_Send_Trigger",UI_ACTN_INITIATE_GROUP_SEND:"UI_Actn_Initiate_Group_Send",UI_ACTN_GROUP_SEND_CANCELLED:"UI_Actn_Group_Send_Cancelled",UI_ACTN_INITIATE_GROUP_SEND_TRIGGER:"UI_Actn_Initiate_Group_Send_Trigger",UI_ACTN_GROUP_SEND_RECIPIENT_PICKED:"UI_Actn_Group_Send_Recipient_Picked",UI_ACTN_3RD_PARTY_RECEIPT_SHOWN:"UI_Actn_3rd_Party_Receipt_Shown",UI_ACTN_3RD_PARTY_RECEIPT_DISMISSED:"UI_Actn_3rd_Party_Receipt_Dismissed",UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CLICKED:"UI_Actn_3rd_Party_Non_Enabled_Log_Message_Clicked",UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CANCELLED:"UI_Actn_3rd_Party_Non_Enabled_Log_Message_Cancelled",UI_ACTN_CHAT_THREAD_BANNER_CLICKED:"UI_Actn_Chat_Thread_Banner_Clicked",UI_ACTN_CHAT_THREAD_BANNER_VIEWED:"UI_Actn_Chat_Thread_Banner_Viewed",UI_ACTN_CHAT_THREAD_BANNER_DISMISSED:"UI_Actn_Chat_Thread_Banner_Dismissed",UI_ACTN_INITIATE_MONEYPENNY_ORDER:"UI_Actn_Initiate_Moneypenny_Order",UI_ACTN_CONFIRM_MONEYPENNY_ORDER:"UI_Actn_Confirm_Moneypenny_Order",UI_ACTN_MONEYPENNY_ORDER_FAIL:"UI_Actn_Moneypenny_Order_Fail",UI_ACTN_MONEYPENNY_ORDER_SUCCESS:"UI_Actn_Moneypenny_Order_Success",UI_ACTN_MONEYPENNY_ORDER_CANCEL:"UI_Actn_Moneypenny_Order_Cancel",UI_ACTN_FRIEND_PICKER_SEARCH:"UI_Actn_Friend_Picker_Search",UI_ACTN_FRIEND_PICKER_SELECT:"UI_Actn_Friend_Picker_Select",UI_ACTN_FRIEND_PICKER_SHOWN:"UI_Actn_Friend_Picker_Shown",UI_ACTN_FI_CANCEL:"UI_Actn_FI_Cancel",UI_ACTN_FI_SUCCESS_DIALOG_NEXT:"UI_Action_Success_Dialog_Next",UI_ACTN_FI_BANNER_DISMISSED:"UI_Actn_FI_Banner_Dismissed",UI_ACTN_FI_BANNER_IMPRESSION:"UI_Actn_FI_Banner_Impression",UI_ACTN_INCENTIVE_TRANSFER_SUCCESS:"UI_Actn_Incentive_Transfer_Success",UI_ACTN_INCENTIVE_TRANSFER_FAILURE:"UI_Actn_Incentive_Transfer_Failure",UI_ACTN_PLATFORM_BANNER_SELLER_HIDE_CLICKED:"UI_Actn_Platform_Banner_Seller_Hide_Clicked",UI_ACTN_PLATFORM_BANNER_BUYER_HIDE_CLICKED:"UI_Actn_Platform_Banner_Buyer_Hide_Clicked",UI_ACTN_PLATFORM_BANNER_SOLD_CLICKED:"UI_Actn_Platform_Banner_Sold_Clicked",UI_ACTN_PLATFORM_BANNER_IMAGE_CLICKED:"UI_Actn_Platform_Banner_Image_Clicked",UI_ACTN_PLATFORM_BANNER_TITLE_CLICKED:"UI_Actn_Platform_Banner_Title_Clicked",UI_ACTN_PLATFORM_BANNER_PAY_CLICKED:"UI_Actn_Platform_Banner_Pay_Clicked",UI_ACTN_PLATFORM_BANNER_REQUEST_CLICKED:"UI_Actn_Platform_Banner_Request_Clicked",UI_ACTN_PLATFORM_BANNER_SELLER_VIEWED:"UI_Actn_Platform_Banner_Seller_Viewed",UI_ACTN_PLATFORM_BANNER_BUYER_VIEWED:"UI_Actn_Platform_Banner_Buyer_Viewed",UI_ACTN_PLATFORM_BANNER_PAY_NUX_SHOWN:"UI_Actn_Platform_Banner_Pay_Nux_Shown",UI_ACTN_INITIATE_REQUEST:"UI_Actn_Initiate_Request",UI_ACTN_REQUEST_CLICKED:"UI_Actn_Request_Clicked",UI_ACTN_CONFIRM_REQUEST:"UI_Actn_Confirm_Request",UI_ACTN_REQUEST_SUCCESS:"UI_Actn_Request_Success",UI_ACTN_REQUEST_FAIL:"UI_Actn_Request_Fail",UI_ACTN_INITIATE_DECLINE_REQUEST:"UI_Actn_Initiate_Decline_Request",UI_ACTN_CONFIRM_DECLINE_REQUEST:"UI_Actn_Confirm_Decline_Request",UI_ACTN_DECLINE_REQUEST_FAIL:"UI_Actn_Decline_Request_Fail",UI_ACTN_DECLINE_REQUEST_SUCCESS:"UI_Actn_Decline_Request_Success",UI_ACTN_INITIATE_CANCEL_REQUEST:"UI_Actn_Initiate_Cancel_Request",UI_ACTN_CONFIRM_CANCEL_REQUEST:"UI_Actn_Confirm_Cancel_Request",UI_ACTN_CANCEL_REQUEST_FAIL:"UI_Actn_Cancel_Request_Fail",UI_ACTN_CANCEL_REQUEST_SUCCESS:"UI_Actn_Cancel_Request_Success",UI_ACTN_INITIATE_CHECKOUT:"UI_Actn_Initiate_Checkout",UI_ACTN_CHECKOUT_CONFIRM:"UI_Actn_Checkout_Confirm",UI_ACTN_INITIATE_ADD_ADDRESS:"UI_Actn_Initiate_Add_Address",UI_ACTN_CANCEL_ADD_ADDRESS:"UI_Actn_Cancel_Add_Address",UI_ACTN_INITIATE_CHOOSE_ADDRESS:"UI_Actn_Initiate_Choose_Address",UI_ACTN_CONFIRM_ADDRESS_DETAILS:"UI_Actn_Confirm_Address_Details",UI_ACTN_ADD_ADDRESS_SUCCESS:"UI_Actn_Add_Address_Success",UI_ACTN_ADD_ADDRESS_FAIL:"UI_Actn_Add_Address_Fail",UI_ACTN_CHECKOUT_FAIL:"UI_Actn_Checkout_Fail",UI_ACTN_CHECKOUT_CART_CREATION_FAIL:"UI_Actn_Checkout_Cart_Creation_Fail",UI_ACTN_CHECKOUT_CANCEL:"UI_Actn_Checkout_Cancel",UI_ACTN_CHECKOUT_SUCCESS:"UI_Actn_Checkout_Success",UI_ACTN_CHECKOUT_CART_CREATION_SUCCESS:"UI_Actn_Checkout_Cart_Creation_Success",UI_ACTN_SEND_MONEY_PAGE_VIEWED:"UI_Actn_Send_Money_Page_Viewed",UI_ACTN_ACCEPT_MONEY_NUX_SHOWN:"UI_Actn_Accept_Money_NUX_Shown",UI_ACTN_ACCEPT_MONEY_NUX_NEXT_CLICK:"UI_Actn_Accept_Money_NUX_Next_Click",UI_ACTN_SEND_MONEY_NUX_SHOWN:"UI_Actn_Send_Money_NUX_Shown",UI_ACTN_SEND_MONEY_NUX_NEXT_CLICK:"UI_Actn_Send_Money_NUX_Next_Click",UI_ACTN_GET_CREDIT_CARDS_EXCEPTION:"UI_ACTN_GET_CREDIT_CARDS_EXCEPTION",UI_ACTN_CREATE_TRANSFER_EXCEPTION:"UI_ACTN_CREATE_TRANSFER_EXCEPTION",UI_ACTN_ADD_CARD_EXCEPTION:"UI_ACTN_ADD_CARD_EXCEPTION",UI_ACTN_GET_TRANSFERS_EXCEPTION:"UI_ACTN_GET_TRANSFERS_EXCEPTION",UI_ACTN_GET_EXTENSIVE_TRANSFERS_EXCEPTION:"UI_ACTN_GET_EXTENSIVE_TRANSFERS_EXCEPTION",UI_ACTN_GET_NUX_TRANSFERS_EXCEPTION:"UI_ACTN_GET_NUX_TRANSFERS_EXCEPTION",UI_ACTN_UPDATE_PRESET_CARD_EXCEPTION:"UI_ACTN_UPDATE_PRESET_CARD_EXCEPTION",UI_ACTN_UPDATE_CARD_EXCEPTION:"UI_ACTN_UPDATE_CARD_EXCEPTION",UI_ACTN_DELETE_CARD_EXCEPTION:"UI_ACTN_DELETE_CARD_EXCEPTION",UI_ACTN_GET_PASSWORD_PROTECTION_EXCEPTION:"UI_ACTN_GET_PASSWORD_PROTECTION_EXCEPTION",UI_ACTN_SET_PASSWORD_PROTECTION_EXCEPTION:"UI_ACTN_SET_PASSWORD_PROTECTION_EXCEPTION",UI_ACTN_DECLINE_TRANSFER_EXCEPTION:"UI_ACTN_DECLINE_TRANSFER_EXCEPTION",UI_ACTN_CANCEL_TRANSFER_EXCEPTION:"UI_ACTN_CANCEL_TRANSFER_EXCEPTION",UI_ACTN_VERIFY_CARD_EXCEPTION:"UI_ACTN_VERIFY_CARD_EXCEPTION",UI_ACTN_VALIDATE_BIN_EXCEPTION:"UI_ACTN_VALIDATE_BIN_EXCEPTION",UI_ACTN_GET_ELIGIBILITY_EXCEPTION:"UI_ACTN_GET_ELIGIBILITY_EXCEPTION",UI_ACTN_GET_FRIEND_LIST_EXCEPTION:"UI_ACTN_GET_FRIEND_LIST_EXCEPTION",UI_ACTN_GET_BANNER_STATES_EXCEPTION:"UI_ACTN_GET_BANNER_STATES_EXCEPTION",UI_ACTN_INCREMENT_BANNER_VIEW_EXCEPTION:"UI_ACTN_INCREMENT_BANNER_VIEW_EXCEPTION",UI_ACTN_INCREMENT_BANNER_DISMISSAL_EXCEPTION:"UI_ACTN_INCREMENT_BANNER_DISMISSAL_EXCEPTION",UI_ACTN_CREATE_M_TRANSFER_EXCEPTION:"UI_ACTN_CREATE_M_TRANSFER_EXCEPTION",UI_ACTN_CREATE_FI_TRANSER_EXCEPTION:"UI_ACTN_CREATE_FI_TRANSER_EXCEPTION",UI_ACTN_GET_PLATFORM_CONTEXT_EXCEPTION:"UI_ACTN_GET_PLATFORM_CONTEXT_EXCEPTION",UI_ACTN_DISMISS_PLATFORM_CONTEXT_EXCEPTION:"UI_ACTN_DISMISS_PLATFORM_CONTEXT_EXCEPTION",UI_ACTN_MARK_SOLD_CONTEXT_EXCEPTION:"UI_ACTN_MARK_SOLD_CONTEXT_EXCEPTION",UI_ACTN_GET_ADDRESSES_EXCEPTION:"UI_ACTN_GET_ADDRESSES_EXCEPTION",UI_ACTN_ADD_ADDRESS_EXCEPTION:"UI_ACTN_ADD_ADDRESS_EXCEPTION",UI_ACTN_CREATE_CART_EXCEPTION:"UI_ACTN_CREATE_CART_EXCEPTION",UI_ACTN_SET_CART_ADDRESS_EXCEPTION:"UI_ACTN_SET_CART_ADDRESS_EXCEPTION",UI_ACTN_GET_PROFILE_EXCEPTION:"UI_ACTN_GET_PROFILE_EXCEPTION",UI_ACTN_CREATE_REQUEST_EXCEPTION:"UI_ACTN_CREATE_REQUEST_EXCEPTION",UI_ACTN_DECLINE_REQUEST_EXCEPTION:"UI_ACTN_DECLINE_REQUEST_EXCEPTION",UI_ACTN_CANCEL_REQUEST_EXCEPTION:"UI_ACTN_CANCEL_REQUEST_EXCEPTION",UI_ACTN_GET_PENDING_REQUESTS_EXCEPTION:"UI_ACTN_GET_PENDING_REQUESTS_EXCEPTION",UI_ACTN_GROUP_SELL_INTEREST_QP_DIALOG_SHOWN:"UI_ACTN_GROUP_SELL_INTEREST_QP_DIALOG_SHOWN",UI_ACTN_GROUP_SELL_INTEREST_QP_DIALOG_NEXT_CLICK:"UI_ACTN_GROUP_SELL_INTEREST_QP_DIALOG_NEXT_CLICK",UI_ACTN_GROUP_SELL_INTEREST_MESSAGE_SELLER_CLICK:"UI_ACTN_GROUP_SELL_INTEREST_MESSAGE_SELLER_CLICK",UI_ACTN_GROUP_SELL_INTEREST_MESSAGE_SEND_CLICK:"UI_ACTN_GROUP_SELL_INTEREST_MESSAGE_SEND_CLICK",UI_ACTN_MESSAGE_SELLER_CONFIRM_DIALOG_SHOWN:"UI_ACTN_MESSAGE_SELLER_CONFIRM_DIALOG_SHOWN",UI_ACTN_MESSAGE_SELLER_CONFIRM_DIALOG_CANCEL_CLICK:"UI_ACTN_MESSAGE_SELLER_CONFIRM_DIALOG_CANCEL_CLICK",UI_ACTN_MESSAGE_SELLER_CONFIRM_DIALOG_PAY_CLICK:"UI_ACTN_MESSAGE_SELLER_CONFIRM_DIALOG_PAY_CLICK",UI_ACTN_PAYMENTS_HISTORY_BLUEBAR_CLICK:"UI_ACTN_PAYMENTS_HISTORY_BLUEBAR_CLICK",BATCH_PROCESS_PENDING_PAYMENT:"BATCH_PROCESS_PENDING_PAYMENT",USER_TEST_CREATE_PAYMENT_REQUEST:"Test_Actn_CreatePaymentRequest",ALERT_MESSENGER_PAYMENT_METHOD_CACHE_INCONSISTENCY:"Alert_messenger_payment_method_cache_inconsistency",DEEPLINK_PERSONAL_DESKTOP_REQUEST:"p2p_personal_deeplink_request_desktop",DEEPLINK_PERSONAL_MOBILE_REQUEST:"p2p_personal_deeplink_request_mobile"})}),null);
__d("P2PPaymentLoggerEventFlow",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UI_FLOW_P2P_SEND:"UI_Flow_P2P_Send",UI_FLOW_P2P_REQUEST:"UI_Flow_P2P_Request",UI_FLOW_P2P_RECEIVE:"UI_Flow_P2P_Receive",UI_FLOW_P2P_SETTINGS:"UI_Flow_P2P_Settings",UI_FLOW_P2P_GROUP_SEND:"UI_Flow_P2P_Group_Send",UI_FLOW_P2P_GROUP_REQUEST:"UI_Flow_P2P_Group_Request",UI_FLOW_MONEYPENNY_CHECKOUT:"UI_Flow_Moneypenny_Checkout",UI_FLOW_FINANCIAL_INCENTIVES:"UI_Flow_Financial_Incentives",UI_FLOW_FINANCIAL_INCENTIVES_ZERO_INDEX_JEWEL:"UI_Flow_Financial_Incentives_Zero_Index_Jewel",UI_FLOW_PLATFORM_BANNER:"UI_Flow_Platform_Banner",UI_FLOW_CHECKOUT:"UI_Flow_Checkout",UI_FLOW_SEND_MONEY_PAGE:"UI_Flow_Send_Money_Page",UI_FLOW_REQUEST_SENDER_NUX_CHAT_THREAD_BANNER:"UI_Flow_Request_Sender_NUX_Chat_Thread_Banner",UI_FLOW_SENDER_NUX_CHAT_THREAD_BANNER:"UI_Flow_Sender_NUX_Chat_Thread_Banner",UI_FLOW_GROUP_SELL_INTEREST_DIALOG:"UI_FLOW_GROUP_SELL_INTEREST_DIALOG",UI_FLOW_SEND_MONEY_BLUEBAR:"UI_FLOW_SEND_MONEY_BLUEBAR",UI_FLOW_PAYMENTS_MENU_BLUEBAR:"UI_FLOW_PAYMENTS_MENU_BLUEBAR",UI_FLOW_BOOKMARK:"UI_FLOW_BOOKMARK",UI_FLOW_P2P_BIRTHDAY_GIFT_SEND_MONEY:"UI_FLOW_P2P_BIRTHDAY_GIFT_SEND_MONEY",UI_FLOW_P2P_PEOPLE_SEARCH_SEND_MONEY:"UI_FLOW_P2P_PEOPLE_SEARCH_SEND_MONEY"})}),null);
__d("P2PSendMoneyDialogStore",["P2PActionConstants","EventEmitter","P2PDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=36,k=void 0,l=void 0;h=babelHelpers.inherits(m,c("EventEmitter"));i=h&&h.prototype;function m(){i.constructor.call(this);l=new Map();k=c("P2PDispatcher").register(this.onEventDispatched.bind(this))}m.prototype.onEventDispatched=function(n){var o=n.data,p=n.type;switch(p){case c("P2PActionConstants").CHAT_SEND_VIEW_OPENED:this.handleChatSendViewOpened(o);this.emit("change");break;case c("P2PActionConstants").CHAT_SEND_VIEW_CLOSED:this.handleChatSendViewClosed(o);this.emit("change");break}};m.prototype.getStateByThreadID=function(n){return l.get(n)};m.prototype.handleChatSendViewOpened=function(n){l.set(n.threadID,{amount:n.amount,groupSendRecipientUserIDs:n.groupSendRecipientUserIDs,groupSendReceiptDetails:n.groupSendReceiptDetails,groupThreadFBID:n.groupThreadFBID,onCompletion:n.onCompletion,openRequestTab:n.openRequestTab,memoText:n.memoText&&n.memoText.substr(0,j),platformData:n.platformData,referrer:n.referrer,paymentRequestID:n.paymentRequestID,sendMoneyDialogShown:true,sendMoneyNUXDismissed:n.sendMoneyNUXDismissed,useModal:n.useModal})};m.prototype.handleChatSendViewClosed=function(n){l.set(n.threadID,{amount:"",groupSendRecipientUserIDs:[],groupSendReceiptDetails:null,groupThreadFBID:"",onCompletion:null,openRequestTab:false,memoText:null,platformData:null,referrer:null,paymentRequestID:null,sendMoneyDialogShown:false,sendMoneyNUXDismissed:false,useModal:false})};m.prototype.isAnyChatSendViewOpen=function(){__p&&__p();for(var n=l.values(),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q;if(r.sendMoneyDialogShown)return true}return false};f.exports=new m()}),null);
__d("getPageIDFromThreadID",["FBIDCheck","MercuryIDs"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=c("MercuryIDs").getUserIDFromThreadID(i);if(!j||c("FBIDCheck").isUser_deprecated(j))return null;return j}f.exports=h}),null);
__d("P2PSendMoneyContainerBootloader.react",["cx","Bootloader","DeferredComponent.react","MercuryIDs","MessengerEnvironment","P2PAbstractSendMoneyButton.react","P2PActions","P2PLoadingMask.react","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PSendMoneyDialogStore","React","ReactLayeredComponentMixin_DEPRECATED","XUIContextualDialog.react","emptyFunction","getPageIDFromThreadID"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("MessengerEnvironment").messengerui,k=j?282:260,l=c("React").createClass({displayName:"P2PSendMoneyContainerBootloader",propTypes:{button:i.node,className:i.string,ContextualDialog:i.func,flyoutAlignment:i.oneOf(["left","center","right"]),fromChatTab:i.bool,onTrigger:i.func,participantIDs:i.array,referrer:i.string,threadID:i.string},getInitialState:function m(){return{showPlaceholderDialog:false,shouldBootloadImmediately:c("P2PSendMoneyDialogStore").isAnyChatSendViewOpen()}},mixins:[c("ReactLayeredComponentMixin_DEPRECATED")],_clicked:false,_onComponentLoad:c("emptyFunction"),_bootloadCalled:false,_sendMoneyDialogStoreSub:null,log:function m(n,o){c("P2PLogger").log(n,babelHelpers["extends"]({www_event_referrer:this.props.referrer,www_event_flow:c("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_SEND},o))},componentWillUnmount:function m(){this.removeDialogStoreSub()},onDialogStoreChange:function m(){this._bootloadComponentNow();this.removeDialogStoreSub()},removeDialogStoreSub:function m(){if(this._sendMoneyDialogStoreSub){this._sendMoneyDialogStoreSub.remove();this._sendMoneyDialogStoreSub=null}},onPlaceholderClick:function m(){var n=this.props.threadID?c("MercuryIDs").tokenize(this.props.threadID).value:null;this._handleDialogVisibility(!this.state.showPlaceholderDialog);this.log(c("P2PPaymentLoggerEvent").UI_ACTN_SEND_MONEY_BUTTON_PLACEHOLDER_CLICKED,{object_id:n});this._bootloadComponentNow();this._clicked=false},_handleDialogVisibility:function m(n){if(!n)c("P2PActions").chatSendViewClosed({threadID:this.props.threadID});else c("P2PActions").chatSendViewOpened({referrer:this.props.referrer,threadID:this.props.threadID,fromChatTab:this.props.fromChatTab});this.setState({showPlaceholderDialog:n})},renderLayers:function m(){__p&&__p();var n={};if(this.state.showPlaceholderDialog){var o=this.props.ContextualDialog||c("XUIContextualDialog.react");n.placeholderDialog=c("React").createElement(o,{alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:j?"right":"left",contextRef:function(){return this.refs.placeholderButton}.bind(this),onBlur:function(){if(!this._clicked)this._handleDialogVisibility(false);this._clicked=false}.bind(this),ref:"dialog",shown:true,width:k,position:"above"},c("React").createElement("div",{className:"_c_5"},c("React").createElement(c("P2PLoadingMask.react"),{visible:true})))}return n},render:function m(){if(this._isPageChat())return null;return c("React").createElement(c("DeferredComponent.react"),babelHelpers["extends"]({deferredComponent:this._bootloadComponent,deferredPlaceholder:this._renderPlaceholder()},this.props))},_renderPlaceholder:function m(){return c("React").createElement(c("P2PAbstractSendMoneyButton.react"),{button:this.props.button,className:this.props.className,isActive:false,isDisabled:false,isMessenger:j,onClick:this.onPlaceholderClick,onMouseDown:function(){this._clicked=true}.bind(this),onMouseOver:this._bootloadComponentNow,ref:"placeholderButton"})},_bootloadComponent:function m(n){this._onComponentLoad=n.bind(this);if(this.state.shouldBootloadImmediately)this._bootloadComponentNow();else this._sendMoneyDialogStoreSub=c("P2PSendMoneyDialogStore").addListener("change",this.onDialogStoreChange)},_bootloadComponentNow:function m(){if(this._bootloadCalled)return;this._bootloadCalled=true;c("Bootloader").loadModules(["P2PSendMoneyContainer.react"],function(n){this.removeDialogStoreSub();this._onComponentLoad(n);this.setState({showPlaceholderDialog:false})}.bind(this),"P2PSendMoneyContainerBootloader.react")},_isPageChat:function m(){return!!this._getPageID()},_getPageID:function m(){return c("getPageIDFromThreadID")(this.props.threadID)}});f.exports=l}),null);
__d("StickersDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("ExplicitRegistrationDispatcher"))({strict:false})}),null);
__d("StickersActions",["StickersDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({ADD_RECENT_STICKER:null,HIDE_FLYOUT:null,LOAD_RECENT_STICKERS:null,SELECT_STORE_PACK:null,SELECT_TRAY_PACK:null,SHOW_FLYOUT:null,TRAY_LOADED:null}),i={Types:h,addRecentSticker:function j(k){c("StickersDispatcher").dispatch({type:h.ADD_RECENT_STICKER,sticker:k})},hideStickerFlyout:function j(){c("StickersDispatcher").dispatch({type:h.HIDE_FLYOUT})},loadRecentStickers:function j(k){c("StickersDispatcher").dispatch({type:h.LOAD_RECENT_STICKERS,stickers:k})},selectStorePack:function j(k){c("StickersDispatcher").dispatch({type:h.SELECT_STORE_PACK,packID:k})},selectTrayPack:function j(k){c("StickersDispatcher").dispatch({type:h.SELECT_TRAY_PACK,packID:k})},showStickerFlyout:function j(k){c("StickersDispatcher").dispatch({type:h.SHOW_FLYOUT,threadID:k})},trayLoaded:function j(){c("StickersDispatcher").dispatch({type:h.TRAY_LOADED})}};f.exports=i}),null);
__d("convertMIGColorToFIGColor",["cssVar"],(function a(b,c,d,e,f,g,h){"use strict";var i={"#0077e5":"#4080ff","#44bec7":"#54C7EC","#ffc300":"#f5c33b","#fa3c4c":"#F35369","#d696bb":"#d696bb","#6699cc":"#7596c8","#13cf13":"#42b72a","#ff7e29":"#F7923B","#e68585":"#e68585","#7646ff":"#8C72CB","#20cef5":"#54C7EC","#67b868":"#A3CE71","#d4a88c":"#cfa588","#ff5ca1":"#EC7EBD","#a695c7":"#AF9CDA"};function j(k){return k&&i[k]||k||""}f.exports=j}),null);
__d("isWebGLEnabled",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=null;function i(){try{var k=document.createElement("canvas");return Boolean(window.WebGLRenderingContext)&&Boolean(k.getContext("webgl")||k.getContext("experimental-webgl"))}catch(l){return false}}function j(){if(h===null)h=i();return h}f.exports=j}),null);
__d("ChatTabComposer.react",["cssVar","csx","cx","fbt","MercuryBootloadOnInteraction.react","BootloadOnRender.react","Bootloader","CSS","ChatComposerFlyoutButtonBootLoader.react","ChatConfig","ChatEventPlanButton.react","ChatInput.react","ChatPhotoUploader.react","CurrentUser","CustomColorHighlighting.react","EventRemindersGating","FantaMessageActions","FantaTypeComposer","JSResource","Keys","LazyComponent.react","MercuryConfig","MercuryIDs","MercuryThreads","MessengerHotLikeButton.react","MessengerHotLikeChatSVGIcon.react","MessengerHotLikeUtils","MessengerQuickCamButton.react","MessengerQuickCamOrigins","P2PPaymentConfig","P2PPaymentSupportedCurrency","P2PSendMoneyContainerBootloader.react","React","MercuryShareAttachmentRenderLocations","StickersActions","URI","XUISpinner.react","clearImmediate","convertMIGColorToFIGColor","getPageIDFromThreadID","gkx","idx","isWebGLEnabled","joinClasses","setImmediate"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m,n=c("React").PropTypes,o=77,p=9,q=c("ChatConfig").get("chat_basic_input_module")||c("ChatInput.react");l=babelHelpers.inherits(r,c("React").PureComponent);m=l&&l.prototype;function r(){__p&&__p();var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=m.constructor).call.apply(s,[this].concat(v)),this.state={inputHeight:0,p2pPaymentConfig:c("P2PPaymentConfig").config,stickerFlyoutShown:false},this.$ChatTabComposer2=null,this.$ChatTabComposer3=null,this.$ChatTabComposer4=null,this.$ChatTabComposer12=function(x,y){var z=this.props.threadID;if(z)this.$ChatTabComposer1=c("setImmediate")(function(){this.$ChatTabComposer1=null;c("FantaMessageActions").composerTextUpdate(z,x,y)}.bind(this))}.bind(this),this.$ChatTabComposer10=function(x,y){if(x.keyCode===c("Keys").RETURN)this.refs.emojiButton&&this.refs.emojiButton.hideFlyout();this.props.inputKeyDown&&this.props.inputKeyDown(x,y)}.bind(this),this.$ChatTabComposer7=function(x){var y=x.target;if(y instanceof Element&&(c("CSS").matchesSelector(y,"._1d4_")||c("CSS").matchesSelector(y,"._552h")||c("CSS").matchesSelector(y,"._552n")))this.$ChatTabComposer4&&this.$ChatTabComposer4.focus()}.bind(this),this.$ChatTabComposer11=function(x){if(this.state.stickerFlyoutShown)c("StickersActions").hideStickerFlyout();this.props.onEscape&&this.props.onEscape(x)}.bind(this),this.$ChatTabComposer33=function(x,y){if(x.platformFBID.toString()!==c("MercuryConfig").MessengerAppID)this.uploadURL({attribution_app_id:x.platformFBID,errorDialogParams:{body:k._("There was a problem sending this GIF. Choose another one and try again."),title:k._("Couldn't Send GIF")},external_image_url:x.source.url,preview_url:x.media.preview?x.media.preview.url:x.media.thumbnail.url,source:x.source});else this.props.stickerButtonProps&&this.props.stickerButtonProps.onStickerSelect&&this.props.stickerButtonProps.onStickerSelect(x.resultID.toString)}.bind(this),this.$ChatTabComposer31=function(x){var y=this.$ChatTabComposer26();if(!y)return;c("Bootloader").loadModules(["BrowserExtensionsDialog"],function(z){z.show(new(c("URI"))(x.getURI()),x.getUniqueID(),y,c("CurrentUser").getID())},"ChatTabComposer.react")}.bind(this),this.$ChatTabComposer34=function(x){this.$ChatTabComposer4&&this.$ChatTabComposer4.insertEmoji&&this.$ChatTabComposer4.insertEmoji(x)}.bind(this),t}r.prototype.$ChatTabComposer5=function(){var s=this.props.threadID;if(s==null)return true;return c("MercuryThreads").getForFBID(this.props.viewer).isEmptyLocalThread(s)&&c("gkx")("AT44gcd7lpH2YiclJ-LHsuuoRRi7VIOizU9LdST-uko3uQzHBXGOu3PdlMr4PkOBovUmJRjA-IeSNbDkk89bQ4wq8b7BDIrax8JSG-E9Uz6KPQ")};r.prototype.render=function(){var s=this.props.disableInput||this.$ChatTabComposer5()?null:c("React").createElement("ul",{className:"_552n"+(c("gkx")("AT5ZvVwuqKWcfrio0AdnNomF7UAfIh6xykST_qUQlvhzlEwa0D-O1yjSaPSHOODgL1U")?" _22v_":"")},this.$ChatTabComposer6());return c("React").createElement("div",{className:"_1d4_",onClick:this.$ChatTabComposer7,role:"presentation"},this.$ChatTabComposer8(),s)};r.prototype.componentWillUnmount=function(){if(this.$ChatTabComposer1)c("clearImmediate")(this.$ChatTabComposer1)};r.prototype.onSend=function(s){this.$ChatTabComposer4&&this.$ChatTabComposer4.onSend&&this.$ChatTabComposer4.onSend(s)};r.prototype.uploadURL=function(s){var t=this.$ChatTabComposer2||this.$ChatTabComposer3;if(!t)return;t.uploadURL(s)};r.prototype.isUploading=function(){return!!(this.$ChatTabComposer2&&this.$ChatTabComposer2.isUploading()||this.$ChatTabComposer3&&this.$ChatTabComposer3.isUploading())};r.prototype.getInput=function(){return this.$ChatTabComposer4};r.prototype.$ChatTabComposer8=function(){__p&&__p();var s={};if(this.state.inputHeight)s.minHeight=this.state.inputHeight;var t=null;if(this.props.showStructuredMenu)t=c("React").createElement("div",{className:"_5c6-"},c("React").createElement(c("MercuryBootloadOnInteraction.react"),{component:c("React").createElement(c("LazyComponent.react"),{flyoutAlignment:"left",threadID:this.props.threadID,pageID:this.props.pageID,className:"_5c6_"}),loader:c("JSResource")("MessengerBotMenuButton.react").__setRef("ChatTabComposer.react"),placeholder:c("React").createElement("span",{className:"_5c6_"})}));var u="";if(this.props.disableInput)u=k._("Composer is disabled for this thread.");else if(this.props.thread&&!this.props.thread.is_canonical)u=k._("Type a message, \u0040name...");else u=k._("Type a message...");return c("React").createElement("div",{className:"_552h",style:s},t,c("React").createElement("div",{className:this.props.showStructuredMenu?"_4yzj":""},c("React").createElement(c("CustomColorHighlighting.react"),{customColor:this.props.thread&&this.props.thread.custom_color},c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw")&&this.$ChatTabComposer9(this.props.threadID),c("React").createElement(q,{composer:this.props.composer,defaultText:this.props.defaultText,fileUploader:this.props.fileUploader,initializeThingsWithInputFn:this.props.initializeThingsWithInputFn,inputKeyDown:this.$ChatTabComposer10,onBeforeInput:function(){return this.refs.emojiButton&&this.refs.emojiButton.hideFlyout()}.bind(this),onBlur:this.props.onBlur,onEscape:this.$ChatTabComposer11,onFocus:this.props.onFocus,onTab:this.props.onTab,readOnly:this.props.disableInput,ref:function(v){return this.$ChatTabComposer4=v}.bind(this),resizeFn:function(v){v=Math.min(v,o);this.setState({inputHeight:v});this.props.resizeFn&&this.props.resizeFn(v)}.bind(this),thread:this.props.thread,threadID:this.props.threadID,onTextChange:this.$ChatTabComposer12,uploadPhotoFn:function(v){this.$ChatTabComposer3&&this.$ChatTabComposer3.uploadFiles([].concat(v))}.bind(this),participants:this.props.participants,placeholder:u,viewer:this.props.viewer}))))};r.prototype.$ChatTabComposer9=function(s){__p&&__p();if(!s)return null;var t=this.props.fileUploader;if(!t)return null;var u=t.get("uploadedFiles");if(u.size==0)return null;var v=this.props.thread,w=v&&v.custom_color?v.custom_color:"#0084ff";return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{files:u,small:true,threadID:s,threadCustomColor:w,onClick:this.$ChatTabComposer13}),loader:c("JSResource")("MercuryStageFilePreviewReactComponent").__setRef("ChatTabComposer.react"),placeholder:c("React").createElement(c("XUISpinner.react"),{className:"_2qf"})})};r.prototype.$ChatTabComposer13=function(s,t){c("FantaMessageActions").cancelFileUpload(s,t)};r.prototype.$ChatTabComposer6=function(){__p&&__p();var s=[this.$ChatTabComposer14(),this.$ChatTabComposer15(),this.$ChatTabComposer16(),this.$ChatTabComposer17(),this.$ChatTabComposer18(),this.$ChatTabComposer19(),this.$ChatTabComposer20(),this.$ChatTabComposer21(),this.$ChatTabComposer22(),this.$ChatTabComposer23()],t=s.filter(Boolean);if(t.length<p){var u=this.$ChatTabComposer24();if(u)t.push(u)}if(t.length<p&&c("EventRemindersGating").shouldShowComposer){var v=this.$ChatTabComposer25();if(v)t.push(v)}return t};r.prototype.$ChatTabComposer14=function(){var s=this.props.photoUploaderProps||{};return c("React").createElement("li",{className:"_13f-",key:"photos"},c("React").createElement(c("ChatPhotoUploader.react"),babelHelpers["extends"]({composer:this.props.composer,onMount:function(t){return this.$ChatTabComposer3=t}.bind(this),imagesOnly:true},s)))};r.prototype.$ChatTabComposer24=function(){var s=c("convertMIGColorToFIGColor")(this.props.thread&&this.props.thread.custom_color),t=this.$ChatTabComposer26();if(t&&this.props.thread&&!this.props.thread.is_canonical)return this.$ChatTabComposer27(s,t);return null};r.prototype.$ChatTabComposer27=function(s,t){return c("React").createElement(c("ChatComposerFlyoutButtonBootLoader.react"),{key:"grouppolling",interactionClassName:"_6gd _13f_",flyoutProps:{customColor:s,threadFBID:t},flyoutAlignment:"left",iconClassName:"_6gb _4tjk",flyoutLoader:c("JSResource")("MessengerGroupPollingFlyoutWrapper.react").__setRef("ChatTabComposer.react"),title:k._("Create a poll")})};r.prototype.$ChatTabComposer20=function(){var s=c("gkx")("AT4QmhHJ93vcbl38SupZDOd4TRn2I6bCQrym9sVapHmMdur1Zu56_pIsnybMux_8usZbDWXFMyqwikun403G1as0")&&c("isWebGLEnabled")(),t=this.$ChatTabComposer26();return s&&t&&!this.$ChatTabComposer28()?this.$ChatTabComposer29():null};r.prototype.$ChatTabComposer29=function(){return c("React").createElement(c("ChatComposerFlyoutButtonBootLoader.react"),{key:"games",interactionClassName:"_6gd _13ga",flyoutAlignment:"left",iconClassName:"_6gb _4cf0",flyoutProps:{threadFBID:this.$ChatTabComposer26()},flyoutLoader:c("JSResource")("MessengerGamesFlyout.react").__setRef("ChatTabComposer.react"),title:k._("Play a game")})};r.prototype.$ChatTabComposer21=function(){var s=c("gkx")("AT72xJLZkeSDj3rQ4YJhDaR1Iy7i70lkAAeY7OeOITgcwxdXXPzjWKCQOzuaZIMWMJkCJ02C5JcVVN00pFzDlsg0EvRQMCrfNQfuc0EvzS_e9g"),t=this.$ChatTabComposer26();return s&&c("CurrentUser").isWorkUser()&&t&&!this.$ChatTabComposer28()?this.$ChatTabComposer30():null};r.prototype.$ChatTabComposer30=function(){return c("React").createElement(c("ChatComposerFlyoutButtonBootLoader.react"),{key:"chatextension",interactionClassName:"_6gd _13ga",flyoutAlignment:"left",iconClassName:"_6gb _67ew",flyoutProps:{onSelect:this.$ChatTabComposer31},flyoutLoader:c("JSResource")("MessengerWorkplaceChatExtensionsPickerWrapper.react").__setRef("ChatTabComposer.react"),title:k._("Find an extension")})};r.prototype.$ChatTabComposer25=function(){return this.props.threadID&&!this.$ChatTabComposer28()?c("React").createElement("li",{className:"_6gd _13gb",key:"eventPlan"},c("React").createElement(c("ChatEventPlanButton.react"),{threadID:this.props.threadID})):null};r.prototype.$ChatTabComposer19=function(){if(this.props.disableFileUploads)return null;var s=this.props.fileUploaderProps||{};return c("React").createElement("li",{className:"_13gd",key:"files"},c("React").createElement(c("ChatPhotoUploader.react"),babelHelpers["extends"]({composer:this.props.composer,onMount:function(t){return this.$ChatTabComposer2=t}.bind(this)},s)))};r.prototype.$ChatTabComposer15=function(){var s=this.props.stickerButtonProps;if(!s)return null;return this.$ChatTabComposer32()};r.prototype.$ChatTabComposer32=function(){var s=this.props.stickerButtonProps;if(!s)return null;var t={className:"_5e-r",position:"above"};return c("React").createElement(c("ChatComposerFlyoutButtonBootLoader.react"),{flyoutProps:s,dialogProps:t,flyoutAlignment:"right",key:"sticker",interactionClassName:"_6gd _13ge",iconClassName:"_6gb _6gf",flyoutLoader:c("JSResource")("StickersFlyoutWrapper.react").__setRef("ChatTabComposer.react"),title:k._("Choose a sticker")})};r.prototype.$ChatTabComposer16=function(){var s={getQuery:function(){return this.$ChatTabComposer4&&this.$ChatTabComposer4.getValue()}.bind(this),onSelect:this.$ChatTabComposer33};return c("React").createElement(c("ChatComposerFlyoutButtonBootLoader.react"),{threadID:this.props.threadID,key:"contentSearch",interactionClassName:"_6gd _13gf",flyoutProps:s,flyoutAlignment:"left",iconClassName:"_6gb _6gs",threadFBID:this.$ChatTabComposer26(),flyoutLoader:c("JSResource")("ChatContentSearchFlyoutWrapper.react").__setRef("ChatTabComposer.react"),title:k._("Choose a gif")})};r.prototype.$ChatTabComposer17=function(){var s={onSelect:this.$ChatTabComposer34,getInput:function(){return this.$ChatTabComposer4}.bind(this)};return c("React").createElement(c("ChatComposerFlyoutButtonBootLoader.react"),{threadID:this.props.threadID,key:"emoji",interactionClassName:"_6gd _13gg",flyoutAlignment:"left",iconClassName:"_6gb _3oxr",threadFBID:this.$ChatTabComposer26(),flyoutLoader:c("JSResource")("ChatEmojiFlyout.react").__setRef("ChatTabComposer.react"),dialogProps:{offsetY:10},flyoutProps:s,title:k._("Choose an emoji")})};r.prototype.$ChatTabComposer23=function(){var s=this.props.thread,t=c("convertMIGColorToFIGColor")(s&&s.custom_color)||"",u=c("MessengerHotLikeChatSVGIcon.react"),v="_6gb";return c("React").createElement("li",{className:"_6gd _5ep3 _13gi",key:"like"},c("React").createElement(c("MessengerHotLikeButton.react"),{className:v,customColor:t,customLike:c("MessengerHotLikeUtils").getCustomEmojiFromThread(s)||undefined,CustomRenderer:u,location:c("MercuryShareAttachmentRenderLocations").CHAT,renderSize:16,sendSticker:this.props.stickerButtonProps&&this.props.stickerButtonProps.onStickerSelect,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID}))};r.prototype.$ChatTabComposer18=function(){var s;if(!this.props.p2pProps||!this.props.showP2PButton||this.$ChatTabComposer28())return null;var t=this.props.p2pProps,u=(s=this.state.p2pPaymentConfig)!=null?s.currencyCode:s,v=c("joinClasses")(t.className,(u===c("P2PPaymentSupportedCurrency").GBP?"_33g4":"")+(u===c("P2PPaymentSupportedCurrency").EUR?" _33g5":""));return c("React").createElement("li",{className:"_6gd _13gj",key:"p2p"},c("React").createElement(c("P2PSendMoneyContainerBootloader.react"),babelHelpers["extends"]({},t,{className:v,participantIDs:this.props.participantIDs,p2pPaymentConfig:this.state.p2pPaymentConfig,threadID:this.props.threadID})))};r.prototype.$ChatTabComposer22=function(){__p&&__p();var s=this.props.threadID;if(c("MercuryIDs").isLocalThread(this.props.threadID)||!s)return null;var t={className:"_6gb _5yhk",threadID:s,location:undefined,viewer:undefined},u=c("gkx")("AT44XpsdaaEfcz2GrZ0m8RNEjrTHpQedGRhxmeB3oGdMvETdQ7vdyzqg8MlOqQGInNDXydDTyvvVR5lvi3VlBp7t");if(u){t.location=c("MessengerQuickCamOrigins").CHAT_TAB;t.viewer=this.props.viewer}var v=!u?c("React").createElement(c("MessengerQuickCamButton.react"),t):c("React").createElement(c("MercuryBootloadOnInteraction.react"),{component:c("React").createElement(c("LazyComponent.react"),t),loader:c("JSResource")("MessengerQuickCamButtonHTML5.react").__setRef("ChatTabComposer.react"),placeholder:c("React").createElement("span",{className:t.className})});return c("React").createElement("li",{className:"_6gd _13gk",key:"quickcam"},v)};r.prototype.$ChatTabComposer28=function(){return!!this.$ChatTabComposer35()};r.prototype.$ChatTabComposer35=function(){return c("getPageIDFromThreadID")(this.props.threadID)};r.prototype.$ChatTabComposer26=function(){if(this.props.threadID&&!c("MercuryIDs").isLocalThread(this.props.threadID))return c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID);if(this.props.thread&&this.props.thread.thread_fbid)return this.props.thread.thread_fbid;return null};r.prototype.replyToMention=function(s){this.$ChatTabComposer4&&this.$ChatTabComposer4.addMention&&this.$ChatTabComposer4.addMention(s)};r.propTypes={composer:n.object.isRequired,defaultText:n.string.isRequired,disableInput:n.bool.isRequired,disableFileUploads:n.bool,fileUploaderProps:n.object,initializeThingsWithInputFn:n.func,inputKeyDown:n.func,onBlur:n.func,onCustomLikeSelect:n.func,onEmojiSelect:n.func,onEscape:n.func,onFocus:n.func,onTab:n.func,p2pProps:n.object,pageID:n.string,participantIDs:n.arrayOf(n.string),photoUploaderProps:n.object,resizeFn:n.func,showP2PButton:n.bool,showStructuredMenu:n.bool.isRequired,stickerButtonProps:n.object,thread:n.object,threadID:n.string,uploadPhotoFn:n.func,viewer:n.string};f.exports=r}),null);
__d("MercuryTypingAnimation.react",["cx","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m="_4a0v _1x3z";return c("React").createElement("div",{className:c("joinClasses")(this.props.className,m)},c("React").createElement("div",{className:"_4b0g"},c("React").createElement("div",{className:"_5pd7"}),c("React").createElement("div",{className:"_5pd7"}),c("React").createElement("div",{className:"_5pd7"})))};function l(){i.apply(this,arguments)}l.propTypes={color:k.oneOf(["light","dark"])};l.defaultProps={color:"dark"};f.exports=l}),null);
__d("ChatTypingIndicator.react",["cx","fbt","ChatConfig","Image.react","MercuryConfig","MercuryParticipants","MercuryTypingAnimation.react","ReactComponentWithPureRenderMixin","React","QE2Logger"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("React").PropTypes,k=c("ChatConfig").get("chattab_rounded_profile",false),l=c("React").createClass({displayName:"ChatTypingIndicator",mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{isOnline:j.bool,userID:j.string,showName:j.bool},componentDidMount:function n(){c("QE2Logger").logExposureForUser("messenger_growth_tombstone")},render:function n(){var o=void 0;if(this.props.userID)o=c("MercuryParticipants").getNow(this.props.userID);if(!o)return null;var p=c("MercuryConfig").GDWC&&!!this.props.isOnline;return c("React").createElement("div",{className:"_4tdt"},m(o,p),this._renderBubble())},getBubble:function n(){return this.refs.bubble},_renderBubble:function n(){var o=this.props.showName;return c("React").createElement("div",{className:"_4tdv"},c("React").createElement("div",{className:"_5wd4 _1nc7 _2cnu"+(o?" _5ysy":"")},c("React").createElement("div",{className:"_5wd9 _n4o"},c("React").createElement("div",{className:"_5w1r _5wdf _3_om"},c("React").createElement(c("MercuryTypingAnimation.react"),{className:"_5x7x",ref:"bubble"})))))}});function m(n,o){var p=i._("{name}",[i._param("name",n.name)]);return c("React").createElement("div",{className:"_31o4"+(k?" _3njy":"")},c("React").createElement("a",{"aria-label":p,className:"_4tdw","data-hover":"tooltip","data-tooltip-content":p,"data-tooltip-position":"left",href:n.href||"#",ref:"link"},c("React").createElement(c("Image.react"),{src:n.image_src,ref:"image"})),o?c("React").createElement("div",{className:"_sce"}):null)}f.exports=l}),null);
__d("ChatTypingIndicators.react",["fbt","ChatTypingIndicator.react","DOM","immutable","MercuryIDs","MercuryThreadInformer","MercuryThreads","MercuryParticipants","React","ReactDOM","SubscriptionsHandler","TooltipData","createObjectFrom","emptyFunction"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("MercuryThreads").get(),j=c("React").PropTypes,k=c("React").createClass({displayName:"ChatTypingIndicators",propTypes:{indicatorClass:j.func,indicatorsDidShow:j.func,indicatorsDidHide:j.func,onlineUsers:j.instanceOf(c("immutable").List),rootClassName:j.string,threadID:j.string.isRequired,viewer:j.string.isRequired,typingUserIDs:j.arrayOf(j.string.isRequired).isRequired},getDefaultProps:function l(){return{indicatorClass:c("ChatTypingIndicator.react"),indicatorsDidShow:c("emptyFunction"),indicatorsDidHide:c("emptyFunction")}},shouldComponentUpdate:function l(m){__p&&__p();var n=new Set(m.typingUserIDs),o=new Set(this.props.typingUserIDs);if(n.size!==o.size)return true;for(var p=n,q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var s;if(q){if(r>=p.length)break;s=p[r++]}else{r=p.next();if(r.done)break;s=r.value}var t=s;if(!o.has(t))return true}return m.threadID!==this.props.threadID||m.viewer!==this.props.viewer||m.onlineUsers!==this.props.onlineUsers||m.rootClassName!==this.props.rootClassName},componentDidUpdate:function l(){if(this.props.typingUserIDs.length>0)this.props.indicatorsDidShow();else this.props.indicatorsDidHide();c("MercuryParticipants").getMulti(this.props.typingUserIDs,function(m){if(this.isMounted())this.props.typingUserIDs.forEach(function(n){var o=m[n],p=this.refs[n]&&this.refs[n].getBubble();if(p&&o)c("TooltipData").set(c("ReactDOM").findDOMNode(p),this.renderTooltip(o.short_name),"above","left")}.bind(this))}.bind(this))},render:function l(){if(!c("MercuryIDs").isValid(this.props.threadID))return null;var m=i.getThreadMetaNow(this.props.threadID);if(m&&!m.is_subscribed)return null;var n=c("MercuryIDs").isGroupChat(this.props.threadID);return c("React").createElement("div",{className:this.props.rootClassName},this.props.typingUserIDs.slice().sort().map(function(o){return this._renderTypingIndicator(o,!!n)}.bind(this)))},_renderTypingIndicator:function l(m,n){var o=this.props.indicatorClass,p=this.props.onlineUsers!==undefined&&this.props.onlineUsers.includes(c("MercuryIDs").getUserIDFromParticipantID(m));return c("React").createElement(o,{key:m,ref:m,showName:n,userID:m,isOnline:p})},renderTooltip:function l(m){var n=c("DOM").create("span");c("ReactDOM").render(c("React").createElement("span",null,h._("{name} is typing...",[h._param("name",m)])),n);return n}});f.exports=k}),null);
__d("ChatTypingIndicatorsWrapper.react",["ChatTypingIndicators.react","immutable","MessengerState.bs","React"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.render=function(){"use strict";return c("React").createElement(c("MessengerState.bs").jsComponent,{fbid:this.props.viewer},function(k){return c("React").createElement(c("ChatTypingIndicators.react"),{indicatorClass:this.props.indicatorClass,indicatorsDidHide:this.props.indicatorsDidHide,indicatorsDidShow:this.props.indicatorsDidShow,onlineUsers:this.props.onlineUsers,rootClassName:this.props.rootClassName,threadID:this.props.threadID,typingUserIDs:Object.keys(c("MessengerState.bs").typing(k)[this.props.threadID]||{}),viewer:this.props.viewer})}.bind(this))};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("MontageDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationDispatcher"));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=new j({strict:false})}),null);
__d("MontageActions",["MontageDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({REQUEST_UPDATE:null,HAS_UPDATED:null}),i={Types:h,requestUpdate:function j(k){c("MontageDispatcher").dispatch({type:h.REQUEST_UPDATE,threadFBID:k})},hasUpdated:function j(k){c("MontageDispatcher").dispatch({type:h.HAS_UPDATED,threadFBID:k})}};f.exports=i}),null);
__d("MercuryTypeaheadDataSource",["CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles","WorkModeConfig"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=[],k={},l={},m={},n=[],o=false,p=false;h=babelHelpers.inherits(q,c("DataSource"));i=h&&h.prototype;function q(r){"use strict";r=r||{};r.kanaNormalization=true;i.constructor.call(this,r);this.showDefaultList=r.showDefaultList||false}q.prototype.dirty=function(){"use strict";this.$MercuryTypeaheadDataSource1=j;this.localCache=l;this.queryCache=k;this.queryIDs=m;this.defaultList=n;return this};q.prototype.bootstrap=function(){"use strict";__p&&__p();if(o||p)return false;p=true;c("ShortProfiles").fetchAll().then(function(){this.updateBootstrapData();p=false;o=true;if(this.showDefaultList)this.inform("show-default")}.bind(this),function(){}.bind(this));return true};q.prototype.updateBootstrapData=function(){"use strict";__p&&__p();var r=this.getCachedShortProfileIDs(),s=c("WorkModeConfig").is_work_user?c("MercuryParticipantTypes").FB4C:c("MercuryParticipantTypes").FRIEND,t=r.map(function(v){var w=c("ShortProfiles").getNow(v),x=v==c("CurrentUser").getID()?s:w.type,y=[w.additionalName,w.alternateName].concat(w.searchTokens||[]).join(" "),z=w.name,A=null;return{uid:v,index:c("OrderedFriendsList").getActiveRank(v),text:z,subtext:A,tokens:y,localized_text:w.name,additional_text:w.additionalName,photo:w.thumbSrc,render_type:x,type:c("MercuryTypeaheadConstants").USER_TYPE}});if(t.length)this.addEntries(t);if(!this.showDefaultList)return;var u=t.sort(function(v,w){return v.index-w.index}).slice(0,5);n=this.buildData(u.map(function(v){return v.uid}));this.defaultList=n};q.prototype.query=function(r,s,t,u){"use strict";var v=s||r.length===1;return i.query.call(this,r,v,t,u)};q.prototype.getQueryData=function(r,s){"use strict";return babelHelpers["extends"]({},i.getQueryData.call(this,r,s))};q.prototype.setEntry=function(r,s){"use strict";this.$MercuryTypeaheadDataSource1[r]=s};q.prototype.getEntry=function(r){"use strict";return this.$MercuryTypeaheadDataSource1[r]||null};q.prototype.getCachedShortProfileIDs=function(){"use strict";var r=c("ShortProfiles").getCachedProfileIDs(),s=r.filter(function(t){var u=c("ShortProfiles").getNow(t);return t==c("CurrentUser").getID()||u.type===c("MercuryParticipantTypes").FRIEND||u.type===c("MercuryParticipantTypes").FB4C});return s};q.prototype.isBootstrapped=function(){"use strict";return o};q.prototype.isBootstrapping=function(){"use strict";return p};q.prototype.processEntries=function(r,s){"use strict";r=r.map(function(t){if(t.index==null&&(t.render_type===c("MercuryParticipantTypes").FRIEND||t.render_type===c("MercuryParticipantTypes").FB4C))t.index=c("OrderedFriendsList").getActiveRank(t.uid);return t});return i.processEntries.call(this,r)};q.prototype.mergeUids=function(r,s,t,u){"use strict";var v=s.sort(function(w,x){return this.getEntry(w).index-this.getEntry(x).index}.bind(this));return i.mergeUids.call(this,r,v,t,u)};q.prototype.setShowDefaultList=function(r){"use strict";this.showDefaultList=r};f.exports=q}),null);
__d("ChatTabTypeaheadDataSource",["MercuryTypeaheadConstants","MercuryTypeaheadDataSource"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("MercuryTypeaheadDataSource"));i=h&&h.prototype;function j(k){"use strict";k=k||{};k.maxResults=c("MercuryTypeaheadConstants").COMPOSER_CHATTAB_MAX;i.constructor.call(this,k);this.$ChatTabTypeaheadDataSource1=true}j.prototype.buildData=function(k){"use strict";__p&&__p();var l=[],m=[],n=[],o=[],p=[],q=[],r=[];k.forEach(function(t){__p&&__p();var u=i.getEntry.call(this,t);switch(u.render_type){case c("MercuryTypeaheadConstants").FRIEND_TYPE:l.push(t);break;case c("MercuryTypeaheadConstants").THREAD_TYPE:if(this.$ChatTabTypeaheadDataSource1)m.push(t);break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:n.push(t);break;case c("MercuryTypeaheadConstants").FB4C_TYPE:o.push(t);break;case c("MercuryTypeaheadConstants").PAGE_TYPE:if(this.$ChatTabTypeaheadDataSource1)p.push(t);break;case c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:r.push(t);break;default:break}}.bind(this),this);var s=q.concat(l,o,m,p,n,r);return i.buildData.call(this,s)};j.prototype.query=function(k,l,m,n){"use strict";return i.query.call(this,k,l,m,n)};j.prototype.respond=function(k,l,m){"use strict";return i.respond.call(this,k,l,m)};j.prototype.setShowThreads=function(k){"use strict";this.$ChatTabTypeaheadDataSource1=k};f.exports=j}),null);
__d("DisplayGenderConst",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNKNOWN:"UNKNOWN",FEMALE:"FEMALE",MALE:"MALE",NEUTER:"NEUTER"})}),null);
__d("MessengerGroupsSyncStatus.bs",["MessengerGroupsSyncStatus"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();if(i==null)return null;else switch(i){case"OPT_IN":return c("MessengerGroupsSyncStatus").OPT_IN;case"OPT_OUT":return c("MessengerGroupsSyncStatus").OPT_OUT;case"PENDING_OPT_IN":return c("MessengerGroupsSyncStatus").PENDING_OPT_IN;case"PENDING_OPT_OUT":return c("MessengerGroupsSyncStatus").PENDING_OPT_OUT;case"UNSET":return c("MessengerGroupsSyncStatus").UNSET;case"UNSUPPORTED":return c("MessengerGroupsSyncStatus").UNSUPPORTED;default:return null}}g.fromNullableString=h}),null);
__d("MessengerServerPayloadTransformer.bs",["URI","FBID.bs","bs_array","Utils.bs","bs_string","getByPath","bs_caml_array","bs_js_boolean","MercuryIDs","bs_caml_format","GenderConst","bs_js_primitive","WorkModeConfig","bs_js_null_undefined","DisplayGenderConst","MessagingThreadType","MessengerGroupsSyncStatus.bs","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs","MessengerThreadCannotReplyReason"],(function aa(ba,a,ca,da,ea,b){"use strict";__p&&__p();function fa(d){__p&&__p();var e=d.location_coordinates,f=e==null?[null,null]:[e.latitude,e.longitude],g=d.location_page,h;if(g==null)h=null;else{var i=g.address;h=i==null?null:i.full_address}var j=d.allows_rsvp,k=j!==0?1:0,l=a("bs_array").fold_left(function(n,o){n[o.node.id]=o.guest_list_state;return n},{},d.event_reminder_members.edges),m=d.lightweight_event_creator;return{creator_id:m==null?null:m.id,event_members:l,event_time:d.time,event_type:d.lightweight_event_type,latitude:f[0],longitude:f[1],location_address:h,location_name:d.location_name,note:d.note,oid:d.id,related_event:d.related_event,repeat_mode:d.repeat_mode,seconds_to_notify_before:d.seconds_to_notify_before,status:d.lightweight_event_status,title:d.event_title,track_rsvp:k}}function ga(d){__p&&__p();var e=d.associated_object;if(e==null)return null;else{var f=e.action_link,g;if(f==null)g=null;else{var h=+a("WorkModeConfig").is_work_user,i=h!==0?a("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";g=new(a("URI"))(f).setDomain(i)}var j=e.profile_picture;return{id:e.id,name:e.name,action_link:g,profile_picture:j==null?null:{uri:j.uri},room_type:e.room_type,privacy_mode:e.privacy_mode,approval_mode_toggleable:e.approval_mode_toggleable,start_timestamp:e.start_timestamp,event_place:e.event_place,mentorship_program:e.mentorship_program}}}function ha(d){var e=d.related_page_thread;if(e==null)return null;else{var f=a("bs_array").map(function(i){return i.name},e.custom_thread_tags.nodes),g=e.page,h=g==null?null:g.id;return{flagged:e.is_flagged,pageID:h,customTagNames:f}}}function ia(d){__p&&__p();var e=d.thread_key.other_user_id;if(e==null)return 0;else{var f=d.all_participants.nodes;return a("bs_array").fold_left(function(g,h){var i=h.messaging_actor;if(i.id===e)return+(i.__typename==="User");else return g},0,f)}}function ja(d){__p&&__p();if(d.length){var e={};a("bs_array").iter(function(f){var g=f.nickname;if(g==null)return 0;else{e[f.participant_id]=g;return 0}},d);return e}else return null}function ka(d){if(!(d==null)&&d!=="")return"#"+a("bs_string").sub(d,2,d.length-2|0);else return null}function la(d){return d.thread_key.thread_fbid}function ma(d){return d.thread_key.other_user_id}function na(d){return a("bs_js_primitive").null_undefined_to_opt(a("getByPath")(d,["messages","page_info"]))}function c(d){__p&&__p();var e=d.gender,f=d.url,g;if(f==null)g=null;else{var h=+a("WorkModeConfig").is_work_user,i=h!==0?a("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";g=new(a("URI"))(f).getUnqualifiedURI().setDomain(i).setProtocol("https").toString()}var j=d.big_image_src,k=d.big_image_src,l=d.__typename,m;switch(l){case"Page":m="page";break;case"User":m="user";break;default:m=null}var n=d.accepts_messenger_user_feedback,o=d.is_viewer_friend,p=d.is_messenger_user,q=d.is_verified,r=d.is_messenger_platform_bot,s=d.is_message_blocked_by_viewer,t=d.is_viewer_subscribed_to_message_updates,u=d.is_viewer_coworker,v=d.scim_company_user,w;if(v==null)w=null;else{var x=v.company_title;if(x==="")w=null;else{var y=a("bs_js_null_undefined").bind(d.work_info,function(B){return a("bs_js_null_undefined").bind(B.work_community,function(C){return C.name})}),z=a("Utils.bs").nullUndefinedBooleanToOptionBool(d.is_viewer_coworker);w=!(y==null)&&z&&z[0]===0?""+(String(x)+(" \u2022 "+(String(y)+""))):x}}var A=d.is_employee;return{id:"fbid:"+d.id,fbid:d.id,gender:e==null?a("GenderConst").NOT_A_PERSON:e===a("DisplayGenderConst").MALE?a("GenderConst").MALE_SINGULAR:e===a("DisplayGenderConst").FEMALE?a("GenderConst").FEMALE_SINGULAR:a("GenderConst").NOT_A_PERSON,href:g,image_src:j==null?null:j.uri,big_image_src:k==null?null:k.uri,name:d.name,short_name:a("Utils.bs").$pipe$unknown(a("bs_js_primitive").null_undefined_to_opt(d.short_name),d.name),type:m,vanity:d.username,accepts_messenger_user_feedback:n==null?false:n,is_friend:o==null?false:o,is_messenger_user:p==null?false:p,is_business_enabled:d.__typename==="Page"?true:false,is_verified:q==null?false:q,is_messenger_platform_bot:r==null?false:r,is_messenger_ignored:null,is_messenger_blocked:s==null?false:s,is_subscribed_to_page_updates:t==null?true:t,is_coworker:u==null?true:u,title:w,employee:A==null?false:A,instant_game_channel:d.__typename==="Page"?d.instant_game_channel:null}}function oa(d){return a("bs_array").map(function(e){return c(e.messaging_actor)},d.all_participants.nodes)}function pa(d,e){__p&&__p();var f=e.read_receipts;if(f==null)return 0;else{var g={};a("bs_array").iter(function(h){var f=h.actor;if(!(f==null)&&d!==f.id){g[f.id]={action:a("bs_caml_format").caml_float_of_string(h.action),watermark:a("bs_caml_format").caml_float_of_string(h.watermark)};return 0}else return 0},f.nodes);return[g]}}function qa(d){__p&&__p();var e=d.delivery_receipts;if(e==null)return[];else return e.nodes.sort(function(f,g){var h=a("bs_caml_format").caml_float_of_string(f.timestamp_precise),i=a("bs_caml_format").caml_float_of_string(g.timestamp_precise);if(h>i)return-1;else if(h===i)return 0;else return 1})}function ra(d,e,f){var g=e.messages;if(g==null)return 0;else return[a("bs_array").map(function(h){return a("MessengerMessageTransformer.bs").transformMessage(d,h,{thread_id:null,thread_fbid:e.thread_key.thread_fbid,other_user_fbid:e.thread_key.other_user_id,folder:a("bs_string").lowercase(e.folder)},f)},g.nodes)]}function sa(d,e,f){__p&&__p();var g=a("bs_array").map(function(Z){var ua=a("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(Z),i=Z.extensible_attachment,$;if(i==null)$=null;else{var j=i.story_attachment;$={legacy_attachment_id:i.legacy_attachment_id,story_attachment:j==null?null:a("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(j)}}return{snippet:Z.snippet,message_sender:Z.message_sender,timestamp_precise:Z.timestamp_precise,commerce_message_type:Z.commerce_message_type,extensible_attachment:$,blob_attachments:ua,sticker:Z.sticker,extensible_message_admin_text:Z.extensible_message_admin_text}},e.last_message.nodes),h={thread_key:e.thread_key,name:e.name,all_participants:e.all_participants,last_message:{nodes:g},unread_count:e.unread_count,message_count:e.messages_count,image:e.image,updated_time_precise:e.updated_time_precise,mute_until:e.mute_until,is_pin_protected:e.is_pin_protected,is_viewer_subscribed:e.is_viewer_subscribed,is_canonical_neo_user:e.is_canonical_neo_user,thread_queue_enabled:e.thread_queue_enabled,folder:e.folder,has_viewer_archived:e.has_viewer_archived,is_page_follow_up:e.is_page_follow_up,cannot_reply_reason:e.cannot_reply_reason,ephemeral_ttl_mode:e.ephemeral_ttl_mode,customization_info:e.customization_info,thread_admins:e.thread_admins,approval_mode:e.approval_mode,joinable_mode:e.joinable_mode,thread_queue_metadata:e.thread_queue_metadata,event_reminders:e.event_reminders,montage_thread:e.montage_thread,last_read_receipt:e.last_read_receipt,related_page_thread:e.related_page_thread,rtc_call_data:e.rtc_call_data,associated_object:e.associated_object,reactions_mute_mode:e.reactions_mute_mode,mentions_mute_mode:e.mentions_mute_mode,privacy_mode:e.privacy_mode,customization_enabled:e.customization_enabled,thread_type:e.thread_type,participant_add_mode_as_string:e.participant_add_mode_as_string,participants_event_status:e.participants_event_status,marketplace_thread_data:e.marketplace_thread_data,page_comm_item:e.page_comm_item,group_approval_queue:e.group_approval_queue,admin_model_status_string:e.admin_model_status_string,groups_sync_status_string:e.groups_sync_status_string,groups_sync_metadata:e.groups_sync_metadata},i=h.customization_info,j;if(i==null)j=[null,null,null];else{var k=i.emoji;j=[ka(i.outgoing_bubble_color),k==null?null:{emoji:k},ja(i.participant_customizations)]}var l=h.page_comm_item,m=l==null?[null,null,null,null,null]:[l.comm_status,l.comm_source_id,l.id,l.subtitle,l.comm_item_owners],n=h.last_message.nodes.length?[a("bs_caml_array").caml_array_get(h.last_message.nodes,0)]:0,o=h.last_read_receipt.nodes.length?[a("bs_caml_array").caml_array_get(h.last_read_receipt.nodes,0)]:0,p;if(n){var q=n[0];p=a("MessengerAttachmentTransformer.bs").transformAttachment(d,{extensible_attachment:q.extensible_attachment,blob_attachments:q.blob_attachments,sticker:q.sticker},f)}else p=[];var r;if(n){var s=n[0].extensible_message_admin_text;if(s==null)r=null;else{var t=s.game;r=t==null?null:t.id}}else r=null;var u=h.cannot_reply_reason,v=h.thread_queue_metadata,w=h.thread_type,x=h.montage_thread,y=h.image,z=h.thread_key.other_user_id,A=h.thread_queue_metadata,B=h.name,C=h.thread_key.other_user_id,D;if(C==null){var E=h.thread_key.thread_fbid;D=E==null?null:E}else D=C;var F=h.rtc_call_data,G;if(F==null)G=null;else{var H=F.initiator;G={call_state:F.call_state,server_info_data:F.server_info_data,initiator_fbid:H==null?0:a("bs_caml_format").caml_float_of_string(H.id)}}var I=h.marketplace_thread_data,J;if(I==null)J=null;else{var K=I.for_sale_item,L;if(K==null)L=null;else{var M=K.id,N=K.formatted_price,O=K.location,P;if(O==null)P=null;else{var Q=O.reverse_geocode;P={reverse_geocode:Q==null?null:{city:Q.city,state:Q.state}}}var R=K.primary_photo,S;if(R==null)S=null;else{var T=R.image;S=T==null?null:T.uri}L={id:M==null?0:a("bs_caml_format").caml_float_of_string(M),story_id:K.story_id,title:K.group_commerce_item_title,price:N==null?null:N.text,location:P,is_sold:K.is_sold,image_uri:S,url:K.url}}var U=I.buyer,V=I.seller;J={for_sale_item:L,buyer_fbid:U==null?0:a("bs_caml_format").caml_float_of_string(U.id),seller_fbid:V==null?0:a("bs_caml_format").caml_float_of_string(V.id)}}var W=h.group_approval_queue,X=h.groups_sync_metadata,Y;if(X==null)Y=null;else{var ta=X.fb_group;Y=ta==null?null:ta.url}return{admin_ids:a("bs_array").map(function(Z){return Z.id},h.thread_admins),approval_mode:h.approval_mode,approval_queue_ids:v==null?[]:a("bs_array").map(function(Z){return a("MercuryIDs").getParticipantIDFromUserID(a("FBID.bs").ofStringExn(Z.id))},v.approval_requests.nodes),can_reply:u==null?true:false,cannot_reply_reason:h.cannot_reply_reason,custom_color:j[0],custom_like_icon:j[1],custom_nickname:j[2],customization_enabled:h.customization_enabled,thread_type:w==null?null:a("bs_js_null_undefined").from_opt(a("bs_js_primitive").undefined_to_opt(a("MessagingThreadType")[w])),participant_add_mode:h.participant_add_mode_as_string,ephemeral_ttl_mode:h.ephemeral_ttl_mode,folder:a("bs_string").lowercase(h.folder),has_email_participant:u==null?false:a("bs_js_boolean").to_js_boolean(+(u===a("MessengerThreadCannotReplyReason").HAS_EMAIL_PARTICIPANT)),has_montage:x==null?false:true,image_src:y==null?null:y.uri,is_archived:a("bs_js_boolean").to_js_boolean(h.has_viewer_archived),is_page_follow_up:a("bs_js_boolean").to_js_boolean(h.is_page_follow_up),is_canonical_user:a("bs_js_boolean").to_js_boolean(ia(h)),is_canonical:z==null?false:true,is_pin_protected:a("bs_js_boolean").to_js_boolean(h.is_pin_protected),is_subscribed:a("bs_js_boolean").to_js_boolean(h.is_viewer_subscribed),is_canonical_neo_user:a("bs_js_boolean").to_js_boolean(h.is_canonical_neo_user),is_thread_queue_enabled:A==null?false:true,joinable_mode:{mode:a("bs_caml_format").caml_int_of_string(h.joinable_mode.mode),link:h.joinable_mode.link},last_message_timestamp:n?a("bs_caml_format").caml_float_of_string(n[0].timestamp_precise):0,last_message_type:n?n[0].commerce_message_type:null,last_read_timestamp:o?a("bs_caml_format").caml_float_of_string(o[0].timestamp_precise):0,lightweight_event:h.event_reminders.nodes.length?fa(a("bs_caml_array").caml_array_get(h.event_reminders.nodes,0)):null,message_count:h.message_count,mute_until:h.mute_until,name:B==null?"":B,other_user_fbid:h.thread_key.other_user_id,page_thread_info:ha(h),participants:a("bs_array").map(function(Z){return a("MercuryIDs").getParticipantIDFromUserID(Z.messaging_actor.id)},h.all_participants.nodes),participants_event_status:h.participants_event_status,read_only:u==null?false:a("bs_js_boolean").to_js_boolean(+(u===a("MessengerThreadCannotReplyReason").READ_ONLY)),recipients_loadable:u==null?true:a("bs_js_boolean").to_js_boolean(+(u!==a("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE)),server_timestamp:a("bs_caml_format").caml_float_of_string(h.updated_time_precise),snippet_attachments:p,snippet_sender:n?a("MercuryIDs").getParticipantIDFromUserID(n[0].message_sender.messaging_actor.id):null,snippet:n?n[0].snippet:null,thread_fbid:D,thread_id:"",timestamp:a("bs_caml_format").caml_float_of_string(h.updated_time_precise),unread_count:h.unread_count,rtc_call_data:G,marketplace_thread_data:J,associated_object:ga(h),reactions_mute_mode:h.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:h.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1,comm_status:m[0],page_comm_item_id:m[2],comm_source_id:m[1],subtitle:m[3],comm_item_owners:m[4],group_approval_queue:W==null?null:W.nodes,game_id:r,admin_model_status:h.admin_model_status_string,groups_sync_status:a("MessengerGroupsSyncStatus.bs").fromNullableString(h.groups_sync_status_string),groups_sync_fb_url:Y}}b.getThreadFBID=la;b.getOtherUserID=ma;b.getMessagePageInfo=na;b.transformParticipant=c;b.transformParticipants=oa;b.transformReadReceipts=pa;b.transformDeliveryReceipts=qa;b.transformMessages=ra;b.transformThread=sa}),null);
__d("MercuryCanonicalGroupThreadManager",["Bootloader","KeyedCallbackManager","MercuryIDs","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercurySingletonProvider","MercuryThreads","MessengerServerPayloadTransformer.bs","MercuryServerDispatcher","SubscriptionsHandler"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j){this.$MercuryCanonicalGroupThreadManager1=j;this.$MercuryCanonicalGroupThreadManager2=new(c("KeyedCallbackManager"))();this.$MercuryCanonicalGroupThreadManager3=c("MercuryServerPayloadPreprocessor").getForFBID(this.$MercuryCanonicalGroupThreadManager1);this.$MercuryCanonicalGroupThreadManager6=c("MercuryThreads").getForFBID(this.$MercuryCanonicalGroupThreadManager1);this.$MercuryCanonicalGroupThreadManager4={};this.$MercuryCanonicalGroupThreadManager8();this.$MercuryCanonicalGroupThreadManager9();this.$MercuryCanonicalGroupThreadManager7={}}h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};h.prototype.getCanonicalGroupThreadIDForParticipants=function(j,k){j=this.$MercuryCanonicalGroupThreadManager10(j);var l=this.$MercuryCanonicalGroupThreadManager11(j),m=this.$MercuryCanonicalGroupThreadManager2.executeOrEnqueue(l,k);this.$MercuryCanonicalGroupThreadManager12(j);return m};h.prototype.unsubscribe=function(j){if(j)this.$MercuryCanonicalGroupThreadManager2.unsubscribe(j)};h.prototype.$MercuryCanonicalGroupThreadManager11=function(j){return j.sort().join(",")};h.prototype.$MercuryCanonicalGroupThreadManager13=function(j,k){var l=c("MercuryIDs").getThreadIDFromThreadFBID(k);this.$MercuryCanonicalGroupThreadManager2.setResource(j,l);this.$MercuryCanonicalGroupThreadManager4[l]=j};h.prototype.$MercuryCanonicalGroupThreadManager12=function(j){var k=this.$MercuryCanonicalGroupThreadManager11(j),l={canonical_group_key:k,participants:j};c("MercuryServerDispatcher").trySend("/ajax/mercury/search_canonical_groups.php",l,null,this.$MercuryCanonicalGroupThreadManager1)};h.prototype.$MercuryCanonicalGroupThreadManager8=function(){c("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_canonical_groups.php":{request_user_id:this.$MercuryCanonicalGroupThreadManager1,mode:c("MercuryServerDispatcher").IMMEDIATE,handler:function(j){this.handleUpdate(j)}.bind(this)}})};h.prototype.$MercuryCanonicalGroupThreadManager10=function(j){if(j.indexOf(this.$MercuryCanonicalGroupThreadManager1)===-1)j.push(this.$MercuryCanonicalGroupThreadManager1);return j};h.prototype.handleUpdate=function(j){if(j.graphql_payload){var k=c("MessengerServerPayloadTransformer.bs").transformThread(j.viewer,j.graphql_payload,j.for_page);this.$MercuryCanonicalGroupThreadManager3.handleUpdate({threads:[k],payload_source:c("MercuryPayloadSource").SERVER_SEARCH})}var l=j.canonical_group;if(l)for(var m in l)this.$MercuryCanonicalGroupThreadManager13(m,l[m])};h.prototype.getNow=function(j){var k=this.$MercuryCanonicalGroupThreadManager11(this.$MercuryCanonicalGroupThreadManager10(j));return this.$MercuryCanonicalGroupThreadManager2.getResource(k)};h.prototype.$MercuryCanonicalGroupThreadManager9=function(){c("Bootloader").loadModules(["MercuryThreadInformer"],function(j){var k=j.getForFBID(this.$MercuryCanonicalGroupThreadManager1),l=new(c("SubscriptionsHandler"))();l.addSubscriptions(k.subscribe("threads-deleted",function(m,n){for(var o in n)if(this.$MercuryCanonicalGroupThreadManager4[o]){this.$MercuryCanonicalGroupThreadManager2.setResource(this.$MercuryCanonicalGroupThreadManager4[o],undefined);delete this.$MercuryCanonicalGroupThreadManager4[o]}}.bind(this)));this.$MercuryCanonicalGroupThreadManager5=l}.bind(this),"MercuryCanonicalGroupThreadManager")};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("FantaGetMessageActions",["FantaDispatcher","MercuryCanonicalGroupThreadManager","MercuryIDs","MercuryTypeaheadConstants","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({ADD_PARTICIPANTS:null,CLEAR_PARTICIPANTS:null,CLEAR_PREVIEW:null,FETCH_MORE_MESSAGES:null,ON_BOOTLOAD_TYPEAHEAD:null,ON_GET_APPROVAL_QUEUE_RESPONSE:null,ON_GET_THREAD_PREVIEW_RESPONSE:null,ON_GET_THREAD_RESPONSE:null,ON_MESSAGE_STORE_RESPONSE:null,ON_PAGE_NULL_RESPONSE:null,ON_PRIVACY_STATE_CHANGE:null,ON_SHOW_CONTEXT_BANNER_TIMER:null,REFRESH_THREAD:null,THREADS_UPDATED:null}),i={Types:h,addParticipants:function j(k,l){__p&&__p();var m,n=l.length===1&&l[0].getInfo().render_type===c("MercuryTypeaheadConstants").THREAD_TYPE,o=void 0;if(n){var p=l[0].getInfo().mercury_thread;if(p)o=c("MercuryIDs").getThreadIDFromThreadFBID(p.thread_fbid)}else if(l.length===1){var q=l[0].info&&l[0].info.uid;if(q)o=c("MercuryIDs").getThreadIDFromUserID(q)}else if(l.length===0){c("FantaDispatcher").dispatch({type:h.CLEAR_PARTICIPANTS,tabID:k});return}else(function(){var r=c("MercuryCanonicalGroupThreadManager").get(),s=l.map(function(u){return u.info.uid});c("FantaDispatcher").dispatch({type:h.CLEAR_PREVIEW,tabID:k,tokens:l});var t=r.getCanonicalGroupThreadIDForParticipants(Array.from(s),function(o){r.unsubscribe(t);if(o)c("FantaDispatcher").dispatch({type:h.ADD_PARTICIPANTS,previewTabID:o,tabID:k,tokens:l})})})();if(o)c("FantaDispatcher").dispatch({type:h.ADD_PARTICIPANTS,previewTabID:o,tabID:k,tokens:l})},onBootloadTypeahead:function j(k,l){c("FantaDispatcher").dispatch({type:h.ON_BOOTLOAD_TYPEAHEAD,tabID:k,thread:l})},fetchMoreMessages:function j(k){c("FantaDispatcher").dispatch({type:h.FETCH_MORE_MESSAGES,threadID:k})},refreshThread:function j(k){c("FantaDispatcher").dispatch({type:h.REFRESH_THREAD,threadID:k})},onGetThreadResponse:function j(k){c("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_RESPONSE,thread:k})},onGetThreadPreviewResponse:function j(k,l){c("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_PREVIEW_RESPONSE,tabID:k,thread:l})},onApprovalQueueResponse:function j(k,l){c("FantaDispatcher").dispatch({type:h.ON_GET_APPROVAL_QUEUE_RESPONSE,membershipParticipants:l,tabID:k})},onShowContextBannerTimer:function j(k){c("FantaDispatcher").dispatch({type:h.ON_SHOW_CONTEXT_BANNER_TIMER,threadID:k})},onMessageStoreResponse:function j(k,l){c("FantaDispatcher").dispatch({type:h.ON_MESSAGE_STORE_RESPONSE,messages:k,tabID:l})},threadsUpdated:function j(k){c("FantaDispatcher").dispatch({type:h.THREADS_UPDATED,threads:k})},onPrivacyStateChange:function j(k,l){c("FantaDispatcher").dispatch({type:h.ON_PRIVACY_STATE_CHANGE,threadID:k,privacyState:l})},onPageNullResponse:function j(k,l){c("FantaDispatcher").dispatch({type:h.ON_PAGE_NULL_RESPONSE,threadID:k,nullStateCTA:l})}};f.exports=i}),null);
__d("FantaTabSheetActions",["FantaDispatcher","LogHistory","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({CLOSE_ADD_FRIENDS_SHEET:null,CLOSE_ADD_MORE_FRIENDS_SHEET:null,CLOSE_EMPLOYEE_PERSONAL_USER_SHEET:null,CLOSE_EMPLOYEE_WORK_USER_SHEET:null,CLOSE_NAME_CONVERSATION_TAB_SHEET:null,CLOSE_PAGE_INDICATOR_SHEET:null,CLOSE_READ_ONLY_PERMANENT_SHEET:null,CLOSE_READ_ONLY_SHEET:null,CLOSE_USER_FOCUS_AND_BYPASS_SHEET:null,CLOSE_USER_TIMEZONE_SHEET:null,ON_BOOTLOAD_EVENT_REMINDER:null,ON_WORK_DO_NOT_DISTURB_RESPONSE:null,ON_MENTORSHIP_PROGRAM_RESPONSE:null,ON_IS_PAGE_TAB:null,OPEN_ADD_MORE_FRIENDS_SHEET:null,OPEN_APPOINTMENT_SHEET:null,OPEN_BYPASS_FOCUS_SHEET:null,OPEN_EMPLOYEE_AWAY_SHEET:null,OPEN_EMPLOYEE_PERSONAL_USER_SHEET:null,OPEN_EMPLOYEE_WORK_USER_SHEET:null,OPEN_NAME_CONVERSATION_TAB_SHEET:null,OPEN_PAGE_INDICATOR_SHEET:null,OPEN_READ_ONLY_PERMANENT_SHEET:null,OPEN_READ_ONLY_SHEET:null,OPEN_USER_FOCUS_SHEET:null,OPEN_USER_TIMEZONE_SHEET:null,OPEN_WORK_DO_NOT_DISTURB_SHEET:null,OPEN_MENTORSHIP_PROGRAM_SHEET:null}),i=c("LogHistory").getInstance("fanta_sheets");function j(l){c("FantaDispatcher").dispatch(l);i.log(l.type,l.tabID)}var k={Types:h,openUserFocusSheet:function l(m){j({type:h.OPEN_USER_FOCUS_SHEET,tabID:m})},openBypassFocusSheet:function l(m){j({type:h.OPEN_BYPASS_FOCUS_SHEET,tabID:m})},closeUserFocusAndBypassSheet:function l(m){j({type:h.CLOSE_USER_FOCUS_AND_BYPASS_SHEET,tabID:m})},openUserTimezoneSheet:function l(m,n){j({type:h.OPEN_USER_TIMEZONE_SHEET,tabID:m,timezoneInfo:n})},closeUserTimezoneSheet:function l(m){j({type:h.CLOSE_USER_TIMEZONE_SHEET,tabID:m})},openAddMoreFriendsSheet:function l(m){j({type:h.OPEN_ADD_MORE_FRIENDS_SHEET,tabID:m})},closeAddMoreFriendsSheet:function l(m){j({type:h.CLOSE_ADD_MORE_FRIENDS_SHEET,tabID:m})},closeAddFriendsSheet:function l(m){j({type:h.CLOSE_ADD_FRIENDS_SHEET,tabID:m})},openNameConversationSheet:function l(m){j({type:h.OPEN_NAME_CONVERSATION_TAB_SHEET,tabID:m})},closeNameConversationSheet:function l(m){j({type:h.CLOSE_NAME_CONVERSATION_TAB_SHEET,tabID:m})},openReadOnlySheet:function l(m){j({type:h.OPEN_READ_ONLY_SHEET,tabID:m})},closeReadOnlySheet:function l(m){j({type:h.CLOSE_READ_ONLY_SHEET,tabID:m})},openReadOnlyPermanentSheet:function l(m){j({type:h.OPEN_READ_ONLY_PERMANENT_SHEET,tabID:m})},closeReadOnlyPermanentSheet:function l(m){j({type:h.CLOSE_READ_ONLY_PERMANENT_SHEET,tabID:m})},openEmployeeAwaySheet:function l(m){j({type:h.OPEN_EMPLOYEE_AWAY_SHEET,tabID:m})},openEmployeePersonalUserSheet:function l(m){j({type:h.OPEN_EMPLOYEE_PERSONAL_USER_SHEET,tabID:m})},closeEmployeePersonalUserSheet:function l(m){j({type:h.CLOSE_EMPLOYEE_PERSONAL_USER_SHEET,tabID:m})},openEmployeeWorkUserSheet:function l(m){j({type:h.OPEN_EMPLOYEE_WORK_USER_SHEET,tabID:m})},closeEmployeeWorkUserSheet:function l(m){j({type:h.CLOSE_EMPLOYEE_WORK_USER_SHEET,tabID:m})},openPageIndicatorSheet:function l(m,n){j({type:h.OPEN_PAGE_INDICATOR_SHEET,description:n,tabID:m})},closePageIndicatorSheet:function l(m){j({type:h.CLOSE_PAGE_INDICATOR_SHEET,tabID:m})},openWorkDoNotDisturbSheet:function l(m,n){j({type:h.OPEN_WORK_DO_NOT_DISTURB_SHEET,description:n,tabID:m})},openMentorshipProgramSheet:function l(m){j({type:h.OPEN_MENTORSHIP_PROGRAM_SHEET,tabID:m})},onIsPageTab:function l(m,n){j({type:h.ON_IS_PAGE_TAB,pageIndicator:n,tabID:m})},onBootloadEventReminder:function l(m){j({type:h.ON_BOOTLOAD_EVENT_REMINDER,tabID:m})},openAppointmentBannerSheet:function l(m){j({type:h.OPEN_APPOINTMENT_SHEET,tabID:m})},onWorkDoNotDisturbResponse:function l(m,n,o){j({type:h.ON_WORK_DO_NOT_DISTURB_RESPONSE,tabID:m,status:n,description:o})},onMentorshipProgramResponse:function l(m,n,o){j({type:h.ON_MENTORSHIP_PROGRAM_RESPONSE,tabID:m,groupID:o,programName:n})}};f.exports=k}),null);
__d("MercurySheetPolicy",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={ChatThreadIsMutedTabSheet:{isPermanent:false,isSheetWithInput:false},ChatUserFocusSheet:{isPermanent:true,isSheetWithInput:true},ChatUserFocusBypassSheet:{isPermanent:true,isSheetWithInput:true},ChatUserTimezoneSheet:{isPermanent:true,isSheetWithInput:true},ChatUserBlockedTabSheet:{isPermanent:true,isSheetWithInput:false},ChatUploadWarningTabSheet:{isPermanent:false,isSheetWithInput:false},ChatThreadIsMessageBlockedSheet:{isPermanent:true,isSheetWithInput:false},ChatReadOnlyTabSheet:{isPermanent:false,isSheetWithInput:false},ChatReadOnlyPermanentTabSheet:{isPermanent:true,isSheetWithInput:false},ChatOfflineTabSheet:{isPermanent:true,isSheetWithInput:false},ChatNoRecipientsTabSheet:{isPermanent:true,isSheetWithInput:false},ChatNewMessagesTabSheet:{isPermanent:true,isSheetWithInput:true},ChatNameConversationTabSheet:{isPermanent:true,isSheetWithInput:true},ChatEmployeeAwaySheet:{isPermanent:true,isSheetWithInput:false},ChatEventReminderTabSheet:{isPermanent:true,isSheetWithInput:false},ChatAppointmentBanner:{isPermanent:true,isSheetWithInput:false},ChatMontageSheet:{isPermanent:false,isSheetWithInput:false},ChatJoinCallSheet:{isPermanent:true,isSheetWithInput:false},FantaAddFriendsSheet:{isPermanent:true,isSheetWithInput:true},FantaAddMoreFriendsSheet:{isPermanent:true,isSheetWithInput:true},ChatRoomAssociatedObjectSheet:{isPermanent:false,isSheetWithInput:false},ChatWorkDoNotDisturbSheet:{isPermanent:false,isSheetWithInput:false},ChatMentorshipProgramSheet:{isPermanent:false,isSheetWithInput:false}},i={canReplaceOpenSheet:function j(k,l){var m=this.getType(l),n=this.isPermanent(l),o=this.isSheetWithInput(l),p=this.getType(k),q=this.isPermanent(k),r=this.isSheetWithInput(k);if(r)return!!(m!==p&&o);if(q&&!n)return false;if(p===this.sheets.ChatThreadIsMessageBlockedSheet)return false;return true},getType:function j(k){var l=k.getType||k.type&&k.type.getType||function(){return k},m=l.call(k);return m},isPermanent:function j(k){if(typeof k==="string"&&h[k])return h[k].isPermanent;var l=k.isPermanent||k.type&&k.type.isPermanent||function(){return false},j=l.call(k);return j},isSheetWithInput:function j(k){if(typeof k==="string"&&h[k])return h[k].isSheetWithInput;var l=k.isSheetWithInput||k.type&&k.type.isSheetWithInput||function(){return false},j=l.call(k);return j},sheets:c("keyMirror")(h)};f.exports=i}),null);
__d("MessageRequestUtils",["MessagingTag"],(function a(b,c,d,e,f,g){"use strict";var h={isMessageRequest:function i(j){return(j.folder===c("MessagingTag").PENDING||j.folder===c("MessagingTag").OTHER)&&j.can_reply},isFiltered:function i(j){return j.folder===c("MessagingTag").OTHER}};f.exports=h}),null);
__d("TimeSpentRoomTypeEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({GROUP:"GROUP",EVENT:"EVENT"})}),null);
__d("MessageThreadAssociatedObjectUtils",["TimeSpentRoomTypeEnum"],(function a(b,c,d,e,f,g){"use strict";var h={shouldRender:function i(j){return j&&j.room_type===c("TimeSpentRoomTypeEnum").GROUP&&!j.is_workplace_community},isLinkedToGroupChat:function i(j){return j&&j.room_type===c("TimeSpentRoomTypeEnum").GROUP&&!j.is_workplace_community}};f.exports=h}),null);
__d("MessengerApprovalModeTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({OPEN:0,APPROVALS:1})}),null);
__d("MessengerGroupAdminModelStatus",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({REQUIRED:"required",OPTIONAL:"optional",NOT_SUPPORTED:"not_supported"})}),null);
__d("MessengerJoinableModeType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PRIVATE:0,JOINABLE:1})}),null);
__d("MessengerParticipantAddModeTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADD:"ADD",INVITE:"INVITE",ADD_INVITE:"ADD_INVITE"})}),null);
__d("MessengerAdminGroupUtils",["fbt","CurrentUser","MercuryConfig","MercuryIDs","MessageThreadAssociatedObjectUtils","MessagingSourceEnum","MessageRequestUtils","MessengerApprovalModeTypes","MessengerGroupAdminModelStatus","MessengerJoinableModeType","MessengerParticipantAddModeTypes","QE2Logger","WorkModeConfig","gkx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i="messenger_use_new_group_participant_suggestion_ranking",j="show_nullstate_chat_tab_composer",k="show_nullstate_chat_tab_group_chat",l={isJoinableAndOpenThread:function m(n){return this.isJoinableThread(n)&&this.isApprovalOpenThread(n)},isJoinableAndApprovalRequiredThread:function m(n){return!!(this.isJoinableThread(n)&&n&&n.approval_mode===c("MessengerApprovalModeTypes").APPROVALS)},isWorkGroupSyncedChat:function m(n){return!!(c("gkx")("AT7fEWlWLwzcomQ12uRE_cG5HZJE7FbXXRCfPurxhw8vIpN6D0E7mGAi-hDkDV8fg1mjxj-jQMaCESDTVOkEzzqV")&&n&&n.is_thread_queue_enabled===true&&n.joinable_mode&&n.joinable_mode.mode===c("MessengerJoinableModeType").JOINABLE&&c("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(n.associated_object))},isWorkSyncedChatThreadCreationMessage:function m(n){return!!(n.log_message_data&&n.log_message_data.name&&n.tags&&n.tags.indexOf(c("MessagingSourceEnum").WORK_GROUP_SYNCED_CHAT_CREATION)!==-1)},shouldAddToApprovalQueue:function m(n,o){return!!(this.isJoinableAndApprovalRequiredThread(n)&&n&&!l.isAdmin(n.admin_ids,o))},isJoinableThread:function m(n){return!!(c("gkx")("AT5xrCi08i7kM3hip_Bf4sUgmdKPV1QphRx_J6kDVSso_LwnuXnsPyhq98JRQV_MqHjleZ_pelk8UHK4mDklEDU4gdH-DgPi3glxyQ2_7CHTgw")&&n&&n.is_thread_queue_enabled===true&&n.joinable_mode&&n.joinable_mode.mode===c("MessengerJoinableModeType").JOINABLE)},isGroupChat:function m(n){return!!(n&&c("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(n.associated_object))},shouldInvite:function m(n){return!!(c("gkx")("AT5xrCi08i7kM3hip_Bf4sUgmdKPV1QphRx_J6kDVSso_LwnuXnsPyhq98JRQV_MqHjleZ_pelk8UHK4mDklEDU4gdH-DgPi3glxyQ2_7CHTgw")&&n&&n.participant_add_mode===c("MessengerParticipantAddModeTypes").INVITE)},isApprovalOpenThread:function m(n){return!!(c("gkx")("AT5xrCi08i7kM3hip_Bf4sUgmdKPV1QphRx_J6kDVSso_LwnuXnsPyhq98JRQV_MqHjleZ_pelk8UHK4mDklEDU4gdH-DgPi3glxyQ2_7CHTgw")&&n&&n.approval_mode===c("MessengerApprovalModeTypes").OPEN)},isAdminRequired:function m(n){return!!(n&&n.admin_model_status===c("MessengerGroupAdminModelStatus").REQUIRED)},isOwner:function m(n,o){return n&&(this.isJoinableThread(o)||this.canSeeAdminV2Feature(o))},canSeeAdminV2Feature:function m(n){return c("gkx")("AT40OYqleZgx4_fLMr8MfXL_p194P9S4sUc6KbJKgvwElmT2Aj8TCRUAE4QBlOnOrqktka6w0qRv70XxEE3mR93T57P4MxmwmjYSU_ecGje_hg")&&this.isAdminRequired(n)},canSeeJoinableGroupOptions:function m(n){var o=c("WorkModeConfig").is_work_user;return!o&&this.isJoinableThread(n)},canSeeGroupOptionsSection:function m(n,o){var p=c("WorkModeConfig").is_work_user,q=this.isAdmin(n.admin_ids,o);return!p&&(this.isJoinableThread(n)||q&&this.canSeeAdminV2Feature(n))},canSeeBotsInGroupTypeahead:function m(){var n=c("CurrentUser").isWorkUser();return n&&c("gkx")("AT5GhC4rylRpYKpnZf2oEtsedOSc0WCJLB5V8z6-mqCNieSKORSJnqenUlgYVRpQaRNASrJq2SeIYY3m4QNhPBlK")},canMakeOthersAdmins:function m(n,o,p){return this.isOwner(n,p)&&!o},canMakeSelfAdmin:function m(n,o){return(this.isJoinableThread(o)||this.isAdminRequired(o))&&o.admin_ids.length===0&&n},canRemoveAdmin:function m(n,o,p){if(this.isAdminRequired(p)&&p.admin_ids.length===1)return false;return this.isOwner(n,p)&&o},canRemoveFromGroup:function m(n,o){if(this.isAdminRequired(o))return n;return this.isOwner(n,o)||!this.isJoinableThread(o)},showJoinableLink:function m(n){var o=!!(n&&n.joinable_mode&&n.joinable_mode.link),p=l.isJoinableThread(n);return p&&o},showJoinableApprovalToggle:function m(n,o){if(n.associated_object&&!n.associated_object.approval_mode_toggleable)return false;var p=l.isAdmin(n.admin_ids,o);return l.isOwner(p,n)},showApprovalQueue:function m(n,o){var p=l.isAdmin(n.admin_ids,o),q=l.isOwner(p,n),r=this.getPendingRequestNumber(n);if(n&&this.isAdminRequired(n))return this.isAdminRequired(n)&&q&&r>0;else{var s=l.isJoinableAndApprovalRequiredThread(n);return s&&q&&r>0}},showParticipantsModal:function m(n,o,p){return this.isJoinableThread(p)&&!n&&!o},useNewGroupMemberSuggestionRanking:function m(){c("QE2Logger").logExposureForUser(i);return c("MercuryConfig").MessengerNewGroupParticipantSuggestionQE},showDefaultListForNewPersonAddChatTab:function m(){c("QE2Logger").logExposureForUser(k);return c("MercuryConfig").ChatGroupChat},showDefaultListForNewChatTab:function m(){c("QE2Logger").logExposureForUser(j);return c("MercuryConfig").ChatComposer},canUpdateThreadCustomization:function m(n,o){var p=l.isJoinableThread(n),q=l.isAdmin(n.admin_ids,o),r=c("MessageRequestUtils").isMessageRequest(n);return n.is_subscribed&&!r&&(!p||q)},isAdmin:function m(n,o){if(!n)return false;if(c("MercuryIDs").isValid(o))return n.indexOf(c("MercuryIDs").getUserIDFromParticipantID(o))!==-1;return n.indexOf(o)!==-1},getLeaveGroupBodyText:function m(n,o){return this.isOwner(n,o)?h._("Leaving this group will remove you as an owner and allow other members to manage the group. You will no longer be able to send or receive new messages."):h._("You will stop receiving messages from this conversation and people will see that you left.")},getLeaveGroupTitleText:function m(n,o){return this.isOwner(n,o)?h._("Leave this conversation?"):h._("Leave Conversation?")},getLeaveGroupButtonText:function m(n,o){return this.isOwner(n,o)?h._("Leave conversation"):h._("Leave")},getMakeOwnerBodyText:function m(n,o,p){if(n)return o?h._("As a group admin, you will be able to manage who can join and customize this conversation."):h._("As a group admin, \"{owner's name}\" will be able to manage who can join and customize this conversation.",[h._param("owner's name",p)]);else return o?h._("As a group owner, you will be able to manage group ownership and remove members from the conversation. Only owners will be able to add other owners."):h._("As a group owner, \"{owner's name}\" will be able to manage group ownership and remove members from the conversation. They will be able to remove ownership from other owners.",[h._param("owner's name",p)])},getMakeOwnerTitleText:function m(n,o){if(n)return o?h._("Become group admin?"):h._("Add group admin?");else return o?h._("Become group owner?"):h._("Add group owner?")},getMakeOwnerButtonText:function m(n,o){if(n)return o?h._("Become admin"):h._("Make admin");else return o?h._("Become owner"):h._("Make owner")},getRemoveOwnerBodyText:function m(n,o,p,q){if(o&&p)return n?null:h._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group. Any other member will be able to own the group.");else if(o&&!p)return n?h._("You will no longer be able to manage who can join and customize this conversation."):h._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group.");else return n?h._("\"{owner's name}\" will no longer be able to manage who can join and customize this conversation.",[h._param("owner's name",q)]):h._("\"{owner's name}\" will no longer manage group ownership and remove members from the conversation. They will still be a participant in the group.",[h._param("owner's name",q)])},getRemoveOwnerTitleText:function m(n){return n?h._("Remove as group admin?"):h._("Remove as group owner?")},getRemoveOwnerButtonText:function m(n){return n?h._("Remove"):h._("Remove owner")},getPendingRequestNumber:function m(n){if(n&&n.approval_queue_ids&&n.approval_queue_ids.length)return n.approval_queue_ids.length;else if(n&&this.isAdminRequired(n)&&n.group_approval_queue&&n.group_approval_queue.length)return n.group_approval_queue.length;return 0}};f.exports=l}),null);
__d("MessengerRoomPrivacyMode",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({WHITELISTED_MODE:0,PUBLIC_MODE:1})}),null);
__d("FantaComposeViewReducers",["Bootloader","FantaGetMessageActions","FantaTabSheetActions","MercuryDataSourceWrapper","MercurySheetPolicy","MercuryTypeaheadConstants","MessengerRoomPrivacyMode","MessengerAdminGroupUtils","ifRequired"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FantaGetMessageActions").Types,i=c("FantaTabSheetActions").Types;function j(r,s){switch(s.type){case h.ON_GET_THREAD_RESPONSE:case h.ON_GET_THREAD_PREVIEW_RESPONSE:var t=s.thread,u=s.tabID||t.thread_id;r=k(r,t,u)}return r}function k(r,s,t){if(s.participants.length===0){r=m(r,t,s);r=p(r,t,c("MercurySheetPolicy").sheets.FantaAddFriendsSheet)}return r}function l(r,s){switch(s.type){case h.ON_BOOTLOAD_TYPEAHEAD:var t=s.thread,u=t.thread_id;r=m(r,u,t)}return r}function m(r,s,t){__p&&__p();var u=r.mercury.tabContents.get(s);if(!u||u.typeahead)return r;c("ifRequired")("ChatTabTypeaheadRenderer",function(v){__p&&__p();c("ifRequired")("ContextualTypeaheadView",function(w){__p&&__p();c("ifRequired")("MercuryTypeahead",function(x){__p&&__p();if(!r.mercury.tabContents.get(s))return;var y=!!(t&&t.participants&&t.participants.length===0),z=!!(t&&t.associated_object&&t.associated_object.privacy_mode===c("MessengerRoomPrivacyMode").WHITELISTED_MODE),A=y?c("MercuryDataSourceWrapper").chat_typeahead_source:z?c("MercuryDataSourceWrapper").chat_add_people_froup_source:c("MercuryDataSourceWrapper").chat_add_people_source;A.setShowThreads(y);if(y)A.setShowDefaultList(c("MessengerAdminGroupUtils").showDefaultListForNewChatTab());else if(!z)A.setShowDefaultList(c("MessengerAdminGroupUtils").showDefaultListForNewPersonAddChatTab());if(z)A.setQueryData({thread_id:t.thread_fbid});var B=new x(A,w);B.setViewOption("renderer",v);B.setExcludedParticipantsFromThreadMeta(t);u=u.merge({typeahead:B});r=r.setIn(["mercury","tabContents",s],u)},function(){return o(s,t)})},function(){return o(s,t)})},function(){return o(s,t)});return r}function n(r,s){switch(s.type){case i.OPEN_ADD_MORE_FRIENDS_SHEET:var t=s.tabID,u=r.mercury.tabContents.get(t).thread;if(u){r=m(r,t,u);return p(r,s.tabID,c("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet)}}return r}function o(r,s){c("Bootloader").loadModules(["ChatTabTypeaheadRenderer","ContextualTypeaheadView","MercuryTypeahead"],function(t,u,v){c("FantaGetMessageActions").onBootloadTypeahead(r,s)},"FantaComposeViewReducers")}function p(r,s,t){var u=r.mercury.tabContents.get(s),v=r.tabGroup.tabs.get(s);if(!v||!u)return r;var w=u,x=w.openSheet;if(x&&!c("MercurySheetPolicy").canReplaceOpenSheet(x,t))return r;u=u.merge({openSheet:t});r=r.setIn(["mercury","tabContents",s],u);return r}function q(r,s){switch(s.type){case h.ADD_PARTICIPANTS:var t=s.tokens,u=s.tabID,v=t.length===1&&t[0].getInfo().render_type===c("MercuryTypeaheadConstants").THREAD_TYPE;if(!v)return p(r,u,c("MercurySheetPolicy").sheets.FantaAddFriendsSheet)}return r}f.exports={addParticipants:q,onBootloadTypeahead:l,onGetThreadResponse:j,openAddMoreFriends:n}}),null);
__d("FantaReducersCookie",["FantaMessageActions","FantaTabActions","PresenceState","throttle"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FantaMessageActions").Types,i=c("FantaTabActions").Types,j=c("throttle").acrossTransitions(c("PresenceState").doSync,500);function k(n,o){switch(o.type){case h.RECEIVED_NEW_MESSAGE:case i.CLOSE_ALL_TABS:case i.CLOSE_AND_TAB_NEXT:case i.CLOSE_TAB:case i.DELETE_TAB:case i.MINIMIZE_ALL_TABS:case i.MINIMIZE_TAB:case i.OPEN_TAB:case i.OPEN_TAB_WITH_INTERSTITIAL_DATA:case i.REPLACE_TAB:case i.UNMINIMIZE_TAB:j();return m(n)}return n}function l(n,o){switch(o.type){case i.LOAD_FROM_DATA:var p=n.tabGroup,q=o.tabData,r=p.updatedTime,s=r>=q.updatedTime||q.updatedTime===undefined?r:q.updatedTime;return n.mergeIn(["tabGroup"],{updatedTime:s})}return n}function m(n){return n.mergeIn(["tabGroup"],{updatedTime:Date.now()})}f.exports={updateCookie:k,loadFromData:l}}),null);
__d("FantaReducersDockCalculator",["Arbiter","FantaTabActions","FantaMessageActions","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FantaTabActions").Types,i=c("FantaMessageActions").Types,j=null;function k(n){j=n;c("setImmediate")(function(){c("Arbiter").inform("FantaReducersDockCalculator/shouldRecalculate")})}function l(n){__p&&__p();if(!j||n.size!==j.size)k(n);else{var o=false;n.forEach(function(p){var q=j&&j.get(p.id);if(!q||p.isMinimized!==q.isMinimized)o=true});if(o)k(n)}}function m(n,o){var p=n.tabGroup.tabs;switch(o.type){case h.CLOSE_ALL_TABS:case h.CLOSE_AND_TAB_NEXT:case h.CLOSE_TAB:case h.DELETE_TAB:case h.MINIMIZE_ALL_TABS:case h.MINIMIZE_TAB:case h.OPEN_TAB:case h.OPEN_TAB_WITH_INTERSTITIAL_DATA:case h.UNMINIMIZE_TAB:k(p);break;case h.LOAD_FROM_DATA:case i.RECEIVED_NEW_MESSAGE:l(p);break}return n}f.exports={recalculateDock:m}}),null);
__d("FantaReducersLogging",["Bootloader","FantaTabActions","FantaTabSheetActions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FantaTabActions").Types,i=c("FantaTabSheetActions").Types;function j(l,m){__p&&__p();switch(m.type){case i.OPEN_ADD_MORE_FRIENDS_SHEET:case h.OPEN_TAB:if(m.type===h.OPEN_TAB&&m.entryPoint!=="compose_link"&&m.entryPoint!=="jewel_new_message")return l;var n=l.mercury.tabContents.get(m.tabID);if(n)c("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger","MessengerSecondarySearchFunnelConstants"],function(o,p){var q="";switch(m.entryPoint){case"compose_link":q=p.TAGS.SIDEBAR;break;case"jewel_new_message":q=p.TAGS.JEWEL;break}o.startFunnel(p.TAGS.WWW,p.TAGS.OMNIPICKER,q,m.type===i.OPEN_ADD_MORE_FRIENDS_SHEET?n.id:null,n.loggingID)},"FantaReducersLogging");break}return l}function k(l,m){switch(m.type){case h.CLOSE_ALL_TABS:case h.CLOSE_AND_TAB_NEXT:case h.CLOSE_TAB:case h.DELETE_TAB:case h.OPEN_TAB:case h.OPEN_TAB_WITH_INTERSTITIAL_DATA:var n=l.tabGroup.allowedRaisedTabs,o=l.tabGroup.getRaisedandUnraisedTabs(),p=o.raisedTabs,q=o.unraisedTabs,r=p.count(),s=r+q.count();c("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(t){new t().setAllowedRaisedTabs(n).setOpenTabs(s).setVisibleTabs(r).log()},"FantaReducersLogging")}return l}f.exports={updateVisibleTabs:k,logSearchEventsAfterAction:j}}),null);
__d("FantaAvailableStatus",["AvailableListConstants","ChatVisibility","MercuryIDs","PresenceStatus","ShortProfiles"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports={isAvailable:function h(i,j){var k=void 0,l=this.getStatus(i,j),m=c("MercuryIDs").getUserIDFromThreadID(j);if(m)k=c("ShortProfiles").getNow(m);return l===c("AvailableListConstants").ACTIVE&&(k===undefined||k===null||!k.is_messenger_only)},getStatus:function h(i,j){__p&&__p();var k=c("AvailableListConstants").OFFLINE,l=c("MercuryIDs").getUserIDFromThreadID(j);if(l)k=c("PresenceStatus").get(l);else if(i){var m=i.participants.map(function(n){return c("MercuryIDs").getUserIDFromParticipantID(n)});k=c("PresenceStatus").getGroup(m)}if(!c("ChatVisibility").isOnline())k=c("AvailableListConstants").OFFLINE;return k}}}),null);
__d("FantaTypeJoinableThread",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={admins:[],approvalMode:0,associatedObject:null,description:null,friendsInParticipants:[],imageURL:null,isViewerSubscribed:false,isWorkpaceChat:false,joinableMode:{mode:0,link:""},linkHash:"",participants:[],threadID:null,threadFBID:null,threadName:null};h=babelHelpers.inherits(k,c("immutable").Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("FantaTypeTabContents",["ChatPrivacyActionController","FantaGetMessageActions","FantaTypeComposer","immutable","ImmutableObject","MercuryIDs","emptyFunction","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j={composer:new(c("FantaTypeComposer"))(),hasFetchedAll:false,id:"",isMultiCompany:null,isScrolledToBottom:true,joinableInterstitialData:null,membershipParticipants:null,mentorship:null,messages:c("immutable").List(),messageStore:null,nullStateCTA:null,openSheet:null,pageIndicator:null,pageIndicatorDescription:null,privacyController:null,showContextBanner:false,showUnseenMessages:c("emptyFunction"),signatureID:null,thread:null,threadPreviewID:null,threadPreviewRecipients:null,timezoneInfo:null,typeahead:null,workAvailabilityHumanReadable:null,workAvailabilityStatus:null,loggingID:null};h=babelHelpers.inherits(k,c("immutable").Record(j));i=h&&h.prototype;function k(l){var m=void 0,n=c("MercuryIDs").getUserIDFromThreadID(l.id);if(n)m=new(c("ChatPrivacyActionController"))(n,function(o){c("setImmediate")(function(){c("FantaGetMessageActions").onPrivacyStateChange(l.id,o)})});i.constructor.call(this,babelHelpers["extends"]({privacyController:m},l))}f.exports=k}),null);
__d("WorkFocusMode",["invariant","WorkModeConfig","WorkUserAvailabilityStatusType","emptyFunction","ifRequired"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={},j={status:"AVAILABLE",end_date:0};if(c("WorkModeConfig").availability){j.status=c("WorkModeConfig").availability.status;j.end_date=c("WorkModeConfig").availability.end_date}f.exports={updateAvailability:function k(l,m){var n=Object.keys(c("WorkUserAvailabilityStatusType")).find(function(o){return c("WorkUserAvailabilityStatusType")[o]===l});typeof n==="string"||h(0);j.status=n;j.end_date=m},currentViewerInFocusMode:function k(l){__p&&__p();if(!c("WorkModeConfig").focus_messaging_enabled)return false;if(l){if(i[l])return false;var m=null;c("ifRequired")("MercuryThreads",function(o){m=o.get().getThreadMetaNow(l)},c("emptyFunction"));if(m&&m.bypass_focus_mode_until&&m.bypass_focus_mode_until>Date.now()/1e3)return false}var n=c("WorkUserAvailabilityStatusType")[j.status];if(n===c("WorkUserAvailabilityStatusType").FOCUS&&j.end_date*1e3>Date.now())return true;return false},addBypassFocusModeForThread:function k(l){i[l]=true},removeBypassFocusModeForThread:function k(l){i[l]=false}}}),null);
__d("FantaReducersMercury",["Arbiter","AsyncSignal","AvailableList","AvailableListConstants","Bootloader","FantaAvailableStatus","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTabSheetActions","FantaTypeJoinableThread","FantaTypeTabContents","JSLogger","MercuryIDs","MercuryThreadIDMap","TimeSlice","WorkFocusMode","getPageIDFromThreadID","ifRequired","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryThreadIDMap").get(),i=c("JSLogger").create("FantaReducersMercury"),j=c("FantaMessageActions").Types,k=c("FantaTabActions").Types,l=c("FantaGetMessageActions").Types,m=1;function n(){return Math.floor(Math.random()*2147483648).toString(16)}function o(H,I){__p&&__p();switch(I.type){case k.OPEN_TAB:case k.OPEN_TAB_WITH_INTERSTITIAL_DATA:var J=I.tabID;c("ifRequired")("FantaTabsReactApp",function(N){if(!c("MercuryIDs").isValidThreadID(J)){H=H.deleteIn(["tabGroup","tabs",J]);w(J)}else E(H,J)},function(){return H=p(H,I.tabID)});H=r(H,J);var K=n(),L=H.mercury.tabContents.get(J);L=L.merge({signatureID:K,loggingID:m++});H=H.setIn(["mercury","tabContents",J],L);new(c("AsyncSignal"))("/ajax/chat/opentab_tracking.php",{threadID:J,userID:c("MercuryIDs").getUserIDFromThreadID(J),signatureID:K}).send();if(I.interstitialData){var M=new(c("FantaTypeJoinableThread"))(I.interstitialData);L=L.merge({joinableInterstitialData:M});H=H.setIn(["mercury","tabContents",J],L)}c("Arbiter").inform("jewel/hide");return H}return H}function p(H,I){c("ifRequired")("FantaTabsSlimApp",function(J){if(!c("MercuryIDs").isValidThreadID(I)){H=H.deleteIn(["tabGroup","tabs",I]);w(I)}else E(H,I)},function(){E(H,I)});return H}function q(H,I){switch(I.type){case j.RECEIVED_NEW_MESSAGE:H=r(H,I.tabID)}return H}function r(H,I){__p&&__p();var J,K=H.mercury.tabContents.get(I);if(!K){var J=function(){__p&&__p();var L=c("getPageIDFromThreadID")(I);if(L)c("Bootloader").loadModules(["PagesMercuryChatTabIndicatorHandler"],function(M){var N=c("AvailableListConstants").OFFLINE,O=new M(L,N,function(P){c("setImmediate")(function(){c("FantaTabSheetActions").openPageIndicatorSheet(I,P)})},function(){c("setImmediate")(function(){return c("FantaTabSheetActions").closePageIndicatorSheet(I)})});c("setImmediate")(function(){c("FantaTabSheetActions").onIsPageTab(I,O)});O.checkResponsiveness()},"FantaReducersMercury");return{v:H.setIn(["mercury","tabContents",I],new(c("FantaTypeTabContents"))({id:I}))}}();if(typeof J==="object")return J.v}return H}function s(H,I){switch(I.type){case k.REPLACE_TAB:H=v(H,I.newTabID);H=r(H,I.newTabID);return H}return H}function t(H,I){switch(I.type){case l.ADD_PARTICIPANTS:var J=I.tabID,K=I.previewTabID,L=H.mercury.tabContents.get(J);if(!L)return H;L=L.merge({threadPreviewID:K});H=H.setIn(["mercury","tabContents",J],L);return H}return H}function u(H,I){switch(I.type){case l.CLEAR_PARTICIPANTS:var J=I.tabID,K=H.mercury.tabContents.get(J),L=K?K.loggingID:null;H=H.setIn(["mercury","tabContents",J],new(c("FantaTypeTabContents"))({id:J,loggingID:L}))}return H}function v(H,I){__p&&__p();c("ifRequired")("FantaTabsReactApp",function(J){if(!c("MercuryIDs").isValidThreadID(I)){H=H.deleteIn(["tabGroup","tabs",I]);w(I)}},function(){c("ifRequired")("FantaTabsSlimApp",function(J){if(!c("MercuryIDs").isValidThreadID(I)){H=H.deleteIn(["tabGroup","tabs",I]);w(I)}})});return H}function w(H){h.getClientIDFromServerID(H,function(I){return c("setImmediate")(function(){if(c("MercuryIDs").isValidThreadID(I))c("FantaTabActions").openTab(I);else i.error("invalid id",H)})})}function x(H,I){switch(I.type){case k.FOCUS_TAB:E(H,I.tabID)}return H}function y(H,I){switch(I.type){case k.CLOSE_TAB:var J=I.tabID;H=A(H,J)}return H}function z(H,I){switch(I.type){case k.DELETE_TAB:var J=I.tabID;H=A(H,J);H=H.deleteIn(["mercury","tabContents",J])}return H}function A(H,I){c("ifRequired")("MessengerVideoAutoplayActions",function(J){J.deleteThread(I)});c("WorkFocusMode")&&c("WorkFocusMode").removeBypassFocusModeForThread(I);return H}function B(H,I){switch(I.type){case k.CLOSE_ALL_TABS:c("ifRequired")("MessengerVideoAutoplayActions",function(J){J.deleteAllThreads()});return H}return H}function C(H,I){switch(I.type){case k.FOCUS_NEXT_TAB:case k.FOCUS_PREVIOUS_TAB:case k.CLOSE_AND_TAB_NEXT:var J=H.tabGroup.focusedTabID;if(J)E(H,J)}return H}function D(H,I){switch(I.type){case k.CLOSE_AND_TAB_NEXT:var J=I.tabID;c("WorkFocusMode")&&c("WorkFocusMode").removeBypassFocusModeForThread(J)}return H}function E(H,I){__p&&__p();var J=c("MercuryIDs").getUserIDFromThreadID(I);if(J){var K=function K(){c("AvailableList").updateForID(J)};c("TimeSlice").guard(K,"superfluous request to first open DD",{propagationType:c("TimeSlice").PropagationType.ORPHAN})()}var L=H.mercury.tabContents.get(I);if(L){var M=L.thread,N=L.pageIndicator;if(N)N.notifyPageOnlineStatusChanged(c("FantaAvailableStatus").getStatus(M,I))}}function F(H,I){switch(I.type){case k.UNMINIMIZE_TAB:E(H,I.tabID)}return H}function G(H,I){__p&&__p();switch(I.type){case k.LOAD_FROM_DATA:for(var J=H.tabGroup.tabs.keys(),K=Array.isArray(J),L=0,J=K?J:J[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var M;if(K){if(L>=J.length)break;M=J[L++]}else{L=J.next();if(L.done)break;M=L.value}var N=M;H=r(H,N)}}return H}f.exports={addParticipants:t,clearParticipants:u,closeAllTabs:B,closeAndTabNext:D,closeTab:y,deleteTab:z,focusTab:x,focusTabEvents:C,loadFromData:G,openTab:o,receivedNewMessage:q,replaceTab:s,unminimizeTab:F}}),null);
__d("FantaReducersMessages",["CurrentUser","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTypeComposer","MercuryBrowserAlerts","MercuryParticipants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FantaMessageActions").Types,i=c("FantaTabActions").Types,j=c("FantaGetMessageActions").Types;function k(r,s){switch(s.type){case h.RECEIVED_NEW_MESSAGE:var t=s.message;c("MercuryBrowserAlerts").messageReceived(t);return r}return r}function l(r,s){switch(s.type){case h.COMPOSER_TEXT_UPDATE:var t=s.composer,u=s.message,v=s.threadID,w=r.mercury.tabContents.get(v);if(!w||w&&w.composer.version!==t.version)return r;return r.mergeIn(["mercury","tabContents",v,"composer"],{text:u})}return r}function m(r,s){switch(s.type){case i.CLOSE_TAB:case i.CLOSE_AND_TAB_NEXT:if(!r.mercury.tabContents.get(s.tabID))return r;return r.setIn(["mercury","tabContents",s.tabID,"composer"],new(c("FantaTypeComposer"))())}return r}function n(r,s){switch(s.type){case i.CLOSE_ALL_TABS:var t=r.mercury.tabContents;t.forEach(function(u){var v=u.id;r=r.setIn(["mercury","tabContents",v,"composer"],new(c("FantaTypeComposer"))())});return r}return r}function o(r,s){switch(s.type){case i.SCROLL_BOTTOM_CHANGED:var t=s.tabID,u=s.isScrolledToBottom,p=s.showUnseenMessages,v=r.mercury.tabContents.get(t);if(!v)return r;v=v.merge({isScrolledToBottom:u,showUnseenMessages:p});r=r.setIn(["mercury","tabContents",t],v)}return r}function p(r,s){switch(s.type){case i.SHOW_UNSEEN_MESSAGES:var t=s.tabID,u=r.mercury.tabContents.get(t);if(u)u.showUnseenMessages()}return r}function q(r,s){__p&&__p();switch(s.type){case j.ON_GET_THREAD_RESPONSE:var t=s.thread,u=t.thread_id,v=r.mercury.tabContents.get(u);if(!v)return r;var w=null;if(c("CurrentUser").isWorkUser()&&t.participants)w=t.participants.map(c("MercuryParticipants").getOrFetch,c("MercuryParticipants")).find(function(x){return x&&x.is_coworker===false})!==undefined;v=v.merge({thread:t,isMultiCompany:w});r=r.setIn(["mercury","tabContents",u],v);break}return r}f.exports={closeAllTabs:n,closeTab:m,composerTextUpdate:l,onGetThreadResponse:q,receivedNewMessage:k,scrollBottomChanged:o,showUnseenMessages:p}}),null);
__d("MessengerSecondarySearchFunnelConstants",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({END:"end",IMPRESSIONS:"impressions",MICRO_SESSION_END:"micro_session_end",MICRO_SESSION_START:"micro_session_start",QUERY_CHANGED:"query_changed",RESULT_SELECTED:"result_selected",SOURCE_ENDED:"source_ended",SOURCE_STARTED:"source_started",START:"start",TOKEN_REMOVED:"token_removed"}),i=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",WWW:"www",BROADCAST:"broadcast",GROUP_CREATION:"group_creation",OMNIPICKER:"omnipicker",SHARE:"share",JEWEL:"jewel",SIDEBAR:"sidebar",ACTION:"action",ABANDON:"abandon",CREATE_GROUP:"create_group",ENTER_THREAD:"enter_thread",SEND:"send",COMPLETED:"completed",COMPLETED_NOT_USED:"completed_not_used",FAILED:"failed",LOCAL:"local",LOCAL_AND_SERVER:"local_and_server",SERVER:"server"});f.exports={FUNNEL_NAME:"MESSENGER_SECONDARY_SEARCH_FUNNEL",EVENTS:h,TAGS:i}}),null);
__d("FantaReducersPreLogging",["Bootloader","FantaMessageActions","FantaTabActions","FantaTabSheetActions","MessengerSecondarySearchFunnelConstants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FantaTabActions").Types,i=c("FantaTabSheetActions").Types,j=c("FantaMessageActions").Types,k=c("MessengerSecondarySearchFunnelConstants").TAGS,l=k.ABANDON,m=k.SEND,n=k.ACTION;function o(q,r){switch(r.type){case h.CLOSE_TAB:case h.CLOSE_AND_TAB_NEXT:case i.CLOSE_ADD_FRIENDS_SHEET:case i.CLOSE_ADD_MORE_FRIENDS_SHEET:q=p(q,r.tabID,n,l);break;case h.CLOSE_ALL_TABS:q.mercury.tabContents.forEach(function(s){q=p(q,s.id,n,l)});break;case j.SEND_GROUP_MESSAGE:case j.SEND_HOT_LIKE:case j.SEND_MESSAGE:case j.SEND_PHOTO:case j.SEND_STICKER:q=p(q,r.threadID,n,m);break}return q}function p(q,r,s,t){var u=q.mercury.tabContents.get(r),v=u?u.loggingID:null,w=u?u.threadPreviewID:null;if(v)c("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger"],function(x){q=q.setIn(["mercury","tabContents",r],u.merge({loggingID:null}));x.endFunnel(s,t,v,w?w.split(":")[1]:null)},"FantaReducersPreLogging");return q}f.exports={logSearchEvents:o}}),null);
__d("FantaTypeTab",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={focusCounter:0,id:"",isHovered:false,isMinimized:false,openCounter:0,entryPoint:"unknown"};h=babelHelpers.inherits(k,c("immutable").Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("FantaTypeTabGroup",["FantaConst","immutable"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j={allowedRaisedTabs:c("FantaConst").DEFAULT_ALLOWED_RAISED_TABS,focusedTabID:null,tabs:c("immutable").Map({}),updatedTime:0},k=function k(n){return n.openCounter*-1},l=function l(n){return n.focusCounter*-1};h=babelHelpers.inherits(m,c("immutable").Record(j));i=h&&h.prototype;m.prototype.getRaisedandUnraisedTabs=function(){var n=this.tabs.sortBy(l),o=n.slice(this.allowedRaisedTabs),p=n.take(this.allowedRaisedTabs).sortBy(k);return{raisedTabs:p,unraisedTabs:o}};function m(){h.apply(this,arguments)}f.exports=m}),null);
__d("isWebMessengerURI",[],(function a(b,c,d,e,f,g){function h(i){return/^(\/messages)/.test(i.getPath())}f.exports=h}),null);
__d("FantaReducersTabs",["Bootloader","EventProfiler","FantaConst","FantaMessageActions","FantaTabActions","FantaTypeTab","FantaTypeTabGroup","LogHistory","MercuryThreads","PinnedConversationNubsConfig","TimeSlice","URI","isWebMessengerURI"],(function a(b,c,d,e,f,aa){"use strict";__p&&__p();var g=c("MercuryThreads").get(),h=c("FantaMessageActions").Types,i=c("FantaTabActions").Types,j="tab_",k=c("LogHistory").getInstance("fanta_tabs"),l=1,m=1,n=1;function o(O,P){switch(P.type){case i.OPEN_TAB:case i.OPEN_TAB_WITH_INTERSTITIAL_DATA:k.debug(P.type,JSON.stringify({id:P.tabID}));if(m===1)c("EventProfiler").tagCurrentActiveInteractionsAs("FirstChatTabOpen");return v(O,P.tabID||j+n++,true,P.entryPoint)}return O}function p(O,P){__p&&__p();switch(P.type){case i.REPLACE_TAB:var Q=P.tabID,R=P.newTabID,S=O.tabGroup,T=S.tabs,U=T.get(Q);k.debug(P.type,JSON.stringify({id:Q,isExisting:!!U,newID:R}));if(U){var V=U.id===O.tabGroup.focusedTabID;O=O.setIn(["tabGroup","tabs",R],U.merge({id:R})).deleteIn(["tabGroup","tabs",Q]);return v(O,R,V,"replace_tab")}return v(O,R,false,"replace_tab")}return O}function q(O,P){switch(P.type){case i.MINIMIZE_TAB:return w(O,P.tabID,true)}return O}function r(O,P){switch(P.type){case i.UNMINIMIZE_TAB:return w(O,P.tabID,false)}return O}function s(O,P){switch(P.type){case i.FOCUS_TAB:var Q=P.tabID;return D(O,Q)}return O}function t(O,P){switch(P.type){case i.BLUR_TAB:return E(O,P.tabID)}return O}function u(O,P){__p&&__p();var Q;switch(P.type){case h.RECEIVED_NEW_MESSAGE:var R=P.tabID,o=O.tabGroup.tabs.get(R);k.debug(P.type,JSON.stringify({id:R,isOpen:!!o}));if(!o){var Q=function(){__p&&__p();var S=O.tabGroup.focusedTabID;O=v(O,R,false,"message_received");var T=O.tabGroup.allowedRaisedTabs,U=O.tabGroup.getRaisedandUnraisedTabs(),V=U.raisedTabs,W=U.unraisedTabs,X=V.count(),Y=X+W.count();c("TimeSlice").guard(function(){c("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function($){new $().setAllowedRaisedTabs(T).setOpenTabs(Y).setVisibleTabs(X).log()},"FantaReducersTabs")},"name",{propagationType:c("TimeSlice").PropagationType.ORPHAN})();var Z=c("URI").getNextURI();if(c("isWebMessengerURI")(Z))return{v:O=w(O,R,true)};else if(S)return{v:D(O,S)}}();if(typeof Q==="object")return Q.v}}return O}function v(O,P,Q){__p&&__p();var R=arguments.length<=3||arguments[3]===undefined?"unknown":arguments[3],S=O.tabGroup,T=S.tabs,U=T.get(P);if(!U){U=new(c("FantaTypeTab"))({id:P,focusCounter:l,openCounter:m++,entryPoint:R});O=O.setIn(["tabGroup","tabs",P],U)}else if(U.isMinimized&&Q)O=w(O,P,false);if(Q)return D(O,P);return O}function w(O,P,Q){var R=O.tabGroup,S=R.tabs.get(P);if(S)O=O.mergeIn(["tabGroup","tabs",P],{isMinimized:Q});return O}function x(O,P){__p&&__p();switch(P.type){case i.MINIMIZE_ALL_TABS:for(var Q=O.tabGroup.tabs.keys(),R=Array.isArray(Q),S=0,Q=R?Q:Q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var T;if(R){if(S>=Q.length)break;T=Q[S++]}else{S=Q.next();if(S.done)break;T=S.value}var U=T;O=w(O,U,true)}return O}return O}function y(O,P){switch(P.type){case i.CLOSE_TAB:case i.DELETE_TAB:var Q=P.tabID;k.debug(P.type,JSON.stringify({id:Q}));return A(O,Q)}return O}function z(O,P){switch(P.type){case h.SEND_GROUP_MESSAGE:var Q=P.threadID,R=g.isEmptyLocalThread(Q);if(R)return A(O,Q)}return O}function A(O,P){O=E(O,P);return O.deleteIn(["tabGroup","tabs",P])}function B(O,P){switch(P.type){case i.CLOSE_ALL_TABS:k.debug(P.type);O=E(O,O.tabGroup.focusedTabID);return O.setIn(["tabGroup","tabs"],O.tabGroup.tabs.clear())}return O}function C(O,P){switch(P.type){case i.CLOSE_AND_TAB_NEXT:k.debug(P.type,JSON.stringify({id:P.tabID}));O=A(O,P.tabID);return M(O)}return O}function D(O,P){var Q=arguments.length<=2||arguments[2]===undefined?false:arguments[2],R=O.tabGroup,S=R.tabs.get(P);if(S)O=O.mergeIn(["tabGroup","tabs",P],{focusCounter:l++});var T=Q?null:P;O=O.mergeIn(["tabGroup"],{focusedTabID:T});return O}function E(O,P){if(O.tabGroup.focusedTabID===P)return O.mergeIn(["tabGroup"],{focusedTabID:null});return O}function F(O,P){switch(P.type){case i.HOVERED_TAB:var Q=P.tabID;return H(O,Q,true)}return O}function G(O,P){switch(P.type){case i.UNHOVERED_TAB:var Q=P.tabID;return H(O,Q,false)}return O}function H(O,P,Q){var R=O.tabGroup,S=R.tabs.get(P);if(S)O=O.mergeIn(["tabGroup","tabs",P],{isHovered:Q});return O}function I(O,P){__p&&__p();var Q;switch(P.type){case i.SET_ALLOWED_RAISED_TABS:var R=P.allowedRaisedTabs,S=O.tabGroup.allowedRaisedTabs;if(R!==S)(function(){k.debug(P.type,JSON.stringify({count:R}));if(!c("PinnedConversationNubsConfig").chatTabTypingPriority)R=Math.max(1,R);var T=O.tabGroup.tabs.count(),U=T>R?R:T,V=R>S&&T>S,W=R<S&&T>R;if(V||W)c("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(X){new X().setAllowedRaisedTabs(R).setOpenTabs(T).setVisibleTabs(U).log()},"FantaReducersTabs")})();return J(O,R)}return O}function J(O){var P=arguments.length<=1||arguments[1]===undefined?c("FantaConst").DEFAULT_ALLOWED_RAISED_TABS:arguments[1];if(P===O.tabGroup.allowedRaisedTabs)return O;if(!c("PinnedConversationNubsConfig").chatTabTypingPriority)P=Math.max(1,P);return O.mergeIn(["tabGroup"],{allowedRaisedTabs:P})}function K(O,P){__p&&__p();switch(P.type){case i.LOAD_FROM_DATA:var Q=O.tabGroup,R=P.tabData,S=Q.updatedTime;if(S>=R.updatedTime||R.updatedTime===undefined)return O;O=J(O.set("tabGroup",new(c("FantaTypeTabGroup"))()),Q.allowedRaisedTabs);var T=[];R.tabs.sort(function(U,V){return U.openCounter-V.openCounter}).forEach(function(U){T.push(U.id);O=v(O,U.id,false,"loaded_from_data");if(U.isMinimized)O=w(O,U.id,U.isMinimized)});R.tabs.sort(function(U,V){return U.focusCounter-V.focusCounter}).forEach(function(U){O=D(O,U.id,true)});k.debug(P.type,JSON.stringify({updatedTime:S,newerTime:R.updatedTime,opened:T}));O=R.focusedTabID?D(O,R.focusedTabID,true):E(O)}return O}function L(O,P){switch(P.type){case i.FOCUS_NEXT_TAB:return M(O)}return O}function M(O){__p&&__p();var P=O.tabGroup.focusedTabID,Q=O.tabGroup.getRaisedandUnraisedTabs(),R=Q.raisedTabs,S=R.count();if(S===0)return O;else if(R.count()===1)return D(O,R.first().id);var T=R.skipUntil(function(U){return U.id===P}).rest();if(T.count()===0)return D(O,R.first().id);else return D(O,T.first().id)}function N(O,P){__p&&__p();switch(P.type){case i.FOCUS_PREVIOUS_TAB:var Q=O.tabGroup.focusedTabID,R=O.tabGroup.getRaisedandUnraisedTabs(),S=R.raisedTabs;if(S.count()<2)return O;var T=S.reverse().skipUntil(function(U){return U.id===Q}).rest();if(T.count()===0)return D(O,S.last().id);else return D(O,T.first().id)}return O}f.exports={addParticipantsToLocalGroup:z,blurTab:t,closeAllTabs:B,closeAndTabNext:C,closeTab:y,focusNextTab:L,focusPreviousTab:N,focusTab:s,hoveredTab:F,loadFromData:K,minimizAllTabs:x,minimizeTab:q,openTab:o,receivedNewMessage:u,replaceTab:p,setAllowedRaisedTabs:I,unhoveredTab:G,unminimizeTab:r}}),null);
__d("FantaTypeMercuryState",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={tabContents:c("immutable").Map({})};h=babelHelpers.inherits(k,c("immutable").Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("FantaTypeAppState",["FantaTypeMercuryState","FantaTypeTabGroup","immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={tabGroup:new(c("FantaTypeTabGroup"))(),mercury:new(c("FantaTypeMercuryState"))()};h=babelHelpers.inherits(k,c("immutable").Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("FantaAppStore",["FantaComposeViewReducers","FantaDispatcher","FantaReducersCookie","FantaReducersDockCalculator","FantaReducersLogging","FantaReducersMercury","FantaReducersMessages","FantaReducersPreLogging","FantaReducersTabs","FantaTypeAppState","FluxReduceStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=[].concat(Object.values(c("FantaReducersPreLogging")),Object.values(c("FantaReducersTabs")),Object.values(c("FantaReducersMercury")),Object.values(c("FantaReducersMessages")),Object.values(c("FantaReducersDockCalculator")),Object.values(c("FantaReducersCookie")),Object.values(c("FantaComposeViewReducers")),Object.values(c("FantaReducersLogging")));h=babelHelpers.inherits(k,c("FluxReduceStore"));i=h&&h.prototype;function k(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.__moduleID=f.id,n}k.prototype.getInitialState=function(){return new(c("FantaTypeAppState"))()};k.prototype.ignoreReducer=function(m){var n=Object.values(m);j=j.filter(function(o){return!n.find(function(p){return p===o})})};k.prototype.addReducers=function(m){this.ignoreReducer(m);j=j.concat(Object.values(m))};k.prototype.reduce=function(m,n){return j.reduce(function(m,o){return o(m,n)},m)};var l=new k(c("FantaDispatcher"));f.exports=l}),null);
__d("FantaCookieUtil",["CurrentUser","FantaConst","MercuryIDs","MercuryThreads","MessengerDiscoveryEntryPoint","MercuryMessages","WorkModeConfig","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryThreads").get(),i={convertCookieData:function j(k,l,m){__p&&__p();var n={tabs:[],focusedTabID:null,updatedTime:0,interstitialData:m},o=[],p=this._getCookieKeys();k=k||{};if(k[p.tabs])o=k[p.tabs];o.forEach(function(u){n.tabs.push({id:u.i,isMinimized:!u.r,openCounter:u.o,focusCounter:u.f})});if(l)for(var q=l.tabs.values(),r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{s=q.next();if(s.done)break;t=s.value}var u=t;if(h.isEmptyLocalThread(u.id))n.tabs.push({id:u.id,isMinimized:u.isMinimized,openCounter:u.openCounter,focusCounter:u.focusCounter})}n.focusedTabID=k[p.focusedTabID];n.updatedTime=k[p.updatedTime];return n},createCookieData:function j(k,l){__p&&__p();var m=[],n=this._getCookieKeys();if(l[n.updatedTime]>k.updatedTime)return l;for(var o=k.tabs.values(),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r;if(!c("MercuryIDs").isLocalThread(s.id)&&!this._shouldDisableForCookie(s.id,s.entryPoint))m.push({i:s.id,r:s.isMinimized?undefined:1,o:s.openCounter,f:s.focusCounter})}l[n.tabs]=m;l[n.focusedTabID]=k.focusedTabID;l[n.updatedTime]=k.updatedTime;return l},_shouldDisableForCookie:function j(k,l){if(!l.includes(c("MessengerDiscoveryEntryPoint").FB_PAGE_USER_MESSAGE_PROMPT))return false;var m=c("MercuryMessages").getForFBID(c("CurrentUser").getID()),n=m.getThreadMessagesRangeNow(k,0,1)[0];return n===undefined&&c("gkx")("AT5yvaIVlO2OHqFIDWWRhRABINJAcxCp1ro66bHRcO0eEaLcqpagLVIr-zqdMYZpNoEnM0j8G8evTFI0zml2LudFjHJmYlaU_Y6yQ26Iu3tDvgUsS-yP2Aotk3FJ2AWnq4g")},_getCookieKeys:function j(){var k=c("WorkModeConfig").is_work_user;return{tabs:k?c("FantaConst").cookieIDs.WORK_COOKIE_ID:c("FantaConst").cookieIDs.PERSONAL_COOKIE_ID,focusedTabID:k?c("FantaConst").cookieIDs.WORK_FOCUS_COOKIE_ID:c("FantaConst").cookieIDs.PERSONAL_FOCUS_COOKIE_ID,updatedTime:k?c("FantaConst").cookieIDs.WORK_TIME_COOKIE_ID:c("FantaConst").cookieIDs.PERSONAL_TIME_COOKIE_ID}}};f.exports=i}),null);
__d("FantaMercuryThreadEventsBootloaded",["Bootloader","MercuryThreadInformer","MercuryThreads","MercuryViewer","WorkplaceChatHelper"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryThreadInformer").get(),i=c("MercuryThreads").get(),j={onMessagesReceived:function k(l){__p&&__p();if(c("WorkplaceChatHelper").suppressChatIfActiveOnDesktop())return;h.subscribe("messages-received",function(m,n){__p&&__p();var o,p=function p(q){__p&&__p();var r,s=n[q],t=function t(u){var v=s[u];if(v.author!=c("MercuryViewer").getID()){if(!v.is_unread)return"continue";i.getThreadMeta(q,function(w){c("Bootloader").loadModules(["ChatTabPolicy"],function(x){x.messageIsAllowed(w,v,function(){l(q,v)})},"FantaMercuryThreadEventsBootloaded")})}};for(var u=0;u<s.length;u++){var r=t(u);if(r==="continue")continue}};for(var q in n)p(q)})}};f.exports=j}),null);
__d("FantaTabViewportManager",["Arbiter","DockTabsViewportCalculator","DockTabsViewportFantaTabUtils","FantaTabActions","immutable","ifRequired","isWebMessengerURI","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=c("DockTabsViewportCalculator").getInstance(i);if(!j)return;j.registerFantaTabCallbacks({fantaTabModelStateGetter:function k(){var l=c("immutable").Map({});c("ifRequired")("FantaAppStore",function(m){l=m.getState().tabGroup.tabs});return l},onAvailableWidthChanged:function k(l){c("setImmediate")(function(){c("FantaTabActions").setAllowedRaisedTabs(c("DockTabsViewportFantaTabUtils").getTabCountToFitWidth(l))})}});c("Arbiter").subscribe("FantaReducersDockCalculator/shouldRecalculate",function(){j.forceRecalculateChatTabs()});j.forceRecalculateFBDockWidth();c("Arbiter").subscribe("page_transition",function(k,l){if(c("isWebMessengerURI")(l.uri))c("setImmediate")(function(){return c("FantaTabActions").minimizeAllTabs()})})}f.exports={init:h}}),null);
__d("HotLikeSound",["MercurySoundsConfig","SoundPlayer","StickerConstants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=[c("MercurySoundsConfig").hot_like_grow_mp3_url,c("MercurySoundsConfig").hot_like_grow_ogg_url],i=[c("MercurySoundsConfig").hot_like_pop_mp3_url,c("MercurySoundsConfig").hot_like_pop_ogg_url],j=[c("MercurySoundsConfig").hot_like_outgoing_small_mp3_url,c("MercurySoundsConfig").hot_like_outgoing_small_ogg_url],k=[c("MercurySoundsConfig").hot_like_outgoing_medium_mp3_url,c("MercurySoundsConfig").hot_like_outgoing_medium_ogg_url],l=[c("MercurySoundsConfig").hot_like_outgoing_large_mp3_url,c("MercurySoundsConfig").hot_like_outgoing_large_ogg_url],m=function m(){return false},n={setCheckSoundEnabledFunc:function o(p){m=p},start:function o(){this._play(h)},stop:function o(){c("SoundPlayer").stop(h)},pop:function o(){this.stop();this._play(i)},snap:function o(p){this.stop();if(p===c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID)this._play(j);if(p===c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID)this._play(k);if(p===c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID)this._play(l)},_play:function o(p){if(m())c("SoundPlayer").play(p)}};f.exports=n}),null);
__d("MercuryDeliveryState",["MercuryConfig","MercuryIDs","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap","MercuryThreadInformer","PresencePrivacy","UserActivity","debounceAcrossTransitions","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryConfig").delivery_timeout||12e4;i.getForFBID=function(k){return j.getForFBID(k)};i.get=function(){return j.get()};function i(k){__p&&__p();this.$MercuryDeliveryState8=function(){if(this.$MercuryDeliveryState5.length===0&&Object.keys(this.$MercuryDeliveryState6).length===0)return;var l=this.$MercuryDeliveryState5.map(function(m){return m.message_id});if(l)this.$MercuryDeliveryState2.sendDeliveryReceipts(l,this.$MercuryDeliveryState6);this.$MercuryDeliveryState6={};this.$MercuryDeliveryState5=[]}.bind(this);this.$MercuryDeliveryState1=k;this.$MercuryDeliveryState2=c("MercuryServerRequests").getForFBID(this.$MercuryDeliveryState1);this.$MercuryDeliveryState3=c("MercuryThreadInformer").getForFBID(this.$MercuryDeliveryState1);this.$MercuryDeliveryState4=c("MercuryThreadIDMap").getForFBID(this.$MercuryDeliveryState1);this.$MercuryDeliveryState5=[];this.$MercuryDeliveryState6={};this.$MercuryDeliveryState3.subscribe("messages-received",this.$MercuryDeliveryState7.bind(this));c("UserActivity").subscribe(c("debounceAcrossTransitions")(this.$MercuryDeliveryState8,300,this))}i.prototype.$MercuryDeliveryState7=function(k,l){__p&&__p();for(var m in l){var n=l[m];n.forEach(function(o){if(this.$MercuryDeliveryState9(o)){this.$MercuryDeliveryState5.push(o);this.$MercuryDeliveryState4.getServerIDFromClientID(m,function(p){if(!this.$MercuryDeliveryState6[p])this.$MercuryDeliveryState6[p]=[];this.$MercuryDeliveryState6[p].push(o.message_id)}.bind(this))}}.bind(this))}if(c("UserActivity").isActive(h)||c("gkx")("AT6QldQ637XMvCyugHEhjQqDDf2-wtP50HTiWZ1Ww9U3TKMTy-LCSwNJff4SK8McDFogXyIPPHKCxhkz9mFRLCX-m6fUBuF8qkM5EElKo4EzDw"))this.$MercuryDeliveryState8()};i.prototype.$MercuryDeliveryState9=function(k){var l=k.author?c("MercuryIDs").getUserIDFromParticipantID(k.author):null;if(l===this.$MercuryDeliveryState1)return false;if(!k.is_unread)return false;return true};var j=new(c("MercurySingletonProvider"))(i);f.exports=i}),null);
__d("MercuryRoger.bs",["bs_array","Utils.bs","Arbiter","JSLogger","immutable","bs_js_boolean","MercuryThreads","MercuryDispatcher","MercuryActionStatus","MercurySingletonProvider.bs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(m,n,o,p){__p&&__p();var q=+(n>=m.timestamp),r=m.status,s=1-p||+(o!==m.author);if(q!==0)if(r==null)if(s!==0)return 1;else return 0;else if(s!==0&&r===c("MercuryActionStatus").SUCCESS)return 1;else return 0;else return 0}function i(m){__p&&__p();var n=[{}],o=new(c("Arbiter"))(),p={__fbid:m,getSeenBy:function t(u,v){__p&&__p();var w=n,x=u,y=v;if(x==null)return[];else{var z=w[0][x.thread_id];if(z!==undefined)return z.reduce(function(A,B,C,D){if(h(x,B.watermark,C,c("Utils.bs").isTruthy(y)))return c("bs_array").append(A,[C]);else return A},[]);else return[]}},wasSeenByAll:function t(u){var v=n,w=u,x=v[0][w.thread_id];if(x!==undefined)return c("bs_js_boolean").to_js_boolean(x.reduce(function(y,z,A,B){if(y)return h(w,z.watermark,A,0);else return 0},1));else return false},getSeenTimestamp:function t(u,v){var w=n,x=u,y=v,z=w[0][x];if(z!==undefined){var A=z.get(y);if(A==null)return null;else return A}else return null},getSeenTimestamps:function t(u){var v=n,w=u,x=v[0][w];if(x!==undefined)return x;else return c("immutable").OrderedMap()},subscribe:function t(u,v){return o.subscribe(u,v)},mockInform:function t(u,v){o.inform(u,v);return 0}},q=[[]],r=c("MercuryDispatcher").getForFBID(m),s=c("MercuryThreads").getForFBID(m);r.subscribe("update-roger",function(t,u){__p&&__p();if(u==null)return 0;else{Object.keys(u).forEach(function(v){__p&&__p();var w=s.getThreadMetaNow(v);Object.keys(u[v]).forEach(function(y){__p&&__p();var x=n[0][v],z=x!==undefined?x:c("immutable").OrderedMap(),A=w==null?0:[w.participants],B=0;if(A)if(A[0].indexOf(y)===-1){q[0].push(z);return 0}else B=1;else B=1;if(B===1){var C=z.get(y),D=u[v][y],E=0;if(C==null)E=2;else if(D.watermark<=C.watermark)return 0;else E=2;if(E===2){n[0][v]=z.set(y,D);return 0}}});var x=n[0][v];if(x!==undefined){n[0][v]=x.sort(function(y,z){return y.watermark-z.watermark|0});return 0}else return 0});o.inform("change",u);return 0}});r.subscribe("invalidate-global-state",function(t,u){n[0]={};q[0]=[];return 0});c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(t,u){u.read_receipts={valid_receipts:n[0],bad_receipts:q[0]};return 0});return p}var j=c("MercurySingletonProvider.bs").Provider([i]),k=j[0],l=j[1];g.getForFBID=k;g.get=l}),null);
__d("MercuryDelayedDispatcher",["MercuryDispatcher","MercuryServerPayloadPreprocessor","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j){this.$MercuryDelayedDispatcher1=j;this.$MercuryDelayedDispatcher2=[];this.$MercuryDelayedDispatcher3=c("MercuryThreadIDMap").getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher4=c("MercuryDispatcher").getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher5=c("MercuryServerRequests").getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher6=c("MercuryServerPayloadPreprocessor").getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher4.subscribe("model-update-completed",function(k,l){return this.$MercuryDelayedDispatcher7()}.bind(this))}h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};h.prototype.handleUpdateWaitForThread=function(j,k){var l=this.$MercuryDelayedDispatcher3.getClientIDFromServerIDNow(k);if(l){this.$MercuryDelayedDispatcher8(j);return}this.$MercuryDelayedDispatcher3.getClientIDFromServerID(k,function(){return this.$MercuryDelayedDispatcher2.push({thread_fbid:k,payload:j})}.bind(this));this.$MercuryDelayedDispatcher5.ensureThreadIsFetched(k)};h.prototype.$MercuryDelayedDispatcher7=function(){if(this.$MercuryDelayedDispatcher2&&this.$MercuryDelayedDispatcher2.length){var j=this.$MercuryDelayedDispatcher2.shift(),k=j.thread_fbid,l=j.payload;this.handleUpdateWaitForThread(l,k)}};h.prototype.$MercuryDelayedDispatcher8=function(j){if(j.from_client)this.$MercuryDelayedDispatcher4.handleUpdate(j);else this.$MercuryDelayedDispatcher6.handleUpdate(j)};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("MercurySyncChannelMonitor",["Arbiter","ChannelConstants","CurrentUser","MercurySingletonProvider","MercurySyncFakeDFFSender"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j){this.handleAwfulChannelEvent=function(){if(!c("CurrentUser").isLoggedInNow()){this.killSubscriptions();return}c("MercurySyncFakeDFFSender").getForFBID(this.$MercurySyncChannelMonitor1).sendGlobalDFF()}.bind(this);this.$MercurySyncChannelMonitor1=j;this.$MercurySyncChannelMonitor2=false}h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};h.prototype.setupSubscriptions=function(){if(!this.$MercurySyncChannelMonitor2){this.$MercurySyncChannelMonitor4=c("Arbiter").subscribe(c("ChannelConstants").JUMPSTART,this.handleAwfulChannelEvent);this.$MercurySyncChannelMonitor3=c("Arbiter").subscribe(c("ChannelConstants").THROTTLED,this.handleAwfulChannelEvent);this.$MercurySyncChannelMonitor2=true}};h.prototype.killSubscriptions=function(){if(this.$MercurySyncChannelMonitor2){c("Arbiter").unsubscribe(this.$MercurySyncChannelMonitor4);c("Arbiter").unsubscribe(this.$MercurySyncChannelMonitor3);this.$MercurySyncChannelMonitor2=false}};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("MercuryMessageCustomizations",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j,k){var l=j.customizations;if(!l)return null;var m=l.filter(function(n){return n.customization_type===k});return m.length>0?m[0].customization_value:null}function i(j){var k=JSON.parse(j),l=[];Object.keys(k).forEach(function(m){l.push({customization_type:m,customization_value:k[m]})});return l}f.exports={getCustomizationValue:h,parseCustomizations:i}}),null);
__d("MercuryProfileRanges",["idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){if(!i.id&&i.i)return{id:i.i,offset:i.o,length:i.l};return i}f.exports={extractFromDelta:function i(j){var k,l=(k=j)!=null?(k=k.data)!=null?k.prng:k:k;if(!l)return undefined;var m=[];try{m=JSON.parse(l);if(m.length>0)return m.map(h)}catch(n){}return m}}}),null);
__d("MessageThreadReadStateEffect",[],(function a(b,c,d,e,f,g){"use strict";var h={MARK_READ:1,MARK_UNREAD:2,KEEP_AS_IS:3},i=function i(j,k){var l=k.messageMetadata.skipBumpThread,m=j!==k.messageMetadata.actorFbId?h.MARK_UNREAD:h.KEEP_AS_IS;if(l)m=h.KEEP_AS_IS;return k.messageMetadata.threadReadStateEffect?k.messageMetadata.threadReadStateEffect:m};f.exports={MessageThreadReadStateEffectType:h,extractThreadStateEffectFromDelta:i}}),null);
__d("MessengerRealtimeAttachmentTransformer.bs",["MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k){var l=c("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(j),m=j.extensible_attachment,n;if(m==null)n=null;else{var o=m.story_attachment;n={legacy_attachment_id:m.legacy_attachment_id,story_attachment:o==null?null:c("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(o)}}return c("MessengerAttachmentTransformer.bs").transformAttachment(i,{extensible_attachment:n,blob_attachments:l,sticker:j.sticker},k)}g.transform=h}),null);
__d("MercurySyncNewMessageTransformer",["FBIDCheck","IrisProtocolMessageLifetime","MercuryActionType","MercuryIDs","MercuryMessageCustomizations","MercuryProfileRanges","MessagingTag","PageCommItemStatus","MessageThreadReadStateEffect","MessengerRealtimeAttachmentTransformer.bs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MessageThreadReadStateEffect").MessageThreadReadStateEffectType,i=c("MessageThreadReadStateEffect").extractThreadStateEffectFromDelta,j=function j(l){var m={};try{m=JSON.parse(l)}catch(n){}return m};function k(l,m){__p&&__p();var n=parseInt(m.messageMetadata.timestamp,10),o=m.messageMetadata.skipBumpThread,p=i(l,m),q=p===h.MARK_UNREAD&&l!==m.messageMetadata.actorFbId,r=[];if(m.attachments)r=m.attachments.map(function(w){__p&&__p();var x=w.mercury,y=x.extensible_attachment,z=x.blob_attachment,A=x.sticker_attachment;if(!y&&!z&&!A)return null;var B=c("FBIDCheck").isUser_deprecated(l),C=[];if(y)C=c("MessengerRealtimeAttachmentTransformer.bs").transform(l,{extensible_attachment:y},B);else if(z)C=c("MessengerRealtimeAttachmentTransformer.bs").transform(l,{blob_attachments:[z]},B);else C=c("MessengerRealtimeAttachmentTransformer.bs").transform(l,{sticker:A});return C.length>0?C[0]:null});var s=!c("FBIDCheck").isUser_deprecated(l);r=r.filter(Boolean);var t=m.messageMetadata.tags?m.messageMetadata.tags[0]:undefined,u=null;if(m.data&&m.data.adminSignatureCreatorID){var v=m.data;u={creatorID:v.adminSignatureCreatorID||null,creatorName:v.adminSignatureCreatorName||null,creatorType:v.adminSignatureCreatorType||null,labelType:v.adminSignatureLabelType||null,pageID:v.adminSignaturePageID||null,profileURI:v.adminSignatureProfileURI||null}}return{message_id:m.messageMetadata.messageId,threading_id:null,offline_threading_id:m.messageMetadata.offlineThreadingId,author:c("MercuryIDs").getParticipantIDFromUserID(m.messageMetadata.actorFbId),author_email:m.messageMetadata.actorFbId+"@facebook.com",ephemeral_ttl_mode:m.ttl?c("IrisProtocolMessageLifetime")[m.ttl]:0,timestamp:n,is_unread:q,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,source:t,tags:m.messageMetadata.tags,is_spoof_warning:false,folder:c("MessagingTag").INBOX,thread_fbid:m.messageMetadata.threadKey.threadFbId,other_user_fbid:m.messageMetadata.threadKey.otherUserFbId,body:m.body!==undefined?m.body:"",html_body:null,subject:null,has_attachment:r.length>0,attachments:r,ranges:undefined,thread_id:null,action_type:c("MercuryActionType").USER_GENERATED_MESSAGE,is_from_iris:true,is_sponsored:!!(m.data&&m.data.is_sponsored&&m.data.is_sponsored==="true")||!!(m.untypedData&&m.untypedData.is_sponsored&&m.untypedData.is_sponsored==="true"),commerce_message_type:m.data?m.data.commerce_message_type:null,customizations:m.data&&m.data.customization?c("MercuryMessageCustomizations").parseCustomizations(m.data.customization):null,platform_xmd:m.data&&m.data.platform_xmd?m.data.platform_xmd:null,profile_ranges:c("MercuryProfileRanges").extractFromDelta(m),message_source:m.data&&m.data.message_source_data?j(m.data.message_source_data).message_source:null,skip_bump_thread:o,thread_read_state_effect:p,montage_reply_data:m.data&&m.data.montage_reply_data?j(m.data.montage_reply_data):null,meta_ranges:m.data&&m.data.meta_ranges?j(m.data.meta_ranges):null,creator_info:u,comm_status:s?c("PageCommItemStatus").TODO:null}}f.exports={transform:k}}),null);
__d("MercurySyncAdminTextMessageTransformer",["MercuryActionType","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=c("MercurySyncNewMessageTransformer").transform(i,j);k.action_type=c("MercuryActionType").LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={message_type:j.type,untypedData:j.untypedData};k.log_message_type=c("MercuryLogMessageType").GENERIC_ADMIN_TEXT;return k}f.exports={transform:h}}),null);
__d("ClientSyncProtocol_GroupsSyncAction",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({OPT_IN:0,OPT_OUT:1})}),null);
__d("LiveLocationStopReason",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({EXPIRED:1,CANCELED:2,ARRIVED:3})}),null);
__d("MercurySyncClientPayloadTransformer",["ClientSyncProtocol_GroupsSyncAction","DateConsts","LiveLocationStopReason","MercuryActionType","MercuryIDs","MercurySyncNewMessageTransformer","MessageLiveLocationClientSyncProtocolStopReason","MessengerGroupsSyncStatus","PageCommItemStatus","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")(c("LiveLocationStopReason")),i=8;function j(u,v){__p&&__p();var w=u.payload;w=JSON.parse(String.fromCharCode.apply(null,w));var x=w&&w.deltas,y=x[0];if(y.deltaMessageReaction)return p(y.deltaMessageReaction);else if(y.liveLocationData)return r(y.liveLocationData);else if(y.deltaUpdateGroupEventRSVPStatus){var z=y.deltaUpdateGroupEventRSVPStatus;return q(z)}else if(y.deltaPageThreadFollowUpData)return t(y.deltaPageThreadFollowUpData);else if(y.deltaChangeViewerStatus)return n(y.deltaChangeViewerStatus,v);else if(y.deltaMontageDirectExpire)return o(y.deltaMontageDirectExpire);else if(y.deltaMessageReply)return k(y.deltaMessageReply,v);else if(y.deltaUpdateGroupsSyncStatus)return l(y.deltaUpdateGroupsSyncStatus);else if(y.deltaUpdateGroupsSyncMetadata)return m(y.deltaUpdateGroupsSyncMetadata);else return s(y)}function k(u,v){var w=u.message,x=u.repliedToMessage,y=c("MercurySyncNewMessageTransformer").transform(v,w);if(x){var z=c("MercurySyncNewMessageTransformer").transform(v,x);y.replied_to_message=z}return y}function l(u){var v=u.threadKey,w=u.actorFbid,x=u.groupsSyncStatus,y=v.threadFbId||v.otherUserFbId;if(!y)return null;var z=c("MessengerGroupsSyncStatus")[x];return{action_type:c("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED,thread_fbid:y.toString(),actor_fbid:w.toString(),groups_sync_status_string:z}}function m(u){__p&&__p();var v=u.threadKey,w=u.actorFbid,x=u.syncAction,y=u.sourceSurface,z=u.syncedFbGroupId,A=v.threadFbId||v.otherUserFbId;if(!A)return null;var B=void 0;switch(x){case c("ClientSyncProtocol_GroupsSyncAction").OPT_IN:B=c("MessengerGroupsSyncStatus").OPT_IN;break;case c("ClientSyncProtocol_GroupsSyncAction").OPT_OUT:B=c("MessengerGroupsSyncStatus").OPT_OUT;break;default:return null}return{action_type:c("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE,thread_fbid:A.toString(),actor_fbid:w.toString(),groups_sync_action:B,source_surface:y,fb_group_id:z.toString()}}function n(u,v){var w=u.actorFbid,x=u.canViewerReply,y=u.reason,z=u.threadKey;if(!w)return null;var A=w.toString(),B=c("MercuryIDs").getParticipantIDFromUserID(A===v?z.otherUserFbId:v);return{action_type:c("MercuryActionType").BLOCK_STATUS_CHANGED,actorFbid:w,canViewerReply:x,reason:y,message_blocked_ids:[B],other_user_fbid:z.otherUserFbId.toString()}}function o(u){var v=u.threadKey.threadFbId||u.threadKey.otherUserFbId;return{action_type:c("MercuryActionType").MONTAGE_DIRECT_EXPIRE,messageId:u.messageId,timestamp:u.timestamp,thread_fbid:v.toString(),keep_expiry_timestamp:u.keepExpiryTimestamp}}function p(u){var v=u.messageId,w=u.offlineThreadingId,x=u.reaction,y=u.senderId,z=u.userId,A=u.threadKey.threadFbId||u.threadKey.otherUserFbId;return{action_type:c("MercuryActionType").REACTION_UPDATE,messageId:v,offlineThreadingId:w,reaction:x,senderId:y,thread_fbid:A.toString(),userId:z}}function q(u){var v=u.threadKey&&u.threadKey.threadFbId;if(!v)return null;var w=u.actorFbId,x=u.rsvpStatus;if(!w)return null;return{action_type:c("MercuryActionType").EVENT_RSVP_CHANGED,thread_fbid:v.toString(),actor_fbid:w.toString(),rsvp_status:x}}function r(u){__p&&__p();var v=u.threadKey;if(!v)return null;var w=v.threadFbId||v.otherUserFbId;if(!w)return null;if(!u.messageLiveLocations||u.messageLiveLocations.length!==1)return null;var x=u.messageLiveLocations[0],y=x.expirationTime,z=x.stopReason!=null||Date.now()/c("DateConsts").MS_PER_SEC>y,A=function A(E){return E/Math.pow(10,i)},B=x.coordinate?{latitude:A(x.coordinate.latitude),longitude:A(x.coordinate.longitude)}:null,C=null;if(x.destination)C={latitude:A(x.destination.latitude),longitude:A(x.destination.longitude),label:x.destination.label};var D=null;switch(x.stopReason){case c("MessageLiveLocationClientSyncProtocolStopReason").EXPIRED:D=h.EXPIRED;break;case c("MessageLiveLocationClientSyncProtocolStopReason").CANCELED:D=h.CANCELED;break;case c("MessageLiveLocationClientSyncProtocolStopReason").ARRIVED:D=h.ARRIVED;break}return{action_type:c("MercuryActionType").LIVE_LOCATION_UPDATE,thread_fbid:w.toString(),messageId:x.messageId,liveLocation:{live_location_id:x.id.toString(),is_expired:z,expiration_time:y,sender:{id:x.senderId.toString()},coordinate:B,location_title:x.locationTitle,sender_destination:C,stop_reason:D}}}function s(u){var v=u&&u.deltaPaymentPinProtectionStatusData,w=v&&v.threadKey&&v.threadKey.otherUserFbId,x=v&&v.isPinProtected;if(!w)return null;var y=w.toString();return{action_type:c("MercuryActionType").IS_PIN_PROTECTED,thread_fbid:y,is_pin_protected:x}}function t(u){var v=u.threadKey.otherUserFbId;return{action_type:c("MercuryActionType").UPDATE_COMM_STATUS,comm_status:u.isFollowUp?c("PageCommItemStatus").FOLLOW_UP:c("PageCommItemStatus").TODO,thread_fbid:v.toString()}}f.exports={transform:j}}),null);
__d("MercurySyncDeliveryReceiptTransformer",[],(function a(b,c,d,e,f,g){"use strict";function h(i){return{delivery_receipts:[{other_user_fbid:i.threadKey.otherUserFbId?i.threadKey.otherUserFbId:"",thread_fbid:i.threadKey.threadFbId?i.threadKey.threadFbId:"",time:parseInt(i.deliveredWatermarkTimestampMs,10)}]}}f.exports={transform:h}}),null);
__d("MercurySyncMarkFolderChangeTransformer",["MercuryActionType","MessagingTag"],(function a(b,c,d,e,f,g){"use strict";function h(i){return{action_type:c("MercuryActionType").CHANGE_FOLDER,other_user_fbid:i.threadKey.otherUserFbId,new_folder:c("MessagingTag").IRIS_MAPPING[i.folder]}}f.exports={transform:h}}),null);
__d("MercurySyncMarkFolderSeenTransformer",["MercuryGlobalActionType","MessagingTag"],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.folders.map(function(j){return{action_type:c("MercuryGlobalActionType").MARK_ALL_SEEN,folder:c("MessagingTag").IRIS_MAPPING[j],timestamp:parseInt(i.timestamp,10)}})}f.exports={transform:h}}),null);
__d("MercurySyncMarkReadTransformer",["MercuryActionType","MercuryGlobalActionType","MessagingTag"],(function a(b,c,d,e,f,g){"use strict";function h(i){if(i.folders&&i.folders.length>0)return i.folders.map(function(j){return{action_type:c("MercuryGlobalActionType").MARK_ALL_READ,action_id:null,folder:c("MessagingTag").IRIS_MAPPING[j],timestamp:parseInt(i.watermarkTimestamp,10)}});return i.threadKeys.map(function(j){return{action_type:c("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:j.otherUserFbId,thread_fbid:j.threadFbId,mark_as_read:true,timestamp:parseInt(i.watermarkTimestamp,10),folder:c("MessagingTag").INBOX}})}f.exports={transform:h}}),null);
__d("MercurySyncMarkUnreadTransformer",["MercuryActionType","MessagingTag"],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.threadKeys.map(function(j){return{action_type:c("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:j.otherUserFbId,thread_fbid:j.threadFbId,mark_as_read:false,timestamp:parseInt(i.watermarkTimestamp,10),folder:c("MessagingTag").INBOX}})}f.exports={transform:h}}),null);
__d("MercurySyncMessageDeleteTransformer",["MercuryActionType"],(function a(b,c,d,e,f,g){"use strict";function h(i){return{action_type:c("MercuryActionType").DELETE_MESSAGES,message_ids:i.messageIds,other_user_fbid:i.threadKey.otherUserFbId,thread_fbid:i.threadKey.threadFbId}}f.exports={transform:h}}),null);
__d("PagesMessagingEventType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FLAG:1,CREATE_ADMIN_NOTE:2,PRIORITY_UPDATE:3})}),null);
__d("MercurySyncPagesManagerEventTransformer",["MercuryActionType","PagesMessagingEventType"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){var j=JSON.parse(i.jsonBlob),k=j&&j.type;if(!k)return undefined;switch(k){case c("PagesMessagingEventType").FLAG:var l=!!(j&&j.flagData&&j.flagData.state),m={action_type:c("MercuryActionType").CHANGE_FLAG,mark_as_flag:l,other_user_fbid:i.threadKey.otherUserFbId,thread_fbid:i.threadKey.threadFbId};return m;default:return undefined}}f.exports={transform:h}}),null);
__d("MercurySyncParticipantLeftGroupThreadTransformer",["MercuryActionType","MercuryIDs","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=c("MercurySyncNewMessageTransformer").transform(i,j);k.action_type=c("MercuryActionType").LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={removed_participants:[c("MercuryIDs").getParticipantIDFromUserID(j.leftParticipantFbId)]};k.log_message_type=c("MercuryLogMessageType").UNSUBSCRIBE;return k}f.exports={transform:h}}),null);
__d("MercurySyncParticipantsAddedToGroupThreadTransformer",["MercuryActionType","MercuryIDs","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=c("MercurySyncNewMessageTransformer").transform(i,j);k.action_type=c("MercuryActionType").LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={added_participants:j.addedParticipants.map(function(l){return c("MercuryIDs").getParticipantIDFromUserID(l.userFbId)})};k.log_message_type=c("MercuryLogMessageType").SUBSCRIBE;return k}f.exports={transform:h}}),null);
__d("MercurySyncRTCEventLogTransformer",["MercuryActionType","MercuryIDs","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=c("MercurySyncNewMessageTransformer").transform(i,j),l=j.messageMetadata.actorFbId,m=l===i?j.messageMetadata.threadKey.otherUserFbId:i,n=j.eventType==="VOICE_EVENT"?c("MercuryLogMessageType").PHONE_CALL:c("MercuryLogMessageType").VIDEO_CALL;k.action_type=c("MercuryActionType").LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={answered:j.duration>0,callee:c("MercuryIDs").getParticipantIDFromUserID(m),caller:c("MercuryIDs").getParticipantIDFromUserID(l)};k.log_message_type=n;return k}f.exports={transform:h}}),null);
__d("MercurySyncReadReceiptTransformer",[],(function a(b,c,d,e,f,g){"use strict";function h(i){var j={watermark:parseInt(i.watermarkTimestampMs,10),action:parseInt(i.actionTimestampMs,10)},k=i.threadKey.otherUserFbId||i.actorFbId,l=i.threadKey.otherUserFbId||i.threadKey.threadFbId,m={roger:{}};m.roger[l]={};m.roger[l][k]=j;return m}f.exports={transform:h}}),null);
__d("MercurySyncReplaceMessageTransformer",["MercuryActionType","MercurySyncNewMessageTransformer"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){j=Object.assign({},j.newMessage,j);return Object.assign(c("MercurySyncNewMessageTransformer").transform(i,j),{action_type:c("MercuryActionType").REPLACE_MESSAGE,replaced_message_id:j.replacedMessageId})}f.exports={transform:h}}),null);
__d("MercurySyncRtcCallDataTransformer",["MercuryActionType"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=i.messageMetadata.threadKey&&i.messageMetadata.threadKey.threadFbId?i.messageMetadata.threadKey.threadFbId.toString():undefined,k=i.initiator&&i.initiator.userFbId?i.initiator.userFbId.toString():undefined;return{action_type:c("MercuryActionType").UPDATE_RTC_CALL_DATA,thread_fbid:j,call_state:i.callState,server_info_data:i.serverInfoData,initiator_fbid:k}}f.exports={transform:h}}),null);
__d("MessagingThreadAction",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ACTION_INVALID:"ACTION_INVALID",ACTION_ARCHIVED:"ACTION_ARCHIVED",ACTION_UNARCHIVED:"ACTION_UNARCHIVED"})}),null);
__d("MercurySyncThreadActionTransformer",["MercuryActionType","MessagingThreadAction"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j={action_type:c("MercuryActionType").CHANGE_ARCHIVED_STATUS,thread_fbid:i.threadKey.threadFbId,other_user_fbid:i.threadKey.otherUserFbId,archived:i.action===c("MessagingThreadAction").ACTION_ARCHIVED};return j}f.exports={transform:h}}),null);
__d("MercurySyncThreadAdminsAddToGroupTransformer",["MercuryActionType"],(function a(b,c,d,e,f,g){"use strict";function h(i){return{action_type:c("MercuryActionType").ADD_GROUP_ADMINS,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,added_admin_ids:i.addedAdmins.map(function(j){return j.userFbId})}}f.exports={transform:h}}),null);
__d("MercurySyncThreadAdminsRemovedFromGroupTransformer",["MercuryActionType"],(function a(b,c,d,e,f,g){"use strict";function h(i){return{action_type:c("MercuryActionType").REMOVE_GROUP_ADMINS,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,removed_admin_ids:i.removedAdminFbIds}}f.exports={transform:h}}),null);
__d("MercurySyncThreadApprovalModeTransformer",["MercuryActionType","MessengerApprovalModeTypes"],(function a(b,c,d,e,f,g){"use strict";function h(i){return{action_type:c("MercuryActionType").APPROVAL_MODE,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,approval_mode:c("MessengerApprovalModeTypes")[i.mode]}}f.exports={transform:h}}),null);
__d("MessengerApprovalQueueTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({REQUESTED:"REQUESTED",REMOVED:"REMOVED"})}),null);
__d("MessengerGroupRequestSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADD:0,JOIN_THROUGH_LINK:1})}),null);
__d("MercurySyncThreadApprovalQueueTransformer",["MercuryActionType","MercuryIDs","MessengerApprovalQueueTypes","MessengerGroupRequestSource"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j){if(j===null||j===undefined)return null;switch(j){case"ADD":return c("MessengerGroupRequestSource").ADD;case"JOIN_THROUGH_LINK":return c("MessengerGroupRequestSource").JOIN_THROUGH_LINK;default:return null}}function i(j){if(j.inviterFbId)return{action_type:c("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:j.messageMetadata.threadKey.threadFbId,removed_group_id:j.action===c("MessengerApprovalQueueTypes").REMOVED?j.recipientFbId:null,added_group_id:j.action===c("MessengerApprovalQueueTypes").REQUESTED?{requester:{id:j.recipientFbId},inviter:{id:j.inviterFbId},request_source:h(j.requestSource),request_timestamp:j.requestTimestamp}:null};var k=c("MercuryIDs").getParticipantIDFromUserID(j.recipientFbId);return{action_type:c("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:j.messageMetadata.threadKey.threadFbId,removed_id:j.action===c("MessengerApprovalQueueTypes").REMOVED?k:null,added_id:j.action===c("MessengerApprovalQueueTypes").REQUESTED?k:null}}f.exports={transform:i}}),null);
__d("MercurySyncThreadDeleteTransformer",["MercuryActionType"],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.threadKeys.map(function(j){return{action_type:c("MercuryActionType").DELETE_THREAD,other_user_fbid:j.otherUserFbId,thread_fbid:j.threadFbId}})}f.exports={transform:h}}),null);
__d("MercurySyncThreadJoinableModeTransformer",["MercuryActionType","MessengerJoinableModeType"],(function a(b,c,d,e,f,g){"use strict";function h(i){return{action_type:c("MercuryActionType").JOINABLE_MODE,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,joinable_mode:{mode:c("MessengerJoinableModeType")[i.mode],link:i.link}}}f.exports={transform:h}}),null);
__d("MercurySyncThreadMuteSettingsTransformer",["MercuryActionType"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j={action_type:c("MercuryActionType").CHANGE_MUTE_SETTINGS,thread_fbid:i.threadKey.threadFbId,other_user_fbid:i.threadKey.otherUserFbId,mute_until:parseInt(i.expireTime,10)};return j}f.exports={transform:h}}),null);
__d("MercurySyncThreadNameTransformer",["MercuryActionType","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){var k=c("MercurySyncNewMessageTransformer").transform(i,j);k.action_type=c("MercuryActionType").LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={name:j.name};k.log_message_type=c("MercuryLogMessageType").THREAD_NAME;return k}f.exports={transform:h}}),null);
__d("MercurySyncDispatcher",["MercuryDelayedDispatcher","MercuryGlobalActionType","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercurySyncThreadAdminsAddToGroupTransformer","MercurySyncThreadAdminsRemovedFromGroupTransformer","MercurySyncAdminTextMessageTransformer","MercurySyncClientPayloadTransformer","MercurySyncDeliveryReceiptTransformer","MercurySyncMarkFolderSeenTransformer","MercurySyncMarkReadTransformer","MercurySyncMarkUnreadTransformer","MercurySyncMessageDeleteTransformer","MercurySyncNewMessageTransformer","MercurySyncReadReceiptTransformer","MercurySyncPagesManagerEventTransformer","MercurySyncParticipantLeftGroupThreadTransformer","MercurySyncParticipantsAddedToGroupThreadTransformer","MercurySyncRTCEventLogTransformer","MercurySyncThreadDeleteTransformer","MercurySyncMarkFolderChangeTransformer","MercurySyncThreadMuteSettingsTransformer","MercurySyncThreadNameTransformer","MercurySyncThreadActionTransformer","MercurySyncReplaceMessageTransformer","MercurySyncThreadJoinableModeTransformer","MercurySyncThreadApprovalModeTransformer","MercurySyncThreadApprovalQueueTransformer","MercurySyncRtcCallDataTransformer","MercurySyncDeltaTypes","MercurySingletonProvider","MontageActions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="FOLDER_MONTAGE";i.getForFBID=function(k){return j.getForFBID(k)};i.get=function(){return j.get()};function i(k){this.$MercurySyncDispatcher1=k;this.$MercurySyncDispatcher2=c("MercuryDelayedDispatcher").getForFBID(this.$MercurySyncDispatcher1);this.$MercurySyncDispatcher3=c("MercuryServerPayloadPreprocessor").getForFBID(this.$MercurySyncDispatcher1)}i.prototype.process=function(k){__p&&__p();var l=void 0,m=void 0;switch(k["class"]){case c("MercurySyncDeltaTypes").NewMessage:l=c("MercurySyncNewMessageTransformer").transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ReplaceMessage:l=c("MercurySyncReplaceMessageTransformer").transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").DeliveryReceipt:l=c("MercurySyncDeliveryReceiptTransformer").transform(k);this.$MercurySyncDispatcher3.handleUpdate(l);break;case c("MercurySyncDeltaTypes").MarkRead:l=c("MercurySyncMarkReadTransformer").transform(k);var n=[],o=[];l.forEach(function(p){if(p.action_type===c("MercuryGlobalActionType").MARK_ALL_READ)n.push(p);else o.push(p)});n.length&&this.$MercurySyncDispatcher5(n);o.length&&this.$MercurySyncDispatcher6(o);break;case c("MercurySyncDeltaTypes").MarkUnread:l=c("MercurySyncMarkUnreadTransformer").transform(k);this.$MercurySyncDispatcher6(l);break;case c("MercurySyncDeltaTypes").ParticipantLeftGroupThread:l=c("MercurySyncParticipantLeftGroupThreadTransformer").transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ParticipantsAddedToGroupThread:l=c("MercurySyncParticipantsAddedToGroupThreadTransformer").transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").RTCEventLog:l=c("MercurySyncRTCEventLogTransformer").transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ThreadName:l=c("MercurySyncThreadNameTransformer").transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ReadReceipt:l=c("MercurySyncReadReceiptTransformer").transform(k);this.$MercurySyncDispatcher3.handleUpdate(l);break;case c("MercurySyncDeltaTypes").AdminTextMessage:l=c("MercurySyncAdminTextMessageTransformer").transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").MessageDelete:m=k.threadKey.threadFbId;if(m&&k.folder&&k.folder===h)c("MontageActions").requestUpdate(m);else{l=c("MercurySyncMessageDeleteTransformer").transform(k);this.$MercurySyncDispatcher4(l)}break;case c("MercurySyncDeltaTypes").ThreadAction:l=c("MercurySyncThreadActionTransformer").transform(k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ThreadDelete:l=c("MercurySyncThreadDeleteTransformer").transform(k);this.$MercurySyncDispatcher6(l);break;case c("MercurySyncDeltaTypes").AdminAddedToGroupThread:l=c("MercurySyncThreadAdminsAddToGroupTransformer").transform(k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").AdminRemovedFromGroupThread:l=c("MercurySyncThreadAdminsRemovedFromGroupTransformer").transform(k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ThreadMuteSettings:l=c("MercurySyncThreadMuteSettingsTransformer").transform(k);this.$MercurySyncDispatcher6([l]);break;case c("MercurySyncDeltaTypes").PagesManagerEvent:l=c("MercurySyncPagesManagerEventTransformer").transform(k);if(!l)return;this.$MercurySyncDispatcher6([l]);break;case c("MercurySyncDeltaTypes").JoinableMode:l=c("MercurySyncThreadJoinableModeTransformer").transform(k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ApprovalMode:l=c("MercurySyncThreadApprovalModeTransformer").transform(k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ApprovalQueue:l=c("MercurySyncThreadApprovalQueueTransformer").transform(k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").ClientPayload:l=c("MercurySyncClientPayloadTransformer").transform(k,this.$MercurySyncDispatcher1);if(!l)return;this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").GenieMessage:l=c("MercurySyncNewMessageTransformer").transform(this.$MercurySyncDispatcher1,k.deltaNewMessage);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").MontageMessage:m=k.newMessage.messageMetadata.actorFbId;if(m)c("MontageActions").requestUpdate(m);break;case c("MercurySyncDeltaTypes").RtcCallData:l=c("MercurySyncRtcCallDataTransformer").transform(k);this.$MercurySyncDispatcher4(l);break;case c("MercurySyncDeltaTypes").MarkFolderSeen:l=c("MercurySyncMarkFolderSeenTransformer").transform(k);this.$MercurySyncDispatcher5(l);break;case c("MercurySyncDeltaTypes").ThreadFolder:l=c("MercurySyncMarkFolderChangeTransformer").transform(k);this.$MercurySyncDispatcher6([l]);break;default:break}};i.prototype.$MercurySyncDispatcher4=function(k){var l=k.other_user_fbid||k.thread_fbid;this.$MercurySyncDispatcher2.handleUpdateWaitForThread({actions:[k],payload_source:c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE},l)};i.prototype.$MercurySyncDispatcher5=function(k){this.$MercurySyncDispatcher3.handleUpdate({global_actions:k,payload_source:c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE})};i.prototype.$MercurySyncDispatcher6=function(k){this.$MercurySyncDispatcher3.handleUpdate({actions:k,payload_source:c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE})};var j=new(c("MercurySingletonProvider"))(i);f.exports=i}),null);
__d("MercurySyncDataFetcherImpl",["errorCode","Promise","AsyncResponse","Bootloader","CurrentUser","FBIDCheck","MercuryPayloadSource","MercuryThreadlistConstants","MessagingConfig","UserActivity","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("MessagingConfig").syncFetchRequestTimeoutMs,j={limit:c("MercuryThreadlistConstants").WEBMESSENGER_THREAD_COUNT+1,folder:"inbox",tags:["INBOX"],timestamp:null,offset:c("MercuryThreadlistConstants").RECENT_THREAD_OFFSET,filter:null,includeDeliveryReceipts:false,includeSeqID:true},k={};function l(r){return new(c("Promise"))(function(s,t){m(r,s,t,0)})}function m(r,s,t,u){__p&&__p();if(!c("CurrentUser").isLoggedInNow()||u>c("MessagingConfig").syncFetchRetries){clearTimeout(k[r]);t();return}var v=u===0?0:c("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(c("MessagingConfig").syncFetchTimeoutMultiplier,u);if(!c("UserActivity").isOnTab())v+=500*Math.random();clearTimeout(k[r]);k[r]=c("setTimeoutAcrossTransitions")(function(){__p&&__p();var w=false,x=function x(y){__p&&__p();var z;if(w)return;if(y.errors&&y.errors.length>0)(function(){var A=y.errors[0].message;if(A)c("Bootloader").loadModules(["MessengerWebGraphQLTypedLogger","MessengerWebGraphQLEvent"],function(B,C){new B().setErrorMessage(A).setEvent(C.DFF_FAILURE).setQueryParams(r).log()},"MercurySyncDataFetcherImpl")})();w=true;m(r,s,t,u+1)};c("Bootloader").loadModules(["MessengerGraphQLThreadlistFetcher.bs"],function(y){return y.fetchAll(r,[j],!c("FBIDCheck").isUser_deprecated(r)).then(function(z){w=true;s(new(c("AsyncResponse"))(null,babelHelpers["extends"]({},z,{payload_source:c("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE})));clearTimeout(k[r])},x)},"MercurySyncDataFetcherImpl")},v)}function n(r,s,t){return new(c("Promise"))(function(u,v){o(r,s,t,u,v,0)})}function o(r,s,t,u,v,w){__p&&__p();if(w>c("MessagingConfig").syncFetchRetries){v();return}var x=w===0?0:c("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(c("MessagingConfig").syncFetchTimeoutMultiplier,w);c("setTimeoutAcrossTransitions")(function(){var y=false,z=function z(A){if(y)return;y=true;o(r,s,t,u,v,w+1)};c("Bootloader").loadModules(["MessengerThreadDFFFetcher.bs"],function(A){return A.fetch(r,{id:s,limit:t},!c("FBIDCheck").isUser_deprecated(r)).then(function(B){y=true;u(new(c("AsyncResponse"))(null,babelHelpers["extends"]({},B,{payload_source:c("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE})))},z)},"MercurySyncDataFetcherImpl")},x)}function p(r,s,t){return new(c("Promise"))(function(u,v){q(r,s,t,u,v,0)})}function q(r,s,t,u,v,w){__p&&__p();if(w>c("MessagingConfig").syncFetchRetries){v();return}var x=w===0?0:c("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(c("MessagingConfig").syncFetchTimeoutMultiplier,w);c("setTimeoutAcrossTransitions")(function(){var y=false,z=function z(A){if(y)return;y=true;q(r,s,t,u,v,w+1)};c("Bootloader").loadModules(["MessengerMessageDFFFetcher.bs"],function(A){return A.fetch(r,{thread_id:s,message_id:t},!c("FBIDCheck").isUser_deprecated(r)).then(function(B){y=true;u(new(c("AsyncResponse"))(null,babelHelpers["extends"]({},B)))},z)},"MercurySyncDataFetcherImpl")},x)}f.exports={fetchThreadlistFromGraphQL:l,fetchThreadFromGraphQL:n,fetchMessageFromGraphQL:p}}),null);
__d("MercurySyncDataFetcher",["Promise","LogHistory","MessagingConfig","MercurySyncDataFetcherImpl","WebGraphQLConfig","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("LogHistory").getInstance("mercury_sync_data_fetcher");function i(){var n=0;for(var o=0;o<c("MessagingConfig").syncFetchRetries;o++){var p=o===0?0:c("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(c("MessagingConfig").syncFetchTimeoutMultiplier,o);n+=p+c("MessagingConfig").syncFetchRequestTimeoutMs}return n}var j=i();function k(n){__p&&__p();var o=null;return new(c("Promise"))(function(p,q){var r=function r(s){h.error("fetch_threadlist_graphql_timeout",JSON.stringify({timeout:j}));clearTimeout(o);q(s)};o=c("setTimeoutAcrossTransitions")(r,Math.max(j,c("WebGraphQLConfig").timeout*c("MessagingConfig").syncFetchRetries));c("MercurySyncDataFetcherImpl").fetchThreadlistFromGraphQL(n).done(function(s){clearTimeout(o);p(s)},r)})}function l(n,o,p){return new(c("Promise"))(function(q,r){var s=function s(u){h.error("fetch_thread_graphql_timeout",JSON.stringify({timeout:j}));r(u)},t=c("setTimeoutAcrossTransitions")(s,j);c("MercurySyncDataFetcherImpl").fetchThreadFromGraphQL(n,o,p).done(function(u){clearTimeout(t);q(u)},s)})}function m(n,o,p){return new(c("Promise"))(function(q,r){var s=function s(u){h.error("fetch_message_graphql_timeout",JSON.stringify({timeout:j}));r(u)},t=c("setTimeoutAcrossTransitions")(s,j);c("MercurySyncDataFetcherImpl").fetchMessageFromGraphQL(n,o,p).done(function(u){clearTimeout(t);q(u)},s)})}f.exports={fetchThreadlistFromGraphQL:k,fetchThreadFromGraphQL:l,fetchMessageFromGraphQL:m,getMaxTimeoutMs:i}}),null);
__d("MercurySyncDFFDataFetcher",["Promise","CurrentUser","MercuryMessages","MercuryThreads","MercuryThreadIDMap","MercurySingletonProvider","MercurySyncDataFetcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j){this.$MercurySyncDFFDataFetcher1=j;this.__messages=c("MercuryMessages").getForFBID(this.$MercurySyncDFFDataFetcher1);this.__threads=c("MercuryThreads").getForFBID(this.$MercurySyncDFFDataFetcher1);this.__threadIDMap=c("MercuryThreadIDMap").getForFBID(this.$MercurySyncDFFDataFetcher1)}h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};h.prototype.fetchInvalidateGlobalStateForGraphQL=function(){if(this.$MercurySyncDFFDataFetcher1&&this.$MercurySyncDFFDataFetcher1!=="0"&&c("CurrentUser").isLoggedIn())return c("MercurySyncDataFetcher").fetchThreadlistFromGraphQL(this.$MercurySyncDFFDataFetcher1);return new(c("Promise"))(function(j,k){return k(true)})};h.prototype.fetchInvalidateThreadState=function(j,k){var l=11,m=3,n=j||k,o=this.__threadIDMap.getClientIDFromServerIDNow(n);if(!o)return c("Promise").resolve({getPayload:function q(){return{}}});var p=m+this.__messages.getCurrentlyLoadedMessages(o).length;if(!n)return c("Promise").resolve({getPayload:function q(){return{}}});return c("MercurySyncDataFetcher").fetchThreadFromGraphQL(this.$MercurySyncDFFDataFetcher1,n,Math.max(p,l))};h.prototype.fetchInvalidateMessage=function(j,k,l){var m=j||k;if(!m)return c("Promise").resolve({getPayload:function n(){return{}}});return c("MercurySyncDataFetcher").fetchMessageFromGraphQL(this.$MercurySyncDFFDataFetcher1,m,l)};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("MercurySyncForcedFetchHandler",["Promise","MercurySingletonProvider","MercurySyncDFFDataFetcher","MercuryMessages","MercuryThreadIDMap"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k){return{getPayload:function l(){return{sequence_id:k}}}}i.getForFBID=function(k){return j.getForFBID(k)};i.get=function(){return j.get()};function i(k){this.$MercurySyncForcedFetchHandler1=k;this.$MercurySyncForcedFetchHandler2=c("MercuryMessages").getForFBID(this.$MercurySyncForcedFetchHandler1);this.$MercurySyncForcedFetchHandler3=c("MercuryThreadIDMap").getForFBID(this.$MercurySyncForcedFetchHandler1);this.$MercurySyncForcedFetchHandler4=c("MercurySyncDFFDataFetcher").getForFBID(this.$MercurySyncForcedFetchHandler1)}i.prototype.processMessageDFF=function(k,l,m,n){if(n){var o=l.otherUserFbId!==undefined?l.otherUserFbId.toString():l.threadFbId.toString(),p=this.$MercurySyncForcedFetchHandler3.getClientIDFromServerIDNow(o);if(p===undefined)return c("Promise").resolve(h(k));var q=this.$MercurySyncForcedFetchHandler2.getMessagesFromIDs([m]);if(q.length===0)return c("Promise").resolve(h(k))}return this.$MercurySyncForcedFetchHandler4.fetchInvalidateMessage(l.otherUserFbId,l.threadFbId,m)};i.prototype.processThreadDFF=function(k,l,m){if(m){var n=l.otherUserFbId!==undefined?l.otherUserFbId.toString():l.threadFbId.toString(),o=this.$MercurySyncForcedFetchHandler3.getClientIDFromServerIDNow(n);if(o===undefined)return c("Promise").resolve(h(k))}return this.$MercurySyncForcedFetchHandler4.fetchInvalidateThreadState(l.otherUserFbId,l.threadFbId)};i.prototype.processGlobalDFFForGraphQL=function(){return this.$MercurySyncForcedFetchHandler4.fetchInvalidateGlobalStateForGraphQL()};var j=new(c("MercurySingletonProvider"))(i);f.exports=i}),null);
__d("MercurySyncTopicType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DELTA:"delta",DELTAFLOW:"deltaflow",DELTAFLOWREJECT:"deltaflowreject"})}),null);
__d("MercurySyncDeltaHandler",["invariant","Arbiter","AsyncResponse","ChannelConstants","ChatReliabilityInstrumentation","CurrentUser","FBIDCheck","LogHistory","MercuryConfig","MessagingConfig","MercuryDelayedDispatcher","MercuryPayloadSource","MercurySyncChannelMonitor","MercurySyncConstants","MercurySyncDeltaHolder","MercurySyncDeltaTypes","MercurySyncDispatcher","MercurySyncForcedFetchHandler","MercurySyncHolesTypedLogger","MercuryServerPayloadPreprocessor","MercurySyncTopicType","MercurySingletonProvider","gkx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("LogHistory").getInstance("mercury_sync_delta_handler"),j=c("MessagingConfig").syncFetchRetries||0;k.getForFBID=function(m){return l.getForFBID(m)};k.get=function(){return l.get()};function k(m){__p&&__p();this.$MercurySyncDeltaHandler1=m;this.$MercurySyncDeltaHandler2=c("MercurySyncDispatcher").getForFBID(this.$MercurySyncDeltaHandler1);this.$MercurySyncDeltaHandler3=c("MercurySyncForcedFetchHandler").getForFBID(this.$MercurySyncDeltaHandler1);this.__payloadPreprocessor=c("MercuryServerPayloadPreprocessor").getForFBID(this.$MercurySyncDeltaHandler1);this.__delayedDispatcher=c("MercuryDelayedDispatcher").getForFBID(this.$MercurySyncDeltaHandler1);this.$MercurySyncDeltaHandler4=c("MercurySyncDeltaHolder").getForFBID(this.$MercurySyncDeltaHandler1);this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler11=c("MercurySyncChannelMonitor").getForFBID(this.$MercurySyncDeltaHandler1);this.$MercurySyncDeltaHandler6=[];this.$MercurySyncDeltaHandler13=0;i.debug("constructor",JSON.stringify({fbid:this.$MercurySyncDeltaHandler1}));c("Arbiter").subscribe("MercurySyncDeltaHandler/initSeqID",function(n,o){__p&&__p();i.debug("initSeqID",JSON.stringify(o));var p=o&&o.seqID,m=o&&o.fbid;if(!m)return;if(m!==this.$MercurySyncDeltaHandler1)return;if(p)this.$MercurySyncDeltaHandler4.updateLastSeqID(p);else this.$MercurySyncDeltaHandler4.updateLastSeqID(0);this.$MercurySyncDeltaHandler15();this.$MercurySyncDeltaHandler8=c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("deltaflow"),function(n,o){if(!this.$MercurySyncDeltaHandler14)this.$MercurySyncDeltaHandler15()}.bind(this))}.bind(this))}k.prototype.$MercurySyncDeltaHandler15=function(){__p&&__p();i.debug("setUpSubscriptionsToRealTimeUpdates",JSON.stringify({fbid:this.$MercurySyncDeltaHandler1}));this.$MercurySyncDeltaHandler7=c("Arbiter").subscribe(this.$MercurySyncDeltaHandler16(),function(m,n){__p&&__p();var o=n&&n.obj&&n.obj.queue;if(o)if(o.toString()!==this.$MercurySyncDeltaHandler1)return;var p=n&&n.obj&&n.obj.delta,q=n&&n.obj&&n.obj.iseq;if(!p||!q)return;this.$MercurySyncDeltaHandler17(q,c("MercurySyncTopicType").DELTA);this.$MercurySyncDeltaHandler18(q,p);this.$MercurySyncDeltaHandler4.push(q,p);this.$MercurySyncDeltaHandler19()}.bind(this));this.$MercurySyncDeltaHandler12=c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("deltaflowreject"),function(m,n){var o=n&&n.obj&&n.obj.queue;if(o)if(o.toString()!==this.$MercurySyncDeltaHandler1)return;if(this.$MercurySyncDeltaHandler14)this.$MercurySyncDeltaHandler20()}.bind(this));this.$MercurySyncDeltaHandler9=c("Arbiter").subscribe(c("ChannelConstants").getArbiterType(c("ChannelConstants").FAKE_DFF),function(m,n){var o=n&&n.obj&&n.obj.queue;if(o&&o.toString()!==this.$MercurySyncDeltaHandler1)return;var p=n&&n.obj&&n.obj.delta;if(!p)return;this.$MercurySyncDeltaHandler6.push(p);this.$MercurySyncDeltaHandler19()}.bind(this));this.$MercurySyncDeltaHandler11.setupSubscriptions();this.$MercurySyncDeltaHandler14=true};k.prototype.$MercurySyncDeltaHandler19=function(){__p&&__p();if(this.$MercurySyncDeltaHandler5)return;if(this.$MercurySyncDeltaHandler6.length>0){var m=this.$MercurySyncDeltaHandler6.shift();this.$MercurySyncDeltaHandler21(this.$MercurySyncDeltaHandler4.getLastSeqID(),m);this.$MercurySyncDeltaHandler19()}var n=this.$MercurySyncDeltaHandler4.peek();if(!n)return;var o=n-this.$MercurySyncDeltaHandler4.getLastSeqID();if(o===1){var p=this.$MercurySyncDeltaHandler4.pop();if(!p)return;var q=p.seqID,r=p.delta;this.$MercurySyncDeltaHandler21(q,r);this.$MercurySyncDeltaHandler19()}else if(o>1)this.$MercurySyncDeltaHandler22();else{this.$MercurySyncDeltaHandler4.pop();this.$MercurySyncDeltaHandler19()}};k.prototype.$MercurySyncDeltaHandler21=function(m,n){__p&&__p();this.$MercurySyncDeltaHandler4.updateLastSeqID(m);if(n["class"]===c("MercurySyncDeltaTypes").ForcedFetch){i.debug("DFF",JSON.stringify(n));if(n.threadKey!==undefined&&n.messageId===undefined)this.$MercurySyncDeltaHandler23(m,n);else if(n.threadKey!==undefined&&n.messageId!==undefined)this.$MercurySyncDeltaHandler24(m,n);else{c("ChatReliabilityInstrumentation").logDFF_DELTA_INIT(JSON.stringify(n));this.$MercurySyncDeltaHandler25(m)}}else this.$MercurySyncDeltaHandler2.process(n)};k.prototype.$MercurySyncDeltaHandler22=function(){var m=JSON.stringify({$MercurySyncDeltaHandler26:this.$MercurySyncDeltaHandler4.getLastSeqID(),nextSeqID:this.$MercurySyncDeltaHandler4.peek()});i.warn("hole",m);var n=this.$MercurySyncDeltaHandler4.peek();!!n||h(0);var o=n-1;c("ChatReliabilityInstrumentation").logDFF_HOLE_INIT(m);this.$MercurySyncDeltaHandler25(o)};k.prototype.$MercurySyncDeltaHandler27=function(m,n,o,p){__p&&__p();!this.$MercurySyncDeltaHandler5||h(0);this.$MercurySyncDeltaHandler5=true;i.debug("_scheduleDataFetch:start",JSON.stringify({seqID:m}));n().done(function(q){i.debug("_scheduleDataFetch:success",JSON.stringify({seqID:m}));o(m,q);this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler19()}.bind(this),function(q){i.error("_scheduleDataFetch:failure",JSON.stringify({seqID:m}));p(m,q);this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler19()}.bind(this))};k.prototype.$MercurySyncDeltaHandler25=function(m){__p&&__p();if(!c("CurrentUser").isLoggedInNow())return;this.$MercurySyncDeltaHandler27(undefined,function(){return this.$MercurySyncDeltaHandler3.processGlobalDFFForGraphQL()}.bind(this),function(m,n){var o=n.getPayload();this.__payloadPreprocessor.handleUpdate(o);if(o.sequence_id){i.debug("_initiateGlobalDFF:success",JSON.stringify({seqID:o.sequence_id}));this.$MercurySyncDeltaHandler4.updateLastSeqID(o.sequence_id)}this.$MercurySyncDeltaHandler13=0;c("Arbiter").inform(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RECOVER)}.bind(this),function(n,o){__p&&__p();i.error("_initiateGlobalDFF:failure","");if(this.$MercurySyncDeltaHandler13>=j&&!c("gkx")("AT6272W7G37c2zZOpPDUPGXaehXUPvo7_ZqAqdSAoKzgP5DQ8Luz0w5hQkLZeaPa8UmuuAXTSUI8FctXnbHnbKTw")||o){if(this.$MercurySyncDeltaHandler14)this.$MercurySyncDeltaHandler20();if(c("gkx")("AT6T2zrYpHKRdiC2jWw79jSLuG2Ai8UAXBl4mf7UaSrzuZmkv1aboo5IByEaBzwrmKZ7i_TneQib5Fe9fVTNdQMv"))this.$MercurySyncDeltaHandler4.updateLastSeqID(m)}else{this.$MercurySyncDeltaHandler13++;c("Arbiter").inform(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RETRY);i.debug("_initiateGlobalDFF:retry","");this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler25(m)}}.bind(this))};k.prototype.$MercurySyncDeltaHandler23=function(m,n){this.$MercurySyncDeltaHandler27(m,function(){return this.$MercurySyncDeltaHandler3.processThreadDFF(m,n.threadKey,n.isLazy)}.bind(this),function(m,o){this.__payloadPreprocessor.handleUpdate(o.getPayload());this.$MercurySyncDeltaHandler4.updateLastSeqID(m)}.bind(this),function(){i.error("_initiateThreadDFF:failure",JSON.stringify(n));var o=babelHelpers["extends"]({},n);delete o.threadKey;this.$MercurySyncDeltaHandler4.updateLastSeqID(m-1);this.$MercurySyncDeltaHandler4.push(m,o)}.bind(this))};k.prototype.$MercurySyncDeltaHandler24=function(m,n){__p&&__p();this.$MercurySyncDeltaHandler27(m,function(){return this.$MercurySyncDeltaHandler3.processMessageDFF(m,n.threadKey,n.messageId,n.isLazy)}.bind(this),function(m,o){var p=o.getPayload(),q=p.other_user_fbid?p.other_user_fbid:p.thread_fbid,r=[babelHelpers["extends"]({},p)],s=c("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE;this.__delayedDispatcher.handleUpdateWaitForThread({actions:r,payload_source:s},q);this.$MercurySyncDeltaHandler4.updateLastSeqID(m)}.bind(this),function(){i.error("_initiateMessageDFF:failure",JSON.stringify(n));var o=babelHelpers["extends"]({},n);delete o.messageId;this.$MercurySyncDeltaHandler4.updateLastSeqID(m-1);this.$MercurySyncDeltaHandler4.push(m,o)}.bind(this))};k.prototype.$MercurySyncDeltaHandler17=function(m,n){var o=m-this.$MercurySyncDeltaHandler4.getLastSeqID();if(o!==1&&o!==0){if(!c("MercuryConfig").WWWSyncHolesLogging)return;new(c("MercurySyncHolesTypedLogger"))().setSeqID(m).setDifference(o).setTopicType(n).log()}};k.prototype.$MercurySyncDeltaHandler18=function(m,n){switch(n["class"]){case c("MercurySyncDeltaTypes").NewMessage:i.debug("message_delta",JSON.stringify({seqID:m,threadKey:n.messageMetadata.threadKey,messageId:n.messageMetadata.messageId}));break;case c("MercurySyncDeltaTypes").ReadReceipt:i.debug("read_receipt_delta",JSON.stringify({seqID:m,threadKey:n.threadKey,actionTimestampMs:n.actionTimestampMs,watermarkTimestampMs:n.watermarkTimestampMs}));break;case c("MercurySyncDeltaTypes").DeliveryReceipt:i.debug("delivery_receipt_delta",JSON.stringify({seqID:m,deliveredWatermarkTimestampMs:n.deliveredWatermarkTimestampMs,messageIds:n.messageIds}));break}};k.prototype.$MercurySyncDeltaHandler20=function(){this.$MercurySyncDeltaHandler14=false;c("Arbiter").unsubscribe(this.$MercurySyncDeltaHandler7);c("Arbiter").unsubscribe(this.$MercurySyncDeltaHandler9);c("Arbiter").unsubscribe(this.$MercurySyncDeltaHandler12);this.$MercurySyncDeltaHandler11.killSubscriptions();c("Arbiter").inform(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE)};k.prototype.$MercurySyncDeltaHandler16=function(){return c("gkx")("AT4L8DlAE0WEKOKYkeJWzHDsRi3-ZWFYr4agMbkLtMUBERlxiBLblqdrc15ka2y0CqeZkLHc9yfq9QS1H3akL6e9")?"messenger-mqtt-delta":c("ChannelConstants").getArbiterType("delta")};var l=new(c("MercurySingletonProvider"))(k);f.exports=k}),null);
__d("MercurySyncEnvironment",["Arbiter","ChannelInitialData","CurrentUser","MercurySyncDeltaHandler"],(function a(b,c,d,e,f,g){"use strict";function h(){if(!c("ChannelInitialData").channelConfig)return;c("MercurySyncDeltaHandler").get();c("Arbiter").inform("MercurySyncDeltaHandler/initSeqID",{fbid:c("CurrentUser").getAccountID(),seqID:c("ChannelInitialData").channelConfig.sequenceId})}f.exports={setUp:h}}),null);
__d("MercuryFolders",["MercuryFoldersConfig","MessagingTag"],(function a(b,c,d,e,f,g){__p&&__p();var h=[c("MessagingTag").INBOX,c("MessagingTag").PENDING,c("MessagingTag").OTHER,c("MessagingTag").ACTION_ARCHIVED],i={getSupportedFolders:function j(){return h.filter(function(k){if(k===c("MessagingTag").PENDING)return!c("MercuryFoldersConfig").hide_message_filtered;else if(k===c("MessagingTag").OTHER)return!c("MercuryFoldersConfig").hide_message_requests;return true}).concat()},getFromMeta:function j(k){var l=k.folder;if(k.is_archived)l=c("MessagingTag").ACTION_ARCHIVED;return l}};f.exports=i}),null);
__d("MercuryUnreadState",["invariant","MercuryFolders","LogHistory","KeyedCallbackManager","MercuryActionType","MercuryConfig","MercuryDispatcher","MercuryGlobalActionType","MercurySingletonProvider","MercuryThreadlistConstants","MercuryThreadIDMap","MessagingTag","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","createObjectFrom"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=(c("MercuryFolders").getSupportedFolders()||[]).filter(function(p){return p!==c("MessagingTag").ACTION_ARCHIVED}),j="unread_thread_hash",k="unseen_thread_list",l=c("MercuryThreadlistConstants").MAX_UNREAD_COUNT,m=c("LogHistory").getInstance("mercury_unread_state");n.getForFBID=function(p){return o.getForFBID(p)};n.get=function(){return o.get()};function n(p){__p&&__p();this.$MercuryUnreadState1=p;this.$MercuryUnreadState2=c("MercuryServerRequests").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState3=c("MercuryThreadIDMap").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState4=c("MercuryThreadInformer").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState5=c("MercuryThreads").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState6=c("MercuryDispatcher").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState7={};this.$MercuryUnreadState8={};this.$MercuryUnreadState9={};this.$MercuryUnreadState10={};this.$MercuryUnreadState11={};i.forEach(function(q){this.$MercuryUnreadState9[q]=0;this.$MercuryUnreadState10[q]=false;this.$MercuryUnreadState11[q]=new(c("KeyedCallbackManager"))()}.bind(this));this.$MercuryUnreadState6.subscribe("update-unread",this.$MercuryUnreadState12.bind(this));this.$MercuryUnreadState6.subscribe("update-thread-ids",function(q,r){this.$MercuryUnreadState13(r)}.bind(this))}n.prototype.getUnreadCount=function(p){if(this.exceedsMaxCount(p)){m.error("unguarded_unread_count_fetch","{}");return 0}return this.$MercuryUnreadState14(p)};n.prototype.exceedsMaxCount=function(p){return this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>l};n.prototype.markFolderAsRead=function(p){if(this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>0)this.$MercuryUnreadState2.markFolderAsRead(p);if(c("MercuryConfig").MessengerInboxRequests&&p===c("MessagingTag").INBOX&&this.$MercuryUnreadState14(c("MessagingTag").PENDING)>0)this.$MercuryUnreadState2.markFolderAsRead(c("MessagingTag").PENDING)};n.prototype.getIsThreadUnread=function(p,q){var r=q||c("MessagingTag").INBOX,s=this.$MercuryUnreadState15(r);return!!(s&&s[p])};n.prototype.$MercuryUnreadState16=function(p,q){this.$MercuryUnreadState11[p].setResource(j,q);this.$MercuryUnreadState11[p].setResource(k,Object.keys(q))};n.prototype.$MercuryUnreadState17=function(p,q){var r=this.$MercuryUnreadState11[p].executeOrEnqueue(j,q),s=this.$MercuryUnreadState11[p].getUnavailableResources(r);if(s.length)this.$MercuryUnreadState2.fetchUnreadThreadIDs(p)};n.prototype.$MercuryUnreadState15=function(p){return this.$MercuryUnreadState11[p].getResource(j)};n.prototype.$MercuryUnreadState14=function(p){var q=this.$MercuryUnreadState11[p].getResource(k);if(q)return q.length;else return this.$MercuryUnreadState9[p]};n.prototype.$MercuryUnreadState12=function(p,q){__p&&__p();var r=void 0;(q.unread_thread_fbids||[]).forEach(function(s){__p&&__p();r=s.folder;if(!this.$MercuryUnreadState18(r))return;var t=s.thread_fbids||[];t=t.concat(s.other_user_fbids||[]);var u=this.$MercuryUnreadState19(t);this.$MercuryUnreadState16(r,c("createObjectFrom")(u,true));if(u.length>l)this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState4.updatedUnreadState()}.bind(this));(q.message_counts||[]).forEach(function(s){__p&&__p();if(s.unread_count===undefined)return;r=s.folder;if(s.unread_count>l){this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState()}else{this.$MercuryUnreadState9[r]=s.unread_count;if(this.$MercuryUnreadState9[r]===0)this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this));(q.global_actions||[]).forEach(function(s){if(s.action_type===c("MercuryGlobalActionType").MARK_ALL_READ)this.$MercuryUnreadState20(s.folder,s.timestamp)}.bind(this));(q.actions||[]).forEach(function(s){__p&&__p();var t=c("MercuryActionType"),u=s.other_user_fbid?s.other_user_fbid:s.thread_fbid,v=s.thread_id?s.thread_id:u;if(s.action_type==t.DELETE_THREAD)i.forEach(function(x){this.$MercuryUnreadState21(x,v)}.bind(this));else if(s.action_type==t.CHANGE_ARCHIVED_STATUS||s.action_type==t.CHANGE_FOLDER){var w=this.$MercuryUnreadState5.getThreadMetaNow(s.thread_id);!!w||h(0);r=c("MercuryFolders").getFromMeta(w);if(this.$MercuryUnreadState18(r)&&w.unread_count>0)this.$MercuryUnreadState22(r,v);i.forEach(function(x){if(x!=r)this.$MercuryUnreadState21(x,v)}.bind(this))}else{r=this.$MercuryUnreadState23(s);if(!this.$MercuryUnreadState18(r))return;if(s.action_type==t.CHANGE_READ_STATUS)if(s.mark_as_read)this.$MercuryUnreadState21(r,v,s.timestamp);else this.$MercuryUnreadState22(r,v,s.timestamp);else if(s.action_type==t.USER_GENERATED_MESSAGE||s.action_type==t.LOG_MESSAGE)if(s.is_unread)this.$MercuryUnreadState22(r,v,s.timestamp)}}.bind(this))};n.prototype.$MercuryUnreadState22=function(p,q,r){if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){var t=this.$MercuryUnreadState7[p]||0,u=this.$MercuryUnreadState8[q]||0,v=r||Number.POSITIVE_INFINITY;if(v>=t&&v>=u&&!s[q]){s[q]=r||0;this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this))};n.prototype.$MercuryUnreadState21=function(p,q,r){__p&&__p();if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){__p&&__p();if(r){var t=this.$MercuryUnreadState8[q];if(!t||t<r)this.$MercuryUnreadState8[q]=r}var u=s[q];if(r&&typeof u=="number"&&r<u)return;if(q in s){delete s[q];this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this))};n.prototype.$MercuryUnreadState20=function(p,q){this.$MercuryUnreadState10[p]=false;this.$MercuryUnreadState16(p,{});this.$MercuryUnreadState7[p]=Math.max(this.$MercuryUnreadState7[p]||0,q||0);this.$MercuryUnreadState4.updatedUnreadState()};n.prototype.$MercuryUnreadState19=function(p){return p.map(this.$MercuryUnreadState3.convertThreadIDIfAvailable,this.$MercuryUnreadState3)};n.prototype.$MercuryUnreadState13=function(p){__p&&__p();i.forEach(function(q){__p&&__p();var r=this.$MercuryUnreadState15(q);if(!r)return;for(var s in p){var t=p[s];if(r[s]){r[t]=r[s];delete r[s]}}this.$MercuryUnreadState16(q,r)}.bind(this))};n.prototype.$MercuryUnreadState23=function(p){var q=p.thread_id?this.$MercuryUnreadState5.getThreadMetaNow(p.thread_id):null;return q?c("MercuryFolders").getFromMeta(q):p.folder?p.folder:""};n.prototype.$MercuryUnreadState18=function(p){return!!p&&i.includes(p)};var o=new(c("MercurySingletonProvider"))(n);f.exports=n}),null);
__d("MercuryUnseenState",["MessageThreadReadStateEffect","MercuryFolders","KeyedCallbackManager","LogHistory","MercuryActionType","MercuryDispatcher","MercuryGlobalActionType","MercurySingletonProvider","MercuryThreadIDMap","MercuryThreadInfo","MercuryThreadlistConstants","MessagingTag","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","createObjectFrom","isEmpty"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MessageThreadReadStateEffect").MessageThreadReadStateEffectType,i=c("MercuryThreadlistConstants").MAX_UNSEEN_COUNT,j="unseen_thread_hash",k="unseen_thread_list",l=c("LogHistory").getInstance("mercury_unseen_state");m.getForFBID=function(o){return n.getForFBID(o)};m.get=function(){return n.get()};function m(o){__p&&__p();this.$MercuryUnseenState2=o;this.$MercuryUnseenState7=c("MercuryServerRequests").getForFBID(this.$MercuryUnseenState2);this.$MercuryUnseenState8=c("MercuryThreadIDMap").getForFBID(this.$MercuryUnseenState2);this.$MercuryUnseenState10=c("MercuryThreads").getForFBID(this.$MercuryUnseenState2);this.$MercuryUnseenState9=c("MercuryThreadInformer").getForFBID(this.$MercuryUnseenState2);this.$MercuryUnseenState1=c("MercuryDispatcher").getForFBID(this.$MercuryUnseenState2);this.$MercuryUnseenState3=0;this.$MercuryUnseenState4=0;this.$MercuryUnseenState5=false;this.$MercuryUnseenState6=false;this.$MercuryUnseenState11=new(c("KeyedCallbackManager"))();this.$MercuryUnseenState1.subscribe("update-unseen",function(p,q){this.$MercuryUnseenState12(q)}.bind(this));this.$MercuryUnseenState1.subscribe("update-thread-ids",function(p,q){this.$MercuryUnseenState13(q)}.bind(this))}m.prototype.getUnseenCount=function(){if(this.exceedsMaxCount()){l.error("unguarded_unseen_count_fetch","{}");return 0}return this.$MercuryUnseenState14()};m.prototype.exceedsMaxCount=function(){return this.$MercuryUnseenState5||this.$MercuryUnseenState14()>i};m.prototype.markAsSeen=function(){var o=this.$MercuryUnseenState14();if(o===null)this.$MercuryUnseenState6=true;else if(o>0||this.$MercuryUnseenState5){this.$MercuryUnseenState7.markSeen();this.$MercuryUnseenState15(this.$MercuryUnseenState7.getLastActionTimestamp(),[])}};m.prototype.$MercuryUnseenState16=function(o,p){var q;this.$MercuryUnseenState17((q={},q[o]=0,q),p)};m.prototype.$MercuryUnseenState18=function(o){this.$MercuryUnseenState11.setResource(j,o);this.$MercuryUnseenState11.setResource(k,Object.keys(o))};m.prototype.$MercuryUnseenState19=function(o){var p=this.$MercuryUnseenState11.executeOrEnqueue(j,o),q=this.$MercuryUnseenState11.getUnavailableResources(p);if(q.length)this.$MercuryUnseenState7.fetchUnseenThreadIDs()};m.prototype.$MercuryUnseenState20=function(){return this.$MercuryUnseenState11.getResource(j)};m.prototype.$MercuryUnseenState14=function(){var o=this.$MercuryUnseenState11.getResource(k);if(o)return o.length;else return this.$MercuryUnseenState3};m.prototype.$MercuryUnseenState12=function(o){__p&&__p();var p,q=this,r=this.$MercuryUnseenState21(o);if(o.unseen_thread_fbids)o.unseen_thread_fbids.forEach(function(s){if(s.folder!=c("MessagingTag").INBOX)return;var t=(s.thread_fbids||[]).concat(s.other_user_fbids||[]),u=this.$MercuryUnseenState22(t),v=r.seen_timestamp?r.seen_timestamp:this.$MercuryUnseenState4;this.$MercuryUnseenState15(v,u);if(r.unseen_count>i)this.$MercuryUnseenState5=true}.bind(this));else if(r.seen_timestamp!==undefined){this.$MercuryUnseenState4=r.seen_timestamp;if(r.unseen_count>i){this.$MercuryUnseenState5=true;this.$MercuryUnseenState18({})}else{this.$MercuryUnseenState3=r.unseen_count;if(this.$MercuryUnseenState3===0)this.$MercuryUnseenState18({})}}else{var p=function(){__p&&__p();var s;(o.global_actions||[]).forEach(function(y){if(y.action_type===c("MercuryGlobalActionType").MARK_ALL_SEEN)this.$MercuryUnseenState15(y.timestamp,[])}.bind(q));if(q.$MercuryUnseenState5)return{v:void 0};var t=o.actions;if(!t||!t.length)return{v:void 0};var u={},v={},w=function w(x){__p&&__p();var y=t[x],z=y.action_type,A=y.other_user_fbid?y.other_user_fbid:y.thread_fbid,B=y.thread_id?y.thread_id:A;if(z===c("MercuryActionType").MARK_THREAD_SEEN){q.$MercuryUnseenState16(B,y.persistent);return"continue"}if(!q.$MercuryUnseenState23(y))return"continue";if(y.thread_read_state_effect&&y.thread_read_state_effect!==h.MARK_UNREAD)return"continue";if(z===c("MercuryActionType").USER_GENERATED_MESSAGE||z===c("MercuryActionType").LOG_MESSAGE){var C=u[B]?y.timestamp>u[B]:false,D=C||!u[B];if(y.is_unread&&D)q.$MercuryUnseenState10.getThreadMeta(B,function(E){if(!c("MercuryThreadInfo").isMuted(E)&&!(E&&E.last_read_timestamp>=y.timestamp))u[B]=y.timestamp})}else if(z===c("MercuryActionType").CHANGE_READ_STATUS&&y.mark_as_read)v[B]=y.timestamp};for(var x=0;x<t.length;x++){var s=w(x);if(s==="continue")continue}q.$MercuryUnseenState24(u);q.$MercuryUnseenState17(v)}();if(typeof p==="object")return p.v}if(this.$MercuryUnseenState6){this.$MercuryUnseenState6=false;this.markAsSeen()}};m.prototype.$MercuryUnseenState15=function(o,p){__p&&__p();var q=this.$MercuryUnseenState20();if(q===undefined||o>this.$MercuryUnseenState4||this.$MercuryUnseenState5){this.$MercuryUnseenState4=o;p=p||[];if(p.length<=i)this.$MercuryUnseenState5=false;var r={},s=this.$MercuryUnseenState20();for(var t in s)if(s[t]!==true){var u=s[t];if(this.$MercuryUnseenState25(u))r[t]=u}var v=Object.assign(c("createObjectFrom")(p,true),r);this.$MercuryUnseenState18(v);this.$MercuryUnseenState9.updatedUnseenState()}};m.prototype.$MercuryUnseenState24=function(o){__p&&__p();if(this.$MercuryUnseenState5)return;var p={},q=false;for(var r in o){var s=o[r];if(this.$MercuryUnseenState25(s)){p[r]=s;q=true}}if(!q)return;this.$MercuryUnseenState19(function(t){for(var u in p){var v=p[u];if(!t[u]&&this.$MercuryUnseenState25(v))t[u]=p[u]}this.$MercuryUnseenState18(t);this.$MercuryUnseenState9.updatedUnseenState()}.bind(this))};m.prototype.$MercuryUnseenState17=function(o,p){__p&&__p();if(!c("isEmpty")(o))this.$MercuryUnseenState19(function(q){__p&&__p();var r=false;for(var s in o){var t=o[s],u=t>=q[s];if(q[s]&&(!t||u)){delete q[s];r=true}}if(r){this.$MercuryUnseenState18(q);this.$MercuryUnseenState9.updatedUnseenState();if(p&&this.$MercuryUnseenState14()===0)this.$MercuryUnseenState7.markSeen()}}.bind(this))};m.prototype.$MercuryUnseenState25=function(o){return o>this.$MercuryUnseenState4};m.prototype.$MercuryUnseenState22=function(o){return o.map(this.$MercuryUnseenState8.convertThreadIDIfAvailable,this.$MercuryUnseenState8)};m.prototype.$MercuryUnseenState13=function(o){__p&&__p();var p=this.$MercuryUnseenState20();if(!p)return;for(var q in o){var r=o[q];if(p[q]){p[r]=p[q];delete p[q]}}this.$MercuryUnseenState18(p)};m.prototype.$MercuryUnseenState23=function(o){var p=o.thread_id?this.$MercuryUnseenState10.getThreadMetaNow(o.thread_id):null,q=p?c("MercuryFolders").getFromMeta(p):o.folder;return q===c("MessagingTag").INBOX||q===undefined};m.prototype.$MercuryUnseenState21=function(o){var p=o.message_counts||[];for(var q=0;q<p.length;q++)if(p[q].folder===c("MessagingTag").INBOX)return p[q];return{}};var n=new(c("MercurySingletonProvider"))(m);f.exports=m}),null);
__d("FantaTabsAppBase",["Bootloader","ChatAppActions","ChatAppStore","ChatPerfInstrumentation","CSS","JSLogger"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.prototype.init=function(i,j,k){__p&&__p();if(this.isInitialized()){c("JSLogger").create("chat_app").error("repeated_init");return}this.$FantaTabsAppBase1=i;this.tabsElem=j;var l=c("ChatAppStore").addListener(function(){var m=c("ChatAppStore").getPreviousState(),n=c("ChatAppStore").getState();if(m.initialDisplayDone===false&&n.initialDisplayDone===true){c("ChatPerfInstrumentation").logDisplayDone();l.remove()}});c("ChatPerfInstrumentation").init();this.$FantaTabsAppBase2(k);this.initializeFantaData(k.interstitial_data);this.initializeFantaUI();this.$FantaTabsAppBase3();c("ChatAppActions").tti();c("ChatPerfInstrumentation").logTTI()};h.prototype.isInitialized=function(){return!!c("ChatAppStore").getState().isInitialized};h.prototype.isHidden=function(){var i=c("ChatAppStore").getState();return!!(!i.isInitialized||i.isHidden)};h.prototype.hide=function(){if(this.isHidden())return;c("CSS").hide(this.$FantaTabsAppBase1);c("ChatAppActions").hide()};h.prototype.unhide=function(){__p&&__p();var i=c("ChatAppStore").getState();if(i.isInitialized){if(i.isHidden){c("CSS").show(this.$FantaTabsAppBase1);e(["Dock"],function(j){j.resizeAllFlyouts()});c("ChatAppActions").unhide()}}else if(!i.isLoaded){e(["UIPagelet"],function(j){j.loadFromEndpoint("ChatTabsPagelet","ChatTabsPagelet");j.loadFromEndpoint("BuddylistPagelet","BuddylistPagelet")});c("ChatAppActions").load()}};h.prototype.initializeFantaData=function(i){};h.prototype.initializeFantaUI=function(){};h.prototype.$FantaTabsAppBase2=function(i){__p&&__p();e(["MercuryBlockedParticipants.bs","MercuryRoger.bs","MercuryDeliveryState","MercuryParticipants","MercuryServerPayloadPreprocessor","MercuryThreads","MercuryUnreadState","MercuryUnseenState","MercurySyncEnvironment","P2PSendMoneyDialogStore"],function(j,k,l,m,n,o,p,q,r,s){__p&&__p();j.get();k.get();l.get();m;o.get();q.get();p.get();r.setUp();c("ChatPerfInstrumentation").logInitStores();if(i.graphql_payload)c("Bootloader").loadModules(["ChatInitialDataTransformer.bs"],function(t){var u=i.graphql_payload,v=t.transform(u);v.message_blocked_ids=u.message_blocked_ids;v.message_ignored_ids=u.message_ignored_ids;v.payload_source=u.payload_source;n.get().handleUpdate(v)},"FantaTabsAppBase");else n.get().handleUpdate(i.initial_data)})};h.prototype.$FantaTabsAppBase3=function(){e(["HotLikeSound","ChatOptions"],function(i,j){i.setCheckSoundEnabledFunc(function(){return j.getSetting("sound")});c("ChatPerfInstrumentation").logInitSound()})};function h(){}f.exports=h}),null);
__d("MessageBorderType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FLOWERS:"flowers"})}),null);
__d("MessageCustomizationType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BORDER:"border"})}),null);
__d("MessagingFlowerCornerArrangements",["invariant","ix","Random","randomShuffle"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=Object.freeze({TOP_LEFT:"topLeft",BOTTOM_RIGHT:"bottomRight"}),k=Object.freeze({PINK:"pink",PURPLE:"purple",YELLOW:"yellow"}),l=Object.freeze({ROUND:"round",POINTY:"pointy"}),m=-10;function n(r,s){this.$ElementProducer1=r;this.$ElementProducer4=s;this.$ElementProducer2=c("Random").random()<.5;this.$ElementProducer3=[];var t=[k.PINK,k.PURPLE,k.YELLOW],u=[l.ROUND,l.POINTY,c("Random").random()>=.5?l.ROUND:l.POINTY];c("randomShuffle")(t);c("randomShuffle")(u);for(var v=0;v<3;v++)this.$ElementProducer3.push(this.$ElementProducer5(t[v],u[v]))}n.prototype.$ElementProducer6=function(r){switch(r){case k.PINK:return i("86995");case k.PURPLE:return i("86997");case k.YELLOW:default:return i("86999")}};n.prototype.$ElementProducer7=function(r){switch(r){case k.PINK:return i("86996");case k.PURPLE:return i("86998");case k.YELLOW:default:return i("87000")}};n.prototype.$ElementProducer5=function(r,s){return s===l.POINTY?this.$ElementProducer6(r):this.$ElementProducer7(r)};n.prototype.$ElementProducer8=function(){return this.$ElementProducer3.pop()};n.prototype.flower=function(r){var s=c("Random").random()*360;return this.$ElementProducer9(this.$ElementProducer8(),{pivot:.5,rotationStart:s+r.rotationStartOffset,rotationEnd:s,scale:r.scale,x:r.x,y:r.y})};n.prototype.leaf=function(r){return this.$ElementProducer9(i("86994"),{pivot:1,rotationStart:0,rotationEnd:r.rotationEnd,scale:r.scale,x:r.x,y:r.y})};n.prototype.$ElementProducer9=function(r,s){__p&&__p();var t=s.pivot*100+"%",u=s.x+m,v=s.y+m,w=-s.pivot*100,x=s.scale,y=s.rotationEnd,z=void 0,A=void 0,B=void 0,C=void 0;if(this.$ElementProducer2){var D=u;u=v;v=D;y=-y}if(this.$ElementProducer1===j.BOTTOM_RIGHT){C=this.$ElementProducer4+u+"px";A=this.$ElementProducer4+v+"px";w=100+w;y+=180}else if(this.$ElementProducer1===j.TOP_LEFT){B=this.$ElementProducer4+u+"px";z=this.$ElementProducer4+v+"px"}else h(0);var E=[];if(w!==0)E.push("translate("+w+"%, "+w+"%)");E.push("scale("+x+")");if(y!==0)E.push("rotate("+y+"deg)");return{style:{bottom:A,left:B,position:"absolute",right:C,top:z,transform:E.join(" "),transformOrigin:t+" "+t},image:r}};function o(r){return[r.leaf({x:20.5,y:38,scale:.225,rotationEnd:-80}),r.leaf({x:29,y:22.5,scale:.35,rotationEnd:35}),r.flower({x:31.5,y:22,scale:.6,rotationStartOffset:-70}),r.flower({x:21,y:35,scale:.65,rotationStartOffset:-70}),r.flower({x:21.75,y:24.75,scale:1,rotationStartOffset:50})]}function p(r){return[r.leaf({x:22.25,y:35.25,scale:.225,rotationEnd:-115}),r.leaf({x:35,y:24,scale:.35,rotationEnd:110}),r.flower({x:21.5,y:32.5,scale:.68,rotationStartOffset:-60}),r.flower({x:21.5,y:23.5,scale:.67,rotationStartOffset:-70}),r.flower({x:31,y:21,scale:.95,rotationStartOffset:50})]}function q(r,s){var t=new n(r,s);return c("Random").random()<.5?o(t):p(t)}f.exports={createFlowers:q,corners:j}}),null);
__d("MessagingFlowerBorder.react",["Image.react","MessagingFlowerCornerArrangements","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessagingFlowerBorder1=function(){return c("MessagingFlowerCornerArrangements").createFlowers(c("MessagingFlowerCornerArrangements").corners.TOP_LEFT,this.props.offset).concat(c("MessagingFlowerCornerArrangements").createFlowers(c("MessagingFlowerCornerArrangements").corners.BOTTOM_RIGHT,this.props.offset))}.bind(this),this.state={elements:this.$MessagingFlowerBorder1()},m}k.prototype.render=function(){return c("React").createElement("div",null,this.state.elements.map(function(l,m){return c("React").createElement(c("Image.react"),{key:m,style:l.style,src:l.image})}))};k.propTypes={ChildClass:j.number};k.defaultProps={offset:0};f.exports=k}),null);
__d("MessagingGiftWrap.react",["cx","MessengerEnvironment","React","emptyFunction"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={unwrapped:false},this.$MessagingGiftWrap1=function(r){r.stopPropagation();this.setState({unwrapped:true});this.props.onUnwrap&&this.props.onUnwrap()}.bind(this),n}l.prototype.render=function(){var m=c("MessengerEnvironment").messengerui;return c("React").createElement("div",{className:"_4p0m"+(this.state.unwrapped?" _4p0o":"")+(m?" _mxz":"")+(m?" _4br2":"")+(!m?" _3_om":"")+(this.props.isSticker?" _52vq":""),onClick:this.$MessagingGiftWrap1,role:"presentation"},c("React").createElement("div",{className:"_4p0r"}),c("React").createElement("div",{className:"_4p0s _4p0t"}),c("React").createElement("div",{className:"_4p0s _4p0u"}))};l.propTypes={isSticker:k.bool,onUnwrap:k.func};l.defaultProps={onUnwrap:c("emptyFunction")};f.exports=l}),null);
__d("MessengerDecoratorP2PUtil",["MercuryAttachment","MercuryAttachmentType","StoryAttachmentStyle"],(function a(b,c,d,e,f,g){"use strict";var h=function h(j){return j===Object(j)},i={isP2PAttachment:function j(k){var l=c("MercuryAttachment").get(k).filter(function(m){return h(m)&&this.isP2P(m)}.bind(this));return!!l.length},isP2P:function j(k){return!!(this._isStoryBased(k)&&(k.share.style_list.indexOf(c("StoryAttachmentStyle").ORION)>-1||k.share.style_list.indexOf(c("StoryAttachmentStyle").ORION_REQUEST)>-1))},_isStoryBased:function j(k){return!!(k.attach_type===c("MercuryAttachmentType").SHARE&&k.share&&k.share.style_list)}};f.exports=i}),null);
__d("MessageReactionMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1491398900900362"};j.getQueryID=function(){"use strict";return"254517288326467"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("ContextualLayerAutoFlipHorizontal",["ContextualLayerAutoFlip"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ContextualLayerAutoFlip"));i=h&&h.prototype;j.prototype.getValidPositions=function(k){"use strict";return[k.getPosition()]};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("ContextualLayerHideOnScrollOut",["Event","SubscriptionsHandler"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this.$ContextualLayerHideOnScrollOut1=i}h.prototype.enable=function(){"use strict";if(!this.$ContextualLayerHideOnScrollOut2){this.$ContextualLayerHideOnScrollOut2=new(c("SubscriptionsHandler"))();this.$ContextualLayerHideOnScrollOut2.addSubscriptions(this.$ContextualLayerHideOnScrollOut1.subscribe("contextchange",this.$ContextualLayerHideOnScrollOut3.bind(this)),this.$ContextualLayerHideOnScrollOut1.subscribe("show",this.$ContextualLayerHideOnScrollOut4.bind(this)),this.$ContextualLayerHideOnScrollOut1.subscribe("hide",this.$ContextualLayerHideOnScrollOut5.bind(this)))}};h.prototype.disable=function(){"use strict";if(this.$ContextualLayerHideOnScrollOut2){this.$ContextualLayerHideOnScrollOut2.release();this.$ContextualLayerHideOnScrollOut2=undefined}this.$ContextualLayerHideOnScrollOut5()};h.prototype.$ContextualLayerHideOnScrollOut4=function(){"use strict";if(!this.$ContextualLayerHideOnScrollOut6){this.$ContextualLayerHideOnScrollOut7=this.$ContextualLayerHideOnScrollOut1.getContextScrollParent();if(this.$ContextualLayerHideOnScrollOut7===window)return;this.$ContextualLayerHideOnScrollOut6=c("Event").listen(this.$ContextualLayerHideOnScrollOut7,"scroll",this.$ContextualLayerHideOnScrollOut8.bind(this))}};h.prototype.$ContextualLayerHideOnScrollOut5=function(){"use strict";if(this.$ContextualLayerHideOnScrollOut6){this.$ContextualLayerHideOnScrollOut6.remove();this.$ContextualLayerHideOnScrollOut6=undefined;this.$ContextualLayerHideOnScrollOut7=undefined}};h.prototype.$ContextualLayerHideOnScrollOut8=function(){"use strict";var i=this.$ContextualLayerHideOnScrollOut1.getContent().getBoundingClientRect(),j=this.$ContextualLayerHideOnScrollOut7.getBoundingClientRect(),k=i.bottom<=j.top||i.top>=j.bottom,l=i.right<=j.left||i.left>=j.right;if(k||l)this.$ContextualLayerHideOnScrollOut1.hide()};h.prototype.$ContextualLayerHideOnScrollOut3=function(){"use strict";this.detach();if(this.$ContextualLayerHideOnScrollOut1.isShown())this.attach()};f.exports=h}),null);
__d("MessengerReactionsMenu.react",["cx","Promise","Bootloader","CurrentUser","CSS","DOMContainer.react","MercuryIDs","MercuryMessages","MercuryThreads","MessengerMessageActionsTypedLogger","MessengerReactionsContextualDialog.react","MessengerSupportedEmojiUtils","MessengerTextWithEmoticons.react","MessengerReactionsWebConfig","MessengerReactionsUtil","MessageReactionMutationWebGraphQLMutation","React","XAsyncRequest","createCancelableFunction","getThreadTypeNameFromThreadType","gkx","idx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={animations:{},reactions:c("MessengerReactionsUtil").defaultReactions.slice()},this.$MessengerReactionsMenu5=function(q){!q&&this.props.onHide()}.bind(this),m}k.prototype.componentDidMount=function(){if(c("gkx")("AT7dFvDvstgBLQPTzIVQ-K_BRNJQyn38FQ8LsrhoWHNPhYTHpIiylBssyGU3E_0HnxERJO-whPUbuICbRNRkf3gv")){this.$MessengerReactionsMenu1=c("createCancelableFunction")(function(l){return this.setState({animations:l})}.bind(this));this.loadAnimations().done(this.$MessengerReactionsMenu1)}this.$MessengerReactionsMenu2()};k.prototype.UNSAFE_componentWillReceiveProps=function(l){this.$MessengerReactionsMenu2()};k.prototype.componentWillUnmount=function(){this.$MessengerReactionsMenu1&&this.$MessengerReactionsMenu1.cancel()};k.prototype.$MessengerReactionsMenu2=function(){if(this.props.useChatEmojiReact){var l,m=c("MessengerReactionsUtil").defaultReactions.slice(),n=c("MercuryThreads").get().getThreadMetaNow(this.props.message.thread_id),o=(l=n)!=null?(l=l.custom_like_icon)!=null?l.emoji:l:l;if(o!=null&&!m.includes(o))m.push(o);this.setState({reactions:m})}};k.prototype.$MessengerReactionsMenu3=function(){return new(c("Promise"))(function(l){return c("Bootloader").loadModules(["Keyframes"],function(m){return l(m)},"MessengerReactionsMenu.react")})};k.prototype.$MessengerReactionsMenu4=function(){return this.$MessengerReactionsMenu3().then(function(l){return c("Promise").all(["love","haha","wow","sad","angry","thumbsup","thumbsdown"].map(function(m){return l.requestRenderer(c("MessengerReactionsWebConfig").paths[m],{projectName:"messaging_reactions",assetName:m})}))}).then(function(l){return l.map(function(m){var n=m.setWidth(45).setHeight(45).repeatForever().play().redrawIfNeeded().getElement();c("CSS").addClass(n,"_37pj");return n}).reduce(function(m,n,o){m[c("MessengerReactionsUtil").defaultReactions[o]]=n;return m},{})})};k.prototype.loadAnimations=function(){var l=Date.now(),m=this.$MessengerReactionsMenu4();m.done(function(n){c("Bootloader").loadModules(["MessengerRestReactionTypedLogger"],function(o){new o().setLoadedTime(Date.now()-l).log()},"MessengerReactionsMenu.react")});return m};k.prototype.render=function(){var l=c("CurrentUser").getID(),m=this.props.message.reactions&&this.props.message.reactions[l];return c("React").createElement(c("MessengerReactionsContextualDialog.react"),{alignment:"center",contextRef:this.props.refProp,shown:true,onBlur:this.props.onHide,onToggle:this.$MessengerReactionsMenu5},c("React").createElement("div",{role:"listbox","aria-orientation":"horizontal",className:"_1z8q _fy2"},this.state.reactions.map(function(n){return c("React").createElement("span",{className:"_1z8r"+(n===m?" _5-2b":""),id:n,key:n,onClick:function(){return this.$MessengerReactionsMenu6(n)}.bind(this),role:"option","aria-selected":n===m,tabIndex:"0"},!this.state.animations[n]?c("React").createElement(c("MessengerTextWithEmoticons.react"),{customSize:true,forceMessengerEmoji:true,renderEmoticons:true,renderEmoji:true,text:n}):c("React").createElement(c("DOMContainer.react"),null,this.state.animations[n]))}.bind(this))))};k.prototype.$MessengerReactionsMenu7=function(l){if(!c("MessengerReactionsUtil").defaultReactions.includes(l))return c("MessengerSupportedEmojiUtils").getSupportedEmojiKey(l);return l};k.prototype.$MessengerReactionsMenu6=function(l){var m=this.props,n=m.message,o=m.entryPoint,p=c("CurrentUser").getID(),q=n.reactions&&n.reactions[p],r=c("MercuryMessages").get().getServerMessageID(n.message_id),s=c("MessageReactionMutationWebGraphQLMutation").getURI({action:l===q?"REMOVE_REACTION":"ADD_REACTION",message_id:r,actor_id:p,reaction:l}),t=function(u){var v=n.other_user_fbid||n.thread_fbid,w=c("MercuryThreads").get().getThreadMetaNow(n.thread_id),x=w&&w.participants?w.participants.length:0,y=c("getThreadTypeNameFromThreadType")(w&&w.thread_type),z=n.attachments[0],A=new(c("MessengerMessageActionsTypedLogger"))().setAction("reaction").setOfflineThreadid(n.offline_threading_id).setMid(r).setRecipientID(c("MercuryIDs").getUserIDFromParticipantID(n.author)).setEntryPoint(o).setReaction(this.$MessengerReactionsMenu7(l)).setPreviousReaction(this.$MessengerReactionsMenu7(q)).setGroupSize(x).setThreadType(y).setThreadid(v);if(u.errorSummary)A=A.setErrorText(u.errorSummary.toString());if(z)A=A.setMessageType(z.attach_type);A.log()}.bind(this);new(c("XAsyncRequest"))(s).setMethod("POST").setHandler(t).send();this.props.onHide()};f.exports=k}),null);
__d("MessengerReactionsPrompt.react",["cx","ix","Image.react","MessengerReactionsMenu.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={open:false},this.$MessengerReactionsPrompt1=function(){this.setState({open:true},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open)}.bind(this));this.props.setReactionsPromptShown&&this.props.setReactionsPromptShown(true)}.bind(this),this.$MessengerReactionsPrompt2=function(){this.setState({open:false},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open)}.bind(this));this.props.setReactionsPromptShown&&this.props.setReactionsPromptShown(false)}.bind(this),n}l.prototype.render=function(){if(!this.props.messageIsSelected&&!this.state.open)return null;return c("React").createElement("span",{className:(!this.props.isQuickAdd?"_5zvq":"")+(this.props.isQuickAdd?" _yav":""),onClick:this.state.open?null:this.$MessengerReactionsPrompt1,ref:"button"},c("React").createElement(c("Image.react"),{src:this.props.isQuickAdd?i("278123"):this.state.open?i("277597"):i("277596")}),this.renderMenu())};l.prototype.renderMenu=function(){if(!this.state.open)return null;return c("React").createElement(c("MessengerReactionsMenu.react"),{entryPoint:"awareness_plus",message:this.props.message,onHide:this.$MessengerReactionsPrompt2,refProp:function(){return this.refs.button}.bind(this),useChatEmojiReact:this.props.useChatEmojiReact})};f.exports=l}),null);
__d("MessengerReactions.react",["cx","fbt","Bootloader","CurrentUser","MercuryAttachmentType","MercuryConfig","MercuryIDs","MercuryParticipants","MessengerEnvironment","MessengerReactionsPrompt.react","MessengerReactionsUtil","MessengerTextWithEmoticons.react","MessengerWebViewReactionsTypedLogger","React","ShimButton.react","StoryAttachmentStyle","TooltipData","idx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="ALL",n=c("CurrentUser").getID(),o=3,p=9;j=babelHelpers.inherits(q,c("React").Component);k=j&&j.prototype;function q(){__p&&__p();var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=k.constructor).call.apply(r,[this].concat(u)),this.state={reactionsPromptShown:false},this.$MessengerReactions1=function(w){this.setState({reactionsPromptShown:w})}.bind(this),this.$MessengerReactions3=function(){var w=c("MessengerEnvironment").messengerui,x=this.props,y=x.isFromViewer,z=x.message,A=x.participants,B=z.reactions;new(c("MessengerWebViewReactionsTypedLogger"))().setEvent("open_details").setMid(z.message_id).setSenderID(z.author).setEmojiGroup(m).setEmojiGroupCount(Object.values(B).length).log();if(w)c("Bootloader").loadModules(["MessengerDialogs.bs","MessengerReactionsDialogReact.bs"],function(C,D){var E=D.jsComponent;C.showDialog(function(){return c("React").createElement(E,{isFromViewer:y,participants:A,message:z})})},"MessengerReactions.react");else c("Bootloader").loadModules(["ChatReactionsDialog"],function(C){C.show(z,A,y)},"MessengerReactions.react")}.bind(this),s}q.prototype.render=function(){__p&&__p();var r,s=this.props,t=s.message,u=s.participants,v=s.renderQuickAdd,w=s.hovered,x=t.reactions,y=t.attachments,z=y&&y.length===1&&c("MercuryConfig").MNFWD&&x&&Object.keys(x).length===0;if(z&&y[0].attach_type===c("MercuryAttachmentType").STICKER)return null;if(!this.state.reactionsPromptShown&&!w&&z&&y[0].attach_type===c("MercuryAttachmentType").SHARE)return null;if(((r=y[0])!=null?(r=r.share)!=null?(r=r.style_list)!=null?r[0]:r:r:r)===c("StoryAttachmentStyle").MONTAGE_DIRECT)return null;if((!x||!u)&&!v)return null;var A={},B=0,C=false;Object.entries(x||{}).forEach(function(H){var I=H[0],J=H[1];if(typeof J==="string"){if(I===n)C=true;if(!A[J])A[J]=0;A[J]++;B++}});var D=Object.keys(A).sort(c("MessengerReactionsUtil").sortFunction).slice(0,o).map(function(H,I,x){return c("React").createElement("span",{className:"_4kf5",style:{zIndex:x.length-I,marginLeft:I===0?0:"-4px"},key:H},c("React").createElement(c("MessengerTextWithEmoticons.react"),{customSize:true,renderEmoticons:true,renderEmoji:true,forceMessengerEmoji:true,text:H}))}),E=B>0?c("React").createElement("span",{className:"_4kf5 _4kf6"+(C?" _fy2":"")},B):null,F=v&&!C?c("React").createElement("div",{className:"_aou _aov"},c("React").createElement("span",{className:"_aow"},c("React").createElement(c("MessengerReactionsPrompt.react"),{message:t,messageIsSelected:true,isQuickAdd:true,useChatEmojiReact:c("MercuryConfig").MCER,setReactionsPromptShown:this.$MessengerReactions1}))):null,G=c("TooltipData").propsFor(this.$MessengerReactions2());return c("React").createElement("div",babelHelpers["extends"]({},G,{className:"_4kf7 preview"}),c("React").createElement(c("ShimButton.react"),{className:"_aou",onClick:this.$MessengerReactions3},D,E),F)};q.prototype.$MessengerReactions2=function(){__p&&__p();var r=this.props.message.reactions,s=this.props.participants;if(!r||!s)return"";var t=Object.keys(r),u=t.reduce(function(u,y){if(u.length>=p)return u;var z=c("MercuryIDs").getParticipantIDFromUserID(y),A=s.get(z)||c("MercuryParticipants").getNow(z),B=A&&A.name;if(B)u.push(B);return u},[]),v=u.length,w=u.join("\n");if(t.length>v){var x=i._("and {count} other(s)",[i._param("count",t.length-v)]);w+="\n"+x.toString()}return w};q.propTypes={isFromViewer:l.bool.isRequired,message:l.object.isRequired,participants:l.object,renderQuickAdd:l.bool,hovered:l.bool};f.exports=q}),null);
__d("MessengerDecorator",["cssVar","cx","invariant","BootloadedComponent.react","CurrentUser","JSResource","MercuryAttachment","MercuryAttachmentType","MercuryConfig","MercuryMessageActions","MercuryMessageCustomizations","MercuryTagHelper","MessageBorderType","MessageCustomizationType","MessagingFlowerBorder.react","MessagingGiftWrap.react","MessagingGiftWrapConstants","MessengerDecoratorP2PUtil","MessengerEnvironment","MessengerReactions.react","React","StoryAttachmentStyle","gkx","idx"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=function k(w){var x=w.attachments&&w.attachments.length===1&&w.attachments[0]&&w.attachments[0].attach_type!==c("MercuryAttachmentType").STICKER&&!c("MessengerDecoratorP2PUtil").isP2PAttachment(w);return!!x},l=function l(w){return k(w)&&c("MercuryAttachment").isLightweightActionAttachment(w.attachments[0])},m=function m(w){__p&&__p();if(o(w))return false;var x=w.attachments&&w.attachments.length===1&&w.attachments[0];w||j(0);if(!x)return false;if(c("MercuryAttachment").isPhotoGroupAttachment(x))return true;if(c("MercuryAttachment").isFileAttachment(x))if(c("MercuryConfig").MessengerForwardButtonForSharedFilesGK&&x.message_file_fbid)return true;return false},n=function n(w){var x;if(c("MessengerEnvironment").messengerui)return false;var y=(x=w.reactions)!=null?x[c("CurrentUser").getID()]:x;return!!y&&typeof y==="string"},o=function o(w){var x;return c("gkx")("AT5MAotH6BG7mXo4DyZnW3seA7_jf32c8tGX1llmkbXJ5ui_oKs0jpz-iYum9Gkv1o7pv5ZMvW9WlaNx_vA1ZSmAhi0Rjb62jJA5vu2Oz81AxQ")&&((x=w)!=null?(x=x.attachments)!=null?(x=x[0])!=null?(x=x.share)!=null?(x=x.style_list)!=null?x[0]:x:x:x:x:x)===c("StoryAttachmentStyle").MONTAGE_DIRECT},p=function p(w){__p&&__p();var x=[],y=[];w.attachments.forEach(function(z){if(z.metadata&&z.metadata.fbid){x.push(z.metadata.fbid.toString());y.push(z.attach_type.toString())}if(c("MercuryAttachment").isFileAttachment(z)&&z.message_file_fbid)if(c("MercuryConfig").MessengerForwardButtonForSharedFilesGK){x.push(z.message_file_fbid);y.push(z.attach_type)}});return{ids:x,types:y}},q=[{name:"GiftWrap",check:function w(x){var y=function y(A){return c("MercuryTagHelper").get(A,c("MessagingGiftWrapConstants").TAG_PREFIX)===c("MessagingGiftWrapConstants").VALENTINES_GIFT},z=function z(A){return!!c("MercuryTagHelper").get(A,c("MessagingGiftWrapConstants").UNWRAPPED_TAG)};return!!(x.tags&&y(x.tags)&&!z(x.tags))},render:function w(x,y){return c("React").createElement(c("MessagingGiftWrap.react"),{key:"giftwrap",onUnwrap:function z(){var A="2500ms",B=parseInt(A.substring(0,A.length-2),10);setTimeout(function(){return c("MercuryMessageActions").get().unwrap(x)},B)}})},getAdditionalClassNames:function w(){return null}},{name:"FlowerBorder",check:function w(x){return c("gkx")("AT7rTubr3N_DsfglfGkvVFG3tMrhGme9-eELltAXoSOKkQuD-9JepjOeFPMl1e8XndLLgVmcw1EaaNThD3K6r4QJpohV9bITGr6_ur1k_X_RGQ")&&c("MercuryMessageCustomizations").getCustomizationValue(x,c("MessageCustomizationType").BORDER)===c("MessageBorderType").FLOWERS},render:function w(x,y){if(c("MessengerEnvironment").messengerui)return c("React").createElement(c("MessagingFlowerBorder.react"),{offset:-10,key:"giftwrap:"+x.message_id});return c("React").createElement(c("MessagingFlowerBorder.react"),{key:"giftwrap:"+x.message_id})},getAdditionalClassNames:function w(){if(!c("MessengerEnvironment").messengerui)return"_337n";return null}},{name:"Reactions",check:function w(x,y){if(o(x))return false;var z=!!(x.reactions&&Object.keys(x.reactions).length>0),A=!!(!y&&(m(x)||k(x)&&c("MercuryConfig").MNFWD));return(z||A)&&!l(x)},render:function w(x,y,z,A){var B=m(x)||k(x)&&c("MercuryConfig").MNFWD;return c("React").createElement(c("MessengerReactions.react"),{isFromViewer:y,key:x.message_id+"-reactions",message:x,renderQuickAdd:B&&!y,hovered:A,participants:z&&z.participants})},getAdditionalClassNames:function w(){return"_5z-5"}}],r=[],s=[],t=[{name:"MontageReply",check:function w(x){if(!c("MercuryConfig").MontageThreadViewer)return false;var y=x.montage_reply_data&&x.montage_reply_data.message_id;return!!y},render:function w(x,y){var z=x.montage_reply_data&&x.montage_reply_data.message_id,A=x.montage_reply_data&&x.montage_reply_data.reply_action;return c("React").createElement(c("BootloadedComponent.react"),{key:"montagereply:"+x.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MontageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:y,messageID:z,replyAction:A,replyAuthorID:x.author,threadID:x.thread_id})},getAdditionalClassNames:function w(){return null}}],u=[{name:"ForwardImages",check:function w(x){return m(x)},render:function w(x,y){var z=p(x),A=z.ids,B=z.types;return c("React").createElement(c("BootloadedComponent.react"),{key:"forwardimages:"+x.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("MessengerEnvironment").messengerui?c("JSResource")("MessengerPhotoForwardButton.react").__setRef("MessengerDecorator"):c("JSResource")("ChatPhotoForwardButton.react").__setRef("MessengerDecorator"),attachmentIDs:A,attachmentTypes:B,isFromViewer:y})},getAdditionalClassNames:function w(){return"_ylc"}},{name:"MontageDirectKeep",check:function w(x){return o(x)},render:function w(x,y,z){return c("React").createElement(c("BootloadedComponent.react"),{key:"montagedirectkeep:"+x.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MontageDirectKeep.react").__setRef("MessengerDecorator"),message:x})},getAdditionalClassNames:function w(){return null}},{name:"ReactionPrompt",check:function w(x){if(o(x))return false;return n(x)||!m(x)&&!l(x)},render:function w(x,y,z){var A=c("MercuryConfig").MNFWD&&k(x);return c("React").createElement(c("BootloadedComponent.react"),{key:"reactionprompt:"+x.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MessengerReactionsPrompt.react").__setRef("MessengerDecorator"),message:x,messageIsSelected:z&&z.messageIsSelected&&!A,useChatEmojiReact:c("MercuryConfig").MCER,onShowMenu:z&&z.onShowMenu})},getAdditionalClassNames:function w(){return null}},{name:"MessageActions",check:function w(x){if(o(x))return false;return c("MessengerEnvironment").messengerui},render:function w(x,y,z){var A=o(x)?false:(m(x)||k(x)&&c("MercuryConfig").MNFWD)&&!l(x);return c("React").createElement(c("BootloadedComponent.react"),{key:"messageactions:"+x.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MessengerMessageActions.react").__setRef("MessengerDecorator"),message:x,isActive:z&&z.messageIsSelected,onShowMenu:z&&z.onShowMenu,includeReactions:A,isShowingOriginal:z&&z.isShowingOriginal,hasFormatting:z&&z.hasFormatting,onToggleOriginal:z&&z.handleToggleOriginal,onReplyToMessage:z&&z.onReplyToMessage})},getAdditionalClassNames:function w(){return null}}],v={getBeforeDecorators:function w(){return t},getAfterDecorators:function w(){return q},getInnerDecorators:function w(){return u},getAfterExternalDecorators:function w(){return r},getInsideDecorators:function w(){return s}};f.exports=v}),null);
__d("MessengerInnerDecorators.react",["cx","Locale","MessengerDecorator","React","gkx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={shown:false},this.$MessengerInnerDecorators1=function(q){this.setState({shown:q})}.bind(this),m}k.prototype.render=function(){var l=c("MessengerDecorator").getInnerDecorators().map(function(m){if(m.check(this.props.message))return m.render(this.props.message,this.props.isFromViewer,babelHelpers["extends"]({},this.props.messageProps,{messageIsSelected:this.props.hovered||this.state.shown,onShowMenu:this.$MessengerInnerDecorators1}));return null}.bind(this)).filter(Boolean);return c("React").createElement("span",{className:"_40fu"+(c("gkx")("AT70rONwKRIflAfK7-b4vyJ1_mxpZCDSr6xln8L8WEV8pNQI_XsW4Dd8Eel-gRLLo1OcnJGbyGR6AUa0wFCxwPsr")&&c("Locale").isRTL()?" _64wc":"")},c("React").createElement("span",{className:"_2u_d"},l))};f.exports=k}),null);
__d("MessengerVideoAutoplayActions",["MessengerFluxReduceDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h="messenger_video",i=c("keyMirror")({DESTROY:null,DSTROY_ALL:null,SCROLL:null,UPDATE:null}),j={Types:i,Namespace:h,onScroll:function k(l,m,n,o){c("MessengerFluxReduceDispatcher").dispatch({type:i.SCROLL,namespace:h,threadID:l,messageIDs:m,messageRectMap:n,viewportRect:o})},updateStore:function k(l,m){c("MessengerFluxReduceDispatcher").dispatch({type:i.UPDATE,namespace:h,threadID:l,messageIDs:m})},deleteThread:function k(l){c("MessengerFluxReduceDispatcher").dispatch({type:i.DESTROY,namespace:h,threadID:l})},deleteAllThreads:function k(){c("MessengerFluxReduceDispatcher").dispatch({type:i.DESTROY_ALL,namespace:h})}};f.exports=j}),null);
__d("MessengerVideoAutoplayStore",["FluxReduceStore","immutable","MessengerVideoAutoplayActions","MessengerFluxReduceDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l=c("MessengerVideoAutoplayActions").Types;h=babelHelpers.inherits(m,c("immutable").Record({currentVideoMessageID:null,lastVideoMessageID:null,messageIDs:null,videoVisibilityMap:null}));i=h&&h.prototype;function m(){h.apply(this,arguments)}j=babelHelpers.inherits(n,c("FluxReduceStore"));k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.__moduleID=f.id,p}n.prototype.getInitialState=function(){return c("immutable").Map()};n.prototype.reduce=function(o,p){__p&&__p();if(p.namespace!==c("MessengerVideoAutoplayActions").Namespace)return o;switch(p.type){case l.SCROLL:if(p.messageIDs)o=this.$MessengerVideoAutoplayStore1(o,p.threadID,p.messageIDs);return this.$MessengerVideoAutoplayStore2(o,p.threadID,p.messageRectMap,p.viewportRect);case l.UPDATE:return this.$MessengerVideoAutoplayStore1(o,p.threadID,p.messageIDs);case l.DESTROY:return this.$MessengerVideoAutoplayStore3(o,p.threadID);case l.DESTROY_ALL:return o.clear()}return o};n.prototype.$MessengerVideoAutoplayStore1=function(o,p,q){if(!q)return o["delete"](p);return o.set(p,new m({currentVideoMessageID:null,lastVideoMessageID:q.first(),messageIDs:q,videoVisibilityMap:null}))};n.prototype.$MessengerVideoAutoplayStore3=function(o,p){return o["delete"](p)};n.prototype.$MessengerVideoAutoplayStore4=function(o,p,q,r,s){var t=null,u=q.map(function(v){if(t)return[v,false];else{var w=this.$MessengerVideoAutoplayStore5(v,r,s);if(w)t=v;return[v,w]}}.bind(this)).fromEntrySeq().toOrderedMap();return o.mergeIn([p],{currentVideoMessageID:t,videoVisibilityMap:u})};n.prototype.$MessengerVideoAutoplayStore2=function(o,p,q,r){__p&&__p();var s=o.getIn([p,"messageIDs"]);if(!s||!q||!r)return o;if(!o.getIn([p,"currentVideoMessageID"]))return this.$MessengerVideoAutoplayStore4(o,p,s,q,r);else{var t=o.getIn([p,"videoVisibilityMap"]),u=o.getIn([p,"lastVideoMessageID"]),v=o.getIn([p,"currentVideoMessageID"]);if(this.$MessengerVideoAutoplayStore5(u,q,r)){if(t&&t.first())return o}else if(this.$MessengerVideoAutoplayStore5(v,q,r))return o;o=o.setIn([p,"currentVideoMessageID"],null);return this.$MessengerVideoAutoplayStore4(o,p,s,q,r)}};n.prototype.$MessengerVideoAutoplayStore6=function(o,p){if(!o)return false;return o.top>p.top&&o.bottom<p.bottom};n.prototype.$MessengerVideoAutoplayStore5=function(o,p,q){var r=p.get(o);return this.$MessengerVideoAutoplayStore6(r,q)};n.prototype.getVideoVisibilityMap=function(o){return this.getState().getIn([o,"videoVisibilityMap"])};n.prototype.getMessageIDs=function(o){return this.getState().getIn([o,"messageIDs"])};n.prototype.isVisible=function(o,p){return!!this.getState().getIn([o,"videoVisibilityMap",p])};f.exports=new n(c("MessengerFluxReduceDispatcher"))}),null);
__d("XMNCommercePostbackCTAController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/commerce/postback/",{cta_id:{type:"String",required:true},message_id:{type:"String"},ref:{type:"String"},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackCTADataManager",["AsyncRequest","BanzaiODS","CurrentUser","getPageIDFromThreadID","MercuryMessageActions","MercuryMessageObject","MercurySourceType","MNPlatformTagsDataManager","XMNCommercePostbackCTAController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryMessageActions").get();i.prototype.send=function(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=arguments.length<=2||arguments[2]===undefined?null:arguments[2],m=arguments.length<=3||arguments[3]===undefined?null:arguments[3],n=c("XMNCommercePostbackCTAController").getURIBuilder().setString("cta_id",j).setString("ref",l).setString("message_id",m).getURI();if(k!==null)new(c("AsyncRequest"))().setURI(n).setMethod("POST").setErrorHandler(k).send();else new(c("AsyncRequest"))().setURI(n).setMethod("POST").send()};i.prototype.sendAndConfirm=function(j,k,l,m){var n=arguments.length<=4||arguments[4]===undefined?null:arguments[4],o=arguments.length<=5||arguments[5]===undefined?null:arguments[5],p=arguments.length<=6||arguments[6]===undefined?[]:arguments[6],q=arguments.length<=7||arguments[7]===undefined?null:arguments[7];if(k!==null)this.sendConfirmationText(k,l,m,p);this.send(j,n,o,q)};i.prototype.sendConfirmationText=function(j,k,l){if(!k)c("BanzaiODS").bumpEntityKey("messenger_commerce","confirm_message_failed.empty_threadID");else{var m=new(c("MercuryMessageObject"))(c("CurrentUser").getID()),n=[],o=c("getPageIDFromThreadID")(k);if(c("MNPlatformTagsDataManager").hasThreadTags(o))n=c("MNPlatformTagsDataManager").getThreadTags();h.send(m.constructCTAConfirmationMessageObject(j,c("MercurySourceType").TITAN_WEB,k,l,n));if(n&&n.length>0)c("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread()}};function i(){}f.exports=new i()}),null);
__d("MessengerMDotMeReferralStore",["MessengerActions","MessengerStore"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("MessengerStore"));i=h&&h.prototype;function j(){"use strict";i.constructor.call(this);this.$MessengerMDotMeReferralStore1={refCode:null,refThreadID:null}}j.prototype.getState=function(){"use strict";return this.$MessengerMDotMeReferralStore1};j.prototype.__onDispatch=function(k){"use strict";switch(k.type){case c("MessengerActions").Types.UPDATE_MDOT_ME:this.$MessengerMDotMeReferralStore1.refCode=k.refCode;this.$MessengerMDotMeReferralStore1.refThreadID=k.refThreadID;this.emitChange()}};f.exports=new j()}),null);
__d("XMNCommercePostbackRefSendController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/commerce/postback_ref/",{page_id:{type:"String",required:true},ref:{type:"String",required:true},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackRefSendManager",["AsyncRequest","MessengerActions","MessengerMDotMeReferralStore","XMNCommercePostbackRefSendController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.prototype.sendMDotMeRef=function(i,j){var k=this.getMdotMeRef();if(this.shouldSendRef(j,i)){var l=c("XMNCommercePostbackRefSendController").getURIBuilder().setString("page_id",i).setString("ref",k).getURI();new(c("AsyncRequest"))().setURI(l).setMethod("POST").send();c("MessengerActions").changeMDotMeReferral()}};h.prototype.shouldSendRef=function(i,j){if(!j||!i)return false;return this.hasMDotMeRef(j)};h.prototype.hasMDotMeRef=function(i){var j=c("MessengerMDotMeReferralStore").getState();return!!(j.refCode&&i&&j.refThreadID&&j.refThreadID===i)};h.prototype.getMdotMeRef=function(){var i=c("MessengerMDotMeReferralStore").getState();return i.refCode};function h(){}f.exports=new h()}),null);
__d("MessengerDomIDs.bs",["uniqueID"],(function a(b,c,d,e,f,g){"use strict";var h={COMPOSER_INPUT_DESCRIPTION:c("uniqueID")(),CONVERSATION:c("uniqueID")(),MAIN_LABEL:c("uniqueID")(),MUTE_DIALOG_TITLE:c("uniqueID")(),THREAD_INFO_PANEL:c("uniqueID")(),THREAD_TITLE:c("uniqueID")()};g.ids=h}),null);
__d("MessengerParticipants.bs",["bs_caml_obj","bs_js_boolean","MercuryIDs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k,l,m){var n=c("MercuryIDs").getParticipantIDFromUserID(k),o=m.participants.filter(function(p){return c("bs_caml_obj").caml_notequal(p,n)});return o.filter(function(p){return+l.has(p)})}function i(k,l,m){if(m.is_canonical)return[];else return h(k,l,m)}function j(k,l,m){return c("bs_js_boolean").to_js_boolean(+(i(k,l,m).length>0))}g.findIntersection=h;g.participantsInGroupThread=i;g.areParticipantsInGroupThread=j}),null);
__d("messengerCustomColorUtils",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){j=j||{};j.backgroundColor=i;return j}f.exports={customBubbleStyle:h}}),null);
__d("MessengerBotComposerWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1193572474099061"};j.getQueryID=function(){"use strict";return"1132183563559860"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("XMessengerBotsMenuController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messenger/commerce/bots/menu/",{page_id:{type:"String",required:true}})}),null);
__d("MessengerBotMenuDataFetcher",["AsyncRequest","Cache","MessengerBotComposerWebGraphQLQuery","XMessengerBotsMenuController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.$MessengerBotMenuDataFetcher1=new(c("Cache"))();this.$MessengerBotMenuDataFetcher2=new(c("Cache"))()}h.prototype.getMenuItems=function(i,j,k){__p&&__p();if(this.$MessengerBotMenuDataFetcher1.has(i)){j(this.$MessengerBotMenuDataFetcher1.get(i));return}var l=c("XMessengerBotsMenuController").getURIBuilder().setString("page_id",i).getURI();new(c("AsyncRequest"))().setURI(l).setHandler(function(m){var n=m.payload.menu;this.$MessengerBotMenuDataFetcher1.set(i,n);j(n)}.bind(this)).setErrorHandler(function(m){k()}).send()};h.prototype.getHasPageSetting=function(i,j,k,l){__p&&__p();if(!this.$MessengerBotMenuDataFetcher2.has(i)){var m=c("MessengerBotComposerWebGraphQLQuery").getURI({node_id:i});new(c("AsyncRequest"))().setURI(m).setHandler(function(o){var p=o.payload.data.node,n=p&&p.commerce_page_settings||[];this.$MessengerBotMenuDataFetcher2.set(i,n);j(n.indexOf(l)!==-1)}.bind(this)).setErrorHandler(function(o){this.$MessengerBotMenuDataFetcher2.set(i,[]);k()}.bind(this)).send()}var n=this.$MessengerBotMenuDataFetcher2.get(i)||[];j(n.indexOf(l)!==-1);return n.indexOf(l)!==-1};f.exports=new h()}),null);
__d("FBRTCConsoleLogger",["Log","LogHistory","formatDate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="webrtc",i=null;j.getInstance=function(){if(!i)i=new j();return i};function j(){this.$FBRTCConsoleLogger1=c("LogHistory").getInstance(h)}j.prototype.getLogHistory=function(){return this.$FBRTCConsoleLogger1};j.prototype.log=function(k,l,m){var event=arguments.length<=3||arguments[3]===undefined?"Console":arguments[3];this.$FBRTCConsoleLogger1.log(event||"Console",k);return this};j.MODULE_NAME=h;f.exports=j}),null);
__d("FBRTCLocalMessageQueue",["CacheStorage","FBRTCConsoleLogger"],(function a(b,c,d,e,f,g){__p&&__p();var h="localstorage",i="RTC_",j="offer",k="offer_msg",l="data_",m=30*1e3,n=15*1e3,o=500,p=new Map();function q(){"use strict";this.$FBRTCLocalMessageQueue1=c("FBRTCConsoleLogger").getInstance()}q.prototype.enqueueOffer=function(r,s){"use strict";var t=this.$FBRTCLocalMessageQueue2(r,k);this.$FBRTCLocalMessageQueue3(t,j,s)};q.prototype.getOffer=function(r){"use strict";var s=this.$FBRTCLocalMessageQueue2(r,k);return this.$FBRTCLocalMessageQueue4(s,j)};q.prototype.removeOffer=function(r){"use strict";var s=this.$FBRTCLocalMessageQueue2(r,k);s.remove(j)};q.prototype.enqueueMessage=function(r,s,t,u){"use strict";var v=l+t.toString(),w=p.get(r)||new Map();w.set(v,u);p.set(r,w);this.$FBRTCLocalMessageQueue1.log("Queued "+v)};q.prototype.drainQueue=function(r,s){"use strict";__p&&__p();var t=p.get(r)||new Map(),u=void 0,v=void 0;for(var w=t,x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var z;if(x){if(y>=w.length)break;z=w[y++]}else{y=w.next();if(y.done)break;z=y.value}var A=z,u=A[0],v=A[1];void u;s(v)}p.set(r,new Map())};q.prototype.enableDequeuing=function(r,s,t,u){"use strict";if(u===undefined)u=n;this.$FBRTCLocalMessageQueue5(r,s,t,u)};q.prototype.$FBRTCLocalMessageQueue5=function(r,s,t,u){"use strict";__p&&__p();var v=this.$FBRTCLocalMessageQueue2(r,s),w=v.keys(),x=w.length;for(var y=0;y<x;y++){var z=this.$FBRTCLocalMessageQueue6(v,w[y]);if(z&&t)t(z)}this.$FBRTCLocalMessageQueue1.log("Dequeued "+x+" ("+r+") with "+u+" left)");if(u>0){u-=o;setTimeout(function(){this.$FBRTCLocalMessageQueue5(r,s,t,u)}.bind(this),o)}};q.prototype.$FBRTCLocalMessageQueue3=function(r,s,t){"use strict";var u={__t:Date.now(),__d:t};r.set(s,u)};q.prototype.$FBRTCLocalMessageQueue4=function(r,s){"use strict";var t=r.get(s);if(t&&this.$FBRTCLocalMessageQueue7(t))return t.__d;else if(t)r.remove(s);return null};q.prototype.$FBRTCLocalMessageQueue6=function(r,s){"use strict";var t=this.$FBRTCLocalMessageQueue4(r,s);if(t!==null){r.remove(s);return t}return null};q.prototype.$FBRTCLocalMessageQueue7=function(r){"use strict";return Date.now()-r.__t<m};q.prototype.$FBRTCLocalMessageQueue2=function(r,s){"use strict";return new(c("CacheStorage"))(h,""+i+r+"_"+s+"_")};f.exports=q}),null);
__d("FBRTCMessageListener",["invariant","Arbiter","BonfireFeatureGating","ChannelConstants","FBRTCCallControlActions","FBRTCConstants","FBRTCLocalMessageQueue","FBRTCSupport","RTCConfig","guid","mixInEventEmitter"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("FBRTCConstants").ChildWindowMessageType,j=45*1e3,k=[],l=null,m=null,n=null,o=null,p=null,q=false,r=null,s=null,t=void 0,u={init:function v(w,x){__p&&__p();if(q)return;q=true;c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("webrtc"),function(z,A){this._onMessage(A.obj)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("webrtc_offer"),function(z,A){this._onMessage(A.obj)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("webrtc_offerack"),function(z,A){this._onMessage(A.obj)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("rtc_multi_json"),function(z,A){this._onMultiwayMessage(A.obj)}.bind(this));if(c("BonfireFeatureGating").canReceiveBonfireRingInterop())c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("parties_notifications"),function(z,A){this._onBonfireMessage(A.obj)}.bind(this));this._localMessageQueue=new(c("FBRTCLocalMessageQueue"))();if(c("RTCConfig").PassMessagesBetweenWindowsGK){if(c("FBRTCSupport").isWebrtcSupported()&&window.addEventListener){var y=w?this._handleWindowMessageToChild.bind(this):this._handleWindowMessageToParent.bind(this);window.addEventListener("message",y,false)}if(w)this._connectToParentWindow(x)}},setParentWindowNonce:function v(w){o=w},generateNewNonce:function v(){p=c("guid")();return p},setMultiwayMessageHandler:function v(w,x){!r||h(0);r=x?w.bind(x):w},_onMultiwayMessage:function v(w){this.emit("multiwayMessageReceived",w);if(r)r(w)},setBonfireMessageHandler:function v(w,x){!s||h(0);s=x?w.bind(x):w},_onBonfireMessage:function v(w){this.emit("bonfireMessageReceived",w);if(s)s(w)},setMessageHandler:function v(w,x){!l||h(0);l=x?w.bind(x):w;while(k.length)l(k.shift())},removeMessageHandler:function v(){l=null},setParentWindowStartCallHandler:function v(w){t=w;return function(){return t=null}},_onMessage:function v(w){if(w.from)w.from=w.from.toString();this.emit("messageReceived",w);if(l)l(w);else k.push(w);this._passMessageToChildWindow(w)},_connectToParentWindow:function v(w){if(window.opener&&window.opener.postMessage){var x={type:i.CHILD_WINDOW_READY,nonce:o,childNonce:this.generateNewNonce(),peerID:w};window.opener.postMessage(x,window.location.origin)}},_verifyWindowMessage:function v(event){return event.origin===window.location.origin&&event.data&&p&&event.data.nonce===p},_handleWindowMessageToParent:function v(event){if(!this._verifyWindowMessage(event))return;if(event.data.type===i.CHILD_WINDOW_READY){this.setParentWindowNonce(event.data.childNonce);this._setChildWindow(event.source);this._replayQueuedMessagesToChild(event.data.peerID,m)}},_handleWindowMessageToChild:function v(event){if(!this._verifyWindowMessage(event))return;if(event.data.type===i.CHILD_WINDOW_MESSAGE)this._onMessage(event.data.message);if(event.data.type===i.CHILD_WINDOW_START_CALL)if(t)t();else c("FBRTCCallControlActions").parentWindowStartCall()},_replayQueuedMessagesToChild:function v(w,x){this._localMessageQueue.drainQueue(w,function(y){var z={type:i.CHILD_WINDOW_MESSAGE,nonce:o,message:y};x.postMessage(z,window.location.origin)})},_setChildWindow:function v(w){m=w;clearTimeout(n);n=setTimeout(function(){m=null},j);this._startCallInChildWindow();this.generateNewNonce()},_passMessageToChildWindow:function v(w){if(m){var x={type:i.CHILD_WINDOW_MESSAGE,nonce:o,message:w};m.postMessage(x,window.location.origin)}},_startCallInChildWindow:function v(){if(m){var w={type:i.CHILD_WINDOW_START_CALL,nonce:o};m.postMessage(w,window.location.origin)}}};c("mixInEventEmitter")(u,{messageReceived:true,multiwayMessageReceived:true,bonfireMessageReceived:true});f.exports=u}),null);
__d("FBRTCMessageHandler",["Bootloader","FBRTCMessageListener","FBRTCSupport"],(function a(b,c,d,e,f,g){__p&&__p();var h=null,i=false,j=null,k=null,l={init:function p(){__p&&__p();if(!i&&c("FBRTCSupport").isReceiveWebrtcSupported()){i=true;c("FBRTCMessageListener").init(false);c("FBRTCMessageListener").once("messageReceived",function(q){m()});c("FBRTCMessageListener").once("multiwayMessageReceived",function(q){n(q)});c("FBRTCMessageListener").once("bonfireMessageReceived",function(q){o(q)})}}};function m(){if(!h)c("Bootloader").loadModules(["FBRTCIncomingCallController","FBRTCIncomingCallDialog","FBRTCMissedVideoCallHandler","FBRTCUnsupportedBrowserMessage"],function(p,q,r,s){h=new p(q,s,new r());c("FBRTCMessageListener").setMessageHandler(h.onMessageReceived,h)},"FBRTCMessageHandler")}function n(p){if(!j)c("Bootloader").loadModules(["FBRTCGroupCallIncomingController","FBRTCGroupCallIncomingDialog"],function(q,r){j=new q(r,true);c("FBRTCMessageListener").setMultiwayMessageHandler(j.onMessageReceived,j);j.onMessageReceived(p)},"FBRTCMessageHandler")}function o(p){if(!k)c("Bootloader").loadModules(["FBRTCGroupCallIncomingController","FBRTCGroupCallIncomingDialog"],function(q,r){k=new q(r);c("FBRTCMessageListener").setBonfireMessageHandler(k.onBonfireMessageReceived,k);k.onBonfireMessageReceived(p)},"FBRTCMessageHandler")}f.exports=l}),null);
__d("EmojiOnlyMessage.react",["cx","EmojiImageURL","EmojiLikeConstants","Image.react","React","gkx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m="_1ift _1ifu",n=0,o=this.props.contents.map(function(p){n++;var q=p.emojiKey;if(q){var r=c("gkx")("AT7ffoM8gf91Fer7cUMkwGH62Vum20vkKo_AIqUOx27bu9y21PoFYcSzgDJj_KAeh5RgHmHKzv6c5n2RlIxDAfXE")?c("EmojiImageURL").getFBEmojiURL(q,c("EmojiLikeConstants").sizeMap.dp32):c("EmojiImageURL").getMessengerURL(q,c("EmojiLikeConstants").sizeMap.dp32);return c("React").createElement(c("Image.react"),{alt:p.text,className:m,key:n,src:r})}else return c("React").createElement("span",{key:n},p.text)});return c("React").createElement("div",{tabIndex:"0"},o)};function l(){i.apply(this,arguments)}l.propTypes={contents:k.arrayOf(k.shape({emojiKey:k.string,text:k.string.isRequired})).isRequired};f.exports=l}),null);
__d("MercuryMessageGroup",["MercuryActionType","MercuryAttachmentType","MercuryMessageInfo","MercuryShareAttachmentRenderLocations","MercuryThreadlistConstants","MessengerLightweightActionUtils","enumerate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={calculateMessageGroups:function k(l,m){__p&&__p();var n=[],o=null,p={value:null},q=c("enumerate")(l),r=void 0;while(!(r=q.next()).done){var s=h.canAppendMessageToLastGroup(p.value,r.value,m);if(!s){o=[];n.push(o)}o.push(r.value);p=r}return n},canAppendMessageToLastGroup:function k(l,m,n){var o=c("MercuryThreadlistConstants").GROUPING_THRESHOLD;if(!l||i(l,n)||i(m,n)||l.author!=m.author||l.timestamp<m.timestamp-o||l.is_spoof_warning!==m.is_spoof_warning||l.page_admin_notes)return false;var p=c("MercuryMessageInfo").getPersona(l),q=c("MercuryMessageInfo").getPersona(m);if(!p&&!q)return true;return p===null||q===null?false:p.id===q.id}};function i(k,l){var m=k.has_attachment;if(m&&(l===c("MercuryShareAttachmentRenderLocations").MESSENGER||l===c("MercuryShareAttachmentRenderLocations").CHAT))m=j(k);return!!(c("MessengerLightweightActionUtils").isLWAMessage(k)||k.action_type==c("MercuryActionType").LOG_MESSAGE||m||k.html_body||k.body&&k.body.length>c("MercuryThreadlistConstants").MAX_CHARS_BEFORE_BREAK)}function j(k){var l=k.attachments[0];return!l||l.attach_type===c("MercuryAttachmentType").STICKER||l.attach_type===c("MercuryAttachmentType").ANIMATED_IMAGE}f.exports=h}),null);
__d("PagesMessagingMercuryChatTabActionKeys",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({REQUEST_GREETING_CONFIG:null,NOTIFY_GREETING_CONFIG_RECEIVED:null});f.exports=h}),null);
__d("PagesMessagingMercuryChatTabDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("ExplicitRegistrationDispatcher"))({strict:false})}),null);
__d("PagesMessagingMercuryChatTabActions",["PagesMessagingMercuryChatTabActionKeys","PagesMessagingMercuryChatTabDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h={requestGreetingConfig:function i(j){c("PagesMessagingMercuryChatTabDispatcher").dispatch({actionType:c("PagesMessagingMercuryChatTabActionKeys").REQUEST_GREETING_CONFIG,threadID:j})},notifyGreetingConfigReceived:function i(j,k){c("PagesMessagingMercuryChatTabDispatcher").dispatch({actionType:c("PagesMessagingMercuryChatTabActionKeys").NOTIFY_GREETING_CONFIG_RECEIVED,threadID:j,payload:k})}};f.exports=h}),null);
__d("PagesMessagingMercuryChatTabState",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("immutable").Record({pagesGreetingShouldShow:false,pagesGreetingContent:null,pageResponsiveness:null,coverPhotoData:null,connectionContext:null,pageOnlineMessage:null,icebreakers:null}));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("XMercuryChatTabPagesNullStateConfigController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/messaging/mercury/greeting/",{})}),null);
__d("PagesMessagingMercuryChatTabStore",["invariant","PagesMessagingMercuryChatTabActionKeys","PagesMessagingMercuryChatTabActions","AsyncRequest","PagesMessagingMercuryChatTabDispatcher","FluxStore","MercuryIDs","PagesMessagingMercuryChatTabState","XMercuryChatTabPagesNullStateConfigController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("FluxStore"));j=i&&i.prototype;function k(){j.constructor.call(this,c("PagesMessagingMercuryChatTabDispatcher"));this.__moduleID=f.id;this.$PagesMessagingMercuryChatTabStore1=new Map()}k.prototype.getStateByThread=function(l){if(!this.$PagesMessagingMercuryChatTabStore1.has(l))this.$PagesMessagingMercuryChatTabStore1.set(l,new(c("PagesMessagingMercuryChatTabState"))());var m=this.$PagesMessagingMercuryChatTabStore1.get(l);m||h(0);return m};k.prototype.__onDispatch=function(l){var m=l.actionType,n=l.payload,o=l.threadID,p=this.getStateByThread(o);p||h(0);switch(m){case c("PagesMessagingMercuryChatTabActionKeys").REQUEST_GREETING_CONFIG:this.$PagesMessagingMercuryChatTabStore2(o);break;case c("PagesMessagingMercuryChatTabActionKeys").NOTIFY_GREETING_CONFIG_RECEIVED:this.$PagesMessagingMercuryChatTabStore3(o,this.$PagesMessagingMercuryChatTabStore4(n,p));break}};k.prototype.$PagesMessagingMercuryChatTabStore2=function(l){var m=c("XMercuryChatTabPagesNullStateConfigController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(m).setMethod("POST").setData({page_id:c("MercuryIDs").getUserIDFromThreadID(l)}).setHandler(function(n){return c("PagesMessagingMercuryChatTabActions").notifyGreetingConfigReceived(l,n.payload)}).send()};k.prototype.$PagesMessagingMercuryChatTabStore3=function(l,m){this.$PagesMessagingMercuryChatTabStore1.set(l,m);this.__emitChange()};k.prototype.$PagesMessagingMercuryChatTabStore4=function(l,m){var n=m.set("pagesGreetingShouldShow",l.pagesGreetingShouldShow).set("pagesGreetingContent",l.pagesGreetingContent).set("pageResponsiveness",l.pageResponsiveness).set("coverPhotoData",l.coverPhotoData).set("connectionContext",l.connectionContext).set("pageOnlineMessage",l.pageOnlineMessage);if(m.icebreakers===null||m.icebreakers===undefined||Object.keys(m.icebreakers).length===0)n=n.set("icebreakers",l.icebreakers);return n};f.exports=new k()}),null);
__d("PagesMessageListGreeting.react",["cx","FluxContainer","PagesMessagingMercuryChatTabActions","PagesMessagingMercuryChatTabStore","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.getStores=function(){return[c("PagesMessagingMercuryChatTabStore")]};k.calculateState=function(l,m){if(m.messageCount>0)return{shouldShowGreeting:false};var n=c("PagesMessagingMercuryChatTabStore").getStateByThread(m.threadID);return{greetingContent:n.pagesGreetingContent,shouldShowGreeting:n.pagesGreetingShouldShow}};k.prototype.componentDidMount=function(){c("PagesMessagingMercuryChatTabActions").requestGreetingConfig(this.props.threadID)};k.prototype.render=function(){if(!this.state.shouldShowGreeting||!this.state.greetingContent||this.state.greetingContent.trim().length===0)return null;return c("React").createElement("div",{className:"_4fsh _3-8z"},this.state.greetingContent)};function k(){i.apply(this,arguments)}f.exports=c("FluxContainer").create(k,{withProps:true})}),null);
__d("MessageList.react",["cx","immutable","ImmutableObject","MercuryActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageGroup","MercuryMessageInfo","MercuryShareAttachmentRenderLocations","MessagingGenericAdminTextType","MessengerAdminGroupUtils","MessengerDomIDs.bs","MessengerLightweightActionUtils","PagesMessageListGreeting.react","React","ReactDOM","idx"],(function aa(ba,a,ca,da,b,ea,fa){"use strict";__p&&__p();var c,d,e=a("MessengerDomIDs.bs").ids,f=a("React").PropTypes,g=1e3*60*60,h=function h(p){var q,r,s,t=(q=p)!=null?(q=q.log_message_data)!=null?q.message_type:q:q;switch(t){case a("MessagingGenericAdminTextType").GROUP_POLL:return(r=p)!=null?(r=r.log_message_data)!=null?(r=r.untypedData)!=null?r.question_id:r:r:r;case a("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE:return(s=p)!=null?(s=s.log_message_data)!=null?(s=s.untypedData)!=null?s.game_id:s:s:s;default:return null}},i=function i(p){if(a("MessengerLightweightActionUtils").isLWAMessage(p))return"lwa";return null};c=babelHelpers.inherits(j,a("React").PureComponent);d=c&&c.prototype;function j(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=d.constructor).call.apply(p,[this].concat(s)),this.state={activeMessageID:null,messageGroups:a("MercuryMessageGroup").calculateMessageGroups(this.props.messages,this.props.location)},this.$MessageList4=function(u){this.setState(function(v){return{activeMessageID:v.activeMessageID===u?null:v.activeMessageID}})}.bind(this),this.$MessageList5=function(u){this.setState({activeMessageID:u})}.bind(this),q}j.prototype.UNSAFE_componentWillReceiveProps=function(p){if(p.messages!==this.props.messages)this.setState({messageGroups:a("MercuryMessageGroup").calculateMessageGroups(p.messages,p.location)})};j.prototype.render=function(){__p&&__p();var p=this.props,q=p.DateBreak,r=p.location,s=p.MessageGroup,t=p.CollapsedLogMessageGroup,u=[],v=[],w=void 0,x=this.props.thread&&this.props.thread.custom_color,y=x?{backgroundColor:x}:null,z=this.state.activeMessageID,A=this.state.messageGroups,B=A.length,C=this.props.readReceipts,D=C.last(),E=D?D.watermark:0,F=a("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),G=a("MessengerAdminGroupUtils").isJoinableThread(this.props.thread),H={};for(var I=this.props.messages.size-1;I>=0;I--){var J=this.props.messages.get(I),K=h(J)||i(J);if(K&&!H[K])H[K]=J.message_id}for(var L=0;L<B;L++){var M=L>0?A[L-1]:null,N=M&&M.length>0?M[M.length-1]:null,O=A[L],P=O[0],Q=O[O.length-1],R=false;if(!N||P.timestamp-N.timestamp>g){R=true;var S=a("React").createElement(q,{date:new Date(P.timestamp),key:"db:"+P.message_id,ref:"db:"+P.message_id});if(v.length===0)u.push(S)}if(a("MessengerLightweightActionUtils").isLWAMessage(P))if(H[i(P)]!==P.message_id){var T=this.$MessageList1(P,H);u.push(T);continue}if(P.action_type==a("MercuryActionType").LOG_MESSAGE){var U,V=(U=P)!=null?(U=U.log_message_data)!=null?U.message_type:U:U,ga=V===a("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE,ha=V===a("MessagingGenericAdminTextType").GROUP_POLL;if((r===a("MercuryShareAttachmentRenderLocations").CHAT||r===a("MercuryShareAttachmentRenderLocations").MESSENGER)&&(P.log_message_type===a("MercuryLogMessageType").VIDEO_CALL||P.log_message_type===a("MercuryLogMessageType").PHONE_CALL)){var ia=this.$MessageList2(P,F,A,B,L,C,E,Q,H);u.push(ia)}else{var W=this.$MessageList3(P,H);w=P.message_id;if(G&&!ga&&!ha)v.push(W);else{if(v.length!==0){if(v.length>1)u.push(a("React").createElement(t,{key:"mg:"+w,style:y},v));else u.push(a("React").createElement("div",{key:"mg:"+w},v));v=[]}u.push(W)}}continue}if(v.length!==0){if(v.length>1)u.push(a("React").createElement(t,{key:"mg:"+w,style:y},v));else u.push(a("React").createElement("div",{key:"mg:"+w},v));v=[]}O=a("immutable").List(O);var X=l(A,B,L,H),ja=!n(C,O,X),ka=m(E,Q),la=o(this.props.deliveryTimestamp,Q),ma=this.props.onlineUsers!==undefined&&this.props.onlineUsers.includes(a("MercuryIDs").getUserIDFromParticipantID(O.first().author)),Y=a("MercuryMessageInfo").getPersona(Q);u.push(a("React").createElement(s,{activeMessageID:k(z,O),author:O.first().author,deliveryTimestamp:la,hasDateBreak:R,isCanonical:this.props.isCanonical,isFromViewer:F===P.author,isPageMessage:this.props.isPageMessage,isOnline:ma,key:"mg:"+P.message_id,lastReadTimestamp:ka,maxBubbleWidth:this.props.maxBubbleWidth,messages:O,nextTimestamp:X,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$MessageList4,onMessageSelect:this.$MessageList5,onStickerClick:this.props.onStickerClick,onReplyToMessage:this.props.onReplyToMessage,pageID:this.props.isPageMessage?this.props.viewer:null,personaID:Y?Y.id:null,readReceipts:ja?C:a("immutable").OrderedMap(),ref:"mg:"+P.message_id,thread:this.props.thread,threadID:this.props.threadID}))}if(v.length!==0){if(v.length>1)u.push(a("React").createElement(t,{key:"mg:"+w,style:y},v));else u.push(a("React").createElement("div",{key:"mg:"+w},v));v=[]}var Z=this.props.threadID||this.props.thread&&this.props.thread.thread_id||this.props.thread&&this.props.thread.thread_fbid,$=null;if(r===a("MercuryShareAttachmentRenderLocations").MESSENGER&&Z&&this.props.isPageMessage)$=a("React").createElement(a("PagesMessageListGreeting.react"),{messageCount:v.length+B,threadID:Z});return a("React").createElement("div",{id:r===a("MercuryShareAttachmentRenderLocations").MESSENGER?e.CONVERSATION:null},$,u)};j.prototype.getMessageElement=function(p,q){__p&&__p();if(q){var r=this.refs["db:"+p];if(r)return a("ReactDOM").findDOMNode(r)}var s=this.state.messageGroups.find(function(v){return v.some(function(w){return w.message_id===p})});if(!s)return null;var t=s[0].message_id,u=this.refs["mg:"+t];if(!u)return null;if(q&&t===p)return a("ReactDOM").findDOMNode(u);return u.getMessageElement(p)};j.prototype.$MessageList2=function(p,q,r,s,t,u,v,w,x){var y=this.props.MessageGroup,z={attach_type:"share",share:{style_list:["rtc_call_log","fallback"],log_message_body:p.log_message_body,log_message_data:p.log_message_data,log_message_type:p.log_message_type,timestamp:p.timestamp}},A=a("ImmutableObject").setProperty(p,"attachments",[z]);A=a("ImmutableObject").setProperty(A,"body","");var B=a("immutable").List([A]),C=l(r,s,t,x),D=!n(u,B,C),E=m(v,w),F=o(this.props.deliveryTimestamp,w);return a("React").createElement(y,{author:B.first().author,deliveryTimestamp:F,isFromViewer:q===p.author,key:p.message_id,lastReadTimestamp:E,maxBubbleWidth:this.props.maxBubbleWidth,messages:B,nextTimestamp:C,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$MessageList4,onMessageSelect:this.$MessageList5,onStickerClick:this.props.onStickerClick,readReceipts:D?u:a("immutable").OrderedMap(),thread:this.props.thread,threadID:this.props.threadID})};j.prototype.$MessageList3=function(p,q){var r=this.props.LogMessage,s=q[h(p)];if(p.log_message_type!==a("MercuryLogMessageType").SERVER_ERROR)return a("React").createElement(r,{className:this.props.location===a("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:p.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:p,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:s===p.message_id});return null};j.prototype.$MessageList1=function(p,q){var r=q[i(p)],s=this.props.LogMessage;return a("React").createElement(s,{className:this.props.location===a("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:p.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:p,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:r===p.message_id})};j.propTypes={CollapsedLogMessageGroup:f.func.isRequired,DateBreak:f.func.isRequired,deliveryTimestamp:f.number.isRequired,isCanonical:f.bool,isPageMessage:f.bool,location:f.string.isRequired,LogMessage:f.func.isRequired,loadMoreMessages:f.func,MessageGroup:f.func.isRequired,messages:f.instanceOf(a("immutable").List).isRequired,onAttachmentLoad:f.func,onlineUsers:f.instanceOf(a("immutable").List),onStickerClick:f.func,onReplyToMessage:f.func,readReceipts:f.instanceOf(a("immutable").OrderedMap).isRequired,viewer:f.string.isRequired,thread:f.object,threadID:f.string};function k(p,q){return q.find(function(r){return r.message_id===p})?p:null}function l(p,q,r,s){if(r>=q-1)return Infinity;var t=p[r+1][0];if(a("MessengerLightweightActionUtils").isLWAMessage(t)&&s[i(t)]!==t.message_id||t.action_type==a("MercuryActionType").LOG_MESSAGE)return l(p,q,r+1,s);else return t.timestamp}function m(p,q){return q.timestamp>p?p:Infinity}function n(p,q,r){return q.isEmpty()||p.last()<q.first().timestamp||p.first()>=r}function o(p,q){return q.timestamp>p?p:Infinity}b.exports=j}),null);
__d("getEveryoneMentionIndex",[],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.findIndex(function(j){return j.type=="t"})}f.exports=h}),null);
__d("MercuryAudienceRestrictedTypeaheadDataSource",["CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("DataSource"));i=h&&h.prototype;function j(k){"use strict";__p&&__p();k=k||{};k.kanaNormalization=true;k.maxResults=c("MercuryTypeaheadConstants").COMPOSER_CHATTAB_MAX;k.minQueryLength=2;i.constructor.call(this,k);this.$MercuryAudienceRestrictedTypeaheadDataSource1=false;this.$MercuryAudienceRestrictedTypeaheadDataSource2=false;this.$MercuryAudienceRestrictedTypeaheadDataSource3={};this.$MercuryAudienceRestrictedTypeaheadDataSource4=true;this.queryCache={};this.localCache={};this.queryIDs={}}j.prototype.dirty=function(){"use strict";return this};j.prototype.buildData=function(k){"use strict";return i.buildData.call(this,k)};j.prototype.query=function(k,l,m,n){"use strict";var o=l||k.length===1;return i.query.call(this,k,o,m,n)};j.prototype.getQueryData=function(k,l){"use strict";return babelHelpers["extends"]({},i.getQueryData.call(this,k,l))};j.prototype.setEntry=function(k,l){"use strict";this.$MercuryAudienceRestrictedTypeaheadDataSource3[k]=l};j.prototype.getEntry=function(k){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource3[k]||null};j.prototype.getCachedShortProfileIDs=function(){"use strict";var k=c("ShortProfiles").getCachedProfileIDs(),l=k.filter(function(m){var n=c("ShortProfiles").getNow(m);return m==c("CurrentUser").getID()||n&&(n.type===c("MercuryParticipantTypes").FRIEND||n.type===c("MercuryParticipantTypes").FB4C)});return l};j.prototype.isBootstrapped=function(){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource1};j.prototype.isBootstrapping=function(){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource2};j.prototype.processEntries=function(k,l){"use strict";k=k&&k.map(function(m){if(m.index==null&&(m.render_type===c("MercuryParticipantTypes").FRIEND||m.render_type===c("MercuryParticipantTypes").FB4C))m.index=c("OrderedFriendsList").getActiveRank(m.uid);return m});return i.processEntries.call(this,k)};j.prototype.mergeUids=function(k,l,m,n){"use strict";var o=l.sort(function(p,q){var r=this.getEntry(p),s=this.getEntry(q);return r&&r.index&&s&&s.index?r.index-s.index:0}.bind(this));return i.mergeUids.call(this,k,o,m,n)};j.prototype.setQueryData=function(k,l){"use strict";return i.setQueryData.call(this,k)};j.prototype.respond=function(k,l,m){"use strict";return i.respond.call(this,k,l,m)};j.prototype.setShowThreads=function(k){"use strict";this.$MercuryAudienceRestrictedTypeaheadDataSource4=k};f.exports=j}),null);
__d("isEventSupported",["fbjs/lib/ExecutionEnvironment"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h;if(c("fbjs/lib/ExecutionEnvironment").canUseDOM)h=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==true;function i(j,k){__p&&__p();if(!c("fbjs/lib/ExecutionEnvironment").canUseDOM||k&&!("addEventListener"in document))return false;var l="on"+j,m=l in document;if(!m){var n=document.createElement("div");n.setAttribute(l,"return;");m=typeof n[l]==="function"}if(!m&&h&&j==="wheel")m=document.implementation.hasFeature("Events.wheel","3.0");return m}f.exports=i}),null);
__d("MessengerViewerContactMethodsWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1868889766468115"};j.getQueryID=function(){"use strict";return"177554543035925"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);